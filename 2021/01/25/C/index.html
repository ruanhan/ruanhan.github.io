<!DOCTYPE html>
<html>
<head hexo-theme='https://volantis.js.org/#1.0.0'>
  <meta charset="utf-8">
  <!-- SEO相关 -->
  
    
  
  <!-- 渲染优化 -->
  <meta name="renderer" content="webkit">
  <meta name="force-rendering" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="HandheldFriendly" content="True" >
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- 页面元数据 -->
  
    <title>C - Hexo</title>
  
    <meta name="keywords" content="C">
  
  
    <meta name="description" content="c基础">
  

  <!-- feed -->
  

  <!-- import meta -->
  

  <!-- link -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css">
  
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css">

  

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
  

  

  <!-- import link -->
  

  
  
    
<link rel="stylesheet" href="/css/style.css">

  

  <script>
    function setLoadingBarProgress(num) {
      document.getElementById('loading-bar').style.width=num+"%";
    }
  </script>

  
  
</head>

<body>
  
  <div id="loading-bar-wrapper">
  <div id="loading-bar"></div>
</div>
<header class="l_header shadow blur">
  <div class='container'>
  <div class='wrapper'>
    <div class='nav-sub'>
      <p class="title"></p>
      <ul class='switcher nav-list-h'>
        <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
          <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
        
      </ul>
    </div>
		<div class="nav-main">
      
        
        <a class="title flat-box" target="_self" href='/'>
          
          
          
          
            BELIEF <b><sup style='color:#3AA757'>1.0.0</sup></b>
          
        </a>
      

			<div class='menu navigation'>
				<ul class='nav-list-h'>
          
          
          
            
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
          
            
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
          
				</ul>
			</div>

      <div class="m_search">
        <form name="searchform" class="form u-search-form">
          <i class="icon fas fa-search fa-fw"></i>
          <input type="text" class="input u-search-input" placeholder="Search..." />
        </form>
      </div>

			<ul class='switcher nav-list-h'>
				
					<li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
				
				<li>
          <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
          <ul class="menu-phone list-v navigation white-box">
            
              
            
              <li>
                <a class="flat-box" href=/
                  
                  
                  
                    id="home"
                  >
                  <i class='fas fa-rss fa-fw'></i>博客
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/categories/
                  
                  
                  
                    id="categories"
                  >
                  <i class='fas fa-folder-open fa-fw'></i>分类
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/tags/
                  
                  
                  
                    id="tags"
                  >
                  <i class='fas fa-tags fa-fw'></i>标签
                </a>
                
              </li>
            
          
            
              
            
              <li>
                <a class="flat-box" href=/archives/
                  
                  
                  
                    id="archives"
                  >
                  <i class='fas fa-archive fa-fw'></i>归档
                </a>
                
              </li>
            
          
            
          </ul>
        </li>
			</ul>
		</div>
	</div>
  </div>
</header>

<script>setLoadingBarProgress(40);</script>



  <div class="l_body nocover">
    <div class='body-wrapper'>
      

<div class='l_main'>
  

  
    <article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost">
      


  <section class='meta'>
    
      
      
      <div class="meta" id="header-meta">
        
          
  <h1 class="title">
    <a href="/2021/01/25/C/">
      C
    </a>
  </h1>


        
        <div class='new-meta-box'>
          
            
          
            
              
<div class='new-meta-item author'>
  <a href="https://xaoxuu.com" target="_blank" rel="nofollow noopener">
    <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/avatar/avatar.png">
    <p>Mr. X</p>
  </a>
</div>

            
          
            
              
  
  <div class='new-meta-item category'>
    <a href='/categories/language/' rel="nofollow">
      <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
      <p>language</p>
    </a>
  </div>


            
          
            
              <div class="new-meta-item date">
  <a class='notlink'>
    <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
    <p>发布于：Jan 25, 2021</p>
  </a>
</div>

            
          
            
              

            
          
        </div>
        
          <hr>
        
      </div>
    
  </section>


      <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
          
          <h1 id="前置"><a href="#前置" class="headerlink" title="前置"></a>前置</h1><h2 id="1-程序"><a href="#1-程序" class="headerlink" title="1.程序"></a>1.程序</h2><blockquote>
<p>写程序前，先构想好程序的结构，而不是先从定义变量开始。</p>
</blockquote>
<ol>
<li>没有想好解决方案，不要急于动手写程序？</li>
<li>有了解决方案以后，可以按照“先粗后细，先抽象后具体”的办法，先有程序的轮廓，如有必要可以解决“建模工具”画一些图，而后再动手写程序；</li>
<li>写程序时，可以先写出程序轮廓，而后再补充变量定义等细节；</li>
</ol>
<p>程序并不纠结于是否更优。<br>而在于程序结构是不是清楚，是不是容易被人看懂</p>
<h3 id="1-1-写程序的过程"><a href="#1-1-写程序的过程" class="headerlink" title="1.1 写程序的过程"></a>1.1 写程序的过程</h3><blockquote>
<p>按照由大到小，由粗到细，由抽象到具体的方法分析、编写程序</p>
</blockquote>
<ul>
<li>程序的结构 （基本思想）<ul>
<li>程序由若干个“模块”组成</li>
<li>模块之内“高内聚”（高内聚， 就是这个模块只做这个事情，不干别的。功能单一）</li>
<li>模块之间“低耦合” （当一个模块被改动的时候，只会印象它自己，而不会影响别的）</li>
</ul>
</li>
</ul>
<h3 id="1-2-编程语言共性-（语法）"><a href="#1-2-编程语言共性-（语法）" class="headerlink" title="1.2 编程语言共性 （语法）"></a>1.2 编程语言共性 （语法）</h3><p>程序设计语言的构成,语言种类千差万别，但是，一般来说，基本成分不外四种：</p>
<ol>
<li>数据， 用以描述程序中所涉及的数据 （数据类型）</li>
<li>运算，用以描述程序中所包含的运算；（运算符）</li>
<li>控制，用以表达程序中的控制构造；（三种类型的控制语句是如何写的，顺序，分支，循环）</li>
<li>IO，用以表达程序中数据的传输； （如何输入和输出数据）</li>
</ol>
<h3 id="1-3-大纲"><a href="#1-3-大纲" class="headerlink" title="1.3 大纲"></a>1.3 大纲</h3><ol>
<li>基本概念</li>
<li>数据类型，运算符，表达式</li>
<li>IO</li>
<li>流程控制（顺序，分支，循转）</li>
<li>数组</li>
<li>指针</li>
<li>函数</li>
<li>构造类型</li>
<li>动态内存管理</li>
<li>调试工具，（gdb，make）</li>
<li>常用库函数</li>
</ol>
<h2 id="2-基本概念"><a href="#2-基本概念" class="headerlink" title="2. 基本概念"></a>2. 基本概念</h2><blockquote>
<p>把内存想象成一个长长的带子,带子上面有很多小方格，每个格子都是一个字节（存储单元）。每个小方格都有它对应的地址，每个字节（单元）有八位，1B（byte） = 8b（bit）每一个位存储一个二进制的数。</p>
</blockquote>
<h3 id="2-1-变量与常量"><a href="#2-1-变量与常量" class="headerlink" title="2.1 变量与常量"></a>2.1 变量与常量</h3><h4 id="2-1-1-常量"><a href="#2-1-1-常量" class="headerlink" title="2.1.1 常量"></a>2.1.1 常量</h4><blockquote>
<p>在程序执行过程中值不会发生变化的量，数组名是一个典型的常量，一旦数组定义了，gcc为当前的数组分配了一段空间了。然后数组的位置就定死了。数组名就是一个数组的起始位置。是一个常量，如果你在=左边写上一个常量，就表示企图更改一个常量的值；比如<code>1=f</code> ，显然不成立；</p>
</blockquote>
<p><strong>常量的分类</strong></p>
<ul>
<li><p>整型常量</p>
</li>
<li><p>实型常量</p>
<p>3.14,  5.26;</p>
</li>
<li><p>字符常量</p>
<p>由单引号印起来的单个字符或者转义字符，如’a’</p>
<p>转义字符： ‘\n’, ‘\r’, ‘\t’ ，’\015’(八进制数)， ‘\x7f’(十六进制数)</p>
</li>
<li><p>字符串常量</p>
<p>由双引号印起来的一个或多个字符组成的序列，如: “”(空串)</p>
<p>一个字符串在存储的时候，最末尾会有一个结束标记，通常称作尾0<code>\0</code>.所以<code>&quot;&quot;</code>是占空间的，空字符占一个字节的空间；</p>
<ul>
<li>合法的字符串 （””, “a”, “abXYZ”）</li>
<li>暂时不确定是否合法的字符 （”abc\n\021\018”) 因为<code>\018</code>不是八进制，因为出现了8，而我们知道<code>\0</code>是字符串数组的末尾。所以<code>\0</code>到底能否插入进字符串中间，这个需要后续字符数组专题揭秘；</li>
<li>字符串常量需要借助构造类型——数组来保存</li>
<li><code>&#39;a&#39;和&quot;a&quot;的区别</code>：前者是字符常量，后者是字符串常量。</li>
</ul>
</li>
<li><p>标识常量</p>
<ul>
<li><p>#define， 程序中一改全改 <code>#define PI 3.14</code>，在程序预处理之后，宏名被宏体完整的替换；<code>define ADD 2+3 ADD*ADD</code> = <code>2+3*2+3而不是(2+3)*(2+3)</code>。 #define，处理在程序的预处理阶段，占编译时间。不占运行时间。一改全改；缺点： 不检查语法，只是单纯的宏体与宏名之间的替换；</p>
<ol>
<li>带参数的#define</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span>  MAX(a, b)  a&gt;b?a:b</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i, j;</span><br><span class="line">  i = <span class="number">5</span>;</span><br><span class="line">  j=<span class="number">3</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"/d\n"</span>, MAX(i, j));</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// gcc -E define.c </span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i, j;</span><br><span class="line">  i = <span class="number">5</span>;</span><br><span class="line">  j=<span class="number">3</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"/d\n"</span>, (i&gt;j?i:j));</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>一个特殊问题的解决方式</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line"><span class="keyword">return</span> a&gt;b?a:b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">int</span> j = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"max = %d\n"</span>, MAX(i++, j++));</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"i=%d\tj=%d\n"</span>, i, j);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">((i++) &gt; (j++) ? (i++) : (j++))</span><br><span class="line"></span><br><span class="line"><span class="comment">// max = 6</span></span><br><span class="line"><span class="comment">// i=7     j=4</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
</li>
</ul>
<ul>
<li><p>首先，max和MAX的区别，MAX只占用预编译时间，等运行的时候，实际上已经将所有宏体替换到程序中去了。不会再需要额外的时间了。而max则不同，在函数的调用位置，对当前的一个执行现场做一个压栈保存。然后去到指定的函数去执行。（跳往另外一个入口地址）然后再回来，弹栈恢复当前现场的过程。这个过程 占用了运行的时间；</p>
</li>
<li><p>什么时候用宏，什么时候用函数？在需要极致性能的场景用宏，前提是宏能满足；比如内核。在应用层面，系统层面，多用函数。因为应用层要求更高的是稳定性，而非实时性。</p>
</li>
<li><p>解决方案，需要找一个变量来接受；而不是让其继续做加运算；</p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX(a, b) (&#123;typeof(a) A = a, B = b;((A) &gt; (B) ? (A) : (B)); &#125;)</span></span><br><span class="line"><span class="comment">// typeof(a) 用a的类型定义A，就很灵性了。有点泛型的意思了；</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">5</span>;</span><br><span class="line">  <span class="keyword">int</span> j = <span class="number">3</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"max = %d\n"</span>, MAX(i++, j++));</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"i=%d\tj=%d\n"</span>, i, j);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// max = 5</span></span><br><span class="line"><span class="comment">// i=6     j=4</span></span><br></pre></td></tr></table></figure>

<h4 id="2-1-2-变量"><a href="#2-1-2-变量" class="headerlink" title="2.1.2 变量"></a>2.1.2 变量</h4><blockquote>
<p>用来保存一些特定内容，并且在程序执行过程中值随时会发生变化的量；</p>
</blockquote>
<p>当计算机执行到 <code>int max=0</code> 这句程序时，计算机会在内存里面找到一片存储空间（几个连续的存储单元），然后给该片存储空间取个名字叫 <code>Max</code>， 再把 <code>0</code> 这个初始值放在这个存储空间中来。<code>并记下这个名字（Max）和这片连续的存储空间的起始的地址之间的对应关系</code></p>
<p>定义： [存储类型]  数据类型  标识符 =  值 </p>
<p><code>TYPE NAME = VALUE;</code></p>
<p>存储类型 可选</p>
<h5 id="2-1-2-1-标识符"><a href="#2-1-2-1-标识符" class="headerlink" title="2.1.2.1 标识符"></a>2.1.2.1 标识符</h5><p>当定义一个某种类型的标识符的时候，编译器会为当前的值分配一块内存空间；如何称呼这块空间，就是<code>房间号</code>。房间号就是标识符。编译器会给标识符（房间号）和内存地址标识做关联。当搜索变量名的时候，编译器知道要去到哪块内存地址去搜索；简单说，标识符就是这块空间的临时别名；</p>
<h4 id="2-1-3-存储类型"><a href="#2-1-3-存储类型" class="headerlink" title="2.1.3 存储类型"></a>2.1.3 存储类型</h4><blockquote>
<p>auto, static register extern(说明型)</p>
</blockquote>
<h5 id="2-1-3-1-auto"><a href="#2-1-3-1-auto" class="headerlink" title="2.1.3.1 auto"></a>2.1.3.1 auto</h5><blockquote>
<p>默认，自动分配空间，自动回收空间</p>
</blockquote>
<p>auto类型分配在栈上，堆主要是来进行动态内存分配的空间；堆栈不挨着</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">auto</span> <span class="keyword">int</span> i; <span class="comment">// 原则上不会 对 i所在这块空间进行初始化</span></span><br><span class="line">  <span class="keyword">int</span> j;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>, i); <span class="comment">// 随机的结果，当然有的编译器会置为0</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"j= %d\n"</span>, j); <span class="comment">// 0  编译器会初始化为0</span></span><br><span class="line"></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> x =<span class="number">0</span>;</span><br><span class="line">  x = x+<span class="number">1</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%p-&gt;%d\n"</span>, &amp;x, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  func();</span><br><span class="line">  func();</span><br><span class="line">  func();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffee6b3c928-&gt;1</span></span><br><span class="line"><span class="comment">// 0x7ffee6b3c928-&gt;1</span></span><br><span class="line"><span class="comment">// 0x7ffee6b3c928-&gt;1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">说明： 这三个地址未必一致，但一致的原因是 auto类型的变量都存放在栈上，栈上的空间按正常理论来讲，它实际上是连续分配的。而当前x在  func函数被调用的时候，它才会被产生。然后在当前函数执行结束的时候，这块空间被释放掉了。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h5 id="2-1-3-2-register"><a href="#2-1-3-2-register" class="headerlink" title="2.1.3.2 register"></a>2.1.3.2 register</h5><blockquote>
<p>建议型关键字；</p>
</blockquote>
<p>寄存器类型，资源少，速度快，寄存器存放在CPU当中，寄存器的数据比较吃紧，</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">register</span> <span class="keyword">int</span> i =<span class="number">1</span>; <span class="comment">// 除非i在程序中，超高频率被使用，才建议编译器将i分配到寄存器中；至于有没有被放到寄存器中，由gcc来决定；</span></span><br></pre></td></tr></table></figure>

<p><strong>register的苛刻条件；</strong></p>
<ol>
<li>只能定义局部变量，不能定义全局变量；</li>
<li>大小有限制，只能定义 32 位大小的数据类型，如double 就不可以</li>
<li>寄存器中没有地址，所以一个寄存器类型变量无法打印出地址查看或者使用；</li>
</ol>
<h5 id="2-1-3-3-static"><a href="#2-1-3-3-static" class="headerlink" title="2.1.3.3 static"></a>2.1.3.3 static</h5><blockquote>
<p>静态型，自动初始化为0值或空值，并值其变量的值有继承性（继承性指的的static在内存中只此一份，所以下次使用的时候还是基于上一次的值，而不会被初始化）。另外，常用于修饰变量或函数</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="keyword">int</span> x =<span class="number">0</span>;</span><br><span class="line">  x = x+<span class="number">1</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%p-&gt;%d\n"</span>, &amp;x, x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  func();</span><br><span class="line">  func();</span><br><span class="line">  func();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x10c4b1018-&gt;1</span></span><br><span class="line"><span class="comment">// 0x10c4b1018-&gt;2</span></span><br><span class="line"><span class="comment">// 0x10c4b1018-&gt;3</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">说明： static类型的变量，只用一块空间。</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p><strong>static 修饰函数：</strong></p>
<p>防止该函数对外扩展，（简单说就是该函数只能在当前文件下使用，在别的文件下没法使用；）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"hello func"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">call_func</span><span class="params">()</span>  <span class="comment">// 外界可以通过 call_func 这个桥梁函数来引用 func</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  func()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="2-1-3-4-extern"><a href="#2-1-3-4-extern" class="headerlink" title="2.1.3.4 extern"></a>2.1.3.4 extern</h5><blockquote>
<p>说明型， 意味着不能改变被说明的变量的值或类型；</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// proj.h</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main.c</span></span><br><span class="line"><span class="keyword">int</span> i =<span class="number">10</span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, i);</span><br><span class="line">  func();</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// proj.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"proj.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> i;  <span class="comment">// 我的i不是自己定义的，是引用其他文件里面的i，编译器自己去找</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, i);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-1-4-变量的生命周期和作用范围（即作用域）"><a href="#2-1-4-变量的生命周期和作用范围（即作用域）" class="headerlink" title="2.1.4 变量的生命周期和作用范围（即作用域）"></a>2.1.4 变量的生命周期和作用范围（即作用域）</h4><ol>
<li>全局变量和局部变量</li>
<li>局部变量和局部变量</li>
<li>参考图片</li>
</ol>
<h2 id="3-C程序"><a href="#3-C程序" class="headerlink" title="3. C程序"></a>3. C程序</h2><h3 id="4-1-程序规范"><a href="#4-1-程序规范" class="headerlink" title="4.1 程序规范"></a>4.1 程序规范</h3><blockquote>
<p>以helleworld为例对写程序的思路提出如下要求:</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//void main(void);</span></span><br><span class="line"><span class="comment">//void main(int argc, char **argv); // char * argv[]</span></span><br><span class="line"><span class="comment">//int main(int argc, char **argv);</span></span><br><span class="line"><span class="comment">//int main(void);</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"hello c!\n"</span>);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>头文件正确包含的重要性；</li>
<li>知道程序中的所有警告<code>gcc file.c -Wall</code></li>
<li>如何调试段错误，先把程序中的所有警告调好；</li>
<li>以函数为单位来进行程序编写；</li>
<li>声明部分 和  实现部分（变量先定义，后使用）</li>
<li>return 0 （exit(0) 在单进程单线程的程序中 和 return 0意义一样的，exit(0)是给它父进程看的，当前main函数的父进程是shell）</li>
<li>多用空格空行</li>
<li>添加注释</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $? <span class="comment"># 上一条语句执行的状态</span></span><br></pre></td></tr></table></figure>

<h3 id="4-2-注释"><a href="#4-2-注释" class="headerlink" title="4.2 注释"></a>4.2 注释</h3><blockquote>
<p>#if #endif 注释</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">if</span>(0)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="4-3-编译"><a href="#4-3-编译" class="headerlink" title="4.3 编译"></a>4.3 编译</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#gcc hello.c</span></span><br><span class="line">.c -&gt; .out</span><br></pre></td></tr></table></figure>



<p><strong>gcc过程(c源文件到可执行文件需要经过的顺序)</strong></p>
<p>c源文件 - 预处理 - 编译 - 汇编  - 链接 - 可执行文件</p>
<ul>
<li>预处理 <code>gcc -E hello.c &gt; hello.i</code> (预处理hello.c，保存至 hello.i 文件)<pre><code>以#开头的语句部分都是在预处理阶段解决掉的；`include`或者 `if define`</code></pre></li>
<li>编译阶段<code>gcc -S hello.i</code> (编译hello.i)<pre><code>默认会生成一个 .s文件，编译成汇编文件；</code></pre></li>
<li>汇编阶段<code>gcc -c hello.s</code><pre><code>生成一个 .o文件；</code></pre></li>
<li>链接阶段<code>gcc hello.o -o hello</code> (链接.o文件 生成可执行文件 hello)<pre><code>生成可执行文件hello;</code></pre></li>
</ul>
<h4 id="4-3-1-C编译"><a href="#4-3-1-C编译" class="headerlink" title="4.3.1 C编译"></a>4.3.1 C编译</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gcc -o <span class="built_in">test</span> test.c  <span class="comment"># 把test.c 编译成一个可执行文件 test</span></span><br><span class="line">gcc hello.c -Wall   <span class="comment"># 显示编译警告，原则上编码过程当中把程序调到没有警告为止；</span></span><br><span class="line">./<span class="built_in">test</span>              <span class="comment"># 执行 test</span></span><br></pre></td></tr></table></figure>

<h4 id="4-3-2-多个-c文件"><a href="#4-3-2-多个-c文件" class="headerlink" title="4.3.2 多个.c文件"></a>4.3.2 多个.c文件</h4><ul>
<li>main() 里的代码太长了 适合分成几个函数</li>
<li>一个源文件太长适合分成几个文件</li>
<li>两个独立的源文件不能编译形成可执行的程序</li>
</ul>
<h4 id="4-3-3-头文件"><a href="#4-3-3-头文件" class="headerlink" title="4.3.3 头文件"></a>4.3.3 头文件</h4><blockquote>
<p>把函数原型放在一个头文件（以.h结尾）中，在需要调用这个函数的源代码文件(.c文件)中  #include 这个头文件，就能让编译器在编译的时候知道函数的原型</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># main.c  max.c  max.h</span></span><br><span class="line">gcc  main.c  max.c</span><br></pre></td></tr></table></figure>

<h2 id="5-数据类型"><a href="#5-数据类型" class="headerlink" title="5. 数据类型"></a>5. 数据类型</h2><ul>
<li>不同数据类型所占字节数</li>
<li>存储区别</li>
<li>不同类型的数据间转换</li>
<li>特殊性：</li>
</ul>
<h3 id="5-1-基本类型"><a href="#5-1-基本类型" class="headerlink" title="5.1 基本类型"></a>5.1 基本类型</h3><ul>
<li>数值类型 <ul>
<li>整型<ul>
<li>短整型 short   （2个字节，16位）</li>
<li>整型 int      （4个字节，32位）</li>
<li>长整型 long    （4个字节，32位）</li>
</ul>
</li>
<li>浮点型<ul>
<li>单精度型 float   （4个字节，32位）</li>
<li>双精度型 double    （8个字节，64位）</li>
</ul>
</li>
</ul>
</li>
<li>字符类型 char           （1个字节，8位）</li>
</ul>
<h4 id="1-1-1-整形存储"><a href="#1-1-1-整形存储" class="headerlink" title="1.1.1 整形存储"></a>1.1.1 整形存储</h4><p><strong>整型的存储都是以补码的形势来存储的</strong></p>
<p>补码：正数的补码是它二进制本身，负数的补码是它绝对值的那个数的二进制形式取反再加1的结果；</p>
<p>254 -&gt; unsigned int(无符号 int) -&gt; 32位</p>
<p>-254 -&gt; 254-&gt; 1111 1110 取反 +1  </p>
<ul>
<li>有无符号的区别，最高位到底代表是符号还是正常有效值；有符号的话，为0表示正数，为1表示负数；</li>
</ul>
<p>(254)10 =&gt; (11111110)2</p>
<p>方法： 除2取余倒序排列；（转2进制）11111110</p>
<pre><code>除8取余倒序排列；（转8进制）376

除16取余倒序排列；（转16进制） FE</code></pre><p><strong>进制表示</strong></p>
<ul>
<li>254                 十进制</li>
<li>B11111110    二进制</li>
<li>0376               八进制</li>
<li>0xFE               十六进制</li>
</ul>
<h4 id="1-1-2-浮点型存储"><a href="#1-1-2-浮点型存储" class="headerlink" title="1.1.2  浮点型存储"></a>1.1.2  浮点型存储</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3.14</span> * <span class="number">10</span>^<span class="number">0</span></span><br><span class="line"><span class="number">0.314</span> * <span class="number">10</span>^<span class="number">1</span></span><br><span class="line"><span class="number">0.0314</span> * <span class="number">10</span>^<span class="number">2</span></span><br><span class="line"><span class="number">314</span> * <span class="number">10</span>^<span class="number">-2</span></span><br></pre></td></tr></table></figure>

<p><strong>浮点数是以0.314 * 10^1的方式来存储3.14的</strong></p>
<p><code>整数部分为0，只是在意精度部分是多少。然后在意指数部分是多少。</code></p>
<ul>
<li>浮点数在32 个bit上是如何存放的<br>0～22位（共23个bit）用来记录精度部分。 22位～30位（共8个bit） 用来存储的是指数部分。最高位（第31位） 表示的是符号位置，表示是正数还是负数；</li>
</ul>
<p><strong>举例</strong></p>
<p>0.000789 -&gt; 0.789 -&gt; 10^3</p>
<p><code>精度部分存储 789的二进制形式，8个位存储3</code></p>
<ul>
<li>float 32位</li>
<li>double 64位 ，比float多出来的32位完全放在精度的控制上</li>
</ul>
<h4 id="1-1-3-char存储"><a href="#1-1-3-char存储" class="headerlink" title="1.1.3 char存储"></a>1.1.3 char存储</h4><ul>
<li>char 8位。                    -128～127</li>
<li>unsigned char 8位。   0～255</li>
</ul>
<h4 id="1-1-4-不同类型的数据间转换"><a href="#1-1-4-不同类型的数据间转换" class="headerlink" title="1.1.4 不同类型的数据间转换"></a>1.1.4 不同类型的数据间转换</h4><h5 id="1-1-4-1-精度丢失"><a href="#1-1-4-1-精度丢失" class="headerlink" title="1.1.4.1 精度丢失"></a>1.1.4.1 精度丢失</h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> f = <span class="number">3.9</span>;</span><br><span class="line"><span class="keyword">int</span> i = f; <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>



<h5 id="1-1-4-2-隐式转换"><a href="#1-1-4-2-隐式转换" class="headerlink" title="1.1.4.2 隐式转换"></a>1.1.4.2 隐式转换</h5><p><strong>编译器默认做的</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">char</span> ch;</span><br><span class="line"><span class="keyword">float</span> f;</span><br><span class="line"><span class="keyword">double</span> d;</span><br><span class="line"></span><br><span class="line">ch + i   --&gt; i  <span class="comment">// 默认往精度高，或者所占字节长比较高的那一种数据类型去靠拢的</span></span><br><span class="line">f -d     --&gt; d  <span class="comment">// 精度高的 double</span></span><br><span class="line">(ch + i) - (<span class="keyword">float</span> - <span class="keyword">double</span>) --&gt; <span class="keyword">double</span></span><br></pre></td></tr></table></figure>

<h5 id="1-1-4-3-显式转换"><a href="#1-1-4-3-显式转换" class="headerlink" title="1.1.4.3 显式转换"></a>1.1.4.3 显式转换</h5><p><strong>强制类型转换</strong></p>
<h5 id="1-1-4-4-特殊性："><a href="#1-1-4-4-特殊性：" class="headerlink" title="1.1.4.4 特殊性："></a>1.1.4.4 特殊性：</h5><ol>
<li>布尔型bool</li>
<li>float类型； <code>1.0/3*3 ！= 1</code></li>
<li>char型是否有符号，不知道，一个未定义的行为</li>
<li>不同形式的0值；</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>;</span><br><span class="line"><span class="string">'0'</span>;</span><br><span class="line"><span class="string">"0"</span>;</span><br><span class="line"><span class="string">'\0'</span>;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>数据类型与后续代码中所使用的输入输出要相匹配（防止自相矛盾）</li>
</ol>
<h3 id="1-2-构造类型"><a href="#1-2-构造类型" class="headerlink" title="1.2 构造类型"></a>1.2 构造类型</h3><ul>
<li>数组</li>
<li>结构体 struct</li>
<li>共用体  union</li>
<li>枚举类型 enum</li>
</ul>
<h4 id="1-2-1-enum"><a href="#1-2-1-enum" class="headerlink" title="1.2.1  enum"></a>1.2.1  enum</h4><p>*<em>语法: *</em></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum 标识符</span><br><span class="line">&#123;</span><br><span class="line">  成员1,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> day</span><br><span class="line">&#123;</span><br><span class="line">  MON,  <span class="comment">//默认从0 开始往下排</span></span><br><span class="line">  TUS,</span><br><span class="line">  THR,</span><br><span class="line">  WES,</span><br><span class="line">  FRI = <span class="number">1</span>,  <span class="comment">// 如果给FRI赋值为1的话，那么接下来会从1继续排</span></span><br><span class="line">  SAT,</span><br><span class="line">  SUN</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> main () &#123;</span><br><span class="line">  <span class="keyword">enum</span> day a = FRI;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a); <span class="comment">// 5</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>*<em>把enum当宏使用: *</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> &#123;</span><br><span class="line">    STATE_RUNNING = <span class="number">1</span>,</span><br><span class="line">    STATE_CANCELED,</span><br><span class="line">    STATE_OVER</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">time_t</span> &#123;</span></span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">job_st</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">int</span> state;</span><br><span class="line">    <span class="keyword">char</span> start;</span><br><span class="line">    <span class="keyword">char</span> <span class="built_in">end</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">job_st</span> <span class="title">job1</span>;</span></span><br><span class="line">   <span class="comment">// job1.state = STATE_CANCELED;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span> (job1.state) &#123;</span><br><span class="line">        <span class="keyword">case</span> STATE_CANCELED:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> STATE_OVER:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> STATE_RUNNING:</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">default</span>:</span><br><span class="line">            <span class="built_in">abort</span>();  <span class="comment">// 信号，操作系统后续会讲</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>** 这种场景可以用 enum代替宏的使用: **</p>
<p>因为宏经过预编译之后被替换掉了，宏的部分会被替换。影响调试。<br>当然enum不是万能，并不能替代宏；宏还可以传递参数</p>
<h4 id="1-2-2-结构体类型"><a href="#1-2-2-结构体类型" class="headerlink" title="1.2.2 结构体类型"></a>1.2.2 结构体类型</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> &#123;</span>  <span class="comment">// student 不是变量名而是类型</span></span><br><span class="line">  <span class="keyword">int</span> id;</span><br><span class="line">  <span class="keyword">char</span> name[<span class="number">20</span>]</span><br><span class="line">  .....</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>** 定义结构体变量的方式: **</p>
<p><code>student tudent1,student2;</code><br>(结构体类型名) (结构体变量名)</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> &#123;</span></span><br><span class="line">  <span class="keyword">int</span> id;</span><br><span class="line">  <span class="keyword">char</span> name[<span class="number">20</span>]</span><br><span class="line">  .....</span><br><span class="line">&#125; lige_1, lige_2;</span><br></pre></td></tr></table></figure>

<p>** 结构体赋值: **</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">mike</span> = &#123;</span><span class="number">123</span>, &#123;<span class="string">'m'</span>, <span class="string">'i'</span>, <span class="string">'k'</span>, <span class="string">'e'</span>, <span class="string">'\0'</span>&#125;&#125;;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">mike2</span> = <span class="title">mike</span>;</span>  <span class="comment">// 结构体赋值相当于copy一份给对方</span></span><br><span class="line">    mike.id_num = <span class="number">20130000</span> + mike.id_num;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; mike2.name[i]!=<span class="string">'\0'</span>; i++) &#123;</span><br><span class="line">        mike2.name[i] = <span class="built_in">toupper</span>(mike2.name[i]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, mike2.id_num);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, mike2.name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>** 结构体内存 ** </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">simp_st</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">float</span> f;</span><br><span class="line">    <span class="keyword">char</span> ch1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 看上去是10个字节，结果打印出来的是16个字节；</span></span><br><span class="line"><span class="comment">// 地址对齐， 结构体对齐的概念；</span></span><br></pre></td></tr></table></figure>

<ul>
<li>一个公式</li>
</ul>
<p>address（当前准备存储的变量的地址）%（你当前要存放变量的sizeOf）<br>如果能整除的话，那么这个变量就存放在这里，如果这个表达式不成立，那么address就得 + 1；</p>
<p>举例子说明,首先下面是一段内存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">----------</span><br><span class="line">0</span><br><span class="line">----------</span><br><span class="line">1</span><br><span class="line">----------</span><br><span class="line">2</span><br><span class="line">----------</span><br><span class="line">3</span><br><span class="line">----------</span><br><span class="line">4</span><br><span class="line">----------</span><br><span class="line">5</span><br><span class="line">----------</span><br><span class="line">6</span><br><span class="line">----------</span><br><span class="line">7</span><br><span class="line">----------</span><br><span class="line">8</span><br><span class="line">----------</span><br><span class="line">9</span><br><span class="line">----------</span><br><span class="line">10</span><br><span class="line">----------</span><br><span class="line">11</span><br><span class="line">----------</span><br><span class="line">12</span><br><span class="line">----------</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 目标结构体</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">simp_st</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> i;</span><br><span class="line">    <span class="keyword">char</span> ch;</span><br><span class="line">    <span class="keyword">float</span> f;</span><br><span class="line">    <span class="keyword">char</span> ch1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>*<em>解释 *</em></p>
<p>首先内存第一个地址的值是0，结构体的第一个属性是int，我们知道int占4个字节。0/4 能整除，因此第一个int占据从0-3 这个几个内存中，然后 char占1个字节，4/1能整除，因此第二个char占据了4这个内存中。接着结构体第三个属性为float，占据4个字节。内存地址5/4没法整除，当前内存++，分别到6，7，都无法整除4.到了8，8/4能整除，所以，从8打11这一段内存就存放着float这个属性，接下来又是char12/1能整除，所以char属性占据了char12这个内存地址； </p>
<p><code>值得注意的是，不同的操作系统内存对齐的方式是不同的；因此在socket编程中，我们传过去的结构体数据在末端一定不能做对齐；因为不知道不同平台到底是什么字节对齐的</code></p>
<p>** 结构体对齐 **</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">point</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="keyword">int</span> y;</span><br><span class="line">&#125;__attribute__((packed));</span><br></pre></td></tr></table></figure>
<p>这个操作在网络编程当中很常用；</p>
<p>总结</p>
<p>如果没有内存对齐，就是指定<strong>attribute</strong>((packed))的话，那么结构体内存的大小就是各个属性的sizeof累加的结果。如果没加就需要考虑内存对齐的问题，不同的机器内存对齐的方式是不同的。因为在跨机器编程比如socket编程当中，是需要指定<strong>attribute</strong>((packed))来确保数据的完整性和 安全性；</p>
<h4 id="1-2-2-1-结构体作为函数参数传递给函数（值传递，地址传递）"><a href="#1-2-2-1-结构体作为函数参数传递给函数（值传递，地址传递）" class="headerlink" title="1.2.2.1 结构体作为函数参数传递给函数（值传递，地址传递）"></a>1.2.2.1 结构体作为函数参数传递给函数（值传递，地址传递）</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">renew</span> <span class="params">(struct student mike)</span> </span>&#123;</span><br><span class="line">    mike.id_num = <span class="number">20130000</span> + mike.id_num;</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; mike.name[i]!=<span class="string">'\0'</span>; i++) &#123;</span><br><span class="line">           mike.name[i] = <span class="built_in">toupper</span>(mike.name[i]);</span><br><span class="line">       &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, mike.id_num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, mike.name);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">mike</span> = &#123;</span><span class="number">123</span>, &#123;<span class="string">'m'</span>, <span class="string">'i'</span>, <span class="string">'k'</span>, <span class="string">'e'</span>, <span class="string">'\0'</span>&#125;&#125;;</span><br><span class="line">    renew(mike);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, mike.id_num);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, mike.name);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#<span class="number">20130123</span></span><br><span class="line">#MIKE</span><br><span class="line">#<span class="number">123</span></span><br><span class="line"><span class="meta">#mike</span></span><br></pre></td></tr></table></figure>

<ul>
<li>结论</li>
</ul>
<p>结构体的传入是 值拷贝，函数内部执行的是副本</p>
<h4 id="1-2-2-2-当把结构体当成形参传递的时候，意味着什么"><a href="#1-2-2-2-当把结构体当成形参传递的时候，意味着什么" class="headerlink" title="1.2.2.2 当把结构体当成形参传递的时候，意味着什么"></a>1.2.2.2 当把结构体当成形参传递的时候，意味着什么</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span> <span class="params">(struct simp_st b)</span></span></span><br><span class="line"><span class="function"></span>&#123; <span class="comment">// 内存总是要分配一个完整的 结构体 体积所占的空间用来接受这个形参</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(b)); <span class="comment">// 12</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">simp_st</span> <span class="title">a</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">simp_st</span> *<span class="title">p</span> = &amp;<span class="title">a</span>;</span></span><br><span class="line">    func(a);</span><br><span class="line">    <span class="comment">// func(a.i, a.ch, a.f)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>小结： 所以我们一般不会这么去用。会有非常严重的性能浪费；一般我们会传递结构体指针；</li>
</ul>
<h4 id="1-2-2-3-结构体作为函数返回值时"><a href="#1-2-2-3-结构体作为函数返回值时" class="headerlink" title="1.2.2.3 结构体作为函数返回值时"></a>1.2.2.3 结构体作为函数返回值时</h4><p> 总结： 结构体作为函数返回值时，相当于copy一份给调用者</p>
<h4 id="1-2-2-4-指向结构体变量的指针"><a href="#1-2-2-4-指向结构体变量的指针" class="headerlink" title="1.2.2.4  指向结构体变量的指针"></a>1.2.2.4  指向结构体变量的指针</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">mike</span> = &#123;</span><span class="number">123</span>, &#123;<span class="string">'m'</span>, <span class="string">'i'</span>, <span class="string">'k'</span>, <span class="string">'e'</span>, <span class="string">'\0'</span>&#125;&#125;;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> *<span class="title">p</span> = &amp;<span class="title">mike</span>;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (*p).id_num);  <span class="comment">// 123</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p-&gt;id_num);   <span class="comment">// 123   另外一种写法  -&gt; 指向运算符</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, p-&gt;name);     <span class="comment">// mike  另外一种写法</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, (*p).name);  <span class="comment">// mike</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="1-2-2-5-指向结构体变量的指针作为参数传入函数"><a href="#1-2-2-5-指向结构体变量的指针作为参数传入函数" class="headerlink" title="1.2.2.5 指向结构体变量的指针作为参数传入函数"></a>1.2.2.5 指向结构体变量的指针作为参数传入函数</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">renew</span> <span class="params">(struct student mike)</span> </span>&#123;</span><br><span class="line">   mike.id_num = <span class="number">20130000</span> + mike.id_num;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; mike.name[i]!=<span class="string">'\0'</span>; i++) &#123;</span><br><span class="line">          mike.name[i] = <span class="built_in">toupper</span>(mike.name[i]);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">mike</span> = &#123;</span><span class="number">123</span>, &#123;<span class="string">'m'</span>, <span class="string">'i'</span>, <span class="string">'k'</span>, <span class="string">'e'</span>, <span class="string">'\0'</span>&#125;&#125;;</span><br><span class="line">   renew(&amp;mike);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, mike.id_num); <span class="comment">// 20130123    值被篡改</span></span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, mike.name);  <span class="comment">// MIKE         值被篡改</span></span><br><span class="line">   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-6-结构体数组"><a href="#1-2-2-6-结构体数组" class="headerlink" title="1.2.2.6 结构体数组"></a>1.2.2.6 结构体数组</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> <span class="title">myclass</span>[3] =</span></span><br><span class="line"><span class="class">    &#123;</span></span><br><span class="line">        <span class="number">123</span>, &#123;<span class="string">'m'</span>,<span class="string">'k'</span>,<span class="string">'k'</span>,<span class="string">'e'</span>&#125;,</span><br><span class="line">        <span class="number">133</span>, &#123;<span class="string">'j'</span>,<span class="string">'o'</span>,<span class="string">'y'</span>&#125;,</span><br><span class="line">        <span class="number">143</span>, &#123;<span class="string">'t'</span>,<span class="string">'o'</span>,<span class="string">'m'</span>&#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">student</span> * <span class="title">p</span> = &amp;<span class="title">myclass</span>;</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p-&gt;id_num);   <span class="comment">// 123 </span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, p-&gt;name);     <span class="comment">// mkke</span></span><br><span class="line">    p++; <span class="comment">// 跳一个结构体 体积的内存</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p-&gt;id_num);   <span class="comment">// 133</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, p-&gt;name);     <span class="comment">// joy</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="1-2-2-7-链表"><a href="#1-2-2-7-链表" class="headerlink" title="1.2.2.7 链表"></a>1.2.2.7 链表</h4><ul>
<li>动态地 申请内存空间</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *pint = <span class="keyword">new</span> <span class="keyword">int</span>(<span class="number">1024</span>);   <span class="comment">// 开辟一片内存存储空间并返回起始地址； </span></span><br><span class="line"><span class="keyword">delete</span> pint;  <span class="comment">// 释放掉指针所指向的内存空间；</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *pia = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">4</span>]; <span class="comment">// 申请一个 4个整型小数组的空间；并返回起始地址；</span></span><br><span class="line"><span class="keyword">delete</span> [] pia; <span class="comment">// 开个方括号，指的是释放掉的是一个数组区域</span></span><br></pre></td></tr></table></figure>


<ul>
<li>动态地 建立链表节点</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">student</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> id;</span><br><span class="line">    student *next;</span><br><span class="line">&#125;</span><br><span class="line">student *head;</span><br><span class="line">head = <span class="keyword">new</span> student;</span><br></pre></td></tr></table></figure>


<h4 id="1-2-3-共用体"><a href="#1-2-3-共用体" class="headerlink" title="1.2.3 共用体"></a>1.2.3 共用体</h4><blockquote>
<p>共用体和结构体语法很像，但截然不同的是，结构体各个成员会占用不同的内存，结构体整体内存 &gt;= sizeof（所有属性）， 因为有内存缝隙的 概念，所以有时候会大一些；而结构体的内存体积取决于最大属性的体积；共用体所有成员占据同一段内存；共用体使用了内存覆盖技术，同一时刻只能保存一个成员的值，如果对新的成员赋值，就会把原来的值覆盖掉。</p>
</blockquote>
<p>** 语法** </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">union</span> 共用体名 &#123;</span><br><span class="line">  成员列表</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>产生</li>
<li>意义</li>
<li>类型嵌套</li>
<li>定义变量（变量，数组，指针），初始化及成员引用 (变量名.成员 指针名-&gt;成员)</li>
<li>占用内存大小</li>
<li>函数传参（值，地址）</li>
<li>位域</li>
</ul>
<h3 id="1-3-指针类型"><a href="#1-3-指针类型" class="headerlink" title="1.3 指针类型"></a>1.3 指针类型</h3><h3 id="1-4-空类型-void"><a href="#1-4-空类型-void" class="headerlink" title="1.4 空类型 void"></a>1.4 空类型 void</h3><h2 id="6-类型转换"><a href="#6-类型转换" class="headerlink" title="6. 类型转换"></a>6. 类型转换</h2><p>存储涉及到2进制，8进制，10进制，16进制。这几种进制之间的转换首先要区别开，如何去获得一个二进制</p>
<h3 id="2-1-十进制转二进制"><a href="#2-1-十进制转二进制" class="headerlink" title="2.1  十进制转二进制"></a>2.1  十进制转二进制</h3><blockquote>
<p>除2取余，余数倒序排列</p>
</blockquote>
<p>254 -&gt; unsigned int -&gt; 32位 （4个字节）</p>
<p>254（10进制）-&gt; 11111110 (2进制) -&gt; 376 (8进制) -&gt; FE(16进制)</p>
<p>c语言程序当中是不识别二进制的</p>
<p>254         默认10进制<br>B11111110   二进制<br>0376        八进制<br>0xFE        十六进制</p>
<h3 id="2-2-补码"><a href="#2-2-补码" class="headerlink" title="2.2 补码"></a>2.2 补码</h3><blockquote>
<p>一个正数的补码形式就是 它二进制本身,负数的补码是它绝对值的二进制形式取反 + 1</p>
</blockquote>
<p>254 -&gt; unsigned int -&gt; 32位<br>-254 -&gt; 254 -&gt; 1111 1110 取反 + 1</p>
<h2 id="7-运算符和表达式"><a href="#7-运算符和表达式" class="headerlink" title="7. 运算符和表达式"></a>7. 运算符和表达式</h2><p>表达式与语句的区别</p>
<ul>
<li>运算符部分：</li>
</ul>
<ol>
<li>每个运算符所需要的参与运算的操作个数</li>
<li>结合性</li>
<li>优先级</li>
<li>运算符的特殊性</li>
</ol>
<ul>
<li>% 要求 除数，被除数都是整型</li>
</ul>
<ol start="5">
<li>位运算的重要性</li>
</ol>
<h3 id="8-1-自增和自减"><a href="#8-1-自增和自减" class="headerlink" title="8.1 自增和自减"></a>8.1 自增和自减</h3><blockquote>
<p>运算符在前，先进行计算，再取变量值使用变量在前， 先取变量值使用，再进行计算</p>
</blockquote>
<h2 id="8-位运算"><a href="#8-位运算" class="headerlink" title="8. 位运算"></a>8. 位运算</h2><h3 id="3-1-gt-gt-lt-lt"><a href="#3-1-gt-gt-lt-lt" class="headerlink" title="3.1  &gt;&gt; &lt;&lt;"></a>3.1  &gt;&gt; &lt;&lt;</h3><blockquote>
<p>位运算（左移右移）基本等同于乘2除2运算,像汇编当中乘以多少，除以多少，几乎按这种方式来实现的</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = B1100 = <span class="number">12</span></span><br><span class="line">~i -&gt; B0011  <span class="comment">// 取反</span></span><br><span class="line"><span class="comment">// 把i往右移一位，1100  变成 110， 转化为10进制就是12</span></span><br><span class="line">i &gt;&gt; <span class="number">1</span>  --&gt; <span class="number">110</span> = <span class="number">6</span>  </span><br><span class="line"><span class="comment">// 把i往左移一位， 1100变成11000， 转化为10进制就是24</span></span><br><span class="line">i &lt;&lt; <span class="number">1</span> --&gt; <span class="number">11000</span> = <span class="number">24</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-（取反）"><a href="#3-2-（取反）" class="headerlink" title="3.2  ~ （取反）"></a>3.2  ~ （取反）</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = B1100 = <span class="number">12</span></span><br><span class="line">~i -&gt; B0011  <span class="comment">// 取反</span></span><br></pre></td></tr></table></figure>

<h3 id="3-3-按位或"><a href="#3-3-按位或" class="headerlink" title="3.3  按位或"></a>3.3  按位或</h3><blockquote>
<p>按位或的计算原则是，同一个位上，两者有一者为1就为真，两者都为假才为假</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = B1100;</span><br><span class="line"><span class="keyword">int</span> j = B1001;</span><br><span class="line"></span><br><span class="line">i|j</span><br><span class="line"></span><br><span class="line">   <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">｜ <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">----------</span><br><span class="line">   <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">1101</span> -&gt; <span class="number">13</span></span><br></pre></td></tr></table></figure>

<h3 id="3-4-按位与"><a href="#3-4-按位与" class="headerlink" title="3.4  按位与"></a>3.4  按位与</h3><blockquote>
<p>按位与的计算原则是，同一个位上，两者有都为1就为真，否则为假</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = B1100;</span><br><span class="line"><span class="keyword">int</span> j = B1001;</span><br><span class="line"></span><br><span class="line">i&amp;j</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">&amp; <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">----------</span><br><span class="line">  <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="number">1000</span> -&gt; <span class="number">8</span></span><br></pre></td></tr></table></figure>


<h3 id="3-5-相同为0，-不同为1"><a href="#3-5-相同为0，-不同为1" class="headerlink" title="3.5  ^ (相同为0， 不同为1)"></a>3.5  ^ (相同为0， 不同为1)</h3><blockquote>
<p>亦或计算原则， 同一个位上，相同为0， 不同为1</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = B1100;</span><br><span class="line"><span class="keyword">int</span> j = B1001;</span><br><span class="line"></span><br><span class="line">i^j</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span></span><br><span class="line">^ <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line">----------</span><br><span class="line">  <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">1000</span> -&gt; <span class="number">5</span></span><br></pre></td></tr></table></figure>

<h3 id="3-6-位运算的重要意义"><a href="#3-6-位运算的重要意义" class="headerlink" title="3.6  位运算的重要意义"></a>3.6  位运算的重要意义</h3><ul>
<li>将操作数中第N位 置1， 其他位不变；</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//num = num | 1 &lt;&lt; n // 把某一位 置1的话，把1左移 N个位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比如将i 的第二位 置1</span></span><br><span class="line"><span class="keyword">int</span> i = B1011;</span><br><span class="line"><span class="keyword">int</span> j = B1001;</span><br><span class="line"></span><br><span class="line">i = i | i &lt;&lt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line">| <span class="number">0</span> <span class="number">1</span> <span class="number">0</span> <span class="number">0</span>   <span class="comment">// 注意是把 1 左移动 N个位。 1  -&gt;  0100  空位补0</span></span><br><span class="line">----------</span><br><span class="line">  <span class="number">1</span> <span class="number">1</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">1000</span> -&gt; <span class="number">5</span></span><br></pre></td></tr></table></figure>

<ul>
<li>将操作数中第N位 清0， 其他位不变；</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//num = num &amp; ~(1 &lt;&lt; n) // 把某一位 置1的话，把1左移 N个位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 比如将i 的第1位 置0</span></span><br><span class="line"><span class="keyword">int</span> i = B1011;</span><br><span class="line"><span class="keyword">int</span> j = B1001;</span><br><span class="line"></span><br><span class="line">i = i | i &lt;&lt; <span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">  <span class="number">1</span> <span class="number">0</span> <span class="number">1</span> <span class="number">1</span></span><br><span class="line">| <span class="number">1</span> <span class="number">1</span> <span class="number">0</span> <span class="number">1</span>   <span class="comment">// -&gt; 把1左移N位取反</span></span><br><span class="line">----------</span><br><span class="line">  <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="number">1000</span> -&gt; <span class="number">5</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>测试第n位： if (num &amp; i 1 &lt;&lt; n)</p>
</li>
<li><p>从一个指定宽度的数中取出其中的某几位 （练习题）</p>
</li>
</ul>
<h2 id="9-内核代码位置"><a href="#9-内核代码位置" class="headerlink" title="9.  内核代码位置"></a>9.  内核代码位置</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /linux/include/linux</span><br><span class="line">vim list.h</span><br></pre></td></tr></table></figure>






<h2 id="10-宏"><a href="#10-宏" class="headerlink" title="10.  宏"></a>10.  宏</h2><ul>
<li>#开头的是编译预处理指令</li>
<li>它们不是C语言的成分，但是C语言程序离不开它们</li>
<li>#define 用来定义一个宏；</li>
<li>define (定义一个宏)</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159  <span class="comment">//  指定义了一个宏</span></span></span><br><span class="line"><span class="comment">// PI 是这个宏的名字， 3.14159是这个宏的值；</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  prinft(<span class="string">"%d\n"</span>, <span class="number">2</span>*PI*<span class="number">3.0</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// C语言程序在编译之前，会做一次编译预处理；</span></span><br><span class="line"><span class="comment">// 会把程序中所有的PI都替换成 3.14159</span></span><br></pre></td></tr></table></figure>


<h3 id="4-1-save-temps"><a href="#4-1-save-temps" class="headerlink" title="4.1 save-temps"></a>4.1 save-temps</h3><p>对一个 .c 文件执行</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc 02.c --save-temps</span><br></pre></td></tr></table></figure>

<p>生成 四个文件</p>
<p><code>02.i</code><br><code>02.s</code><br><code>02.o</code><br><code>a.out</code></p>
<p>过程依次是</p>
<p><code>.c -&gt; .i -&gt; .s -&gt; .o -&gt; a.out</code></p>
<p>.c是源代码，经过编译预处理之后变成 .i 这种中间结果文件，<br>当中所有编译预处理指令都执行完，比如 define 宏需要替换掉;<br>然后由于编译器对 .i文件进行编译 生成汇编代码 .s文件；<br>然后汇编代码文件，进行汇编变成目标文件， 目标文件再经过链接<br>之后形成一个可执行的东西；</p>
<ul>
<li>查看 .i 文件</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tail  03.i</span><br><span class="line">tail -n 50 03.i <span class="comment"># 看03.i文件 最后 50行</span></span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">extern</span> <span class="keyword">void</span> <span class="title">funlockfile</span> <span class="params">(FILE *__stream)</span> __<span class="title">attribute__</span> <span class="params">((__nothrow__ , __leaf__))</span></span>;</span><br><span class="line"># <span class="number">943</span> <span class="string">"/usr/include/stdio.h"</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"># <span class="number">3</span> <span class="string">"03.c"</span> <span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, <span class="number">2</span>*<span class="number">3.1415927</span>*<span class="number">3.0</span>); <span class="comment">// 这里明显把宏替换成了值；</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>** 同样的可以把 “%f\n” 也替换成宏**</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159  <span class="comment">//  指定义了一个宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FORMATTER <span class="meta-string">"%f\n"</span>  <span class="comment">// 指定一个FORMATTER 宏</span></span></span><br><span class="line"><span class="comment">// PI 是这个宏的名字， 3.14159是这个宏的值；</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  prinft(FORMATTER, <span class="number">2</span>*PI*<span class="number">3.0</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-宏的缺点"><a href="#4-2-宏的缺点" class="headerlink" title="4.2 宏的缺点"></a>4.2 宏的缺点</h3><blockquote>
<p>不检查语法，在预处理或者编译阶段是不报错的；</p>
</blockquote>
<h3 id="4-3-define"><a href="#4-3-define" class="headerlink" title="4.3 define"></a>4.3 define</h3><ul>
<li>#define &lt;名字&gt; &lt;值&gt;</li>
<li>结尾没有 分号，因为不是C的语句</li>
<li>名字必须是一个单词，值可以是各种东西</li>
<li>在C语言的编译器开始编译之前，编译预处理程序(cpp)会把程序中的名字换成值；</li>
<li>完全的文本替换</li>
<li>gcc –save-temps</li>
<li>如果一个宏的值中有其他的宏的名字，也是会被替换的</li>
<li>如果一个宏的值超过一行，最后一行之前的行末需要加\</li>
<li>宏的值后面出现的注释不会被当作宏的一部分</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159        <span class="comment">//  指定义了一个宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FORMATTER <span class="meta-string">"%f\n"</span>  <span class="comment">// 指定一个FORMATTER 宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI2 2*PI          <span class="comment">// PI * 2</span></span></span><br><span class="line"><span class="comment">// PI 是这个宏的名字， 3.14159是这个宏的值；</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  prinft(FORMATTER, <span class="number">2</span>*PI*<span class="number">3.0</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI 3.14159        <span class="comment">//  指定义了一个宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> FORMATTER <span class="meta-string">"%f\n"</span>  <span class="comment">// 指定一个FORMATTER 宏</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI2 2*PI          <span class="comment">// PI * 2</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PRT printf(<span class="meta-string">"%f"</span>, PI)\</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, PI2)</span><br><span class="line"><span class="comment">// PI 是这个宏的名字， 3.14159是这个宏的值；</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  PRT;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-4-没有值的宏"><a href="#4-4-没有值的宏" class="headerlink" title="4.4 没有值的宏"></a>4.4 没有值的宏</h3><ul>
<li>#define_DEBUG</li>
<li>这类宏是用于条件编译的，后面有其他的编译预处理指令来检查这个宏是否已经被定义过了；</li>
</ul>
<h3 id="4-5-预定义的宏"><a href="#4-5-预定义的宏" class="headerlink" title="4.5 预定义的宏"></a>4.5 预定义的宏</h3><blockquote>
<p>用来表示一些特殊的东西，可以让编译器替我们插入一些特殊的值。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">_LINE_     <span class="comment">//这个源代码所在当前的行号；</span></span><br><span class="line">_FILE_     <span class="comment">// 源代码的文件名</span></span><br><span class="line">_DATE_     <span class="comment">// 编译时候的日期</span></span><br><span class="line">_TIME_     <span class="comment">// 编译时候的时间</span></span><br><span class="line">_STDC_</span><br></pre></td></tr></table></figure>

<h3 id="4-6-像函数的宏"><a href="#4-6-像函数的宏" class="headerlink" title="4.6 像函数的宏"></a>4.6 像函数的宏</h3><p><code>#define cube(x) ((x)*(x)*(x))</code></p>
<p>宏可以带参数</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> cube(x) ((x)*(x)*(x))</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> <span class="keyword">const</span> *argv[])</span></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, cube(<span class="number">5</span>));  <span class="comment">// 125</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打开 .i 文件</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ((<span class="number">5</span>)*(<span class="number">5</span>)*(<span class="number">5</span>)));  <span class="comment">// 被预处理成这样了；</span></span><br><span class="line"> <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, <span class="number">2</span>*<span class="number">3.1415927</span>*<span class="number">3.0</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-7-错误定义的宏"><a href="#4-7-错误定义的宏" class="headerlink" title="4.7 错误定义的宏"></a>4.7 错误定义的宏</h3><p><code>#define RADTODEG(x) (x*57.29578)</code><br><code>#define RADTODEG(x) (x)*57.29578</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RADTODEG(x) (x*57.29578)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> RADTODEG(x) (x)*57.29578</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, RADTODEG(<span class="number">5</span>+<span class="number">2</span>));</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, <span class="number">180</span>/RADTODEG2(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>被预处理的结果</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, (<span class="number">5</span>+<span class="number">2</span> * <span class="number">57.29578</span>));</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, <span class="number">180</span>/<span class="number">1</span>*<span class="number">57.29678</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们发现 被预处理的结果是不符合我们的要求的；</p>
<h3 id="4-8带参数的宏的原则"><a href="#4-8带参数的宏的原则" class="headerlink" title="4.8带参数的宏的原则"></a>4.8带参数的宏的原则</h3><ul>
<li><p>一切都要有括号</p>
<ul>
<li>整个值要有括号，指的是整个宏的值有括号</li>
<li>参数出现的每个地方都要括号 </li>
</ul>
</li>
<li><p>#define RADTODEG(x) ((x)*57.29578)</p>
</li>
<li><p>可以带多个参数</p>
<ul>
<li>#define MIN((a,b) ((a)&gt;(b)?(b):(a))</li>
</ul>
</li>
<li><p>也可以组合（嵌套）使用其他宏</p>
</li>
<li><p>在大型程序的代码中使用非常普遍</p>
</li>
<li><p>可以非常复杂，如“产生”函数</p>
<ul>
<li>在# 和 ## 这两个运算符的帮助下</li>
</ul>
</li>
<li><p>存在中西方文化差异</p>
</li>
<li><p>部分宏会被inline函数替代 </p>
</li>
</ul>
<h3 id="4-9-什么时候用宏-什么时候用函数"><a href="#4-9-什么时候用宏-什么时候用函数" class="headerlink" title="4.9 什么时候用宏 什么时候用函数"></a>4.9 什么时候用宏 什么时候用函数</h3><p>应用求稳定，用函数<br>追求极致性能，用宏</p>
<h3 id="4-10-include-“”-还是-lt-gt"><a href="#4-10-include-“”-还是-lt-gt" class="headerlink" title="4.10 include  “” 还是 &lt;&gt;"></a>4.10 include  “” 还是 &lt;&gt;</h3><p>include 做了什么？</p>
<blockquote>
<p>include就是把头文件里头所有的文本插入到include所在.c文件的那一行.</p>
</blockquote>
<ul>
<li>#include有两种形式来指出要插入的文件<ul>
<li>“”要求编译器首先在当前目录（.c文件所在的目录）寻找这个文件，如果没有，到编译器指定的目录去找</li>
<li>&lt;&gt; 让编译器只在指定的目录去找</li>
</ul>
</li>
<li>编译器自己知道自己的标准库的头文件在哪里</li>
<li>环境变量和编译器命令行参数也可以指定寻找头文件的目录</li>
</ul>
<h3 id="4-11-头文件-（-h文件）"><a href="#4-11-头文件-（-h文件）" class="headerlink" title="4.11 头文件 （.h文件）"></a>4.11 头文件 （.h文件）</h3><ul>
<li>在使用和定义这个函数的地方都应该 #include 这个头文件</li>
<li>一般的做法就是任何.c都有对应的同名的.h,把所有对外公开的函数的原型和全局变量的声明都放进去</li>
<li>在函数前面加上static 就使得它成为只能在所在的编译单元中被使用的函数</li>
<li>在全局变量前面加上static就使得它成为只能在所在的编译单元中被使用的全局变量</li>
</ul>
<h3 id="4-12-变量的声明"><a href="#4-12-变量的声明" class="headerlink" title="4.12 变量的声明"></a>4.12 变量的声明</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// add.h</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span>;</span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">int</span> gAll;   <span class="comment">// 全局声明一个 变量</span></span><br></pre></td></tr></table></figure>

<ul>
<li>int i； 是变量的定义</li>
<li>extern int i； 是变量的声明</li>
</ul>
<h3 id="4-13声明和定义"><a href="#4-13声明和定义" class="headerlink" title="4.13声明和定义"></a>4.13声明和定义</h3><ul>
<li>声明是不产生的代码的东西<ul>
<li>函数原型</li>
<li>变量声明</li>
<li>结构声明</li>
<li>宏声明</li>
<li>枚举声明</li>
<li>类型声明</li>
<li>inline函数</li>
</ul>
</li>
<li>定义是产生代码的东西</li>
</ul>
<h2 id="11-typedef"><a href="#11-typedef" class="headerlink" title="11. typedef"></a>11. typedef</h2><blockquote>
<p>为已有的数据类型改名</p>
</blockquote>
<p><code>typedef  已有的数据类型 新名字;</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> INT;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  INT i;</span><br><span class="line">  <span class="built_in">printf</span>(D, i); </span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-1-typedef-和-define的区别"><a href="#5-1-typedef-和-define的区别" class="headerlink" title="5.1  typedef 和 define的区别"></a>5.1  typedef 和 define的区别</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> IP int *</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> *IP;</span><br><span class="line"></span><br><span class="line">IP p,q  --&gt; <span class="keyword">int</span> *p, q;</span><br><span class="line">IP p,q  --&gt; <span class="keyword">int</span> *p, *q;</span><br></pre></td></tr></table></figure>

<p>** 更多示例** </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> ARR[<span class="number">6</span>];    ---&gt; <span class="keyword">int</span> [<span class="number">6</span>] -&gt; ARR;</span><br><span class="line">ARR a; --&gt; <span class="keyword">int</span> a[<span class="number">6</span>];</span><br></pre></td></tr></table></figure>


<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">node_st</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">float</span> f;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node_st</span> <span class="title">NODE</span>;</span></span><br><span class="line">NODE a; --&gt; <span class="class"><span class="keyword">struct</span> <span class="title">node_st</span> <span class="title">a</span>;</span></span><br><span class="line">NODE *p; --&gt; <span class="class"><span class="keyword">struct</span> <span class="title">node_st</span> *<span class="title">p</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">node_st</span> *<span class="title">NODEP</span>;</span></span><br><span class="line">NODEP p --&gt; <span class="class"><span class="keyword">struct</span> <span class="title">node_st</span> *<span class="title">p</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">float</span> f;</span><br><span class="line">&#125;NODE, *NODEP;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="keyword">int</span> <span class="title">FUNC</span><span class="params">(<span class="keyword">int</span>)</span></span>; --&gt; <span class="keyword">int</span>(<span class="keyword">int</span>)  FUNC;</span><br><span class="line">FUNC f; --&gt; <span class="function"><span class="keyword">int</span> <span class="title">f</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="keyword">int</span> *<span class="title">FUNCP</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line">FUNCP p; ---&gt;  <span class="function"><span class="keyword">int</span> *<span class="title">p</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">int</span> *(*FUNCP)(<span class="keyword">int</span>);</span><br><span class="line">FUNCP p; ---&gt; <span class="keyword">int</span> *(*p)(<span class="keyword">int</span>);</span><br></pre></td></tr></table></figure>


<h1 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h1><p>类型      数组名[常量表达式]</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span>    sheep[<span class="number">10</span>]</span><br><span class="line"><span class="keyword">int</span>      a2001[<span class="number">1000</span>]</span><br></pre></td></tr></table></figure>

<h2 id="12-一唯数组"><a href="#12-一唯数组" class="headerlink" title="12.  一唯数组"></a>12.  一唯数组</h2><h3 id="1-1-1-定义"><a href="#1-1-1-定义" class="headerlink" title="1.1.1 定义"></a>1.1.1 定义</h3><p>  【存储类型】 数据类型 标识符 【下标】</p>
<h3 id="1-1-2-初始化"><a href="#1-1-2-初始化" class="headerlink" title="1.1.2 初始化"></a>1.1.2 初始化</h3><p>不初始化<br>全部初始化<br>部分初始化</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>&#125; <span class="comment">// 不给长度也行</span></span><br><span class="line">  <span class="keyword">int</span> b[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>&#125;   <span class="comment">// [1,2,0,0]   部分元素初始化</span></span><br><span class="line">  <span class="keyword">int</span> c[<span class="number">4</span>] = &#123;<span class="number">0</span>&#125;   <span class="comment">// [0,0,0,0]     部分元素初始化</span></span><br><span class="line">  <span class="keyword">int</span> d[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;  <span class="comment">// compile error</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-3-元素引用"><a href="#1-1-3-元素引用" class="headerlink" title="1.1.3 元素引用"></a>1.1.3 元素引用</h3><p>  数组名【下标】</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">      <span class="keyword">int</span> arr[M];</span><br><span class="line">      <span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(arr));</span><br><span class="line">      <span class="keyword">for</span>(; i&lt;M; i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%p-&gt;%d\n"</span>, &amp;arr[i], arr[i]);</span><br><span class="line"></span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0x7ffee4394940-&gt;-466007712</span></span><br><span class="line"><span class="comment">// 0x7ffee4394944-&gt;32766</span></span><br><span class="line"><span class="comment">// 0x7ffee4394948-&gt;201064485</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>下标</p>
<p>查找块</p>
</li>
</ul>
<h3 id="1-1-4-数组名"><a href="#1-1-4-数组名" class="headerlink" title="1.1.4 数组名"></a>1.1.4 数组名</h3><blockquote>
<p>当前数组的起始位置，数组名本身就是表示地址的一个常量。</p>
</blockquote>
<p>常量： 程序执行过程当中不会发生变化的量；正因为数组名是常量，所以它不能无条件出现在数组的左边；</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">      <span class="keyword">int</span> arr[M] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">      <span class="keyword">int</span> i;</span><br><span class="line">      arr[M] = &#123;<span class="number">4</span>,<span class="number">5</span>, <span class="number">6</span>&#125;; <span class="comment">// 语法错误，数组名是常量，无法被直接赋值</span></span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="keyword">sizeof</span>(arr));</span><br><span class="line">      <span class="keyword">for</span>(; i&lt;M; i++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%p-&gt;%d\n"</span>, &amp;arr[i], arr[i]);</span><br><span class="line"></span><br><span class="line">      <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-5-数组越界"><a href="#1-1-5-数组越界" class="headerlink" title="1.1.5 数组越界"></a>1.1.5 数组越界</h3><blockquote>
<p>溢出数组所在内存区域</p>
</blockquote>
<h4 id="1-1-6-fb"><a href="#1-1-6-fb" class="headerlink" title="1.1.6 fb"></a>1.1.6 fb</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> fib[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> i;</span><br><span class="line">     <span class="keyword">for</span> (i =<span class="number">2</span>; i&lt;<span class="number">10</span>; i++)</span><br><span class="line">         fib[i] = fib[i<span class="number">-1</span>] + fib[i<span class="number">-2</span>];</span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,fib[i]);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fb加个排序</span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> fib[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">1</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> i;</span><br><span class="line">     <span class="keyword">int</span> j;</span><br><span class="line">     <span class="keyword">int</span> tmp;</span><br><span class="line">     <span class="keyword">for</span> (i =<span class="number">2</span>; i&lt;<span class="number">10</span>; i++)</span><br><span class="line">         fib[i] = fib[i<span class="number">-1</span>] + fib[i<span class="number">-2</span>];</span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,fib[i]);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">     i=<span class="number">0</span>;</span><br><span class="line">     j=<span class="keyword">sizeof</span>(fib)/<span class="keyword">sizeof</span>(fib[<span class="number">0</span>]) <span class="number">-1</span>;</span><br><span class="line">     <span class="keyword">while</span>(i&lt;j)</span><br><span class="line">     &#123;</span><br><span class="line">         tmp = fib[i];</span><br><span class="line">         fib[i] = fib[j];</span><br><span class="line">         fib[j] = tmp;</span><br><span class="line">         i++;</span><br><span class="line">         j--;</span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,fib[i]);</span><br><span class="line">     <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>






<h2 id="13-二维数组"><a href="#13-二维数组" class="headerlink" title="13.  二维数组"></a>13.  二维数组</h2><h3 id="1-2-1-定义，初始化"><a href="#1-2-1-定义，初始化" class="headerlink" title="1.2.1 定义，初始化"></a>1.2.1 定义，初始化</h3><p>   【存储类型】  数据类型   标识符  【行下标】 【列下标】</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">3</span>] = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;, &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;, &#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">int</span> b[][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;;</span><br><span class="line"><span class="keyword">int</span> c[<span class="number">3</span>][<span class="number">4</span>] = &#123;<span class="number">0</span>&#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[M][N]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-2-二维数组元素引用"><a href="#1-2-2-二维数组元素引用" class="headerlink" title="1.2.2 二维数组元素引用"></a>1.2.2 二维数组元素引用</h3><p>数组名[行标][列标]<br>int a[3][4]   // 定一个三行四列的二维数组</p>
<h3 id="1-2-3-存储形式"><a href="#1-2-3-存储形式" class="headerlink" title="1.2.3 存储形式"></a>1.2.3 存储形式</h3><blockquote>
<p>顺序存储，按行存储,二维数组在内存中的存储， 是拉平的</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">----------</span><br><span class="line">a[0][0]</span><br><span class="line">----------</span><br><span class="line">a[0][1]</span><br><span class="line">----------</span><br><span class="line">a[0][2]</span><br><span class="line">----------</span><br><span class="line">a[0][3]</span><br><span class="line">----------</span><br><span class="line">a[1][0]</span><br><span class="line">----------</span><br><span class="line">a[1][1]</span><br><span class="line">----------</span><br><span class="line">a[1][2]</span><br><span class="line">----------</span><br><span class="line">a[1][3]</span><br><span class="line">----------</span><br><span class="line">a[2][0]</span><br><span class="line">----------</span><br><span class="line">a[2][1]</span><br><span class="line">----------</span><br><span class="line">a[2][2]</span><br><span class="line">----------</span><br><span class="line">a[2][3]</span><br><span class="line">----------</span><br></pre></td></tr></table></figure>

<ol>
<li>深入理解二维数组</li>
</ol>
<table>
<thead>
<tr>
<th>1 a[0][0]</th>
<th>2 a[0][1]</th>
<th>3 a[0][2]</th>
<th>4 a[0][3]</th>
</tr>
</thead>
<tbody><tr>
<td>5 a[1][0]</td>
<td>6 a[1][1]</td>
<td>7 a[1][2]</td>
<td>8 a[1][3]</td>
</tr>
<tr>
<td>9 a[2][0]</td>
<td>10 a[2][1]</td>
<td>11 a[2][2]</td>
<td>12 a[2][3]</td>
</tr>
</tbody></table>
<h3 id="1-2-4-二维数组练习题"><a href="#1-2-4-二维数组练习题" class="headerlink" title="1.2.4 二维数组练习题"></a>1.2.4 二维数组练习题</h3><h4 id="1-2-4-1-行列互换"><a href="#1-2-4-1-行列互换" class="headerlink" title="1.2.4.1 行列互换"></a>1.2.4.1 行列互换</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> b[N][M];</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;M;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;N;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            b[j][i] = arr[i][j];</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>,arr[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;M;j++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d"</span>, b[i][j]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h4 id="1-2-4-2-求最大值及其所在位置"><a href="#1-2-4-2-求最大值及其所在位置" class="headerlink" title="1.2.4.2 求最大值及其所在位置"></a>1.2.4.2 求最大值及其所在位置</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>  <span class="title">max</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[M][N] = &#123;<span class="number">43</span>,<span class="number">4</span>,<span class="number">23</span>,<span class="number">89</span>,<span class="number">9</span>,<span class="number">7</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="keyword">int</span> <span class="built_in">max</span> = a[<span class="number">0</span>][<span class="number">0</span>], row =<span class="number">0</span>, col = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;M;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;N;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(a[i][j]&gt;<span class="built_in">max</span>)</span><br><span class="line">            &#123;</span><br><span class="line">               <span class="built_in">max</span>= a[i][j];</span><br><span class="line">               row = i;</span><br><span class="line">               col = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="built_in">max</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d --- %d\n"</span>, row, col);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> arr[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> b[N][M];</span><br><span class="line">    <span class="keyword">int</span> i,j;</span><br><span class="line">    <span class="built_in">max</span>();</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-3-求各行与各列的和"><a href="#1-2-4-3-求各行与各列的和" class="headerlink" title="1.2.4.3 求各行与各列的和"></a>1.2.4.3 求各行与各列的和</h4><p><img src="./2_arr.png" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span>  <span class="title">sum</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>][<span class="number">4</span>] = &#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;,&#123;<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>&#125;,&#123;<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;&#125;;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">4</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;<span class="number">3</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            a[<span class="number">4</span>][<span class="number">3</span>] += a[i][j];</span><br><span class="line">            a[<span class="number">4</span>][j] += a[i][j];</span><br><span class="line">            a[i][<span class="number">3</span>] += a[i][j];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;<span class="number">4</span>;j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%4d"</span>,a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    sum();</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-2-4-4-矩阵乘积"><a href="#1-2-4-4-矩阵乘积" class="headerlink" title="1.2.4.4 矩阵乘积"></a>1.2.4.4 矩阵乘积</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 2</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> K 2</span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">mul</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125; ;</span><br><span class="line">     <span class="keyword">int</span> b[N][K]= &#123;<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">0</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> c[M][K];</span><br><span class="line">     <span class="keyword">int</span> i,j,k;</span><br><span class="line">     <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;M;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;K;j++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="keyword">for</span>(k=<span class="number">0</span>; k&lt;N; k++)</span><br><span class="line">             &#123;</span><br><span class="line">                 c[i][j] += a[i][k] * b[k][j];</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;M;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;K;j++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="built_in">printf</span>(<span class="string">"%4d"</span>,c[i][j]);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     mul();</span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-5-深入理解二维数组"><a href="#1-2-5-深入理解二维数组" class="headerlink" title="1.2.5 深入理解二维数组"></a>1.2.5 深入理解二维数组</h3><p><img src="./arr_2.png" alt=""></p>
<h4 id="1-2-5-1-三维数组"><a href="#1-2-5-1-三维数组" class="headerlink" title="1.2.5.1 三维数组"></a>1.2.5.1 三维数组</h4><p>a[5][3][4]    数据立方体  </p>
<p>5 -&gt; 片<br>3 -&gt; 行<br>4 -&gt; 列</p>
<p>在内存中依然是打平存放；</p>
<h2 id="14-字符数组"><a href="#14-字符数组" class="headerlink" title="14. 字符数组"></a>14. 字符数组</h2><h3 id="1-3-1-定义，初始化，存储特点"><a href="#1-3-1-定义，初始化，存储特点" class="headerlink" title="1.3.1 定义，初始化，存储特点"></a>1.3.1 定义，初始化，存储特点</h3><p> 【存储类型】 数据类型  标识符 【下标】。。。</p>
<h4 id="1-3-1-1-单个字符初始化"><a href="#1-3-1-1-单个字符初始化" class="headerlink" title="1.3.1.1 单个字符初始化"></a>1.3.1.1 单个字符初始化</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str[<span class="number">3</span>] = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;</span><br></pre></td></tr></table></figure>

<p>char c[] = {‘C’, ‘h’, ‘i’, ‘n’, ‘a’};<br>// c[0] = C   c[1] = h  c[2]= i  c[3]=n  c[4]=a</p>
<h4 id="1-3-1-2-用字符串常量初始化"><a href="#1-3-1-2-用字符串常量初始化" class="headerlink" title="1.3.1.2 用字符串常量初始化"></a>1.3.1.2 用字符串常量初始化</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str1[<span class="number">6</span>] = <span class="string">"hello"</span>;  <span class="comment">// 最后一位 以 '\0' 结尾</span></span><br></pre></td></tr></table></figure>

<p>char c[] = “China”<br>// c[0] = C   c[1] = h  c[2]= i  c[3]=n  c[4]=a  c[5]=\0</p>
<h3 id="1-3-2-输入输出"><a href="#1-3-2-输入输出" class="headerlink" title="1.3.2 输入输出"></a>1.3.2 输入输出</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">char</span> str[N], str1[N], str2[N];</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="built_in">scanf</span>(<span class="string">"%s%s%s"</span>, str, str1,str2);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%s\n%s\n%s\n"</span>, str, str1,str2);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// how are you</span></span><br><span class="line"><span class="comment">// how</span></span><br><span class="line"><span class="comment">// are</span></span><br><span class="line"><span class="comment">// you</span></span><br></pre></td></tr></table></figure>

<h4 id="1-3-2-1-单词计数"><a href="#1-3-2-1-单词计数" class="headerlink" title="1.3.2.1 单词计数"></a>1.3.2.1 单词计数</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">char</span> str[<span class="number">128</span>];</span><br><span class="line">     <span class="keyword">int</span> count =<span class="number">0</span>, flag = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> i;</span><br><span class="line">     gets(str);</span><br><span class="line">     <span class="keyword">for</span>(i=<span class="number">0</span>;str[i]!=<span class="string">'\0'</span>;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">if</span>(str[i]==<span class="string">' '</span>)</span><br><span class="line">             flag = <span class="number">0</span>;</span><br><span class="line">         <span class="keyword">else</span></span><br><span class="line">             <span class="keyword">if</span>(flag == <span class="number">0</span>)</span><br><span class="line">             &#123;</span><br><span class="line">                 count++;</span><br><span class="line">                 flag=<span class="number">1</span>;</span><br><span class="line">             &#125;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"count = %d\n"</span>, count);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-3-3-字符数组注意事项"><a href="#1-3-3-字符数组注意事项" class="headerlink" title="1.3.3 字符数组注意事项"></a>1.3.3 字符数组注意事项</h3><blockquote>
<p>所有字符串都是以  \0 来结尾的；所有以 \0结尾 的字符数组都可以被看为字符串</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> c[<span class="number">6</span>] = <span class="string">"China"</span>; <span class="comment">//只可以在数组定义并初始化的时候</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能用赋值语句将一个字符串常量或字符数组直接赋给另一个字符数组</span></span><br><span class="line">str1[] = <span class="string">"China"</span>   <span class="comment">// 赋值，不合法</span></span><br><span class="line">str1 = <span class="string">"China"</span>     <span class="comment">// 赋值，不合法</span></span><br><span class="line">str2 = str1        <span class="comment">// 赋值，不合法</span></span><br></pre></td></tr></table></figure>


<h1 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h1><ol>
<li>变量与地址</li>
<li>指针与指针变量</li>
<li>直接访问与间接访问</li>
<li>空指针与野指针</li>
<li>空类型指针</li>
<li>定义，初始化，书写规则</li>
<li>指针运算</li>
<li>指针与数组<ol>
<li>指针与一维数组</li>
<li>指针与二维数组</li>
<li>指针与字符数组</li>
</ol>
</li>
<li>const与指针</li>
<li>指针数组和数组指针</li>
<li>多级指针</li>
</ol>
<h2 id="15-变量与地址"><a href="#15-变量与地址" class="headerlink" title="15. 变量与地址"></a>15. 变量与地址</h2><p>变量名： 变量名就是用户对某一块内存空间的抽象表示；想把这块儿内存置成100，就写<code>int i = 100;</code>变量名就是某个内存空间的别名；</p>
<p>地址： 指针就是地址，指针就是指向某个内存空间地址的地址值；</p>
<h3 id="1-1-变量的三要素"><a href="#1-1-变量的三要素" class="headerlink" title="1.1  变量的三要素"></a>1.1  变量的三要素</h3><p><code>int a = 3</code> 在内存中， 即产生 0x0012FF78，3，a 三个要素。</p>
<ol>
<li>0x0012FF78即变量的地址， 把这个变量的地址称为“指向该变量的指针”；</li>
<li>3即变量值；</li>
<li>a即变量的签名；</li>
</ol>
<h3 id="1-2-输出变量的地址"><a href="#1-2-输出变量的地址" class="headerlink" title="1.2  输出变量的地址"></a>1.2  输出变量的地址</h3><p>地址运算符 “&amp;” </p>
<p><code>int a = 3; printf(&quot;%x&quot;, &amp;a)</code></p>
<h2 id="16-指针与指针变量"><a href="#16-指针与指针变量" class="headerlink" title="16. 指针与指针变量"></a>16. 指针与指针变量</h2><p><strong>语法</strong></p>
<p><code>TYPE NAME = VALUE；</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>;    <span class="comment">// type 为 int</span></span><br><span class="line"><span class="keyword">int</span> * p = &amp;i; <span class="comment">// type 为 int *, 而不是 int</span></span><br></pre></td></tr></table></figure>

<h3 id="2-1-非法操作（野指针）"><a href="#2-1-非法操作（野指针）" class="headerlink" title="2.1 非法操作（野指针）"></a>2.1 非法操作（野指针）</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * p = &amp;i; <span class="comment">// 合法操作，指针一旦定义出来，就要给一个明确指向；没有的话，下回分解</span></span><br><span class="line"><span class="keyword">int</span> * p = <span class="number">0x7fffa37eac60</span>; <span class="comment">// 可能这个地址已经被占用了，一般情况下，是个非法操作；</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-指针变量"><a href="#2-2-指针变量" class="headerlink" title="2.2 指针变量"></a>2.2 指针变量</h3><blockquote>
<p>专门用于存放指针（某个变量的地址）的变量</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> c = <span class="number">76</span>;</span><br><span class="line"><span class="keyword">int</span> * pointer;  <span class="comment">//定义名字为pointer的指针变量；只能存放地址！</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// int *pointer;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1) int 是指针变量的基类型  所谓基类型：指针变量指向的变量的类型</span></span><br><span class="line"><span class="comment">// 2) *   是指针运算符，表示pointer这个变量的类型</span></span><br><span class="line"><span class="comment">// 3) pointer   是指指针变量的名字</span></span><br><span class="line"></span><br><span class="line">pointer = &amp;c;</span><br><span class="line"><span class="comment">// 将变量c 的地址赋值给指针变量pointer；</span></span><br><span class="line"><span class="comment">// 赋值后，称指针变量pointer指向了变量c；</span></span><br></pre></td></tr></table></figure>

<p>则<code>*pointer</code>： 为pointer所指向的存储单元的内容；是变量c。<br>因此<code>*pointer</code>可以当作 变量c 来使用</p>
<h3 id="2-3-指针变量的地址"><a href="#2-3-指针变量的地址" class="headerlink" title="2.3 指针变量的地址"></a>2.3 指针变量的地址</h3><blockquote>
<p>指针变量也是变量，是变量就有地址</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	 <span class="keyword">int</span> a = <span class="number">13</span>;</span><br><span class="line">    <span class="keyword">int</span> * p = &amp;a;</span><br><span class="line">    *p = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">printf</span>(P, p);</span><br><span class="line">    <span class="built_in">printf</span>(P, &amp;p);   <span class="comment">// 指针变量也有地址；</span></span><br><span class="line">		<span class="comment">// 0x7ffee6a26ac8</span></span><br><span class="line">		<span class="comment">// 0x7ffee6a26ac0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-4-指针变量示例"><a href="#2-4-指针变量示例" class="headerlink" title="2.4 指针变量示例"></a>2.4 指针变量示例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>, b=<span class="number">3</span>, temp;</span><br><span class="line">    <span class="keyword">int</span> *p1 = <span class="literal">NULL</span>, *p2 = <span class="literal">NULL</span>;</span><br><span class="line">    p1 = &amp;a;</span><br><span class="line">    p2 = &amp;b;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, &amp;a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, &amp;b);</span><br><span class="line">    <span class="keyword">if</span>(*p1 &lt; *p2) &#123;</span><br><span class="line">        temp = *p1; *p1 = *p2; *p2 = temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p1);  <span class="comment">// 3</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p2);  <span class="comment">// 0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-5-指针作运算-取地址-和-取-和关系运算"><a href="#2-5-指针作运算-取地址-和-取-和关系运算" class="headerlink" title="2.5 指针作运算 (取地址 和 取 * 和关系运算)"></a>2.5 指针作运算 (取地址 和 取 * 和关系运算)</h3><p><img src="./point_01.png" alt=""></p>
<h4 id="2-5-1-取地址"><a href="#2-5-1-取地址" class="headerlink" title="2.5.1 取地址"></a>2.5.1 取地址</h4><blockquote>
<p>要获取某个变量在内存中的房间号</p>
</blockquote>
<h4 id="2-5-2-取"><a href="#2-5-2-取" class="headerlink" title="2.5.2 取*"></a>2.5.2 取*</h4><blockquote>
<p>找到现在给定房间号里面存放的内容</p>
</blockquote>
<h2 id="17-直接访问和间接访问"><a href="#17-直接访问和间接访问" class="headerlink" title="17. 直接访问和间接访问"></a>17. 直接访问和间接访问</h2><h3 id="3-1一级间接访问和-二级间接访问"><a href="#3-1一级间接访问和-二级间接访问" class="headerlink" title="3.1一级间接访问和 二级间接访问"></a>3.1一级间接访问和 二级间接访问</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">int</span> *p = &amp;i;</span><br><span class="line">     <span class="keyword">int</span> **q = &amp;p;</span><br><span class="line"></span><br><span class="line">     <span class="built_in">printf</span>(P, p); <span class="comment">// 0x7ffee92579b8</span></span><br><span class="line">     <span class="built_in">printf</span>(P, q); <span class="comment">// 0x7ffee92579b0</span></span><br><span class="line">     <span class="built_in">printf</span>(P, *q); <span class="comment">// 0x7ffee92579b8</span></span><br><span class="line">		 printt(D, i); <span class="comment">// 1 直接访问</span></span><br><span class="line">     <span class="built_in">printf</span>(D, *p); <span class="comment">// 1  一级间接访问</span></span><br><span class="line">     <span class="built_in">printf</span>(D, **q);<span class="comment">// 1 二级间接访问</span></span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-指针关系运算"><a href="#3-2-指针关系运算" class="headerlink" title="3.2 指针关系运算"></a>3.2 指针关系运算</h3><blockquote>
<p>当两个指针指向的是一块连续内存空间的时候， 比如两个指针指向同一个数组。在这种情况下，两个指针可以做一个关系上的比较；</p>
</blockquote>
<p><code>++ --</code></p>
<blockquote>
<p>++ – 运算实际上改变指针位置；</p>
</blockquote>
<h3 id="3-3-指针变量类型与指针变量大小"><a href="#3-3-指针变量类型与指针变量大小" class="headerlink" title="3.3  指针变量类型与指针变量大小"></a>3.3  指针变量类型与指针变量大小</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">int</span> * p;</span><br><span class="line"><span class="keyword">float</span> *q;</span><br><span class="line"><span class="keyword">double</span> *d;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(D, <span class="keyword">sizeof</span>(i)); <span class="comment">// 8</span></span><br><span class="line"><span class="built_in">printf</span>(D, <span class="keyword">sizeof</span>(p)); <span class="comment">// 8</span></span><br><span class="line"><span class="built_in">printf</span>(D, <span class="keyword">sizeof</span>(q)); <span class="comment">// 8</span></span><br><span class="line"><span class="built_in">printf</span>(D, <span class="keyword">sizeof</span>(d)); <span class="comment">// 8</span></span><br><span class="line"><span class="comment">// 结构体指针的大小也是8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">	不管指针是多少级的指针，不管指针是什么样的类型。指针在某个平台下所占的地址空间是确定的。那既然如此为何 要给指针变量加类型呢，比如 int *p, float *q.</span></span><br><span class="line"><span class="comment">	那是因为有 *p 取* 的操作，比如*q的时候，怎么就能知道去对应地址读取 4个字节呢？ 这个时候就要靠 指针变量的 变量类型加持了。所以这个变量类型之间的意义 就不尽相同了。</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> * s;</span><br><span class="line">s = &amp;i;</span><br><span class="line"><span class="built_in">printf</span>(D, *s); <span class="comment">// 这个时候，不知道要去读取 4个字节，所以结果不是1；</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="18-空指针与野指针"><a href="#18-空指针与野指针" class="headerlink" title="18. 空指针与野指针"></a>18. 空指针与野指针</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> * p = <span class="literal">NULL</span>;<span class="comment">// 指针被定义出来，还未决定指向哪里的时候，可以先指向NULL，系统上 0 号不分配给任何进程；把指针置为空是为了预防野指针；</span></span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-1-野指针"><a href="#4-1-野指针" class="headerlink" title="4.1 野指针"></a>4.1 野指针</h3><blockquote>
<p>当前这个指针的指向是不确定的，或者压根就没有指向；但是直接使用这个指针了。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%p --&gt; %d\n"</span>, p ,*p);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 0x7ffee67879d8---&gt;0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p; </span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%p --&gt; %d\n"</span>, p ,*p);</span><br><span class="line"></span><br><span class="line">	*p = <span class="number">1</span>; <span class="comment">// 段错误</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-1-1-如何杜绝野指针"><a href="#4-1-1-如何杜绝野指针" class="headerlink" title="4.1.1 如何杜绝野指针"></a>4.1.1 如何杜绝野指针</h4><blockquote>
<p>指针一经定义，就必须有一个明确的指向，没有暂时没有指向的话，就先指向NULL；</p>
</blockquote>
<h2 id="19-空类型"><a href="#19-空类型" class="headerlink" title="19. 空类型"></a>19. 空类型</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> * p = <span class="literal">NULL</span>; <span class="comment">// 即 空类型 void * 是一个百搭的类型，任何类型的指针值都可以赋值给它。void * 也可以把自己的值赋值给任何类型的指针；</span></span><br></pre></td></tr></table></figure>

<h3 id="5-1-空类型的使用场景"><a href="#5-1-空类型的使用场景" class="headerlink" title="5.1 空类型的使用场景"></a>5.1 空类型的使用场景</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> *<span class="title">memcpy</span><span class="params">(<span class="keyword">void</span> *dest, <span class="keyword">const</span> <span class="keyword">void</span> *src, <span class="keyword">size_t</span> n)</span></span>;</span><br></pre></td></tr></table></figure>



<h2 id="20-运算符优先级"><a href="#20-运算符优先级" class="headerlink" title="20. 运算符优先级"></a>20. 运算符优先级</h2><blockquote>
<p>上面优先级比下面高</p>
</blockquote>
<ul>
<li>后置++ –<ul>
<li>前置++ – 逻辑非 (!) * &amp;   // 同级别，优先级由右往左结合顺序， 离目标越近，优先级越高<ul>
<li>算术运算符<ul>
<li>关系运算符<ul>
<li>&amp;&amp;和｜｜<ul>
<li>赋值运算符</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li>同级别，优先级由右往左结合顺序， 离目标越近，优先级越高</li>
</ul>
<p>如 </p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;*pointer = &amp;(*pointer)</span><br><span class="line">*&amp;a = *(&amp;a)</span><br></pre></td></tr></table></figure>

<p><code>(*pointer)++ 不等于 *pointer++</code></p>
<p>(<em>pointer)++ 是先 做取</em>运算，得到的int类型自增， <em>pointer++ 则是 指针变量移位，然后再取</em>运算</p>
<p><code>*pointer++ 的含义</code></p>
<p>假设： pointer当前所存的地址是0x00000100</p>
<ul>
<li>若pointer 的指针变量基类型是 指向一个 int或实型（占4个字节），则pointer++ 等于 iptr + 1*4 = 0x00000104</li>
<li>若pointer 指向一个 字符型（占1个字节），则pointer++ 等于 iptr + 1*1 = 0x00000101</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">5</span>,<span class="number">11</span>,<span class="number">19</span>,<span class="number">21</span>,<span class="number">33</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">printf</span>(P, a); <span class="comment">// 0x7ffee0eeda20</span></span><br><span class="line">    p = a;</span><br><span class="line">    <span class="built_in">printf</span>(P, p); <span class="comment">// 0x7ffee0eeda20</span></span><br><span class="line">    <span class="built_in">printf</span>(D, *p); <span class="comment">//  5</span></span><br><span class="line">    <span class="built_in">printf</span>(D, *p++); <span class="comment">// 5</span></span><br><span class="line">    <span class="built_in">printf</span>(D, *p++); <span class="comment">// 11</span></span><br><span class="line">    <span class="built_in">printf</span>(D, *p);   <span class="comment">// 19</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">*p++ 是地址移动</span><br></pre></td></tr></table></figure>

<p>** 小结** </p>
<p>  指针和指针变量是不同的。指针是地址，指针变量就是一个普通的变量。<br><em>pointer指的是这个指针变量 所指向的那片内存空间里面的内容。<br>(</em>pointer)++ 不等于 *pointer++</p>
<h2 id="21-指针与数组"><a href="#21-指针与数组" class="headerlink" title="21. 指针与数组"></a>21. 指针与数组</h2><blockquote>
<p>数组名代表数组首元素的地址 （<em>数组名相当于指向数组第一个元素的指针</em>）；<br>数组名不是变量，不能给a赋值；<br><code>int *p = &amp;a[0];</code> <code>a++</code>是没有意义的（a只是个常量），但<code>p++</code>会引起p变化。<br>p可以指向数组最后一个元素以后的元素。<br>指针做加减运算时一定注意有效的范围；（指针理论上能够在内存中自由的漂移，很可能移除某一个数组的范围，有的时候就比较危险了）</p>
</blockquote>
<p><img src="./arr_1.png" alt=""></p>
<h3 id="7-1-数组名代表数组首元素的地址"><a href="#7-1-数组名代表数组首元素的地址" class="headerlink" title="7.1 数组名代表数组首元素的地址"></a>7.1 数组名代表数组首元素的地址</h3><blockquote>
<p>数组名是指向数组第一个元素的指针；</p>
</blockquote>
<ul>
<li>对于数组a[10], 数组名 a代表数组 a[10]中第一个元素a[0]的地址； 即  a 与 a[0]等价</li>
<li>注意： a是地址常量，不是变量，不能给a赋值；</li>
</ul>
<h3 id="7-2-创建一个匿名数组"><a href="#7-2-创建一个匿名数组" class="headerlink" title="7.2  创建一个匿名数组"></a>7.2  创建一个匿名数组</h3><blockquote>
<p>指针和数组的关系，其实就是一种引用方式而已。你的一维数组名和一级指针之间的关系其实除了一个是变量，一个是常量之外。完全可以等价代换。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p = (<span class="keyword">int</span> [<span class="number">3</span>])&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</span><br><span class="line">		<span class="built_in">printf</span>(D, p[i])</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-利用指针变量引用数组元素"><a href="#7-3-利用指针变量引用数组元素" class="headerlink" title="7.3 利用指针变量引用数组元素"></a>7.3 利用指针变量引用数组元素</h3><ul>
<li>若定义<ul>
<li>数组 int a[10]; 指针 int * pointer;</li>
</ul>
</li>
<li>则:<ul>
<li>pointer =a; 等价于pointer = &amp;a[0];</li>
</ul>
</li>
<li>数组访问<br>  pointer+ i; 等价于 a+i; 等价于 &amp;a[i];<br>  *(pointer+i);  等价于 *(a+i); 等价于a[i];</li>
<li>表示形式<br>  pointer[i] 等价于 *(pointer+i);</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">9</span>] = &#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">	p = a; <span class="comment">// a 是 数组的地址，</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);   <span class="comment">// 4</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p++);  <span class="comment">// 4    ++的含义是先使用p，然后再++</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);     <span class="comment">// 5</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *++p);   <span class="comment">// 6   前+ 和 后+ 跟js一样</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p[<span class="number">0</span>]); <span class="comment">// 因为p=a了，所以p[0] 即a[0]</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p[<span class="number">1</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p[<span class="number">2</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p[<span class="number">3</span>]);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p[<span class="number">4</span>]);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-抽象公式"><a href="#7-4-抽象公式" class="headerlink" title="7.4 抽象公式"></a>7.4 抽象公式</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> * p = a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a[i]: a[i] = *(a+i) = *(p+i) = p[i];</span></span><br><span class="line"><span class="comment">// &amp;a[i]: &amp;a[i] = a+i = p+i = &amp;p[i];</span></span><br><span class="line">p = a;</span><br></pre></td></tr></table></figure>

<h3 id="7-5-重置指针变量"><a href="#7-5-重置指针变量" class="headerlink" title="7.5 重置指针变量"></a>7.5 重置指针变量</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> *p = a;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(*a); i++)</span><br><span class="line">	<span class="built_in">scanf</span>(<span class="string">"%d/n"</span>, p++);</span><br><span class="line"></span><br><span class="line">p = a; <span class="comment">// 这里需要 重置一下 p的指针；不然会数组越界；</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(*a); i++)</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d"</span>, *p++);</span><br></pre></td></tr></table></figure>

<h3 id="7-6-需要注意的问题"><a href="#7-6-需要注意的问题" class="headerlink" title="7.6 需要注意的问题"></a>7.6 需要注意的问题</h3><blockquote>
<p><code>int * p = &amp;a[0];</code> , <code>* a++</code>是没有意义的（因为a是个常量），但<code>p++</code>会引起<code>p</code>变化；<code>* p</code>可以指向数组最后一个元素以后的元素；（因为p是内存中的一个指针），所以指针做加减运算时一定注意有效的范围。</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[<span class="number">5</span>],</span><br><span class="line"><span class="keyword">int</span> *iPtr = &amp;a[<span class="number">1</span>];</span><br><span class="line">iPtr--;     <span class="comment">// 指向&amp;a[0]</span></span><br><span class="line">*iPtr = <span class="number">3</span>;  <span class="comment">// a[0] = 3</span></span><br><span class="line">iPtr--;     <span class="comment">// 指向&amp;a[-1], dangerous</span></span><br><span class="line">*iPtr = <span class="number">6</span>;  <span class="comment">// (damage)  对内存造成损坏，影响内存中其他的变量</span></span><br></pre></td></tr></table></figure>

<p>示例</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a[<span class="number">5</span>] = &#123;<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">0</span>&#125;;</span><br><span class="line">    <span class="keyword">int</span> *p = &amp;a[<span class="number">3</span>];</span><br><span class="line">    *p = <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p++); <span class="comment">// 100</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p--); <span class="comment">// 0</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *--p); <span class="comment">// 8</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="7-7-指向二维数组的指针"><a href="#7-7-指向二维数组的指针" class="headerlink" title="7.7 指向二维数组的指针"></a>7.7 指向二维数组的指针</h3><h4 id="7-7-1-遍历数组元素"><a href="#7-7-1-遍历数组元素" class="headerlink" title="7.7.1 遍历数组元素"></a>7.7.1 遍历数组元素</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">21</span>,<span class="number">23</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> *p;</span><br><span class="line">	<span class="keyword">for</span> (p= &amp;a[<span class="number">0</span>][<span class="number">0</span>]   ;p &lt; &amp;a[<span class="number">0</span>][<span class="number">0</span>]+<span class="number">12</span>; p++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 0x7ffeefbff4f0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff4f4</span></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff4f8</span></span><br><span class="line"><span class="comment">// 5</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff4fc</span></span><br><span class="line"><span class="comment">// 7</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff500</span></span><br><span class="line"><span class="comment">// 9</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff504</span></span><br><span class="line"><span class="comment">// 11</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff508</span></span><br><span class="line"><span class="comment">// 13</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff50c</span></span><br><span class="line"><span class="comment">// 15</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff510</span></span><br><span class="line"><span class="comment">// 17</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff514</span></span><br><span class="line"><span class="comment">// 19</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff518</span></span><br><span class="line"><span class="comment">// 21</span></span><br><span class="line"><span class="comment">// 0x7ffeefbff51c</span></span><br><span class="line"><span class="comment">// 23</span></span><br></pre></td></tr></table></figure>

<p>如上所示， 会将这个数组的内容都打印出来了，因为二维数组会被拉平存储到一段连续的内存空间当中</p>
<h4 id="7-7-2-二维数组行列指针"><a href="#7-7-2-二维数组行列指针" class="headerlink" title="7.7.2 二维数组行列指针"></a>7.7.2 二维数组行列指针</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> M 3</span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> N 4</span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> D <span class="meta-string">"%d\n"</span></span></span><br><span class="line"> <span class="meta">#<span class="meta-keyword">define</span> P <span class="meta-string">"%p\n"</span></span></span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> i, j;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"&amp;a = %p, &amp;a+1 = %p\n"</span>, &amp;a, &amp;a+<span class="number">1</span>);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%&amp;a[0][0] = %p, &amp;a[1][0] = %p\n"</span>, &amp;a[<span class="number">0</span>][<span class="number">0</span>], &amp;a[<span class="number">1</span>][<span class="number">0</span>]);</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;M;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;N;j++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="built_in">printf</span>(<span class="string">"%p---&gt;%d\n"</span>, &amp;a[i][j], a[i][j]);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     &#125;</span><br><span class="line"> </span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// &amp;a = 0x7ffefe385370,            &amp;a+1 = 0x7ffefe3853a0</span></span><br><span class="line"><span class="comment">// %&amp;a[0][0] = 0x7ffefe385370, &amp;a[1][0] = 0x7ffefe385380</span></span><br><span class="line"><span class="comment">// 0x7ffefe385370---&gt;1</span></span><br><span class="line"><span class="comment">// 0x7ffefe385374---&gt;2</span></span><br><span class="line"><span class="comment">// 0x7ffefe385378---&gt;3</span></span><br><span class="line"><span class="comment">// 0x7ffefe38537c---&gt;4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffefe385380---&gt;5</span></span><br><span class="line"><span class="comment">// 0x7ffefe385384---&gt;6</span></span><br><span class="line"><span class="comment">// 0x7ffefe385388---&gt;7</span></span><br><span class="line"><span class="comment">// 0x7ffefe38538c---&gt;8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffefe385390---&gt;9</span></span><br><span class="line"><span class="comment">// 0x7ffefe385394---&gt;10</span></span><br><span class="line"><span class="comment">// 0x7ffefe385398---&gt;11</span></span><br><span class="line"><span class="comment">// 0x7ffefe38539c---&gt;12</span></span><br></pre></td></tr></table></figure>

<p>小结：</p>
<blockquote>
<p>所以a除了是二维数组的数组名（地址常量）之外，在使用上比较偏向一个指向行指针。</p>
</blockquote>
<h4 id="7-7-3-能够接收二维数组指针的指针变量"><a href="#7-7-3-能够接收二维数组指针的指针变量" class="headerlink" title="7.7.3 能够接收二维数组指针的指针变量"></a>7.7.3 能够接收二维数组指针的指针变量</h4><p>引子</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> i=<span class="number">0</span>, j=<span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line">     p  =&amp;a[i][j]; <span class="comment">// *(a+0) , *a</span></span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">12</span>; i++,p++) <span class="comment">// for (i=0; i&lt;12; i++)</span></span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d "</span>, *p);  <span class="comment">//     printf("%d ", p[i]);</span></span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> <span class="comment">// 1 2 3 4 5 6 7 8 9 10 11 12</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<h4 id="7-7-4-另一段程序"><a href="#7-7-4-另一段程序" class="headerlink" title="7.7.4 另一段程序"></a>7.7.4 另一段程序</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">11</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">17</span>,<span class="number">19</span>,<span class="number">21</span>,<span class="number">23</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> (*p)[<span class="number">4</span>], i,j;</span><br><span class="line">	p = a;</span><br><span class="line">  <span class="built_in">cin</span>&gt;&gt;i&gt;&gt;j;    <span class="comment">// i&lt;3 代表行号， j&lt;4 代表列号；</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; setw(<span class="number">4</span>) &lt;&lt; *(*(p+i)+j); <span class="comment">// 正误判断： 访问元素 a[i][j]</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>程序分析</em></p>
<p>从 p = a 开始</p>
<ul>
<li><p>a相当于指向a[3][4]的“第一个元素”的指针；</p>
</li>
<li><p>所谓“第一个元素”是指一个“包含4个int型元素的一维数组”；</p>
</li>
<li><p>所以，a相当于一个“包含4个int型元素的一维数组”的地址；</p>
</li>
<li><p>因此，p的基类型应该是： “包含4个int型元素的一维数组”</p>
</li>
<li><p>变量定义语句的语法为： int (*p)[4];</p>
</li>
</ul>
<p>*p(数组)</p>
<p>p -&gt; |    (<em>p)[0] | (</em>p)[1] | (<em>p)[2] | (</em>p)[3] |</p>
<h4 id="7-7-5-利用指针变量引用多维数组中的数组"><a href="#7-7-5-利用指针变量引用多维数组中的数组" class="headerlink" title="7.7.5 利用指针变量引用多维数组中的数组"></a>7.7.5 利用指针变量引用多维数组中的数组</h4><p><em>(</em>(p+i)+j)是什么？</p>
<ul>
<li><p>p 是指向一个“包含4个int型元素的一维数组”；</p>
</li>
<li><p>p+i 是第i+1个“包含4个int型元素的一维数组”的地址;</p>
</li>
<li><p>p+i 等价于&amp;a[i]；</p>
</li>
<li><p>*(p+i)等价于a[i]；</p>
</li>
<li><p>*(p+i)+j 等价于 a[i]+j; // 这里把a[i] 当作一个指针来看 因此， a[i]+j 等价于 &amp;a[i][j];</p>
</li>
<li><p><em>(</em>(p+i)+j) 等价于 a[i][j];</p>
</li>
</ul>
<h3 id="7-8-指针与字符数组"><a href="#7-8-指针与字符数组" class="headerlink" title="7.8  指针与字符数组"></a>7.8  指针与字符数组</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">char</span> s[] = <span class="string">"i love coding!"</span>; <span class="comment">// codeing</span></span><br><span class="line">		 <span class="keyword">char</span> *p = s+<span class="number">7</span>;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%s\n"</span>, s+<span class="number">7</span>);</span><br><span class="line">		 <span class="built_in">puts</span>(s);</span><br><span class="line">		 <span class="built_in">puts</span>(p); <span class="comment">// puts(p) 相当于把p的起始位置拿进来， 依次输出，直到碰到\0 为止；</span></span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// coding!</span></span><br><span class="line"><span class="comment">// i love coding!</span></span><br><span class="line"><span class="comment">// coding!</span></span><br></pre></td></tr></table></figure>

<h4 id="7-8-1-字符数组拼接"><a href="#7-8-1-字符数组拼接" class="headerlink" title="7.8.1  字符数组拼接"></a>7.8.1  字符数组拼接</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">char</span> str[] = <span class="string">"hello"</span>;</span><br><span class="line">	<span class="comment">// str = "world"  false</span></span><br><span class="line">	<span class="built_in">strcpy</span>(str, <span class="string">"world123"</span>); <span class="comment">// 覆盖原来数组空的每一项</span></span><br><span class="line">	<span class="built_in">puts</span>(str); <span class="comment">// world123</span></span><br><span class="line">	<span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// world123</span></span><br></pre></td></tr></table></figure>

<h4 id="7-8-2-字符串长度和字符串字节数"><a href="#7-8-2-字符串长度和字符串字节数" class="headerlink" title="7.8.2 字符串长度和字符串字节数"></a>7.8.2 字符串长度和字符串字节数</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> str[] = <span class="string">"hello"</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d ,%d"</span>, <span class="keyword">sizeof</span>(str), <span class="built_in">strlen</span>(str));  <span class="comment">// 6, 5</span></span><br></pre></td></tr></table></figure>

<h4 id="7-8-3-字符指针跟字符数组的区别"><a href="#7-8-3-字符指针跟字符数组的区别" class="headerlink" title="7.8.3 字符指针跟字符数组的区别"></a>7.8.3 字符指针跟字符数组的区别</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span> *str = <span class="string">"hello"</span>;</span><br><span class="line"><span class="keyword">sizeof</span>(str); <span class="comment">// 8   指针变量不分类型 ， 64位系统下长度都是8个字节， 32位系统为4个字节；</span></span><br><span class="line"><span class="built_in">strlen</span>(str); <span class="comment">// 5   字符串长度</span></span><br><span class="line"><span class="built_in">strcpy</span>(str, <span class="string">"world"</span>); <span class="comment">// 段错误， 字符指针跟字符数组的区别就在于此。因为str 指向的是一个 字符串常量的地址， strcpy是一个覆盖写操作，显然，企图去更改一个常量是无效的。之所以是常量，是串常量，这个串在当前存储位置是特殊的。在使用上不允许被改变和覆盖。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确的做法</span></span><br><span class="line">str = <span class="string">"world123"</span>; <span class="comment">//更改指针指向；</span></span><br><span class="line"><span class="built_in">puts</span>(str);</span><br></pre></td></tr></table></figure>

<h2 id="22-字符串与指针"><a href="#22-字符串与指针" class="headerlink" title="22. 字符串与指针"></a>22. 字符串与指针</h2><blockquote>
<p>指向字符串的指针</p>
</blockquote>
<ul>
<li>指向字符串的指针变量： char a[10]; char *p; p=a;</li>
</ul>
<p>数组和字符串太接近了。那怎么去定义指向字符串的指针呢？也很简单， 我首先定义一个字符数组，它就是用来存放字符串的。 我们以前讲过字符串和字符数组其实区别就在于有没有最后的反斜杠零， 本质上都是字符数组。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> *p = &amp;a;</span><br><span class="line">	<span class="keyword">char</span> c[<span class="number">6</span>] = &#123;<span class="string">'h'</span>, <span class="string">'e'</span>, <span class="string">'l'</span>, <span class="string">'l'</span>, <span class="string">'o'</span>,<span class="string">'\0'</span>&#125;;</span><br><span class="line">	<span class="keyword">char</span> *s = c;</span><br><span class="line">	<span class="built_in">printf</span>(P, s); <span class="comment">// 0x7ffee2066aba</span></span><br><span class="line">	<span class="built_in">printf</span>(P, c); <span class="comment">// 0x7ffee2066aba</span></span><br><span class="line">	<span class="built_in">printf</span>(S, s); <span class="comment">// hello</span></span><br><span class="line">	<span class="built_in">printf</span>(S, c); <span class="comment">// hello </span></span><br><span class="line">	s++;</span><br><span class="line">	<span class="built_in">printf</span>(S, s); <span class="comment">// ello</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-1-字符串指针举例"><a href="#8-1-字符串指针举例" class="headerlink" title="8.1  字符串指针举例"></a>8.1  字符串指针举例</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">char</span> <span class="built_in">buffer</span>[<span class="number">10</span>] = <span class="string">"ABC"</span>;</span><br><span class="line">	<span class="keyword">char</span> *pc;</span><br><span class="line">	pc = <span class="string">"hello"</span>; <span class="comment">// 虽然 hello赋值给了pc，但是却不能通过pc去改变hello， 因为hello是常量，常量在内存中被放在特殊的地方了；这片区域不允许修改；</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; pc &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// hello</span></span><br><span class="line">	pc++;                  </span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; pc &lt;&lt; <span class="built_in">endl</span>;  <span class="comment">// ello</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; *pc &lt;&lt; <span class="built_in">endl</span>; <span class="comment">// e</span></span><br><span class="line">	pc = <span class="built_in">buffer</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; pc;           <span class="comment">// ABC</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="23-const与指针"><a href="#23-const与指针" class="headerlink" title="23. const与指针"></a>23. const与指针</h2><blockquote>
<p>const是把某些内容常量化</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> a;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> pi = <span class="number">3.14</span>; <span class="comment">// 约束 pi这个变量值 一直保持是 3.14不变；这种语法实际是在定一个变量，只是把变量的值常量化了。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> a;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 常量指针， const int *p; 和 int const *p; 类型在前面或者后面 关系不大，表示相同的意思 </span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *p;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> *p;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指针常量</span></span><br><span class="line"><span class="keyword">int</span> *<span class="keyword">const</span> p;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *<span class="keyword">const</span> p;</span><br></pre></td></tr></table></figure>

<h3 id="9-1-变量值常量化"><a href="#9-1-变量值常量化" class="headerlink" title="9.1  变量值常量化"></a>9.1  变量值常量化</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> a;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">float</span> pi = <span class="number">3.14</span>; <span class="comment">// 约束 pi这个变量值 一直保持是 3.14不变；这种语法实际是在定一个变量，只是把变量的值常量化了。</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> a;</span><br></pre></td></tr></table></figure>

<h3 id="9-2-常量指针"><a href="#9-2-常量指针" class="headerlink" title="9.2  常量指针"></a>9.2  常量指针</h3><blockquote>
<p>指针的指向可以发生变化，但是指针所指向当前的那块内存的值是不可以发生变化的；</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 常量指针， const int *p; 和 int const *p; 类型在前面或者后面 关系不大，表示相同的意思</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *p;</span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> *p;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">float</span> pi = <span class="number">3.14</span>;</span><br><span class="line">  <span class="comment">//   float *p = &amp;pi;  // 警告： initialization discards ‘const’ qualifier from pointer target type</span></span><br><span class="line">	 <span class="keyword">const</span> <span class="keyword">float</span> *p = &amp;pi;</span><br><span class="line">    *p = <span class="number">3.14159</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, pi);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%f\n"</span>, *p);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>举例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">open</span><span class="params">(<span class="keyword">const</span> chart * pathname, <span class="keyword">int</span> flags)</span></span>; <span class="comment">// 常量指针，保护pathname值不被篡改</span></span><br></pre></td></tr></table></figure>

<h3 id="9-3-指针常量"><a href="#9-3-指针常量" class="headerlink" title="9.3  指针常量"></a>9.3  指针常量</h3><p><code>int *const p;</code></p>
<blockquote>
<p>指针常量指 指针的指向永远不能发生变化；但是指针指向的值可以有变化；</p>
</blockquote>
<h3 id="9-4-如何区分到底是-常量指针，还是指针常量"><a href="#9-4-如何区分到底是-常量指针，还是指针常量" class="headerlink" title="9.4  如何区分到底是 常量指针，还是指针常量"></a>9.4  如何区分到底是 常量指针，还是指针常量</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> *p; <span class="comment">// 如果先碰到const关键字，就把常量先念出来</span></span><br><span class="line"><span class="keyword">int</span> <span class="keyword">const</span> *p; </span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> *<span class="keyword">const</span> p; <span class="comment">// 如果先看到 *，就把指针先念出来</span></span><br></pre></td></tr></table></figure>

<h3 id="9-5-两个const修饰"><a href="#9-5-两个const修饰" class="headerlink" title="9.5  两个const修饰"></a>9.5  两个const修饰</h3><p><code>const int *const p;</code></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">int</span> i = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">int</span> j = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> * <span class="keyword">const</span> p = &amp;i;</span><br><span class="line"></span><br><span class="line">	p = &amp;j; <span class="comment">// warning 因为p是只读的，不能更改指向；</span></span><br><span class="line">	*p = <span class="number">10</span>; <span class="comment">// warning 因为*p 也是只读的；</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




<h3 id="9-6-指向符号常量的指针"><a href="#9-6-指向符号常量的指针" class="headerlink" title="9.6  指向符号常量的指针"></a>9.6  指向符号常量的指针</h3><p><code>const int * p;</code></p>
<p>当把p定义成一个指向符号常量的指针的时侯， 然后再让这个p指向什么东西， 它所指向的那个东西就不能被修改了。我们就不能通过p再去修改 它所指向的那个东西了。</p>
<ul>
<li>深坑啊,要留意</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> a = <span class="number">78</span>;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> b = <span class="number">28</span>;</span><br><span class="line">	<span class="keyword">int</span> c = <span class="number">18</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> * p1 = &amp;a;</span><br><span class="line">	*p1 = <span class="number">58</span>;   <span class="comment">// (error, *p不能被赋值)</span></span><br><span class="line">	p1 = &amp;b;    <span class="comment">// （可以给 p1 重新赋值）</span></span><br><span class="line">	*p1 = <span class="number">68</span>;    <span class="comment">// (error, *p不能被赋值)</span></span><br><span class="line">	<span class="built_in">printf</span>(D, *p1);  <span class="comment">// 28</span></span><br><span class="line">	p1 = &amp;c;      <span class="comment">// （可以给 p1 重新赋值）</span></span><br><span class="line">	*p1 = <span class="number">88</span>;     <span class="comment">// (error, *p不能被赋值)</span></span><br><span class="line">	<span class="built_in">printf</span>(D, *p1)  <span class="comment">// 18</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-7-再谈一维数组的地址"><a href="#9-7-再谈一维数组的地址" class="headerlink" title="9.7 再谈一维数组的地址"></a>9.7 再谈一维数组的地址</h3><p><em>数组名相当于指向数组第一个元素的指针</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>&#125;;</span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;a&lt;&lt;<span class="built_in">endl</span>;   <span class="comment">// a[1]的地址，管辖范围只有a[1]</span></span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;&amp;a&lt;&lt;<span class="built_in">endl</span>;  <span class="comment">// a[1]的地址，管辖范围是整个a的内存空间</span></span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;a+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>; <span class="comment">// a[2]的地址</span></span><br><span class="line">	<span class="built_in">cout</span>&lt;&lt;&amp;a+<span class="number">1</span>&lt;&lt;<span class="built_in">endl</span>; <span class="comment">// 跳出了a的内存范围，理论上是 a[5]的地址</span></span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">printf</span>(P, a);           <span class="comment">// 0x7ffee42adab0</span></span><br><span class="line">	<span class="built_in">printf</span>(P, a+<span class="number">1</span>);         <span class="comment">// 0x7ffee42adab4   跨越4个字节</span></span><br><span class="line">	<span class="built_in">printf</span>(P, &amp;a);          <span class="comment">// 0x7ffee42adab0</span></span><br><span class="line">	<span class="built_in">printf</span>(P, &amp;a+<span class="number">1</span>);        <span class="comment">// 0x7ffee42adac0  // 跨越16个字节</span></span><br><span class="line">	<span class="built_in">printf</span>(P, *(&amp;a));       <span class="comment">// 0x7ffee42adab0</span></span><br><span class="line">	<span class="built_in">printf</span>(P, *(&amp;a) + <span class="number">1</span>);   <span class="comment">// 0x7ffee42adab4</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>根据C语言的规范 *(&amp;a)  等同于 a; 即a数组第一个元素的内存地址<br>*(&amp;a) + 1 等同于 a+1; 即a数组第二个元素的内存地址</p>
<p>&amp;a的管辖范围是整个数组a。c语言规范中，当它前面出现*时，管辖范围降级，即堕落成了 a[0]的地址；</p>
<h3 id="9-8-总结"><a href="#9-8-总结" class="headerlink" title="9.8  总结"></a>9.8  总结</h3><blockquote>
<p>数组名相当于指向数组第一个元素的指针</p>
</blockquote>
<ul>
<li>&amp;运算符 - 升级</li>
</ul>
<p>若 a 是指向数组第一个元素的指针，即a相当于 &amp;a[0];</p>
<ul>
<li>&amp;a是“指向数组”的指针；&amp;a+1将跨越16个字节；</li>
<li>&amp;a相当于管辖范围 “上升” 了一级;</li>
</ul>
<ul>
<li>*运算符 - 降级<br>*a是数组的第一个元素a[0]；即 *a等价于a[0]；</li>
</ul>
<ul>
<li>*a 相当于管辖范围“下降”了一级；      </li>
</ul>
<h3 id="9-9-指向二维数组的指针"><a href="#9-9-指向二维数组的指针" class="headerlink" title="9.9  指向二维数组的指针"></a>9.9  指向二维数组的指针</h3><ul>
<li><p>二维数组的定义</p>
<ul>
<li>二维数组a[3][4]包含三个元素： a[0] a[1] a[2]</li>
<li>每个元素都是一个“包含四个整型元素”的数组</li>
</ul>
</li>
</ul>
<p>| 1 a[0][0]  | 2 a[0][1] | 3 a[0][2] | 4 a[0][3] |<br>| 5 a[1][0]  | 6 a[1][1] | 7 a[1][2] | 8 a[1][3] |<br>| 9 a[2][0]  | 10 a[2][1]| 11 a[2][2]| 12 a[2][3]| </p>
<pre><code>- 二维数组的第一个元素是a[0];
- a[0]是一个“包含四个整形元素”的一维数组；</code></pre><p><img src="./pointer_1.png" alt=""></p>
<p>推论</p>
<p>a 与 &amp;a[0] 等价<br>a[0] 与  &amp;a[0][0] 等价<br>a[0] 与 <em>a 等价<br>a[0][0] 与 *</em>a 等价</p>
<h3 id="9-10-总结"><a href="#9-10-总结" class="headerlink" title="9.10  总结"></a>9.10  总结</h3><p>三条规律<br>1） 数组名相当于指向数组第一个元素的指针；<br>2） &amp;E相当于把E的管辖范围上升了一个级别；<br>3） *E相当于把E的管辖范围下降了一个级别；</p>
<h2 id="24-指针与函数"><a href="#24-指针与函数" class="headerlink" title="24. 指针与函数"></a>24. 指针与函数</h2><h3 id="10-1-指针用作函数参数"><a href="#10-1-指针用作函数参数" class="headerlink" title="10.1 指针用作函数参数"></a>10.1 指针用作函数参数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Rank</span><span class="params">(<span class="keyword">int</span> *q1, <span class="keyword">int</span> *q2)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> temp;</span><br><span class="line">    <span class="keyword">if</span> (*q1 &lt; *q2)&#123;</span><br><span class="line">        temp = *q1;</span><br><span class="line">        *q1 = *q2;</span><br><span class="line">        *q2 = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a, b, *p1, *p2;</span><br><span class="line">    <span class="built_in">scanf</span>(a);</span><br><span class="line">    <span class="built_in">scanf</span>(b);</span><br><span class="line">    p1 = &amp;a; p2 = &amp;b;</span><br><span class="line">    Rank(p1, p2); <span class="comment">// 指针传递，即地址传递</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, b);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-2-将数组名作为实参"><a href="#10-2-将数组名作为实参" class="headerlink" title="10.2 将数组名作为实参"></a>10.2 将数组名作为实参</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> total = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;n; i++)&#123;</span><br><span class="line">		total += *p++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, total); <span class="comment">// 6</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">3</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line">	sum(a, <span class="number">3</span>); <span class="comment">// 将数组名作为实参赋给指针型形参</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="10-3-“数组名”-做形参"><a href="#10-3-“数组名”-做形参" class="headerlink" title="10.3  “数组名” 做形参"></a>10.3  “数组名” 做形参</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// c++ 编译器将形参数组名 作为 指针变量来处理！</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> n)</span></span>&#123;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span><span class="number">-1</span>; i++) &#123;</span><br><span class="line">		*(<span class="built_in">array</span>+<span class="number">1</span>) = *<span class="built_in">array</span> + *(<span class="built_in">array</span>+<span class="number">1</span>); <span class="comment">// 数组从第二项开始，每一项都等于自己加上前一项的和；</span></span><br><span class="line">		<span class="built_in">array</span>++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> *<span class="built_in">array</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum(a, <span class="number">10</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当程序里，把一个指针变量或者是数组的名字，传递给一个函数的时候，是挺危险的，因为这个函数拿到的，是这个变量或者是数组的地址， 它拿到了地址，它就可以直接对地址里面存放的这些值，进行肆意的修改，那有没有一种办法，可以呢 使我既能够把这个地址传递给某个函数，又能够确保不让这个函数随意的修改这片地址里面的值呢？ </p>
<ul>
<li>如何 “限制” 指针的功能<ul>
<li>如何“限制”指针实参的功能</li>
</ul>
</li>
</ul>
<h3 id="10-4-即指向符号常量的指针"><a href="#10-4-即指向符号常量的指针" class="headerlink" title="10.4  即指向符号常量的指针"></a>10.4  即指向符号常量的指针</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sum</span><span class="params">(<span class="keyword">const</span> <span class="keyword">int</span> <span class="built_in">array</span>[], <span class="keyword">int</span> n)</span></span>&#123; <span class="comment">// 补充为const</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span><span class="number">-1</span>; i++) &#123;</span><br><span class="line">		*(<span class="built_in">array</span>+<span class="number">1</span>) = *<span class="built_in">array</span> + *(<span class="built_in">array</span>+<span class="number">1</span>); <span class="comment">//  array变成常量之后，无法修改</span></span><br><span class="line">		<span class="built_in">array</span>++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> *<span class="built_in">array</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">10</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>&#125;;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, sum(a, <span class="number">10</span>));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>符号常量声明语句</p>
<ol>
<li>const 数组类型 常量名 = 常量值；</li>
<li>数据类型 const 常量名 = 常量值；</li>
</ol>
<h3 id="10-5-指针用作函数返回值"><a href="#10-5-指针用作函数返回值" class="headerlink" title="10.5  指针用作函数返回值"></a>10.5  指针用作函数返回值</h3><p>函数的返回值可以是多种类型</p>
<ol>
<li>返回整形数据的函数<br> <code>int max(int x, int y);</code></li>
<li>返回指针类型数据的函数<br> <code>int *min(int x, int y)</code><ul>
<li>函数名字前面表示函数的类型 *</li>
</ul>
</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// int arr[][4] 除了这么定义，还可以 int *(arr)[4]</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">get</span><span class="params">(<span class="keyword">int</span> arr[][<span class="number">4</span>], <span class="keyword">int</span> n, <span class="keyword">int</span> m)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *pt;</span><br><span class="line">	pt = *(arr+n<span class="number">-1</span>) + m<span class="number">-1</span>;</span><br><span class="line">	<span class="keyword">return</span> (pt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> a[<span class="number">4</span>][<span class="number">4</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">16</span>&#125;;</span><br><span class="line">	<span class="keyword">int</span> *p;</span><br><span class="line">	p = <span class="built_in">get</span>(a, <span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>分析一下返回结果， 又一个需要注意的深坑</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">getInt1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> value1 = <span class="number">20</span>;</span><br><span class="line">	<span class="keyword">return</span> &amp;value1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p;</span><br><span class="line">	p = getInt1();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p); <span class="comment">// 这里会打印未知数，也可能会打印20；为什么呢，因为随着getInt1的运行时完毕，导致它函数内部的所有引用被释放了。所以返回的地址&amp;value1 指向的内存空间被释放掉了；所以谁也不会知道这个地址现在存放的是个啥，如果该块内存没有被新写入值，那么还是20；新写入的话，那就是新的未知量了；</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>验证</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">getInt1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> value1 = <span class="number">20</span>;</span><br><span class="line">	<span class="keyword">return</span> &amp;value1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">getInt2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> value2 = <span class="number">30</span>;</span><br><span class="line">	<span class="keyword">return</span> &amp;value2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p, *q;</span><br><span class="line">	p = getInt1();</span><br><span class="line">	q = getInt2();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);  <span class="comment">// 这里大概率会是30</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>那既然如此，有什么办法解决这个问题</p>
<ul>
<li>静态局部变量</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">getInt1</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> value1 = <span class="number">20</span>;</span><br><span class="line">	<span class="keyword">return</span> &amp;value1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> *<span class="title">getInt2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">static</span> <span class="keyword">int</span> value2 = <span class="number">30</span>;</span><br><span class="line">	<span class="keyword">return</span> &amp;value2;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> *p, *q;</span><br><span class="line">	p = getInt1();</span><br><span class="line">	q = getInt2();</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);  <span class="comment">// 20</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *q);  <span class="comment">// 30</span></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>什么是静态局部变量</li>
</ul>
<p>** 静态局部变量 ** </p>
<blockquote>
<p>函数中局部变量的值在函数调用结束后不消失而保留原值</p>
</blockquote>
<p>即其占用的存储单元不释放，在下一次该函数调用时，仍可以继续使用该变量；</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">function</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> a = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> b = <span class="number">0</span>;  <span class="comment">// 有点像 hooks，只初始化一次，后续不再重新将其赋值为0；</span></span><br><span class="line">    a = a+<span class="number">1</span>;</span><br><span class="line">    b = b+<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, b);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i =<span class="number">3</span>; i&lt;<span class="number">3</span>;i--)&#123;</span><br><span class="line">        function();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<ul>
<li>小结</li>
</ul>
<p>指针与函数</p>
<pre><code>指针用做函数参数
    函数拿到地址可对其所指内容进行修改；
    可以使用const来“限制”指针的功能；
指针用做函数返回值
    必须确保函数返回的地址是有意义的；
    返回全局变量或静态局部变量；</code></pre><h2 id="25-指针数组和数组指针"><a href="#25-指针数组和数组指针" class="headerlink" title="25. 指针数组和数组指针"></a>25. 指针数组和数组指针</h2><h3 id="11-1-数组指针"><a href="#11-1-数组指针" class="headerlink" title="11.1 数组指针"></a>11.1 数组指针</h3><blockquote>
<p>归根结底是一个指针，是指向数组的指针。</p>
</blockquote>
<p>【存储类型】 数据类型 （*指针名）【下标】 = 值；</p>
<p>如： <code>int (*p)[3]; ---&gt; type name  ----&gt;  int[3] *p</code></p>
<p>解析：</p>
<blockquote>
<p>定义一个指针变量 p, 用来指向 <code>int[3]</code> 类型的元素的起始位置。原来 <code>int * p</code> 的时候，<code>p+1</code> 的操作是移动一个 <code>int</code> 的大小。如果p的类型 变成了 <code>int [3]</code>的话，<code>p+1</code>的操作是一下移动三个 int 元素的大小。所以数组指针是在某种 大小的数组中进行移动。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> i=<span class="number">0</span>, j=<span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> *p = *a;</span><br><span class="line">     <span class="keyword">int</span> (*q)[N]= a;</span><br><span class="line"> </span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%p %p\n"</span>, a, a+<span class="number">1</span>);</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%p %p\n\n"</span>, q, q+<span class="number">1</span>);</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">for</span> (i =<span class="number">0</span>; i&lt;M; i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;N;j++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="built_in">printf</span>(<span class="string">"%p -&gt; %d\n"</span>, *(a+i)+j, *(*(a+i)+j));</span><br><span class="line">            <span class="comment">//  printf("%p -&gt; %d\n", *(q+i)+j, *(*(q+i)+j)); // a 和 q现在是等价的，区别只是一个是常量，一个是变量；</span></span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad1f0 0x7ffd6f5ad200</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad1f0 0x7ffd6f5ad200</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad1f0 -&gt; 1</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad1f4 -&gt; 2</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad1f8 -&gt; 3</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad1fc -&gt; 4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad200 -&gt; 5</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad204 -&gt; 6</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad208 -&gt; 7</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad20c -&gt; 8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad210 -&gt; 9</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad214 -&gt; 10</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad218 -&gt; 11</span></span><br><span class="line"><span class="comment">// 0x7ffd6f5ad21c -&gt; 12</span></span><br></pre></td></tr></table></figure>

<h3 id="11-2-指针数组"><a href="#11-2-指针数组" class="headerlink" title="11.2 指针数组"></a>11.2 指针数组</h3><blockquote>
<p>归根结底是一个数组</p>
</blockquote>
<p>【存储类型】 数据类型 * 数组名 【长度】</p>
<p>如： <code>int * arr[3]; ---&gt; TYPE NAME ---&gt; int *[3] arr;</code></p>
<h3 id="11-3-指针数组与数组指针的区别"><a href="#11-3-指针数组与数组指针的区别" class="headerlink" title="11.3 指针数组与数组指针的区别"></a>11.3 指针数组与数组指针的区别</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i, k, j;</span><br><span class="line">  <span class="comment">//  指针数组</span></span><br><span class="line">  <span class="keyword">char</span> *name[<span class="number">5</span>] = &#123;<span class="string">"Follow me"</span>, <span class="string">"Basic"</span>, <span class="string">"Great"</span>, <span class="string">"Fortran"</span>, <span class="string">"Computer"</span>&#125;;</span><br><span class="line">  <span class="keyword">char</span> *tmp;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span> - <span class="number">1</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    k = i;</span><br><span class="line">    <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; <span class="number">5</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">strcmp</span>(name[k], name[j]) &gt; <span class="number">0</span>)</span><br><span class="line">      &#123;</span><br><span class="line">        k = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (k != i)</span><br><span class="line">    &#123;</span><br><span class="line">      tmp = name[i];</span><br><span class="line">      name[i] = name[k];</span><br><span class="line">      name[k] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">puts</span>(name[i]);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="26-多级指针"><a href="#26-多级指针" class="headerlink" title="26 .多级指针"></a>26 .多级指针</h2><p><img src="./point_01.png" alt=""></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Line1 <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">Line2 <span class="keyword">int</span> *p = &amp;num</span><br><span class="line">Line3 <span class="keyword">int</span> *p1 = p;</span><br><span class="line">Line4 <span class="keyword">int</span> **p2 = &amp;p1;</span><br><span class="line">Line5 <span class="keyword">int</span> ***p3 = &amp;p2;</span><br></pre></td></tr></table></figure>

<p>多级指针的本质，只是C语言的一个书写规范<br>，事实上任何指针都可以保存任何地址；</p>
<ul>
<li>多级指针的存储的值的推理过程</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Line1 <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">Line2 <span class="keyword">int</span> *p = &amp;num</span><br><span class="line">Line3 <span class="keyword">int</span> *p1 = p;</span><br><span class="line">Line4 <span class="keyword">int</span> **p2 = &amp;p1;</span><br><span class="line">Line5 <span class="keyword">int</span> ***p3 = &amp;p2;</span><br></pre></td></tr></table></figure>

<h1 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h1><ol>
<li>函数的定义</li>
<li>函数的传参</li>
<li>函数的调用 （嵌套和递归）</li>
<li>函数与数组</li>
<li>函数与指针 （指针函数， 函数指针， 函数指针数组）</li>
</ol>
<h2 id="27-函数的定义"><a href="#27-函数的定义" class="headerlink" title="27. 函数的定义"></a>27. 函数的定义</h2><p>  数据类型  函数名 （【数据类型 形参名 。。。】）</p>
<blockquote>
<p>函数的类型是指 函数的返回值的数据类型</p>
</blockquote>
<h3 id="1-1-1-main函数"><a href="#1-1-1-main函数" class="headerlink" title="1.1.1 main函数"></a>1.1.1 main函数</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  argc： 参数计数器，统计终端上多少个参数传进来</span></span><br><span class="line"><span class="comment">  *argv[]： 列表，用来传递刚才命令行传递进来的参数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  *argv[]是一个数组；</span></span><br><span class="line"><span class="comment">  argv 是数组名；</span></span><br><span class="line"><span class="comment">  char* 指数组中每个元素的类型为 char*；即字符指针</span></span><br><span class="line"><span class="comment">  argv 即字符数组指针的首地址；</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span>;</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"argc=%d\n"</span>, argc);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./main /etc/a*.conf</span><br><span class="line"><span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<p>因为shell 会自动解析通配符，把结果都解析出来。</p>
<p><img src="./function_01.png" alt=""><br>图示：char * argv 数组模型</p>
<p>** 输出argv** </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> * argv[])</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line"> <span class="comment">// for (i=0; i&lt;argc; i++)</span></span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; argv[i] !=<span class="literal">NULL</span>; i++)</span><br><span class="line">    <span class="built_in">puts</span>(argv[i]);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-1-2-C语言使用函数之前也需要先声明"><a href="#1-1-2-C语言使用函数之前也需要先声明" class="headerlink" title="1.1.2 C语言使用函数之前也需要先声明"></a>1.1.2 C语言使用函数之前也需要先声明</h3><blockquote>
<p>函数在使用前都要声明，除非被调用函数的定义部分已经出现在主调函数之前, 在C语言中，函数声明就是函数原型。</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printf_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>;<span class="comment">// 需要先声明，因为main函数在 printf_hello函数上面</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span>&#123;</span><br><span class="line">  printf_hello();</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printf_hello</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"hello world!\n"</span>);</span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="28-函数的传参"><a href="#28-函数的传参" class="headerlink" title="28. 函数的传参"></a>28. 函数的传参</h2><h3 id="1-2-1-值传递"><a href="#1-2-1-值传递" class="headerlink" title="1.2.1 值传递"></a>1.2.1 值传递</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">printf_value</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123; <span class="comment">// 参数i j 随着 print_value 调用栈执行结束就释放掉了。</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d%d\n"</span>, i,l);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i =<span class="number">3</span>; l = <span class="number">5</span>;</span><br><span class="line">  printf_value(i,l);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-2-2-地址传递"><a href="#1-2-2-地址传递" class="headerlink" title="1.2.2 地址传递"></a>1.2.2 地址传递</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">swap</span> <span class="params">(<span class="keyword">int</span> * i, <span class="keyword">int</span> * j)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> tmp;</span><br><span class="line">  tmp = *i;</span><br><span class="line">  *i = *j;</span><br><span class="line">  *j = tmp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i =<span class="number">3</span>; l = <span class="number">5</span>;</span><br><span class="line">  swap(&amp;i,&amp;l);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="29-函数的调用（嵌套调用-和-递归调用）"><a href="#29-函数的调用（嵌套调用-和-递归调用）" class="headerlink" title="29. 函数的调用（嵌套调用 和 递归调用）"></a>29. 函数的调用（嵌套调用 和 递归调用）</h2><h3 id="1-3-1-函数的调用方式"><a href="#1-3-1-函数的调用方式" class="headerlink" title="1.3.1 函数的调用方式"></a>1.3.1 函数的调用方式</h3><ol>
<li>函数调用作为独立语句，<code>stringPrint();</code></li>
<li>函数作为表达式的一部分,<code>number = max(numA,numB)/2;</code></li>
<li>以实参形式出现在其他函数的调用中,<code>number = min(sum(-5, 100), numC);</code></li>
</ol>
<h3 id="1-3-2-嵌套调用"><a href="#1-3-2-嵌套调用" class="headerlink" title="1.3.2 嵌套调用"></a>1.3.2 嵌套调用</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">minus</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span>  <span class="built_in">max</span>(a,b,c) - <span class="built_in">min</span>(a, b, c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">min</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> tmp = a &lt; b? a :b;</span><br><span class="line">  <span class="keyword">return</span> tmp &lt; c ? tmp : c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">max</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">int</span> c)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> tmp = a &gt; b? a :b;</span><br><span class="line">  <span class="keyword">return</span> tmp &gt; c ? tmp : c;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> result;</span><br><span class="line">  <span class="keyword">int</span> a = <span class="number">3</span>, b = <span class="number">5</span>, c = <span class="number">10</span>;</span><br><span class="line">  result = minus(a,b,c);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, result);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="30-函数与数组"><a href="#30-函数与数组" class="headerlink" title="30. 函数与数组"></a>30. 函数与数组</h2><h3 id="1-4-1-函数与一唯数组"><a href="#1-4-1-函数与一唯数组" class="headerlink" title="1.4.1 函数与一唯数组"></a>1.4.1 函数与一唯数组</h3><p>问题：封装一个printf_arr方法来遍历数组；应该如何定义 printf_arr 的行参</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">printf_arr</span><span class="params">(<span class="keyword">int</span> a[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"printf_arr ---&gt; %p\n"</span>, a); <span class="comment">// 传入的是 数组 a的 起始地址；</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(a[<span class="number">0</span>]); i++) <span class="comment">// 是因为 a的 sizeof为 8， 所以只能访问数组前2位</span></span><br><span class="line">  &#123;</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"%d "</span>,a[i]);   <span class="comment">// 1， 2</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[<span class="number">6</span>] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"main ---&gt; %p\n"</span>,a ); <span class="comment">// a 即 &amp;a, 即 &amp;a[0];</span></span><br><span class="line">  printf_arr(a);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main       ---&gt; 0x7ffd84a62eb0</span></span><br><span class="line"><span class="comment">// printf_arr ---&gt; 0x7ffd84a62eb0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_arr</span><span class="params">(<span class="keyword">int</span> *p)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%s:%d\n"</span>, __FUNCTION__, <span class="keyword">sizeof</span>(p));<span class="comment">// 8, 传进来的是一个地址，8个字节。 这里看不到数组的规模。只能获悉起始位置</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%s:%d\n"</span>, __FUNCTION__, <span class="keyword">sizeof</span>(a)); <span class="comment">// 20，整个数组所占内存的大小，因为每个int是 4个字节；</span></span><br><span class="line">  print_arr(a);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>** 解决方法**</p>
<p>将数组的长度，当做第二个参数传入给 子函数。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print_arr</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%s:%d\n"</span>, __FUNCTION__, <span class="keyword">sizeof</span>(p));<span class="comment">// 8, 传进来的是一个地址，8个字节。 这里看不到数组的规模。只能获悉起始位置</span></span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, p[i]); <span class="comment">// p[i] 与 *(p+i) 等价</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%s:%d\n"</span>, __FUNCTION__, <span class="keyword">sizeof</span>(a)); <span class="comment">// 20，整个数组所占内存的大小，因为每个int是 4个字节；</span></span><br><span class="line">  print_arr(a, <span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(*a));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">printf_arr</span><span class="params">(<span class="keyword">int</span> p[], <span class="keyword">int</span> n)</span></span>;</span><br><span class="line"><span class="comment">// 当 p[] 作为行参时， [] 等同于 * 因此 int p[] 即为 int *p</span></span><br></pre></td></tr></table></figure>

<p>** 示例** </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span>  a[N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span> *p = a;</span><br><span class="line"></span><br><span class="line">   a            -&gt;  <span class="keyword">int</span> *</span><br><span class="line">  *a即*(a+<span class="number">0</span>)    -&gt;  <span class="keyword">int</span></span><br><span class="line">  a[<span class="number">0</span>]          -&gt;  <span class="keyword">int</span></span><br><span class="line">  &amp;a[<span class="number">3</span>]         -&gt;  <span class="keyword">int</span> *</span><br><span class="line">  p[i]          -&gt;  <span class="keyword">int</span></span><br><span class="line">  p             -&gt;  <span class="keyword">int</span> *</span><br><span class="line">  *p            -&gt;  <span class="keyword">int</span></span><br><span class="line">  p+<span class="number">1</span>           -&gt;  <span class="keyword">int</span> *</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>** 逆序** </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i=<span class="number">0</span>, j, m, tmp;</span><br><span class="line">  m = (n <span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line">  <span class="keyword">for</span> (;i&lt;=m;i++) &#123;</span><br><span class="line">    j = n <span class="number">-1</span> -i;</span><br><span class="line">    tmp = p[i];</span><br><span class="line">    p[i] = p[j];</span><br><span class="line">    p[j] = tmp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[<span class="number">0</span>] = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</span><br><span class="line">  <span class="keyword">for</span> (i =<span class="number">0</span>; i&lt; <span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(*a); i++)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a[i]);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  func(a, <span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(*a));</span><br><span class="line">   <span class="keyword">for</span> (i =<span class="number">0</span>; i&lt; <span class="keyword">sizeof</span>(a)/<span class="keyword">sizeof</span>(*a); i++)</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, a[i]);</span><br><span class="line">   <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-4-2-函数与二维数组"><a href="#1-4-2-函数与二维数组" class="headerlink" title="1.4.2 函数与二维数组"></a>1.4.2 函数与二维数组</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">     <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line"> </span><br><span class="line">     <span class="keyword">for</span> (i = <span class="number">0</span>; i&lt; M; i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="keyword">for</span> (j=<span class="number">0</span>;j&lt;N;j++)</span><br><span class="line">         &#123;</span><br><span class="line">             <span class="built_in">printf</span>(<span class="string">"%d "</span>, a[i][j]);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br><span class="line"><span class="comment">// 4 5 6</span></span><br></pre></td></tr></table></figure>

<p>问题： 同样的把输出放到一个独立的函数中去，也就是考察一下 二维数组应该如何给函数传参</p>
<blockquote>
<p>这个问题实际考察点在于 二维数组如何 过实参给函数，以及函数的二维数组行参应该如何定义</p>
</blockquote>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第一种, 用一个二维数组的指针去接收</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">arr_traverse</span><span class="params">(<span class="keyword">int</span> (*p) [N], <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="comment">//    printf("%p\n", p);</span></span><br><span class="line">   <span class="comment">//  printf("%d\n", n); </span></span><br><span class="line">     <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d  "</span>,*(*p+i)); <span class="comment">// 关键点在这里， 首先 p 指向的是 int [3] 这个类型。所以需要降级 为列指针</span></span><br><span class="line">      &#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"a ---&gt; %d\n"</span>, <span class="keyword">sizeof</span>(*a));</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, a);</span><br><span class="line">     arr_traverse(a, M*N); <span class="comment">// *a  === a[0] === *(a+0)</span></span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第二种，用一个普通一维数组指针去接收</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">arr_traverse</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="comment">//    printf("%p\n", p);</span></span><br><span class="line">   <span class="comment">//  printf("%d\n", n);</span></span><br><span class="line">     <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">     &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d  "</span>,*(p+i));</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"a ---&gt; %d\n"</span>, <span class="keyword">sizeof</span>(*a));</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, a);</span><br><span class="line">     arr_traverse(&amp;a[<span class="number">0</span>][<span class="number">0</span>], M*N); <span class="comment">// 传递的是列指针</span></span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第三种</span></span><br><span class="line"></span><br><span class="line"> <span class="function"><span class="keyword">void</span>  <span class="title">arr_traverse</span><span class="params">(<span class="keyword">int</span> (*p)[N],<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="comment">//    printf("%p\n", p);</span></span><br><span class="line">   <span class="comment">//  printf("%d\n", n); </span></span><br><span class="line">     <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;n;j++)</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d  "</span>,*(*(p+i)+j));</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"a ---&gt; %d\n"</span>, <span class="keyword">sizeof</span>(*a));</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, a);</span><br><span class="line">     arr_traverse(a, M,N);</span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 第四种</span></span><br><span class="line"><span class="function"><span class="keyword">void</span>  <span class="title">arr_traverse</span><span class="params">(<span class="keyword">int</span> p[][N],<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line"> <span class="comment">//    printf("%p\n", p);</span></span><br><span class="line">   <span class="comment">//  printf("%d\n", n); </span></span><br><span class="line">     <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">     <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;m;i++)</span><br><span class="line">     &#123;</span><br><span class="line">       <span class="keyword">for</span> (j=<span class="number">0</span>; j&lt;n;j++)</span><br><span class="line">       &#123;</span><br><span class="line">         <span class="built_in">printf</span>(<span class="string">"%d  "</span>, p[i][j]);</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">     <span class="keyword">return</span>;</span><br><span class="line"> &#125;</span><br><span class="line"> </span><br><span class="line"> <span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"> </span>&#123;</span><br><span class="line">     <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;;</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"a ---&gt; %d\n"</span>, <span class="keyword">sizeof</span>(*a));</span><br><span class="line">     <span class="built_in">printf</span>(<span class="string">"%p\n"</span>, a);</span><br><span class="line">     arr_traverse(a, M,N);</span><br><span class="line">     <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<p>** 小结 ** </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> a[M][N] = &#123;...&#125;;</span><br><span class="line"><span class="keyword">int</span> * p = *a;</span><br><span class="line"><span class="keyword">int</span> (*q)[N] = a;</span><br></pre></td></tr></table></figure>

<p>二维数组 参与传参的一些基本内容</p>
<table>
<thead>
<tr>
<th align="left">a[i][j]</th>
<th align="center">*(a+i)+j</th>
<th align="right">a[i]+j</th>
<th align="center">p[i]</th>
<th align="right">*p</th>
</tr>
</thead>
<tbody><tr>
<td align="left">q[i][j]</td>
<td align="center">*q === *(q+0)</td>
<td align="right">q</td>
<td align="center">p+3</td>
<td align="right">q+2</td>
</tr>
<tr>
<td align="left">int</td>
<td align="center">int *</td>
<td align="right">int *</td>
<td align="center">int</td>
<td align="right">int</td>
</tr>
<tr>
<td align="left">int</td>
<td align="center">int *</td>
<td align="right">int (*)[N]</td>
<td align="center">int *</td>
<td align="right">int (*)[N]</td>
</tr>
</tbody></table>
<h4 id="1-4-2-1-示例：-求平均数"><a href="#1-4-2-1-示例：-求平均数" class="headerlink" title="1.4.2.1 示例： 求平均数"></a>1.4.2.1 示例： 求平均数</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">average_score</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">float</span> sum = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;n; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    sum += p[i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> sum/n;</span><br><span class="line">&#125;</span><br><span class="line">find_num(<span class="keyword">int</span> (*p)[N], <span class="keyword">int</span> num)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (i =<span class="number">0</span>; i&lt;N; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *(*(p+num)+i));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num = <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">  average_score(*a, M*N);</span><br><span class="line">  find_num(a, num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="1-4-2-2-二维数组什么时候传行指针，什么时候传列指针"><a href="#1-4-2-2-二维数组什么时候传行指针，什么时候传列指针" class="headerlink" title="1.4.2.2  二维数组什么时候传行指针，什么时候传列指针"></a>1.4.2.2  二维数组什么时候传行指针，什么时候传列指针</h4><blockquote>
<p>当不区分行列的时候，可以把它当作一个大的一维数组。那就传递指针。 如果要区分行列来做某件事情的时候，那就需要把行指针传递过去。</p>
</blockquote>
<h3 id="1-4-3-函数与字符数组"><a href="#1-4-3-函数与字符数组" class="headerlink" title="1.4.3 函数与字符数组"></a>1.4.3 函数与字符数组</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> str1[] = <span class="string">"helloworld"</span>;</span><br><span class="line">  <span class="keyword">char</span> str2[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">strcpy</span>(str2, str1);  <span class="comment">//实现了拷贝</span></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现一个 mystrcpy 用于拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">mystrcpy</span><span class="params">(<span class="keyword">char</span> * dest, <span class="keyword">const</span> <span class="keyword">char</span> * src)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> *ret = dest;</span><br><span class="line">  <span class="keyword">if</span> (dest != <span class="literal">NULL</span> &amp;&amp; src != <span class="literal">NULL</span>)</span><br><span class="line">    <span class="keyword">while</span>((*dest++ = *src++) != <span class="string">'\n'</span>);</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> str1[] = <span class="string">"helloworld"</span>;</span><br><span class="line">  <span class="keyword">char</span> str2[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line">  mystrcpy(str2, str1);  <span class="comment">//实现一个 mystrcpy 用于拷贝</span></span><br><span class="line">  <span class="built_in">puts</span>(str2); <span class="comment">// 测试一下</span></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//实现一个 mystrncpy 用于拷贝</span></span><br><span class="line"><span class="function"><span class="keyword">char</span> * <span class="title">mystrncpy</span><span class="params">(<span class="keyword">char</span> *dest, <span class="keyword">const</span> <span class="keyword">char</span> * src, <span class="keyword">size_t</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i=<span class="number">0</span>;</span><br><span class="line">  <span class="keyword">for</span> (; i&lt;n &amp;&amp; (dest[i] = src[i]); i++)</span><br><span class="line">    ;</span><br><span class="line">  <span class="keyword">for</span> (; i&lt;n; i++)</span><br><span class="line">    dest[i] = <span class="string">'\0'</span>;</span><br><span class="line">  <span class="keyword">return</span> dest;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span> <span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">char</span> str1[] = <span class="string">"helloworld"</span>;</span><br><span class="line">  <span class="keyword">char</span> str2[<span class="number">128</span>];</span><br><span class="line"></span><br><span class="line">  mystrncpy(str2, str1, <span class="number">5</span>);  <span class="comment">//实现一个 mystrcpy 用于拷贝</span></span><br><span class="line">  <span class="built_in">puts</span>(str2); <span class="comment">// 测试一下</span></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="31-函数与指针"><a href="#31-函数与指针" class="headerlink" title="31.  函数与指针"></a>31.  函数与指针</h2><blockquote>
<p>指针函数, 函数指针, 函数指针数组</p>
</blockquote>
<h3 id="1-5-1-指针函数"><a href="#1-5-1-指针函数" class="headerlink" title="1.5.1 指针函数"></a>1.5.1 指针函数</h3><blockquote>
<p>一个函数的返回值为指针，即为指针函数</p>
</blockquote>
<p><code>返回值 * 函数名(形参);</code><br><code>如： int * fun(int);</code></p>
<p>引子</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 从find_num 这个函数说起，这个函数并不纯，而且没有实现它的功能；</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">find_num</span><span class="params">(<span class="keyword">int</span> (*p)[N], <span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line">  <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d"</span>, *(*(p+num)+i));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">  <span class="keyword">float</span> ave;</span><br><span class="line">  <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">  find_num(a, num); <span class="comment">// find_num 的设计不应该没有返回值；</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 3</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> N 4</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> * <span class="title">find_num</span><span class="params">(<span class="keyword">int</span> (*p)[N], <span class="keyword">int</span> num)</span> <span class="comment">// 将find_num 设计成为一个指针函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (num &gt; M <span class="number">-1</span>)</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">  <span class="keyword">return</span> *(p+num);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">int</span> * res;</span><br><span class="line">    <span class="keyword">int</span> a[M][N] = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>&#125;;</span><br><span class="line">    <span class="keyword">float</span> ave;</span><br><span class="line">    <span class="keyword">int</span> num =<span class="number">0</span>;</span><br><span class="line">    res = find_num(a, num);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (res != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="keyword">for</span> (i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">          <span class="built_in">printf</span>(<span class="string">"%d"</span>,res[i]);</span><br><span class="line">      <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"can not find\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-2-函数指针"><a href="#1-5-2-函数指针" class="headerlink" title="1.5.2 函数指针"></a>1.5.2 函数指针</h3><blockquote>
<p>一个指针指向的是函数， 在C语言里面。你并不能用一个普通变量去接收 函数啊，或者结构体等等数据类型，必须要使用相同的类型变量去接收相同的类型。比如函数要用函数指针变量去接收；</p>
</blockquote>
<p>  类型  (<em>指针名) （形参）<br>  如： int (</em>p)(int);</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span> <span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a=<span class="number">3</span>, b=<span class="number">5</span>;</span><br><span class="line">  <span class="keyword">int</span> ret;</span><br><span class="line">  <span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>); <span class="comment">// 定义一个函数指针</span></span><br><span class="line"></span><br><span class="line">  p = add; <span class="comment">// 这个指针 能够指向一个函数， 因为add 本身就是这个函数的地址， 也可以写成 p = &amp;add;这里之所以省略，是因为函数名(add)本身就是一个地址。所以在指针和函数的指向关系当中，地址符可以省略。同样的 `ret = *p(a, b)`； p前面的 *也可以省略。 `ret = p(a, b)`。指向函数的指针，让这个指针指向某一个函数的入口地址。下面通过指针来传参数就如同通过函数名来传参数是一样的；</span></span><br><span class="line">  ret = p(a, b);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ret);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-3-函数指针数组"><a href="#1-5-3-函数指针数组" class="headerlink" title="1.5.3 函数指针数组"></a>1.5.3 函数指针数组</h3><p>引子</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">add</span> <span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sub</span> <span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> a*b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a=<span class="number">3</span>, b=<span class="number">5</span>;</span><br><span class="line">  <span class="keyword">int</span> ret1, ret2;</span><br><span class="line">  <span class="keyword">int</span> (*p)(<span class="keyword">int</span>, <span class="keyword">int</span>); <span class="comment">// 定义一个函数指针</span></span><br><span class="line">  <span class="keyword">int</span> (*q)(<span class="keyword">int</span>, <span class="keyword">int</span>); <span class="comment">// 这里面定义两个相同的 函数指针有点浪费</span></span><br><span class="line"></span><br><span class="line">  p = add; <span class="comment">// 这个指针 能够指向一个函数， 因为add 本身就是这个函数的地址</span></span><br><span class="line">  ret1 = p(a, b);</span><br><span class="line">  ret2 = q(a, b);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ret1);</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ret2;</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-4-引出函数指针数组"><a href="#1-5-4-引出函数指针数组" class="headerlink" title="1.5.4 引出函数指针数组"></a>1.5.4 引出函数指针数组</h3><p>语法：</p>
<p>类型 （<em>数组名[下标]）（形参）；<br>如: int (</em>arr[N])(int);<br>arr是一个数组，这个数组有N个元素。这N个元素都是指向函数的指针。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a=<span class="number">3</span>, b=<span class="number">5</span>;</span><br><span class="line">  <span class="keyword">int</span> ret1, ret2;</span><br><span class="line">  <span class="keyword">int</span> i;</span><br><span class="line"> <span class="comment">// int (int, int) *funcp[2];  funcp这个数组有两个指针，两个指针都是指向 int (int, int) 类型的函数； 转换一种写法就是</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">int</span> (*funcp[<span class="number">2</span>])(<span class="keyword">int</span>, <span class="keyword">int</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// p = add;</span></span><br><span class="line">  <span class="comment">// q = sub;</span></span><br><span class="line">  <span class="comment">// ret1 = p(a, b);</span></span><br><span class="line">  <span class="comment">// ret2 = q(a, b);</span></span><br><span class="line"></span><br><span class="line">  funcp[<span class="number">0</span>] = add;</span><br><span class="line">  funcp[<span class="number">1</span>] = sub;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i=<span class="number">0</span>; i&lt;<span class="number">2</span>; i++)</span><br><span class="line">  &#123;</span><br><span class="line">    ret1 = funcp[i](a, b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,ret1);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// printf("%d\n",ret1);</span></span><br><span class="line">  <span class="comment">// printf("%d\n",ret2;</span></span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-5-5-指向指针函数的函数指针数组"><a href="#1-5-5-指向指针函数的函数指针数组" class="headerlink" title="1.5.5 指向指针函数的函数指针数组"></a>1.5.5 指向指针函数的函数指针数组</h3><p>  <code>int *(*func[N])(int)</code></p>
<h2 id="32-函数的执行过程"><a href="#32-函数的执行过程" class="headerlink" title="32. 函数的执行过程"></a>32. 函数的执行过程</h2><h3 id="1-6-1-main函数-——-函数执行的入口"><a href="#1-6-1-main函数-——-函数执行的入口" class="headerlink" title="1.6.1 main函数 —— 函数执行的入口"></a>1.6.1 main函数 —— 函数执行的入口</h3><ul>
<li>遇到函数，开辟内存空间；</li>
<li>在内存空间再碰到函数时候，<ul>
<li>初始化内嵌函数；</li>
<li>传递参数</li>
<li>保存外层函数执行空间</li>
<li>执行完毕后。。。。释放函数执行栈</li>
<li>接收函数的返回值</li>
<li>恢复现场，从断点处继续执行</li>
</ul>
</li>
</ul>
<h3 id="1-6-2-参数的传递"><a href="#1-6-2-参数的传递" class="headerlink" title="1.6.2 参数的传递"></a>1.6.2 参数的传递</h3><ul>
<li><p>实参与形参具有不同的存储单元，实参与形参变量的数据传递是“值传递”。即拷贝</p>
</li>
<li><p>函数调用时，系统给行参分配存储单元，并将实参对应的值传递给形参；</p>
<p>P.S. 实参与形参的类型必须相同或可以兼容；</p>
</li>
</ul>
<h3 id="1-6-3-变量的作用范围"><a href="#1-6-3-变量的作用范围" class="headerlink" title="1.6.3 变量的作用范围"></a>1.6.3 变量的作用范围</h3><p>局部变量与全局变量</p>
<blockquote>
<p>根据变量在程序中作用范围的不同，可以将变量分为局部变量和全局变量</p>
</blockquote>
<ul>
<li><p>局部变量<br>在函数内或块内定义，只在这个函数或块内其作用的变量；</p>
</li>
<li><p>全局变量<br>在所有函数外定义的变量，它的作用域是从定义变量的位置开始到本程序文件结束。</p>
</li>
<li><p>当全局变量与局部变量同名时，局部变量将在自己作用域内有效，它将屏蔽同名的全局变量</p>
</li>
</ul>
<h2 id="33-数组与函数"><a href="#33-数组与函数" class="headerlink" title="33. 数组与函数"></a>33. 数组与函数</h2><ul>
<li>数组名 做函数参数</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> a[])</span> </span>&#123;</span><br><span class="line">  a[<span class="number">0</span>] = <span class="number">30</span>;</span><br><span class="line">  a[<span class="number">1</span>] = <span class="number">50</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> a[<span class="number">2</span>] = &#123;<span class="number">3</span>, <span class="number">5</span>&#125;;</span><br><span class="line">  change(a);  <span class="comment">// 地址传递， 数组的名字代表着数组所在的地址；</span></span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d, %d,"</span>, a[<span class="number">0</span>], a[<span class="number">1</span>]); <span class="comment">// 30 50</span></span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="34-缓冲区"><a href="#34-缓冲区" class="headerlink" title="34.  缓冲区"></a>34.  缓冲区</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  </span><br><span class="line">    <span class="comment">// __FUNCTION__ 当前所在的函数，</span></span><br><span class="line">    <span class="comment">// __LINE__ 当前所在的行数</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"[%s:%d]before"</span>, __FUNCTION__, __LINE__);</span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"[%s:%d]after"</span>, __FUNCTION__, __LINE__);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">./<span class="built_in">printf</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 发现两个printf都没打印出来东西</span></span><br></pre></td></tr></table></figure>

<p>** 缓冲机制 **</p>
<blockquote>
<p>由于使用了终端设备，所以原本默认是全缓冲模式变成了行缓冲模式。所以printf是遇到了 \n 才去刷新缓冲区的。或者是当前等缓冲区满了去自动刷新。\n 是去强制刷新缓冲区。 没有加\n  那个“before”这句话就放到了输出缓冲区当中，什么时候刷新呢？ 要么等程序结束自动刷新IO，要么就是遇到一些强制刷新的函数iflush 这种，要么就等到缓冲区攒满了一次性去刷新。</p>
</blockquote>
<h2 id="35-动态内存管理"><a href="#35-动态内存管理" class="headerlink" title="35. 动态内存管理"></a>35. 动态内存管理</h2><blockquote>
<p>在编写程序时，通常并不知道需要处理的数据量，或者难以评估所需处理数据量的变动程度。在这种情况下，要达到有效的资源利用，就需要动态地分配所需内存，并在使用完毕后尽早释放不需要的内存，这就是动态内存管理原理；</p>
</blockquote>
<p>以下几个函数都存在标准 stdlib.h 中</p>
<h3 id="1-9-1-malloc-calloc-（分配新的内存区域）"><a href="#1-9-1-malloc-calloc-（分配新的内存区域）" class="headerlink" title="1.9.1 malloc  calloc （分配新的内存区域）"></a>1.9.1 malloc  calloc （分配新的内存区域）</h3><p><code>void *malloc(size_t, size);</code></p>
<p>它会在堆上分配这块连续的内存空间，并返回起始地址；</p>
<p><code>void *calloc(size_t nmemb, size_t size)</code></p>
<p>一个成员 size个大小，nmemb这么多成员的空间；连续申请多块 size大的内存</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p;</span><br><span class="line">p = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"><span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"error"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">  *p = <span class="number">10</span>;</span><br><span class="line">  <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">free</span>(p); <span class="comment">// 用完记得释放掉内存， 在同一个函数中做到 malloc 和 free一一对应</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p;</span><br><span class="line"><span class="keyword">int</span> num = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">p = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>) * num);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i= <span class="number">0</span> ;i&lt;num; i++) &#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;p[i]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;num; j++) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>, p[j]);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"><span class="built_in">free</span>(p);</span><br><span class="line"><span class="built_in">exit</span>(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>

<p>** 一道面试题 (提示： 这个程序当中已经产生了内存泄漏) **</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  p = <span class="built_in">malloc</span>(n);</span><br><span class="line">  <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>); <span class="comment">// p在这个函数当中是一个局部变量，随着func执行完毕之后，这块内存空间会丢失。导致内存泄漏，只有随着操作系统中这个进程结束掉，才会释放这100个单位的内存</span></span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num = <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">  func(p, num);</span><br><span class="line">  <span class="built_in">free</span>(p);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改法一：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> **p, <span class="keyword">int</span> n)</span> </span>&#123; <span class="comment">// 用一个二级指针来接受</span></span><br><span class="line">  *p = <span class="built_in">malloc</span>(n);           <span class="comment">// 此时*p 就是main函数中的p</span></span><br><span class="line">  <span class="keyword">if</span> (*p == <span class="literal">NULL</span>)</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>); </span><br><span class="line">  <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num = <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">  func(&amp;p, num);</span><br><span class="line">  <span class="built_in">free</span>(p);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>改法二：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">func</span><span class="params">(<span class="keyword">int</span> *p, <span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  p = <span class="built_in">malloc</span>(n);</span><br><span class="line">  <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">1</span>); </span><br><span class="line">  <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="keyword">int</span> num = <span class="number">100</span>;</span><br><span class="line">  <span class="keyword">int</span> *p = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">  p = func(p, num);  <span class="comment">// 用p 来接触返回值</span></span><br><span class="line">  <span class="built_in">free</span>(p);</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-9-2-realloc-（调整已分配的内存区域）"><a href="#1-9-2-realloc-（调整已分配的内存区域）" class="headerlink" title="1.9.2   realloc  （调整已分配的内存区域）"></a>1.9.2   realloc  （调整已分配的内存区域）</h3><p><code>void *realloc(void *ptr, size_t size);</code></p>
<p>重新分配一块动态的内存空间 ,比如之前用malloc calloc分配的内存空间太大或者太小，现在把 起始地址传进去(第一个参数); 然后要size 大小的这么一段(第二个参数)；所以 realloc会在当前地址往下继续扩展，凑足size返回回来；当然，如果*ptr 开始的这个区段，没有一整块size大小的空间，那么就会去别的内存上面去寻找。直到找到之后，再返回那块空间的起始地址回来；</p>
<h3 id="1-9-3-free-（释放已分配的内存区域）"><a href="#1-9-3-free-（释放已分配的内存区域）" class="headerlink" title="1.9.3  free  （释放已分配的内存区域）"></a>1.9.3  free  （释放已分配的内存区域）</h3><blockquote>
<p>原则， 谁申请谁释放， （防止内存泄露）；如果不能做到在同一函数中做到谁申请谁释放 就在同一模块中做到这些；</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> *p;</span><br><span class="line"><span class="keyword">int</span> num = <span class="number">10</span>;</span><br><span class="line">p = <span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">int</span>));</span><br><span class="line"><span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;;</span><br><span class="line">*p = <span class="number">10</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p); <span class="comment">// 10</span></span><br><span class="line"><span class="comment">// 测试地址</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%p--&gt;%d\n"</span>, *p); <span class="comment">// 0xa--&gt;0</span></span><br><span class="line"><span class="built_in">free</span>(p);                 <span class="comment">// 正确的做法是</span></span><br><span class="line">p = <span class="literal">NULL</span>;                <span class="comment">// 正确的做法是，一个指针free了之后，立即赋值 NULL</span></span><br><span class="line"><span class="comment">// free 代表着 变量p对于那片 内存空间 没有了 控制权限；所以free之后要 p = NULL</span></span><br><span class="line">*p = <span class="number">123</span>;                <span class="comment">// 实际上这是个野指针，该块内存释放掉了，有可能被其他人用来声明变量了。这里重新赋值，相当于可能把别人的变量给覆盖了</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, *p);      <span class="comment">// 123</span></span><br><span class="line">                         <span class="comment">// 测试地址</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%p--&gt;%d\n"</span>, *p); <span class="comment">// 0x7b--&gt;145574408</span></span><br></pre></td></tr></table></figure>
          
            <div class='article_footer'>
              
                
  
    
    



  

  
    
    



  

  
    
    

<section class="widget copyright  desktop mobile">
  <div class='content'>
    
      <blockquote>
        
          
            <p>博客内容遵循 署名-非商业性使用-相同方式共享 4.0 国际 (CC BY-NC-SA 4.0) 协议</p>

          
        
          
            <p>本文永久链接是：<a href=http://yoursite.com/2021/01/25/C/>http://yoursite.com/2021/01/25/C/</a></p>
          
        
      </blockquote>
    
  </div>
</section>

  

  
    
    

<section class="widget qrcode  desktop mobile">
  

  <div class='content article-entry'>
    
      
        <div class='fancybox'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/qrcode/wiki_volantis.png'
        
          height='64px'
        ></div>
      
    
      
        <div class='fancybox'><img src='https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/qrcode/wiki_volantis.png'
        
          height='64px'
        ></div>
      
    
  </div>
</section>

  


              
            </div>
          
        </div>
        
          


  <section class='meta' id="footer-meta">
    <div class='new-meta-box'>
      
        
          <div class="new-meta-item date" itemprop="dateUpdated" datetime="2021-02-06T20:12:38+08:00">
  <a class='notlink'>
    <i class="fas fa-edit fa-fw" aria-hidden="true"></i>
    <p>更新于：Feb 6, 2021</p>
  </a>
</div>

        
      
        
          
  
  <div class="new-meta-item meta-tags"><a class="tag" href="/tags/C/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>C</p></a></div>


        
      
        
          

        
      
        
          
  <div class="new-meta-item share -mob-share-list">
  <div class="-mob-share-list share-body">
    
      
        <a class="-mob-share-qq" title="" rel="external nofollow noopener noreferrer"
          
          href="http://connect.qq.com/widget/shareqq/index.html?url=http://yoursite.com/2021/01/25/C/&title=C - Hexo&summary="
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qq.png">
          
        </a>
      
    
      
        <a class="-mob-share-qzone" title="" rel="external nofollow noopener noreferrer"
          
          href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=http://yoursite.com/2021/01/25/C/&title=C - Hexo&summary="
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/qzone.png">
          
        </a>
      
    
      
        <a class="-mob-share-weibo" title="" rel="external nofollow noopener noreferrer"
          
          href="http://service.weibo.com/share/share.php?url=http://yoursite.com/2021/01/25/C/&title=C - Hexo&summary="
          
          >
          
            <img src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/logo/128/weibo.png">
          
        </a>
      
    
  </div>
</div>



        
      
    </div>
  </section>


        
        
          <div class="prev-next">
            
              <a class='prev' href='/2021/01/26/canvas/'>
                <p class='title'><i class="fas fa-chevron-left" aria-hidden="true"></i>canvas</p>
                <p class='content'>1. canvas 基础API1.1 contextcontext对象 proto 指向CanvasRenderingContext2D，一些绘图API集中在这些地方
12const canva...</p>
              </a>
            
            
              <a class='next' href='/2021/01/21/ts-declaration-files/'>
                <p class='title'>ts declaration files<i class="fas fa-chevron-right" aria-hidden="true"></i></p>
                <p class='content'>10. Declaration Files10. 1 Declaration Reference本节显示一些API的文档以及该API的示例用法，并说明如何编写相应的声明。
10.1.1 具有属性...</p>
              </a>
            
          </div>
        
      </section>
    </article>
  

  
    <!-- 显示推荐文章和评论 -->



  <article class="post white-box reveal comments shadow">
    <section class="article typo">
      <p ct><i class='fas fa-comments'></i> 评论</p>
      
      
      
      
      
      
        <section id="comments">
          <div id="valine_container" class="valine_thread">
            <i class="fas fa-cog fa-spin fa-fw fa-2x"></i>
          </div>
        </section>
      
      
    </section>
  </article>


  




<!-- 根据页面mathjax变量决定是否加载MathJax数学公式js -->



  <script>
    window.subData = {
      title: 'C',
      tools: true
    }
  </script>


</div>
<aside class='l_side'>
  
  

  
    
    


  <section class="widget toc-wrapper shadow desktop mobile">
    
  <header>
    
      <i class="fas fa-list fa-fw" aria-hidden="true"></i><span class='name'>本文目录</span>
    
  </header>


    <div class='content'>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-程序"><span class="toc-text">1.程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-写程序的过程"><span class="toc-text">1.1 写程序的过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-编程语言共性-（语法）"><span class="toc-text">1.2 编程语言共性 （语法）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-大纲"><span class="toc-text">1.3 大纲</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-基本概念"><span class="toc-text">2. 基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-变量与常量"><span class="toc-text">2.1 变量与常量</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-常量"><span class="toc-text">2.1.1 常量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-变量"><span class="toc-text">2.1.2 变量</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-2-1-标识符"><span class="toc-text">2.1.2.1 标识符</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3-存储类型"><span class="toc-text">2.1.3 存储类型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-3-1-auto"><span class="toc-text">2.1.3.1 auto</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-3-2-register"><span class="toc-text">2.1.3.2 register</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-3-3-static"><span class="toc-text">2.1.3.3 static</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-1-3-4-extern"><span class="toc-text">2.1.3.4 extern</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4-变量的生命周期和作用范围（即作用域）"><span class="toc-text">2.1.4 变量的生命周期和作用范围（即作用域）</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-C程序"><span class="toc-text">3. C程序</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-程序规范"><span class="toc-text">4.1 程序规范</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-注释"><span class="toc-text">4.2 注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-编译"><span class="toc-text">4.3 编译</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-1-C编译"><span class="toc-text">4.3.1 C编译</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-2-多个-c文件"><span class="toc-text">4.3.2 多个.c文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-3-3-头文件"><span class="toc-text">4.3.3 头文件</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-数据类型"><span class="toc-text">5. 数据类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-基本类型"><span class="toc-text">5.1 基本类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1-整形存储"><span class="toc-text">1.1.1 整形存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2-浮点型存储"><span class="toc-text">1.1.2  浮点型存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-3-char存储"><span class="toc-text">1.1.3 char存储</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-4-不同类型的数据间转换"><span class="toc-text">1.1.4 不同类型的数据间转换</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-4-1-精度丢失"><span class="toc-text">1.1.4.1 精度丢失</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-4-2-隐式转换"><span class="toc-text">1.1.4.2 隐式转换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-4-3-显式转换"><span class="toc-text">1.1.4.3 显式转换</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#1-1-4-4-特殊性："><span class="toc-text">1.1.4.4 特殊性：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-构造类型"><span class="toc-text">1.2 构造类型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-enum"><span class="toc-text">1.2.1  enum</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-结构体类型"><span class="toc-text">1.2.2 结构体类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-1-结构体作为函数参数传递给函数（值传递，地址传递）"><span class="toc-text">1.2.2.1 结构体作为函数参数传递给函数（值传递，地址传递）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-2-当把结构体当成形参传递的时候，意味着什么"><span class="toc-text">1.2.2.2 当把结构体当成形参传递的时候，意味着什么</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-3-结构体作为函数返回值时"><span class="toc-text">1.2.2.3 结构体作为函数返回值时</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-4-指向结构体变量的指针"><span class="toc-text">1.2.2.4  指向结构体变量的指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-5-指向结构体变量的指针作为参数传入函数"><span class="toc-text">1.2.2.5 指向结构体变量的指针作为参数传入函数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-6-结构体数组"><span class="toc-text">1.2.2.6 结构体数组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-7-链表"><span class="toc-text">1.2.2.7 链表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-3-共用体"><span class="toc-text">1.2.3 共用体</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-指针类型"><span class="toc-text">1.3 指针类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-空类型-void"><span class="toc-text">1.4 空类型 void</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-类型转换"><span class="toc-text">6. 类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-十进制转二进制"><span class="toc-text">2.1  十进制转二进制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-补码"><span class="toc-text">2.2 补码</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-运算符和表达式"><span class="toc-text">7. 运算符和表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-自增和自减"><span class="toc-text">8.1 自增和自减</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-位运算"><span class="toc-text">8. 位运算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-gt-gt-lt-lt"><span class="toc-text">3.1  &gt;&gt; &lt;&lt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-（取反）"><span class="toc-text">3.2  ~ （取反）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-按位或"><span class="toc-text">3.3  按位或</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-按位与"><span class="toc-text">3.4  按位与</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-相同为0，-不同为1"><span class="toc-text">3.5  ^ (相同为0， 不同为1)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-位运算的重要意义"><span class="toc-text">3.6  位运算的重要意义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-内核代码位置"><span class="toc-text">9.  内核代码位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-宏"><span class="toc-text">10.  宏</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-save-temps"><span class="toc-text">4.1 save-temps</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-宏的缺点"><span class="toc-text">4.2 宏的缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-define"><span class="toc-text">4.3 define</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-没有值的宏"><span class="toc-text">4.4 没有值的宏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-预定义的宏"><span class="toc-text">4.5 预定义的宏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-像函数的宏"><span class="toc-text">4.6 像函数的宏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7-错误定义的宏"><span class="toc-text">4.7 错误定义的宏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8带参数的宏的原则"><span class="toc-text">4.8带参数的宏的原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9-什么时候用宏-什么时候用函数"><span class="toc-text">4.9 什么时候用宏 什么时候用函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10-include-“”-还是-lt-gt"><span class="toc-text">4.10 include  “” 还是 &lt;&gt;</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-11-头文件-（-h文件）"><span class="toc-text">4.11 头文件 （.h文件）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-12-变量的声明"><span class="toc-text">4.12 变量的声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-13声明和定义"><span class="toc-text">4.13声明和定义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-typedef"><span class="toc-text">11. typedef</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-typedef-和-define的区别"><span class="toc-text">5.1  typedef 和 define的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-一唯数组"><span class="toc-text">12.  一唯数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-定义"><span class="toc-text">1.1.1 定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-初始化"><span class="toc-text">1.1.2 初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-3-元素引用"><span class="toc-text">1.1.3 元素引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-4-数组名"><span class="toc-text">1.1.4 数组名</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-5-数组越界"><span class="toc-text">1.1.5 数组越界</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-6-fb"><span class="toc-text">1.1.6 fb</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-二维数组"><span class="toc-text">13.  二维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-定义，初始化"><span class="toc-text">1.2.1 定义，初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-二维数组元素引用"><span class="toc-text">1.2.2 二维数组元素引用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-3-存储形式"><span class="toc-text">1.2.3 存储形式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-4-二维数组练习题"><span class="toc-text">1.2.4 二维数组练习题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-4-1-行列互换"><span class="toc-text">1.2.4.1 行列互换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-4-2-求最大值及其所在位置"><span class="toc-text">1.2.4.2 求最大值及其所在位置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-4-3-求各行与各列的和"><span class="toc-text">1.2.4.3 求各行与各列的和</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-4-4-矩阵乘积"><span class="toc-text">1.2.4.4 矩阵乘积</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-5-深入理解二维数组"><span class="toc-text">1.2.5 深入理解二维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-5-1-三维数组"><span class="toc-text">1.2.5.1 三维数组</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-字符数组"><span class="toc-text">14. 字符数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-定义，初始化，存储特点"><span class="toc-text">1.3.1 定义，初始化，存储特点</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-1-单个字符初始化"><span class="toc-text">1.3.1.1 单个字符初始化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-2-用字符串常量初始化"><span class="toc-text">1.3.1.2 用字符串常量初始化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-输入输出"><span class="toc-text">1.3.2 输入输出</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-1-单词计数"><span class="toc-text">1.3.2.1 单词计数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-3-字符数组注意事项"><span class="toc-text">1.3.3 字符数组注意事项</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-变量与地址"><span class="toc-text">15. 变量与地址</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-变量的三要素"><span class="toc-text">1.1  变量的三要素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-输出变量的地址"><span class="toc-text">1.2  输出变量的地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-指针与指针变量"><span class="toc-text">16. 指针与指针变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-非法操作（野指针）"><span class="toc-text">2.1 非法操作（野指针）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-指针变量"><span class="toc-text">2.2 指针变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-指针变量的地址"><span class="toc-text">2.3 指针变量的地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-指针变量示例"><span class="toc-text">2.4 指针变量示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-指针作运算-取地址-和-取-和关系运算"><span class="toc-text">2.5 指针作运算 (取地址 和 取 * 和关系运算)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-取地址"><span class="toc-text">2.5.1 取地址</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-取"><span class="toc-text">2.5.2 取*</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#17-直接访问和间接访问"><span class="toc-text">17. 直接访问和间接访问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1一级间接访问和-二级间接访问"><span class="toc-text">3.1一级间接访问和 二级间接访问</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-指针关系运算"><span class="toc-text">3.2 指针关系运算</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-指针变量类型与指针变量大小"><span class="toc-text">3.3  指针变量类型与指针变量大小</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#18-空指针与野指针"><span class="toc-text">18. 空指针与野指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-野指针"><span class="toc-text">4.1 野指针</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-1-如何杜绝野指针"><span class="toc-text">4.1.1 如何杜绝野指针</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#19-空类型"><span class="toc-text">19. 空类型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-空类型的使用场景"><span class="toc-text">5.1 空类型的使用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#20-运算符优先级"><span class="toc-text">20. 运算符优先级</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#21-指针与数组"><span class="toc-text">21. 指针与数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-数组名代表数组首元素的地址"><span class="toc-text">7.1 数组名代表数组首元素的地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-创建一个匿名数组"><span class="toc-text">7.2  创建一个匿名数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3-利用指针变量引用数组元素"><span class="toc-text">7.3 利用指针变量引用数组元素</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-抽象公式"><span class="toc-text">7.4 抽象公式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-5-重置指针变量"><span class="toc-text">7.5 重置指针变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-6-需要注意的问题"><span class="toc-text">7.6 需要注意的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-7-指向二维数组的指针"><span class="toc-text">7.7 指向二维数组的指针</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-1-遍历数组元素"><span class="toc-text">7.7.1 遍历数组元素</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-2-二维数组行列指针"><span class="toc-text">7.7.2 二维数组行列指针</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-3-能够接收二维数组指针的指针变量"><span class="toc-text">7.7.3 能够接收二维数组指针的指针变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-4-另一段程序"><span class="toc-text">7.7.4 另一段程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-7-5-利用指针变量引用多维数组中的数组"><span class="toc-text">7.7.5 利用指针变量引用多维数组中的数组</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-8-指针与字符数组"><span class="toc-text">7.8  指针与字符数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-8-1-字符数组拼接"><span class="toc-text">7.8.1  字符数组拼接</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-8-2-字符串长度和字符串字节数"><span class="toc-text">7.8.2 字符串长度和字符串字节数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-8-3-字符指针跟字符数组的区别"><span class="toc-text">7.8.3 字符指针跟字符数组的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#22-字符串与指针"><span class="toc-text">22. 字符串与指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1-字符串指针举例"><span class="toc-text">8.1  字符串指针举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#23-const与指针"><span class="toc-text">23. const与指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1-变量值常量化"><span class="toc-text">9.1  变量值常量化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2-常量指针"><span class="toc-text">9.2  常量指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-3-指针常量"><span class="toc-text">9.3  指针常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-4-如何区分到底是-常量指针，还是指针常量"><span class="toc-text">9.4  如何区分到底是 常量指针，还是指针常量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-5-两个const修饰"><span class="toc-text">9.5  两个const修饰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-6-指向符号常量的指针"><span class="toc-text">9.6  指向符号常量的指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-7-再谈一维数组的地址"><span class="toc-text">9.7 再谈一维数组的地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-8-总结"><span class="toc-text">9.8  总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-9-指向二维数组的指针"><span class="toc-text">9.9  指向二维数组的指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-10-总结"><span class="toc-text">9.10  总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#24-指针与函数"><span class="toc-text">24. 指针与函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#10-1-指针用作函数参数"><span class="toc-text">10.1 指针用作函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-2-将数组名作为实参"><span class="toc-text">10.2 将数组名作为实参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-3-“数组名”-做形参"><span class="toc-text">10.3  “数组名” 做形参</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-4-即指向符号常量的指针"><span class="toc-text">10.4  即指向符号常量的指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-5-指针用作函数返回值"><span class="toc-text">10.5  指针用作函数返回值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#25-指针数组和数组指针"><span class="toc-text">25. 指针数组和数组指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-1-数组指针"><span class="toc-text">11.1 数组指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-2-指针数组"><span class="toc-text">11.2 指针数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-3-指针数组与数组指针的区别"><span class="toc-text">11.3 指针数组与数组指针的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#26-多级指针"><span class="toc-text">26 .多级指针</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#27-函数的定义"><span class="toc-text">27. 函数的定义</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-1-main函数"><span class="toc-text">1.1.1 main函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-2-C语言使用函数之前也需要先声明"><span class="toc-text">1.1.2 C语言使用函数之前也需要先声明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#28-函数的传参"><span class="toc-text">28. 函数的传参</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-1-值传递"><span class="toc-text">1.2.1 值传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-2-地址传递"><span class="toc-text">1.2.2 地址传递</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#29-函数的调用（嵌套调用-和-递归调用）"><span class="toc-text">29. 函数的调用（嵌套调用 和 递归调用）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-1-函数的调用方式"><span class="toc-text">1.3.1 函数的调用方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-2-嵌套调用"><span class="toc-text">1.3.2 嵌套调用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#30-函数与数组"><span class="toc-text">30. 函数与数组</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-1-函数与一唯数组"><span class="toc-text">1.4.1 函数与一唯数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-2-函数与二维数组"><span class="toc-text">1.4.2 函数与二维数组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-1-示例：-求平均数"><span class="toc-text">1.4.2.1 示例： 求平均数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2-2-二维数组什么时候传行指针，什么时候传列指针"><span class="toc-text">1.4.2.2  二维数组什么时候传行指针，什么时候传列指针</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-3-函数与字符数组"><span class="toc-text">1.4.3 函数与字符数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#31-函数与指针"><span class="toc-text">31.  函数与指针</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-1-指针函数"><span class="toc-text">1.5.1 指针函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-2-函数指针"><span class="toc-text">1.5.2 函数指针</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-3-函数指针数组"><span class="toc-text">1.5.3 函数指针数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-4-引出函数指针数组"><span class="toc-text">1.5.4 引出函数指针数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-5-5-指向指针函数的函数指针数组"><span class="toc-text">1.5.5 指向指针函数的函数指针数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#32-函数的执行过程"><span class="toc-text">32. 函数的执行过程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-1-main函数-——-函数执行的入口"><span class="toc-text">1.6.1 main函数 —— 函数执行的入口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-2-参数的传递"><span class="toc-text">1.6.2 参数的传递</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-6-3-变量的作用范围"><span class="toc-text">1.6.3 变量的作用范围</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#33-数组与函数"><span class="toc-text">33. 数组与函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#34-缓冲区"><span class="toc-text">34.  缓冲区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#35-动态内存管理"><span class="toc-text">35. 动态内存管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-1-malloc-calloc-（分配新的内存区域）"><span class="toc-text">1.9.1 malloc  calloc （分配新的内存区域）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-2-realloc-（调整已分配的内存区域）"><span class="toc-text">1.9.2   realloc  （调整已分配的内存区域）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-9-3-free-（释放已分配的内存区域）"><span class="toc-text">1.9.3  free  （释放已分配的内存区域）</span></a></li></ol></li></ol>
    </div>
  </section>


  


</aside>


  
  <footer class="clearfix">
    <br><br>
    
      
        <div class="aplayer-container">
          

  
    <meting-js
      theme='#1BCDFC'
      autoplay='false'
      volume='0.7'
      loop='all'
      order='list'
      fixed='false'
      list-max-height='340px'
      server='netease'
      type='playlist'
      id='3175833810'
      list-folded='true'>
    </meting-js>
  


        </div>
      
    
      
        <br>
        <div class="social-wrapper">
          
            
              <a href="/atom.xml"
                class="social fas fa-rss flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="mailto:me@xaoxuu.com"
                class="social fas fa-envelope flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://github.com/xaoxuu"
                class="social fab fa-github flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
            
              <a href="https://music.163.com/#/user/home?id=63035382"
                class="social fas fa-headphones-alt flat-btn"
                target="_blank"
                rel="external nofollow noopener noreferrer">
              </a>
            
          
        </div>
      
    
      
        <div><p>Blog content follows the <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en" target="_blank" rel="noopener">Attribution-NonCommercial-ShareAlike 4.0 International (CC BY-NC-SA 4.0) License</a></p>
</div>
      
    
      
        Use
        <a href="https://volantis.js.org/" target="_blank" class="codename">belief</a>
        as theme, total visits
          <span id="busuanzi_value_site_pv"><i class="fas fa-circle-notch fa-spin fa-fw" aria-hidden="true"></i></span>
          times
        
      
    
      
        <div class='copyright'>
        <p><a href="https://xaoxuu.com" target="_blank" rel="noopener">Copyright © 2017-2020 Mr. X</a></p>

        </div>
      
    
  </footer>

<script>setLoadingBarProgress(80);</script>


      <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
  </div>
  
<script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script>


  <script>
    
    var SEARCH_SERVICE = "hexo" || "hexo";
    var ROOT = "/" || "/";
    if (!ROOT.endsWith('/')) ROOT += '/';
  </script>


  <script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


  <script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script>
  <script type="text/javascript">
    $(function() {
      ScrollReveal().reveal('.l_main .reveal', {
        distance: '8px',
        duration: '800',
        interval: '100',
        scale: '1'
      });
    });
  </script>


  
<script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script>

  <script type="text/javascript">
    $(function() {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>


  <script defer src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-busuanzi@2.3/js/busuanzi.pure.mini.js"></script>



  
  
  
    
<script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script>

    <script type="text/javascript">
      $(function(){
        var imgs=["https://cdn.jsdelivr.net/gh/xaoxuu/cdn-wallpaper/abstract/41F215B9-261F-48B4-80B5-4E86E165259E.jpeg"];
        if ('true' == 'true') {
          function shuffle(arr){
            /*From countercurrent-time*/
            var n = arr.length;
            while(n--) {
              var index = Math.floor(Math.random() * n);
              var temp = arr[index];
              arr[index] = arr[n];
              arr[n] = temp;
            }
          }
          shuffle(imgs);
        }
        if ('.cover') {
          $('.cover').backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        } else {
          $.backstretch(
            imgs,
          {
            duration: "20000",
            fade: "1500"
          });
        }
      });
    </script>
  



  
    
<script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>

  
    
<script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script>

  









  
    
<script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script>

  
  <script>
  var GUEST_INFO = ['nick','mail','link'];
  var meta = 'nick,mail,link'.split(',').filter(function(item){
    return GUEST_INFO.indexOf(item) > -1
  });
  var REQUIRED_FIELDS = ['nick','mail','link'];
  var requiredFields = 'nick,mail'.split(',').filter(function(item){
    return REQUIRED_FIELDS.indexOf(item) > -1
  });
  var valine = new Valine();
  function emoji(path, idx, ext) {
      return path + "/" + path + "-" + idx + "." + ext;
  }
  var emojiMaps = {};
  for (var i = 1; i <= 54; i++) {
    emojiMaps['tieba-' + i] = emoji('tieba', i, 'png');
  }
  for (var i = 1; i <= 101; i++) {
    emojiMaps['qq-' + i] = emoji('qq', i, 'gif');
  }
  for (var i = 1; i <= 116; i++) {
    emojiMaps['aru-' + i] = emoji('aru', i, 'gif');
  }
  for (var i = 1; i <= 125; i++) {
    emojiMaps['twemoji-' + i] = emoji('twemoji', i, 'png');
  }
  for (var i = 1; i <= 4; i++) {
    emojiMaps['weibo-' + i] = emoji('weibo', i, 'png');
  }
  valine.init({
    el: '#valine_container',
    meta: meta,
    
    appId: "dogUA2FSKGTo029M1SEwGROT-MdYXbMMI",
    appKey: "u0NdtQ8nvHoMdJPSYqm1LRxE",
    placeholder: "快来评论吧~",
    pageSize:'10',
    avatar:'robohash',
    lang:'zh-cn',
    visitor: 'true',
    highlight: 'true',
    mathJax: 'false',
    enableQQ: 'true',
    requiredFields: requiredFields,
    emojiCDN: 'https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/',
    emojiMaps: emojiMaps
  })
  </script>





  
<script src="/js/app.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.5/js/search.js"></script>



  
<script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script>






<!-- 复制 -->

  <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-check-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-check-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('fa-copy');
        $icon.addClass('fa-times-circle');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('fa-times-circle');
          $icon.addClass('fa-copy');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script>
  function pjax_fancybox() {
    $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
      var element = document.createElement("a"); // a 标签
      $(element).attr("pjax-fancybox", "");  // 过滤 pjax
      $(element).attr("href", $(this).attr("src"));
      if ($(this).attr("data-original")) {
        $(element).attr("href", $(this).attr("data-original"));
      }
      $(element).attr("data-fancybox", "images");
      var caption = "";   // 描述信息
      if ($(this).attr('alt')) {  // 标准 markdown 描述信息
        $(element).attr('data-caption', $(this).attr('alt'));
        caption = $(this).attr('alt');
      }
      var div = document.createElement("div");
      $(div).addClass("fancybox");
      $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
      var span = document.createElement("span");
      $(span).addClass("image-caption");
      $(span).text(caption); // 加描述
      $(this).after(span);  // 再套一层描述
      $(this).wrap(element);  // 最后套 a 标签
    })
    $(".article-entry").find("img").fancybox({
      selector: '[data-fancybox="images"]',
      hash: false,
      loop: false,
      closeClick: true,
      helpers: {
        overlay: {closeClick: true}
      },
      buttons: [
        "zoom",
        "close"
      ]
    });
  };
  $(function () {
    pjax_fancybox();
  });
</script>




  <script>setLoadingBarProgress(100);</script>
</body>
</html>
