{"meta":{"title":"Hexo","subtitle":"","description":"","author":"John Doe","url":"http://yoursite.com","root":"/"},"pages":[{"title":"åˆ†ç±»","date":"2020-08-20T05:55:31.000Z","updated":"2020-08-20T07:19:22.806Z","comments":true,"path":"categories/index.html","permalink":"http://yoursite.com/categories/index.html","excerpt":"","text":""},{"title":"æ ‡ç­¾","date":"2020-08-20T05:58:38.000Z","updated":"2020-08-20T07:18:21.424Z","comments":true,"path":"tags/index.html","permalink":"http://yoursite.com/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"go1","slug":"go1","date":"2021-03-09T12:15:16.000Z","updated":"2021-03-14T09:18:57.679Z","comments":true,"path":"2021/03/09/go1/","link":"","permalink":"http://yoursite.com/2021/03/09/go1/","excerpt":"","text":"1. ç¼–è¯‘å‹è¯­è¨€Go è¯­è¨€æ˜¯ä¸€é—¨ç¼–è¯‘è¯­è¨€ åœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼ŒGOé¦–å…ˆä½¿ç”¨ç¼–è¯‘å™¨æŠŠä»£ç ç¼–è¯‘æˆæœºå™¨å¯ä»¥è¯†åˆ«çš„1å’Œ0 å®ƒä¼šæŠŠä»£ç ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨ç¼–è¯‘çš„è¿‡ç¨‹ä¸­ï¼Œç¼–è¯‘å™¨èƒ½æ•è·ä¸€äº›é”™è¯¯ï¼› è§£é‡Šå‹è¯­è¨€ pythonï¼Œjsç­‰éƒ½æ˜¯ä½¿ç”¨è§£é‡Šå™¨ï¼Œéšç€ç¨‹åºè¿è¡Œï¼Œä¸€ä¸ªè¯­å¥ä¸€ä¸ªè¯­å¥è¿›è¡Œç¿»è¯‘ï¼Œä½†ä¹Ÿè¿™æ„å‘³ç€bugå¯èƒ½å°±æ½œä¼åœ¨ä½ è¿˜æ²¡æµ‹è¯•è¿‡çš„è·¯å¾„ä¸Šã€‚è¿™äº›å°±æ˜¯è§£é‡Šå‹è¯­è¨€ï¼› 2. install gogo ä»£ç† 12go env -w GO111MODULE=ongo env -w GOPROXY=https://goproxy.cn,direct 3. const varå¸¸é‡ä¸å˜é‡ 1234567var ( a = 1 b = 2)var distance, speed = 56, 108const hours, minutes = 24, 60 3.1 çŸ­å£°æ˜12345678910111213141516171819202122232425262728// ä»¥ä¸‹ä¸¤ç§å£°æ˜æ•ˆæœä¸€æ ·var count = 10count:= 10// çŸ­å£°æ˜å¯ä»¥åœ¨æ— æ³•ä½¿ç”¨varçš„åœ°æ–¹ä½¿ç”¨var count = 0for count= 10; count&gt;0; count-- &#123; fmt.Println(count)&#125;for count:=10; count&gt;0; count-- &#123; fmt.Println(count)&#125;if num:=rand.Intn(3);num==0 &#123; &#125; else &#123; &#125;switch num:=rand.Intn(10); num&#123; case 1: fmt.Printls(\"1\") case 2,3: fmt.Printls(\"2\") default: ..&#125; çŸ­å£°æ˜ä¸èƒ½ç”¨æ¥å£°æ˜ packageä½œç”¨åŸŸçš„å˜é‡ eraå˜é‡åœ¨mainå‡½æ•°å¤–å£°æ˜çš„ å®ƒæ‹¥æœ‰packageä½œç”¨åŸŸ å¦‚æœmain packageæœ‰å¤šä¸ªå‡½æ•°ï¼Œé‚£ä¹ˆeraå¯¹å®ƒä»¬éƒ½å¯è§ packageä½œç”¨åŸŸçš„å˜é‡ä¸èƒ½ç”¨çŸ­å£°æ˜ 12345678package mainimport ( \"math/rand\")var era = \"AD\"func main()&#123; year := 2018&#125; 4. è¿ç®—ç¬¦12345// ä»¥ä¸‹3ä¸ªç­‰ä»·age = age + 1age += 1age++++age // error 4.1 é€»è¾‘è¿ç®—ç¬¦|| æˆ– &amp;&amp; ä¸ ï¼ å¯ä»¥æŠŠtrue å˜ä¸º falseï¼Œåä¹‹äº¦ç„¶ 5. åŒ…å¼•ç”¨å¤šä¸ªåŒ… 1234567891011121314package mainimport ( \"fmt\" \"math/rand\")func main() &#123; var number = rand.Intn(10) + 1 fmt.Println(number) number = rand.Intn(10) + 1 fmt.Println(number)&#125; 6 å¾ªç¯ åˆ†æ”¯6.1 Booleanç±»å‹true å’Œfalse goä¸­ï¼Œâ€ â€œ ç©ºä¸²ä¸ä¼šè‡ªåŠ¨è½¬ä¸ºfalse 6.2 strings.Containsæ¥è‡ªstringsåŒ…çš„Containså‡½æ•°å¯ä»¥åˆ¤æ–­æŸä¸ªå­—ç¬¦ä¸²æ˜¯å¦åŒ…å«å¦å¤–è¦ç»™å­—ç¬¦ä¸² 12345678910111213package mainimport ( \"fmt\" \"strings\")func main() &#123; fmt.Println(\"you find yourself in a dimlu lit cavern\") var command = \"walk outside\" var exit = strings.Contains(command, \"outside\") fmt.Println(\"you leave the cave: \", exit)&#125; 6.3 compareå¦‚æœæ¯”è¾ƒä¸¤ä¸ªå€¼ï¼Œå¾—åˆ°çš„ç»“æœä¹Ÿæ˜¯ true æˆ–false æ¯”è¾ƒè¿ç®—ç¬¦ï¼š == &lt;= &lt; != &gt;= &gt; 6.4 ifåˆ¤æ–­æ¡ä»¶ä¸åŠ æ‹¬å· 1234567if command == \"alex\" &#123; &#125; else if command == \"let\" &#123; &#125; else &#123; &#125; 6.6 swtchæ¡ä»¶ä¸åŠ æ‹¬å·ï¼Œä¸éœ€è¦breakå…³é”®å­— è¿˜æœ‰ä¸€ä¸ªfallthroughå…³é”®å­—ï¼Œå®ƒç”¨æ¥æ‰§è¡Œä¸‹ä¸€ä¸ªcaseçš„bodyéƒ¨åˆ†ã€‚ 123456789101112131415161718192021var command = \"alex\"switch command &#123; case \"gi\": .. case \"go\",\"run\": .. default: ..&#125;var room = \"cave\"switch room &#123; case \"cave\": fmt.Printls(\"1\") fallthrough case \"go\",\"run\": fmt.Printls(\"2\") default: ..&#125;// è¾“å‡º 1ï¼Œ2 6.7 å¾ªç¯forå…³é”®å­—è®©ä»£ç é‡å¤æ‰§è¡Œ foråè¾¹æ²¡æœ‰æ ¹æ¡ä»¶ï¼Œé‚£å°±æ˜¯æ— é™å¾ªç¯ å¯ä»¥ä½¿ç”¨breakè·³å‡ºå¾ªç¯ éå†æ•°ç»„ 123456func main() &#123; numbers := [5]int&#123;1, 2, 3, 4, 5&#125; for i, num := range numbers &#123; fmt.Println(i, num) &#125;&#125; 6.8 å˜é‡çš„ä½œç”¨åŸŸå½“å˜é‡è¢«å£°æ˜ä»¥åï¼Œå®ƒå°±è¿›å…¥äº†ä½œç”¨åŸŸ åªè¦å˜é‡åœ¨ä½œç”¨åŸŸå†…ï¼Œä½ å°±å¯ä»¥è®¿é—®å®ƒ å¦åˆ™ï¼Œè®¿é—®å®ƒä¼šæŠ¥é”™çš„ å˜é‡å£°æ˜çš„ä½ç½®ï¼Œå†³å®šäº†å®ƒçš„ä½œç”¨åŸŸ ä½œç”¨åŸŸçš„å¥½å¤„ï¼Ÿ å¯ä»¥åœ¨ä¸é€šçš„ä½œç”¨åŸŸå†…ä½¿ç”¨ç›¸åŒçš„å˜é‡å åœ¨Goé‡Œé¢ï¼Œ ä½œç”¨åŸŸçš„èŒƒå›´å°±æ˜¯{}ä¹‹é—´çš„éƒ¨åˆ† 7. æ•°æ®ç±»å‹7.1 å£°æ˜æµ®ç‚¹å‹å˜é‡ä¸‹é¢è¿™ä¸‰ä¸ªè¯­å¥çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ 123days := 365.2425var days = 365.2425var days float64 = 365.2425 åªè¦æ•°å­—å«æœ‰å°æ•°éƒ¨åˆ†ï¼Œé‚£ä¹ˆå®ƒçš„ç±»å‹å°±æ˜¯float64 å¦‚æœä½ ä½¿ç”¨ä¸€ä¸ªæ•´æ•°æ¥åˆå§‹åŒ–æŸä¸ªå˜é‡ï¼Œé‚£ä¹ˆä½ å¿…é¡»æŒ‡å®šå®ƒçš„ç±»å‹ä¸ºfloat64ï¼Œå¦åˆ™å®ƒå°±æ˜¯ä¸€ä¸ªæ•´æ•°ç±»å‹ 7.2 å•ç²¾åº¦æµ®ç‚¹æ•°ç±»å‹Goè¯­è¨€æœ‰ä¸¤ç§æµ®ç‚¹æ•°ç±»å‹ é»˜è®¤æ˜¯float64 64ä½çš„æµ®ç‚¹ç±»å‹ å ç”¨8å­—èŠ‚å†…å­˜ æŸäº›ç¼–ç¨‹è¯­è¨€æŠŠè¿™ç§ç±»å‹å«åšdoubleï¼ˆåŒç²¾åº¦ï¼‰ float32 å ç”¨4å­—èŠ‚å†…å­˜ ç²¾åº¦æ¯”float64ä½ æœ‰æ—¶å«åšå•ç²¾åº¦ç±»å‹ 12345var pi64 = math.Pivar pi32 float32 = math.Pifmt.Println(pi64)fmt.Println(pi32) 7.3 å•åŒç²¾åº¦çš„ä½¿ç”¨åœºæ™¯ å½“å¤„ç†å¤§é‡æ•°æ®æ—¶ï¼Œä¾‹å¦‚3Dæ¸¸æˆä¸­çš„æ•°åƒä¸ªé¡¶ç‚¹ï¼Œä½¿ç”¨float32ç‰ºç‰²ç²¾åº¦æ¥èŠ‚çœå†…å­˜æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ï¼› mathåŒ…é‡Œé¢çš„å‡½æ•°æ“ä½œçš„éƒ½æ˜¯float64ç±»å‹ï¼Œæ‰€ä»¥åº”è¯¥é¦–é€‰ä½¿ç”¨float64ï¼Œé™¤éä½ æœ‰è¶³å¤Ÿçš„ç†ç”±ä¸å»ä½¿ç”¨å®ƒï¼› 7.4 é›¶å€¼Goé‡Œé¢æ¯ä¸ªç±»å‹éƒ½æœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œç§°ä½œé›¶å€¼ å½“ä½ å£°æ˜å´ä¸å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–çš„æ—¶å€™ï¼Œå®ƒçš„å€¼å°±æ˜¯é›¶å€¼ 1234var price float64fmt.Println(price)price := 0.0 7.5 æ˜¾ç¤ºæµ®ç‚¹ç±»å‹ ä½¿ç”¨Printæˆ–Printlnæ‰“å°æµ®ç‚¹ç±»å‹çš„æ—¶å€™ï¼Œé»˜è®¤çš„è¡Œä¸ºæ˜¯å°½å¯èƒ½çš„å¤šæ˜¾ç¤ºå‡ ä½å°æ•° ç»“åˆ%fæ ¼å¼æ˜¾ç¤ºå°æ•°çš„ä½ç½® 12345third := 1.0/3fmt.Printf(\"%v\\n\", third)fmt.Printf(\"%f\\n\", third)fmt.Printf(\"%.3f\\n\", third)fmt.Printf(\"%4.2f\\n\", third) %4.2f %4 æ ‡è¯†å®½åº¦ 2f è¡¨ç¤ºprecision å®½åº¦ï¼š ä¼šæ˜¾ç¤ºå‡ºçš„æœ€å°‘å­—ç¬¦ä¸ªæ•°ï¼ˆåŒ…æ‹¬å°æ•°ç‚¹å’Œå°æ•°ï¼‰ å¦‚æœå®½åº¦å¤§äºæ•°å­—çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆå·¦è¾¹ä¼šå¡«å……ç©ºæ ¼ å¦‚æœæ²¡æŒ‡å®šå®½åº¦ï¼Œé‚£ä¹ˆå°±æŒ‰å®é™…çš„ä½æ•°è¿›è¡Œæ˜¾ç¤º ç²¾åº¦ï¼š å°æ•°ç‚¹åè¾¹æ˜¾ç¤ºçš„ä½æ•° 7.6 æ•´æ•°ç±»å‹12var year int = 2018 // å¸¸ç”¨æ•´å‹var month uint = 2 // æ— ç¬¦å·æ•´æ•°ç±»å‹ 7.6.1 int å’Œ uintintå’Œuintæ˜¯é’ˆå¯¹ç›®æ ‡è®¾å¤‡ä¼˜åŒ–çš„ç±»å‹ åœ¨old çš„ç§»åŠ¨è®¾å¤‡ä¸Šï¼Œint å’Œ uintéƒ½æ˜¯32ä½çš„ æ¯”è¾ƒæ–°çš„è®¡ç®—æœºä¸Šï¼Œint å’Œ uintéƒ½æ˜¯64ä½çš„ è™½ç„¶åœ¨æŸäº›è®¾å¤‡ä¸Šintå¯ä»¥çœ‹ä½œint32ï¼Œåœ¨æŸäº›è®¾å¤‡ä¸Šå¯ä»¥çœ‹ä½œæ˜¯int64ï¼Œä½†ä»–ä»¬å…¶å®æ˜¯3ç§ä¸åŒçš„ç±»å‹ intå¹¶ä¸æ˜¯å…¶å®ƒç±»å‹çš„åˆ«å tip å¦‚æœä½ åœ¨è¾ƒè€çš„32ä½è®¾å¤‡ä¸Šï¼Œä½¿ç”¨äº†è¶…è¿‡20äº¿çš„æ•´æ•°ï¼Œè€Œä¸”ä»£ç è¿˜èƒ½è¿è¡Œï¼Œé‚£ä¹ˆæœ€å¥½ä½¿ç”¨int64 å’Œ uint64 æ¥ä»£æ›¿ intå’Œuint 7.6.2 uint8uint8 å¯ä»¥è¡¨ç¤º8ä½çš„é¢œè‰²ï¼ˆçº¢ç»¿è“ï¼š 0-255ï¼‰ 1var red, green, blue uint8 = 0,141,213 ä¸ºä»€ä¹ˆä¸ä½¿ç”¨int uint8å–å€¼èŒƒå›´æ­£å¥½åˆé€‚ï¼Œè€Œintåˆ™å¤šå‡ºæ¥å‡ åäº¿ä¸åˆç†çš„æ•°å­— å¦‚æœå¾ˆå¤šé¢œè‰²æ•°æ®è¿ç»­å­˜å‚¨ï¼Œä¾‹å¦‚æœªè¢«å‹ç¼©çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆä½¿ç”¨uint8å¯ä»¥èŠ‚çœå¾ˆå¤šå†…å­˜ 7.7 è¾“å‡ºæ•°æ®ç±»å‹12a:= 1.0fmt.Println(\"%T\", a) 7.8 æ–‡æœ¬7.8.1 å£°æ˜å­—ç¬¦ä¸²123peace := \"peace\"var peace = \"peace\"var peace string = \"peace\" å­—ç¬¦ä¸²çš„é›¶å€¼ï¼š 1var blank string 7.9 ç±»å‹è½¬æ¢è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œä½¿ç”¨+è¿ç®—ç¬¦ 1cout:= \"alex\" + \"leo\" // compiler success å¦‚æœæƒ³è¿æ¥å­—ç¬¦ä¸²å’Œæ•°å€¼ï¼Œæ˜¯ä¼šæŠ¥é”™çš„ 1cout:= \"alex\" + 10 + \"leo\" // compiler error æ•´æ•°å’Œæµ®ç‚¹æ•°ä¹Ÿä¸èƒ½ç›´æ¥è¿æ¥ 123// å¦‚æœæƒ³æŠŠageè½¬åŒ–æˆæµ®ç‚¹ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ç›®æ ‡ç±»å‹å°†å…¶â€œåŒ…è£¹â€èµ·æ¥age := 41marsAge := float(age) ä»æµ®ç‚¹ç±»å‹è½¬ä¸ºæ•´æ•°ç±»å‹ å¯ä»¥ä»æµ®ç‚¹ç±»å‹è½¬åŒ–ä¸ºæ•´æ•°ç±»å‹ï¼Œå°æ•°ç‚¹åé¢çš„éƒ¨åˆ†ä¼šè¢«æˆªæ–­ï¼Œè€Œä¸æ˜¯èˆå…¥ 12earthDays := 365.2425int(earthDays) 8. å‡½æ•°8.1 å‡½æ•°å£°æ˜åœ¨goé‡Œï¼Œå¤§å†™å­—æ¯å¼€å¤´çš„å‡½æ•°ã€å˜é‡æˆ–å…¶å®ƒæ ‡è¯†ç¬¦éƒ½ä¼šè¢«å¯¼å‡ºï¼Œå¯¹å…¶å®ƒåŒ…å¯ç”¨ï¼› å°å†™å­—æ¯å¼€å¤´çš„å°±ä¸è¡Œï¼› 8.2 æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä½†æ˜¯å®ƒæ ¹æŸä¸€ä¸ªç±»å‹ç›¸å…³è”çš„ï¼› å£°æ˜æ–°ç±»å‹ å…³é”®å­—typeå¯ä»¥ç”¨æ¥å£°æ˜æ–°ç±»å‹ï¼š 12type celsius float64var temperature celsius = 20 è™½ç„¶celsius æ˜¯ä¸€ç§å…¨æ–°çš„ç±»å‹ï¼Œä½†æ˜¯ç”±äºå®ƒå’Œfloat64å…·æœ‰ç›¸åŒçš„è¡Œä¸ºå’Œè¡¨ç¤ºï¼Œæ‰€ä»¥èµ‹å€¼æ“ä½œèƒ½é¡ºåˆ©æ‰§è¡Œï¼› ä¾‹å¦‚åŠ æ³•ç­‰è¿ç®—ï¼Œä¹Ÿå¯ä»¥åƒfloat64é‚£æ ·ä½¿ç”¨ï¼› 8.2.1 é€šè¿‡æ–¹æ³•æ·»åŠ è¡Œä¸ºåœ¨C#ã€javaé‡Œï¼Œæ–¹æ³•å±äºç±» åœ¨Goé‡Œï¼Œå®ƒæä¾›äº†æ–¹æ³•ï¼Œä½†æ˜¯æ²¡æä¾›ç±»å’Œå¯¹è±¡ goæ¯”å…¶å®ƒè¯­è¨€çš„æ–¹æ³•è¦çµæ´» å¯ä»¥å°†æ–¹æ³•ä¸åŒåŒ…ä¸­å£°æ˜çš„ä»»ä½•ç±»å‹ç›¸å…³è”ã€ä½†ä¸å¯ä»¥æ˜¯intã€float64ç­‰é¢„å£°æ˜çš„ç±»å‹è¿›è¡Œå…³è”ï¼› 12345678910111213141516171819202122232425262728func main()&#123; // ä¸¤ç§ç±»å‹ä¸èƒ½æ··ç”¨ï¼Œå“ªæ€•åº•å±‚æŒ‡å‘çš„æ˜¯åŒä¸€ç±»å‹ type celsius float64 type kelvin float64 var w float64 = 10 var k kelvin = 20 k+=w // compiler error&#125;type Point struct &#123; X float64 y float64&#125;// pä¸ºæ¥æ”¶è€…ï¼Œ ç±»ä¼¼this çš„ä½œç”¨func (p Point) distance(q Point) bool &#123; return q.y &gt; p.y &amp;&amp; q.X &gt; p.X&#125;func main() &#123; var point = Point&#123;3.12, 3.14&#125; var point1 = Point&#123;4.10, 3.12&#125; fmt.Println(point.y) fmt.Println(point.distance(point1))&#125; åœ¨æ¯ä¸ªæ–¹æ³•å¯ä»¥æœ‰å¤šä¸ªå‚æ•°ï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ªæ¥æ”¶è€… åœ¨æ–¹æ³•ä½“ä¸­ï¼Œæ¥æ”¶è€…çš„è¡Œä¸ºå’Œå…¶å®ƒå‚æ•°ä¸€æ ·ï¼› 8.2.2 æ–¹æ³•è°ƒç”¨å˜é‡.æ–¹æ³•() 123456789101112131415type Point struct &#123; X float64 y float64&#125;// pä¸ºæ¥æ”¶è€…ï¼Œ ç±»ä¼¼this çš„ä½œç”¨func (p Point) distance(q Point) bool &#123; return q.y &gt; p.y &amp;&amp; q.X &gt; p.X&#125;func main() &#123; var point = Point&#123;3.12, 3.14&#125; var point1 = Point&#123;4.10, 3.12&#125; fmt.Println(point.distance(point1)) // å˜é‡.æ–¹æ³•()&#125; 8.3 ä¸€ç­‰å‡½æ•°åœ¨goé‡Œï¼Œå‡½æ•°æ˜¯å¤´ç­‰çš„ï¼Œå®ƒå¯ä»¥ç”¨åœ¨æ•´æ•°ã€å­—ç¬¦ä¸²æˆ–å…¶å®ƒç±»å‹èƒ½ç”¨çš„åœ°æ–¹ï¼› å°†å‡½æ•°èµ‹ç»™å˜é‡ å°†å‡½æ•°ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹ 1234567891011121314type kelvin float64func fakeSensor () kelvin &#123; ...&#125;func realSensor () kelvin &#123; ...&#125;func main()&#123; sensor:= fakeSensor sensor() sensor:= realSensor sensor()&#125; å°†å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•° 1234567891011type kelvin float64func measureTemperature (samples int, sensor func() kelvin) &#123; ...&#125;func fakeSensor () kelvin &#123; ...&#125;func main()&#123; measureTemperature(3, fakeSensor)&#125; å£°æ˜å‡½æ•°ç±»å‹ ä¸ºå‡½æ•°å£°æ˜ç±»å‹æœ‰åŠ©äºç²¾ç®€å’Œæ˜ç¡®è°ƒç”¨è€…çš„ä»£ç  12345type sensor func() kelvinfunc measureTemperature (samples int, s func() kelvin)// å¯ä»¥ä¼˜åŒ–ä¸ºfunc measureTemperature (samples int, s sensor ) é—­åŒ…å’ŒåŒ¿åå‡½æ•° åŒ¿åå‡½æ•°å°±æ˜¯æ²¡æœ‰åå­—çš„å‡½æ•°ï¼Œåœ¨Goé‡Œä¹Ÿç§°ä½œå‡½æ•°å­—é¢å€¼ï¼› 1234567891011121314package mainimport \"fmt\"func main()&#123; f := func()&#123; fmt.Println(\"&gt;&gt;.\") &#125; f() &#125;fn main()&#123; func()&#123; fmt.Println(\"&gt;&gt;.\") &#125;()&#125; å› ä¸ºå‡½æ•°å­—é¢å€¼éœ€è¦ä¿ç•™å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡å¼•ç”¨ï¼Œæ‰€ä»¥å‡½æ•°å­—é¢å€¼éƒ½æ˜¯é—­åŒ…çš„ï¼› 123456789101112type k float64type sensor func() kfunc realSensor() k &#123;return 0&#125;func calibrate(s sensor, offset k) sensor &#123; return func() kelvin &#123; return s() + offset &#125;&#125;func main()&#123; sensor := calibrate(realSensor, 5) sensor()&#125; é—­åŒ…å°±æ˜¯ç”±äºæ€’åå‡½æ•°å°é—­å¹¶åŒ…å›´ä½œç”¨åŸŸä¸­çš„å˜é‡è€Œå¾—åçš„ï¼› 123456789101112func main() &#123; type k int64 type sersor func() k var f k = 3 ser := func() k &#123; return f &#125; fmt.Println(ser()) // 3 f++ fmt.Println(ser()) // 4&#125; 9 æ•°ç»„9.1 æ•°ç»„çš„å¤åˆ¶æ— è®ºæ•°ç»„èµ‹å€¼ç»™æ–°çš„å˜é‡è¿˜æ˜¯å°†å®ƒä¼ é€’ç»™å‡½æ•°ï¼Œéƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå®Œæ•´çš„æ•°ç»„å‰¯æœ¬ 123456789func main() &#123; plants := [...]string&#123;\"a\", \"b\", \"c\"&#125; clones := plants plants[0] = \"alex\" fmt.Println(plants) fmt.Println(clones) // [alex b c] // [a b c]&#125; æ•°ç»„ä¹Ÿæ˜¯ä¸€ç§å€¼ï¼Œå‡½æ•°é€šè¿‡å€¼ä¼ é€’æ¥æ¥æ”¶å‚æ•°ï¼Œæ‰€ä»¥æ•°ç»„ä½œä¸ºå‡½æ•°çš„å‚æ•°å°±éå¸¸ä½æ•ˆ 123456789101112131415func clonefunc(p [3]string) [3]string &#123; for i := range p &#123; p[i] = \"pruffix\" + p[i] &#125; return p&#125;func main() &#123; plants := [...]string&#123;\"a\", \"b\", \"c\"&#125; fmt.Println(clonefunc(plants)) fmt.Println(plants) // [pruffixa pruffixb pruffixc] // [a b c]&#125; æ•°ç»„çš„é•¿åº¦ä¹Ÿæ˜¯æ•°ç»„ç±»å‹çš„ä¸€éƒ¨åˆ† å°è¯•å°†é•¿åº¦ä¸ç¬¦çš„æ•°ç»„ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œå°†ä¼šæŠ¥é”™ å‡½æ•°ä¸€èˆ¬ä½¿ç”¨sliceè€Œä¸æ˜¯æ•°ç»„ä½œä¸ºå‚æ•° 10 sliceæŒ‡å‘æ•°ç»„çš„çª—å£ å‡å¦‚p æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé‚£ä¹ˆ p[0:4] å°±æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œå®ƒåˆ‡åˆ†å‡ºæ•°ç»„é‡Œé¢å‰4ä¸ªå…ƒç´  åˆ‡åˆ†æ•°ç»„ä¸ä¼šå¯¼è‡´æ•°ç»„è¢«ä¿®æ”¹ï¼Œå®ƒåªæ˜¯åˆ›å»ºäº†æŒ‡å‘æ•°ç»„çš„ä¸€ä¸ªçª—å£æˆ–è§†å›¾ï¼Œè¿™ç§è§†å›¾å°±æ˜¯sliceç±»å‹ï¼› é»˜è®¤ç´¢å¼• [:10] [1:] [:] åˆ‡åˆ†æ•°ç»„çš„è¯­æ³•ä¹Ÿå¯ä»¥ç”¨äºåˆ‡åˆ†å­—ç¬¦ä¸² åˆ‡åˆ†å­—ç¬¦ä¸²æ—¶ï¼Œç´¢å¼•ä»£è¡¨çš„æ˜¯å­—èŠ‚æ•°è€Œé å­—ç¬¦ä¸²çš„æ•°ï¼› 12que := \"æ±‰å­—^&amp;COMasf\"fmt.Println(que[:3]) // æ±‰ 10.1 sliceçš„å­—é¢å€¼Goé‡Œé¢å¾ˆå¤šå‡½æ•°éƒ½å€¾å‘äºä½¿ç”¨sliceè€Œä¸æ˜¯æ•°ç»„ä½œä¸ºå‚æ•° æƒ³è¦è·å¾—ä¸åº•å±‚æ•°ç»„ç›¸åŒå…ƒç´ çš„sliceï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨[:]è¿›è¡Œåˆ‡åˆ† 10.2 å£°æ˜slice1234// å£°æ˜sliced := []string &#123;\"a\",\"b\",\"c\"&#125;// å£°æ˜arrayf := [...]string &#123;\"a\", \"c\"&#125; 1234567891011func hyper(worlds []string) &#123; for i := range worlds &#123; worlds[i] = strings.TrimSpace(worlds[i]) &#125;&#125;func main() &#123; planets := []string&#123;\"a \", \" b\", \" c \"&#125; hyper(planets) fmt.Println(planets) // a b c&#125; 10.3 å¸¦æœ‰æ–¹æ³•çš„åˆ‡ç‰‡åœ¨goé‡Œï¼Œå¯ä»¥å°†sliceæˆ–æ•°ç»„ä½œä¸ºåº•å±‚ç±»å‹ï¼Œç„¶åç»‘å®šå…¶å®ƒæ–¹æ³• 1234567891011type StringSlice []stringfunc (p StringSlice) Sort() &#123;&#125;func main() &#123; planets := []string&#123; \"Mer\", \"Ven\", \"Ear\", &#125; sort.StringSlice(planets).Sort() fmt.Println(planets) // [Ear Mer Ven]&#125; 10.4 appendå‡½æ•°appendå‡½æ•°ä¹Ÿæ˜¯å†…ç½®å‡½æ•°ï¼Œå®ƒå¯ä»¥å°†å…ƒç´ æ·»åŠ åˆ°sliceé‡Œé¢ 123456planets := []string&#123; \"Mer\", \"Ven\", \"Ear\",&#125;sort.StringSlice(planets).Sort()planets = append(planets, \"Xyy\")fmt.Println(planets) // [Ear Mer Ven Xyy] æ€è€ƒä¸€ä¸ªé—®é¢˜ å½“ç›´æ¥å£°æ˜planets := []string{&quot;Mer&quot;, &quot;Ven&quot;, &quot;Ear&quot;,}çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ•°ç»„ã€‚è¯¥æ•°ç»„æœ‰3ä¸ªå…ƒç´ ã€‚åé¢appendåˆç»™ planetsæ·»åŠ äº†1ä¸ªå…ƒç´ ã€‚å› ä¸ºå£°æ˜çš„æ•°ç»„æ˜¯å®šé•¿ï¼Œé‚£ä¹ˆappendçš„è¿™ä¸ªå…ƒç´ è¢«æ·»åŠ åˆ°å“ªé‡Œäº†å‘¢ï¼Ÿ 10.5 é•¿åº¦å’Œå®¹é‡ é•¿åº¦å°±æ˜¯åˆ‡ç‰‡é‡Œæœ‰å¤šå°‘ä¸ªå…ƒç´ ï¼Œ å®¹é‡å°±æ˜¯æŒ‡åˆ‡ç‰‡å¯¹åº”çš„åº•å±‚æ•°ç»„ï¼Œåº•å±‚æ•°ç»„çš„å®¹é‡æ˜¯å¤šå°‘ï¼Œé‚£ä¹ˆåˆ‡ç‰‡çš„å®¹é‡å°±æ˜¯å¤šå°‘ sliceä¸­å…ƒç´ çš„ä¸ªæ•°å†³å®šsliceçš„é•¿åº¦ å¦‚æœsliceåº•å±‚æ•°ç»„æ¯”sliceè¿˜å¤§ï¼Œé‚£ä¹ˆå°±è¯´è¯¥sliceè¿˜æœ‰å®¹é‡å¯ä¾›å¢é•¿ è·å–åˆ‡ç‰‡çš„é•¿åº¦ len(slice) è·å–åˆ‡ç‰‡çš„å®¹é‡ cap(slice) 12345678910111213func dump(label string, slice []string) &#123; fmt.Printf(\"%v: length %v, cap %v \\n\", label, len(slice), cap(slice))&#125;func main() &#123; planets := []string&#123; \"Mer\", \"Ven\", \"Ear\", \"Xyy\", \"Z@@\", &#125; dump(\"planets\", planets) dump(\"planets[1:2]\", planets[1:2])&#125;// planets: length 5, cap 5 // planets[1:2]: length 1, cap 4 å½“å¾€ä¸€ä¸ªåˆ‡ç‰‡appendå…ƒç´ çš„æ—¶å€™ï¼Œè¦çœ‹ä¸€ä¸‹åº•å±‚æ•°ç»„çš„é•¿åº¦å¤Ÿä¸å¤Ÿï¼Œå¦‚æœä¸å¤Ÿçš„è¯ï¼Œæ–°å£°æ˜ä¸€ä¸ªé•¿åº¦ä¸ºå½“å‰æ•°ç»„é•¿åº¦ä¸¤å€é•¿åº¦çš„æ•°ç»„ï¼Œç„¶åå°†è€æ•°ç»„çš„å€¼ä¾æ¬¡å¤åˆ¶åˆ°æ–°æ•°ç»„é‡Œé¢ï¼Œå†è¿½åŠ appendçš„å…ƒç´ ã€‚å¦‚æœå¤Ÿçš„è¯ï¼Œç›´æ¥è¿½åŠ ä¸åˆ›å»ºæ–°æ•°ç»„ï¼› planets[1:2] capä¸ºä½•æ˜¯ 4 ï¼Ÿ 10.6 ä¸‰ä¸ªç´¢å¼•çš„åˆ‡åˆ†æ“ä½œGo1.2 å¼•å…¥äº†èƒ½å¤Ÿé™åˆ¶æ–°å»ºåˆ‡ç‰‡å®¹é‡çš„ä¸‰ç´¢å¼•åˆ‡åˆ†æ“ä½œ 123456func main() &#123; planets := []string&#123; \"Mer\", \"Ven\", \"Ear\", \"Xyy\", \"Z@@\", &#125; ter := planets[0:4:4] // ç¬¬ä¸‰ä¸ªæŒ‡å®šåˆ‡ç‰‡å®¹é‡ä¸º4&#125; 10.7 ä½¿ç”¨makeå‡½æ•°å¯¹sliceè¿›è¡Œé¢„åˆ†é…å½“sliceçš„å®¹é‡ä¸è¶³ä»¥æ‰§è¡Œappendæ“ä½œæ—¶ï¼ŒGoå¿…é¡»åˆ›å»ºæ–°æ•°ç»„å¹¶å¤åˆ¶æ—§æ•°ç»„ä¸­çš„å†…å®¹ ä½†é€šè¿‡å†…ç½®çš„makeå‡½æ•°ï¼Œå¯ä»¥å¯¹sliceè¿›è¡Œé¢„åˆ†é…ç­–ç•¥ å°½é‡é¿å…é¢å¤–çš„å†…å­˜åˆ†é…å’Œæ•°ç»„å¤åˆ¶æ“ä½œ 123456789101112func dump(label string, slice []string) &#123; fmt.Printf(\"%v: length %v, cap %v \\n\", label, len(slice), cap(slice))&#125;func main() &#123; planets := make([]string, 0, 10) // è®¾ç½® é•¿åº¦ å®¹é‡ dump(\"aa\", planets) // aa: length 0, cap 10 planets = append(planets, \"Mer\", \"Ven\", \"Ear\", \"Xyy\", \"Z@@\", ) dump(\"bb\", planets) // bb: length 5, cap 10&#125; 10.8 å£°æ˜å¯å˜å‚æ•°çš„å‡½æ•°å£°æ˜Printf append è¿™æ ·çš„å¯å˜å‚æ•°å‡½æ•°ï¼Œéœ€è¦åœ¨å‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‰é¢åŠ ä¸Š â€¦ ç¬¦å·ï¼› 123456789101112131415161718192021// ...string è¡Œå‚// planets... å®å‚func terraform(prefix string, worlds ...string) []string &#123; newWorlds := make([]string, len(worlds)) for i := range worlds &#123; newWorlds[i] = prefix + \" \" + worlds[i] &#125; return newWorlds&#125;func main() &#123; twoWorlds := terraform(\"New\", \"Venus\", \"Mars\") fmt.Println(twoWorlds) // [New Venus New Mars] planets := []string&#123;\"Venus\", \"Mars\", \"Jupiter\"&#125; newPlanets := terraform(\"New\", planets...) fmt.Println(newPlanets) // [New Venus New Mars New Jupiter]&#125; 11. map11.1 å£°æ˜map[string]int 1234temperature := map[string]int &#123; \"E\": 15, \"M\": -65&#125; 11.2 mapä¸ä¼šè¢«å¤åˆ¶æ•°ç»„ï¼Œint ç­‰ç±»å‹åœ¨èµ‹å€¼ç»™æ–°å˜é‡æˆ–ä¼ é€’è‡³å‡½æ•°/æ–¹æ³•çš„æ—¶å€™ä¼šåˆ›å»ºç›¸åº”çš„å‰¯æœ¬ mapä¸ä¼š, 123456789101112131415func main() &#123; planets := map[string]string&#123; \"E\": \"Sector zz9\", \"Mars\": \"Sector zz9\", &#125; planetsMark := planets planets[\"Earth\"] = \"whoops\" fmt.Println(planets) // map[E:Sector zz9 Earth:whoops Mars:Sector zz9] fmt.Println(planetsMark) // map[E:Sector zz9 Earth:whoops Mars:Sector zz9] delete(planets, \"Earth\") fmt.Println(planetsMark) // map[E:Sector zz9 Mars:Sector zz9]&#125; 11.3 ä½¿ç”¨makeå¯¹mapè¿›è¡Œé¢„åˆ†é…1temperature := make(map[float64]int, 8) åˆ›å»ºmapæ—¶ï¼Œmakeå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå‚æ•° ç¬¬äºŒä¸ªå‚æ•°ç”¨äºä¸ºæŒ‡å®šæ•°é‡çš„keyé¢„å…ˆåˆ†é…ç©ºé—´ ä½¿ç”¨makeå‡½æ•°åˆ›å»ºçš„mapåˆå§‹é•¿åº¦ä¸º0 123456789101112131415func main() &#123; temperatures := []float64&#123; -28.0, 32.0, -31.0, -29.0, -23.0, -29.0, -28.0, -33.0, &#125; frequency := make(map[float64]int) // key ä¸ºfloat64 valueä¸ºint for _, t := range temperatures &#123; frequency[t]++ &#125; for t, num := range frequency &#123; fmt.Printf(\"%+.2f occurs %d times\\n\", t, num) &#125;&#125; 12. structstructå…è®¸å°†ä¸åŒçš„ç±»å‹çš„ä¸œè¥¿ç»„åˆåœ¨ä¸€èµ· 12.1 å£°æ˜123type location struct &#123; lat, long float64&#125; 12.2 å°†structç¼–ç ä¸ºJSONjsonåŒ…çš„Marshalå‡½æ•°å¯ä»¥å°†structä¸­çš„æ•°æ®è½¬åŒ–ä¸ºJSONæ ¼å¼ 1234567891011121314151617func main() &#123; type location struct &#123; Lat, Long float64 &#125; curiosity := location&#123;-4.12, 123.23&#125; bytes, err := json.Marshal(curiosity) exitOnError(err) fmt.Println(string(bytes)) // &#123;\"Lat\":-4.12,\"Long\":123.23&#125;&#125;func exitOnError(err error) &#123; if err != nil &#123; fmt.Println(err) os.Exit(1) &#125;&#125; 12.3 ä½¿ç”¨structæ ‡ç­¾æ¥è‡ªå®šä¹‰JSONgoè¯­è¨€ä¸­çš„jsonåŒ…è¦æ±‚structä¸­çš„å­—æ®µå¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´ï¼Œç±»ä¼¼é©¼å³°å‘½åï¼› ä½†æœ‰æ—¶å€™éœ€è¦snake_caseè›‡å½¢å‘½åè§„èŒƒï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆåŠï¼Ÿ å¯ä»¥ä¸ºå­—æ®µæ ‡æ³¨æ ‡ç­¾ï¼Œä½¿å¾—jsonåŒ…åœ¨è¿›è¡Œç¼–ç çš„æ—¶å€™èƒ½å¤ŸæŒ‰ç…§æ ‡ç­¾é‡Œçš„æ ·å¼ä¿®æ”¹å­—æ®µå 123456789101112131415161718func main() &#123; type location struct &#123; Lat float64 `json:\"latitude\"xml:\"latitude\"` Long float64 `json:\"longitude\"` &#125; curiosity := location&#123;-4.12, 123.23&#125; bytes, err := json.Marshal(curiosity) exitOnError(err) fmt.Println(string(bytes)) // &#123;\"latitude\":-4.12,\"longitude\":123.23&#125;&#125;func exitOnError(err error) &#123; if err != nil &#123; fmt.Println(err) os.Exit(1) &#125;&#125; 12.4 å°†æ–¹æ³•å…³è”åˆ°structæ–¹æ³•å¯ä»¥å…³è”åˆ°å£°æ˜çš„ç±»å‹ä¸Š 1234567type coordinate struct &#123; d,m,s float64 h rune&#125;func (c coordinate) decimal() float64&#123; &#125; 12.4.1 æ„é€ å‡½æ•°å¯ä»¥ä½¿ç”¨structå¤åˆå­—é¢å€¼æ¥åˆå§‹åŒ–ä½ æ‰€è¦çš„æ•°æ® ä½†å¦‚structåˆå§‹åŒ–çš„æ—¶å€™è¿˜è¦åšå¾ˆå¤šäº‹æƒ…ï¼Œé‚£å°±å¯ä»¥è€ƒè™‘å†™ä¸€ä¸ªæ„é€ ç”¨çš„å‡½æ•° Goè¯­è¨€æ²¡æœ‰ä¸“ç”¨çš„æ„é€ å‡½æ•°ï¼Œä½†ä»¥newæˆ–è€…Newå¼€å¤´çš„å‡½æ•°ï¼Œé€šå¸¸æ˜¯ç”¨æ¥æ„é€ æ•°æ®çš„ï¼Œä¾‹å¦‚ newPerson NewPerson 1234567891011121314151617181920212223242526type coordinate struct &#123; d,m,s float64 h rune&#125;func (c coordinate) decimal() float64&#123; sign := 1.0 switch c.h &#123; case 'S', 'W','s','w': sign = -1 &#125; return sign * (c.d + c.m/60 + c.s/3600)&#125;// æ„é€ ç”¨çš„å‡½æ•°,åœ¨goä¸­æ²¡æœ‰ä¸“ä¸šçš„æ„é€ å‡½æ•°func newLocation(lat, long coordinate) location &#123; return location&#123;lat.decimal(), long.decimal()&#125;&#125;type location struct &#123; lat, long float64&#125;func main()&#123; lat := coordinate&#123;...&#125; long := coordinate&#123;...&#125; curiosity := newLocation(lat, long)&#125; 12.4.2 Newå‡½æ•°æœ‰ä¸€äº›ç”¨äºæ„é€ çš„å‡½æ•°çš„åç§°å°±æ˜¯New ï¼ˆä¾‹å¦‚errorsåŒ…é‡Œé¢çš„Newå‡½æ•°ï¼‰ è¿™æ˜¯å› ä¸ºå‡½æ•°è°ƒç”¨æ—¶ä½¿ç”¨ åŒ…å.å‡½æ•°å çš„å½¢å¼ å¦‚æœè¯¥å‡½æ•°å«NewErrorï¼Œé‚£ä¹ˆè°ƒç”¨çš„æ—¶å€™å°±æ˜¯errors.NewError()ï¼Œ è¿™å°±ä¸å¦‚errors.New() ç®€æ´ 12.5 classçš„æ›¿ä»£æ–¹æ¡ˆGoè¯­è¨€æ²¡æœ‰classï¼Œä½†ä½¿ç”¨structå¹¶é…å¤‡å‡ ä¸ªæ–¹æ³•ä¹Ÿå¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœ 13. ç»„åˆå’Œè½¬å‘13.1 ç»„åˆåœ¨é¢å‘å¯¹è±¡çš„ä¸–ç•Œä¸­ï¼Œå¯¹è±¡ç”±æ›´å°çš„å¯¹è±¡ç»„åˆè€Œæˆ æœ¯è¯­ï¼š å¯¹è±¡ç»„åˆæˆ–ç»„åˆ Goé€šè¿‡ç»“æ„ä½“è§†çº¿ç»„åˆï¼ˆcompositionï¼‰ Goæä¾›äº†â€œåµŒå…¥â€ï¼ˆembeddingï¼‰ ç‰¹æ€§ï¼Œä»–å¯ä»¥å®ç°æ–¹æ³•çš„è½¬å‘ï¼ˆforwardingï¼‰ ç»„åˆæ˜¯ä¸€ç§æ›´ç®€å•ï¼Œçµæ´»çš„æ–¹å¼ æ‹†åˆ†ç±»å‹ 1234567891011121314151617181920212223Ã¥type report struct &#123; sol int high, low float64 lat, long float64&#125;// æ‹†åˆ†ç±»å‹type reportNew struct &#123; sol int temperature temperature location location&#125;type temperature struct &#123; high, low celsius&#125;type location struct &#123; lat, long celsius&#125;type celsius float64 duck type 12345678910111213141516171819202122232425262728293031323334package maintype reportNew struct &#123; sol int temperature temperature location location&#125;type temperature struct &#123; high, low celsius&#125;type location struct &#123; lat, long celsius&#125;type celsius float64func (t temperature) averae() celsius &#123; return (t.high + t.low) / 2&#125;// æˆ–è€…func (r reportNew) averae() celsius &#123; return r.temperature.averae()&#125;func main() &#123; t := temperature&#123;high: 12.4, low: 134.5&#125; loc := location&#123;lat: 22.3, long: 34.9&#125; report := reportNew&#123; sol: 12, temperature: t, location: loc, &#125; t.averae() report.temperature.averae() // duck type&#125; 13.2 è½¬å‘æ–¹æ³•Goå¯ä»¥é€šè¿‡structåµŒå…¥ æ¥å®ç°æ–¹æ³•çš„è½¬å‘ åœ¨structä¸­åªç»™å®šå­—æ®µç±»å‹ï¼Œä¸ç»™å®šå­—æ®µåå³å¯ 1234567891011type reportNew struct &#123; sol int temperature temperature // å­—æ®µå ç±»å‹ location location&#125;type reportNew struct &#123; sol int temperature // struct åµŒå…¥ location // åªæœ‰ç±»å‹ï¼Œæ²¡æœ‰å­—æ®µå&#125; structçš„åµŒå…¥ä¹‹åï¼Œè¢«åµŒå…¥çš„ç±»å‹å¯ä»¥ç›´æ¥ä½¿ç”¨ åµŒå…¥ç±»å‹ä¸Šçš„æ–¹æ³•äº† åœ¨structä¸­ï¼Œå¯ä»¥è½¬å‘ä»»æ„ç±»å‹ 13.3 å‘½åå†²çª12345678910111213141516171819202122232425262728293031type report struct &#123; sol temperature location&#125;type temperature struct &#123; high, low celsius&#125;type location struct &#123; lat, long celsius&#125;type celsius float64type sol intfunc (s sol) days(s2 sol) int &#123; days := int(s2 - s) if days &lt; 0 &#123; days = -days &#125; return days&#125;func (l location) days(l2 location) int &#123; return 5&#125;func main() &#123; report := report&#123;sol: 15&#125; fmt.Println(report.sol.days(1446)) fmt.Println(report.days(1446)) // error å‘ç”Ÿæ­§ä¹‰ï¼Œ ç¼–è¯‘å™¨ä¸çŸ¥é“è¯¥è°ƒ locationç±»å‹è¿˜æ˜¯solç±»å‹ä¸‹é¢çš„daysæ–¹æ³•&#125; 12345678910111213141516171819func (s sol) days(s2 sol) int &#123; days := int(s2 - s) if days &lt; 0 &#123; days = -days &#125; return days&#125;func (l location) days(l2 location) int &#123; return 5&#125;func (r report) days(s2 sol) int &#123; // é¡¶çº§ç±»å‹ï¼Œå¯ä»¥è°ƒç”¨report.daysç›´æ¥è®¿é—® return r.sol.days(s2)&#125;func main() &#123; report := report&#123;sol: 15&#125; fmt.Println(report.sol.days(1446)) fmt.Println(report.days(1446)) // compiler success&#125; 13.4 ç»§æ‰¿è¿˜æ˜¯ç»„åˆä¼˜å…ˆä½¿ç”¨å¯¹è±¡ç»„åˆè€Œä¸æ˜¯ç±»çš„ç»§æ‰¿ å¯¹ä¼ ç»Ÿçš„ç»§æ‰¿ä¸æ˜¯å¿…é¡»é¢ï¼Œæ‰€æœ‰ä½¿ç”¨ç»§æ‰¿è§£å†³çš„é—®é¢˜éƒ½å¯ä»¥é€šè¿‡å…¶å®ƒæ–¹æ³•è§£å†³ï¼› 14. æ¥å£æ¥å£å…³æ³¨äºç±»å‹å¯ä»¥åšä»€ä¹ˆï¼Œè€Œä¸æ˜¯å­˜å‚¨äº†ä»€ä¹ˆ æ¥å£é€šè¿‡åˆ—ä¸¾ç±»å‹å¿…é¡»æ»¡è¶³çš„ä¸€ç»„æ–¹æ³•æ¥è¿›è¡Œå£°æ˜ åœ¨Goè¯­è¨€ä¸­ï¼Œä¸éœ€è¦æ˜¾å¼å£°æ˜æ¥å£ï¼› 1234567891011121314151617181920212223// å£°æ˜æ¥å£å˜é‡var t interface &#123; talk() string&#125;type martian struct&#123;&#125;func (m martian) talk() string &#123; return \"nack nack\"&#125;type laser intfunc (l laser) talk() string &#123; return strings.Repeat(\"pew\", int(l))&#125;func main() &#123; // å¤šæ€ t = martian&#123;&#125; // martian ç±»å‹å®ç°äº†talkæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥èµ‹å€¼ fmt.Println(t.talk()) t = laser(3) // laser ç±»å‹å®ç°äº†talkæ–¹æ³•ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥èµ‹å€¼ fmt.Println(t.talk())&#125; 14.1 æ¥å£ç±»å‹ä¸ºäº†å¤ç”¨ï¼Œé€šå¸¸ä¼šæŠŠæ¥å£å£°æ˜ä¸ºç±»å‹ æŒ‰çº¦å®šï¼Œæ¥å£åç§°é€šå¸¸ä»¥erç»“å°¾ 123456789101112131415161718192021222324// å£°æ˜æ¥å£å˜é‡type talker interface &#123; talk() string&#125;type martian struct&#123;&#125;func (m martian) talk() string &#123; return \"nack nack\"&#125;type laser intfunc (l laser) talk() string &#123; return strings.Repeat(\"pew\", int(l))&#125;func shout(t talker) &#123; louder := strings.ToUpper(t.talk()) fmt.Println(louder)&#125;func main() &#123; shout(martian&#123;&#125;) // martian å®ç°äº† talker ç±»å‹ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ shout(laser(2)) // laserå®ç°äº† talkerç±»å‹ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨&#125; æ¥å£å¯ä»¥å’ŒstructåµŒå…¥ç‰¹æ€§ä¸€åŒä½¿ç”¨ 12345678910111213141516171819202122232425262728293031323334353637package mainimport ( \"fmt\" \"strings\")// å£°æ˜æ¥å£å˜é‡type talker interface &#123; talk() string&#125;type martian struct&#123;&#125;func (m martian) talk() string &#123; return \"nack nack\"&#125;type laser intfunc (l laser) talk() string &#123; return strings.Repeat(\"pew\", int(l))&#125;func shout(t talker) &#123; louder := strings.ToUpper(t.talk()) fmt.Println(louder)&#125;type starship struct &#123; laser&#125;func main() &#123; s := starship&#123;laser(3)&#125; // starship ç±»å‹åŒ…å«äº†laser fmt.Println(s.talk()) // å› ä¸ºlaserå®ç°talkæ–¹æ³•ï¼Œæ‰€ä»¥ starshipå¯ä»¥è°ƒç”¨talkæ–¹æ³• shout(s) // starshipæœ‰talkæ–¹æ³•ï¼Œæ»¡è¶³äº† talkerç±»å‹ï¼Œè€Œtalkerç±»å‹åˆèƒ½ä½œä¸º shoutå‡½æ•°çš„å‚æ•°ï¼Œæ‰€ä»¥å¯ä»¥å°† starship ä¼ å…¥shoutæ–¹æ³•&#125; åŒæ—¶ä½¿ç”¨ç»„åˆå’Œæ¥å£å°†æ„æˆéå¸¸å¼ºå¤§çš„è®¾è®¡å·¥å…·ï¼› 14.2 æ¢ç´¢æ¥å£Goè¯­è¨€çš„æ¥å£éƒ½æ˜¯éšå¼æ»¡è¶³çš„ Goå…è®¸åœ¨å®ç°ä»£ç çš„è¿‡ç¨‹ä¸­ï¼Œéšæ—¶åˆ›å»ºæ–°çš„æ¥å£ã€‚ä»»ä½•ä»£ç éƒ½èƒ½å®ç°æ¥å£ã€‚åŒ…æ‹¬å·²ç»å­˜åœ¨çš„ä»£ç  12345678910111213141516171819202122232425262728293031323334package mainimport ( \"fmt\" \"time\")type stardater interface &#123; YearDay() int Hour() int&#125;type sol intfunc (s sol) YearDay() int &#123; return int(s % 668)&#125;func (s sol) Hour() int &#123; return 0&#125;// func stardate(t time.Time) float64 &#123;func stardate(t stardater) float64 &#123; // æ—¢ç„¶ stardaterå®ç°äº† YearDayå’ŒHourï¼Œå¯ä»¥æ›´æ”¹æ­¤ç±»å‹ doy := float64(t.YearDay()) h := float64(t.Hour()) / 24.0 return 1000 + doy + h&#125;func main() &#123; day := time.Date(2012, 8, 6, 5, 17, 0, 0, time.UTC) fmt.Printf(\"%.1f Has\\n\", stardate(day)) s := sol(1422) fmt.Printf(\"%.1f Happy\\n\", stardate(s)) // å› ä¸ºsolç±»å‹ä¹Ÿå®ç°äº†stardateræ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ä¼ å…¥stardateæ–¹æ³•&#125; 14.3 æ»¡è¶³æ¥å£Goæ ‡å‡†åº“å¯¼å‡ºäº†å¾ˆå¤šåªæœ‰å•ä¸ªæ–¹æ³•çš„æ¥å£ï¼› Goé€šè¿‡ç®€å•çš„ã€é€šå¸¸åªæœ‰å•ä¸ªæ–¹æ³•çš„æ¥å£â€¦ æ¥é¼“åŠ±ç»„åˆè€Œä¸æ˜¯ç»§æ‰¿ï¼Œè¿™äº›æ¥å£åœ¨å„ä¸ªç»„ä»¶ä¹‹é—´å½¢æˆäº†ç®€æ˜æ˜“æ‡‚çš„ç•Œé™ ä¾‹å¦‚åœ¨fmtåŒ… å£°æ˜çš„Stringeræ¥å£ 12345678910111213141516type Stringer interface &#123; String() string&#125;type location struct &#123; lat, long float64&#125;func (l location) String() string &#123; return fmt.Sprintf(\"%v, %v\", l.lat, l.long)&#125;func main() &#123; curiosity := location&#123;-4.5895, 137.4417&#125; fmt.Println(curiosity) // locationå®ç°äº†Stringæ–¹æ³•ï¼Œæ»¡è¶³äº† Stringeræ¥å£ã€‚ æ‰€ä»¥å°±èƒ½è¢«fmt.Println è°ƒç”¨äº†&#125; æ ‡å‡†åº“ä¸­å¸¸ç”¨çš„æ¥å£è¿˜åŒ…æ‹¬: io.Reader, io.Write, json.Marshaler 15 æŒ‡é’ˆæŒ‡é’ˆæ˜¯æŒ‡å‘å¦ä¸€ä¸ªå˜é‡åœ°å€çš„å˜é‡ Goè¯­è¨€çš„æŒ‡é’ˆåŒæ—¶ä¹Ÿå¼ºè°ƒå®‰å…¨æ€§ï¼Œä¸ä¼šå‡ºç°è¿·é€”æŒ‡é’ˆï¼ˆdangling pointersï¼‰ 15.1 &amp; å’Œ *å˜é‡ä¼šå°†å®ƒä»¬çš„å€¼å­˜å‚¨åœ¨è®¡ç®—æœºçš„RAMé‡Œï¼Œå­˜å‚¨ä½ç½®å°±æ˜¯è¯¥å˜é‡çš„å†…å­˜åœ°å€ï¼› &amp; ï¼š è·å¾—å˜é‡çš„å†…å­˜åœ°å€ 1234func main() &#123; answer := 42 fmt.Println(&amp;answer) // 0xc000014090&#125; &amp; æ“ä½œç¬¦æ— æ³•è·å¾—å­—ç¬¦ä¸²/æ•°å€¼/å¸ƒå°”å­—é¢å€¼çš„åœ°å€ï¼› &amp;42ï¼Œ &amp;â€helloâ€ è¿™äº›éƒ½ä¼šå¯¼è‡´ç¼–è¯‘å™¨æŠ¥é”™ *æ“ä½œç¬¦ä¸&amp;çš„ä½œç”¨ç›¸åï¼Œå®ƒç”¨æ¥è§£å¼•ç”¨ï¼Œæä¾›å†…å­˜åœ°å€æŒ‡å‘çš„å€¼ï¼› Cè¯­è¨€ä¸­çš„å†…å­˜åœ°å€å¯ä»¥é€šè¿‡ address++ è¿™æ ·çš„æŒ‡é’ˆè¿ç®—è¿›è¡Œæ“ä½œï¼Œåœ¨Goé‡Œé¢ä¸å…è®¸è¿™ç§ä¸å®‰å…¨çš„æ“ä½œ 15.2 æŒ‡é’ˆç±»å‹æŒ‡é’ˆå­˜å‚¨çš„æ˜¯å†…å­˜åœ°å€ 1234func main() &#123; answer := 42 address := &amp;answer // *int addresså°±æ˜¯ä¸€ä¸ªæŒ‡å‘intç±»å‹çš„æŒ‡é’ˆ&#125; æŒ‡é’ˆç±»å‹å’Œå…¶å®ƒæ™®é€šç±»å‹ä¸€æ ·ï¼Œå‡ºç°åœ¨æ‰€æœ‰éœ€è¦ç”¨åˆ°ç±»å‹çš„åœ°æ–¹ï¼Œå¦‚å˜é‡å£°æ˜ã€å‡½æ•°è¡Œå‚ã€è¿”å›å€¼ç±»å‹ã€ç»“æ„ä½“å­—æ®µç­‰ å°†*æ”¾åœ¨ç±»å‹å‰é¢è¡¨ç¤ºå£°æ˜æŒ‡é’ˆç±»å‹ å°†*æ”¾åœ¨å˜é‡å‰é¢è¡¨ç¤ºè§£å¼•ç”¨æ“ä½œ 15.3 æŒ‡é’ˆå°±æ˜¯ç”¨æ¥æŒ‡å‘çš„ä¸¤ä¸ªæŒ‡é’ˆå˜é‡æŒæœ‰ç›¸åŒçš„å†…å­˜åœ°å€ï¼Œé‚£ä¹ˆå®ƒä»¬å°±æ˜¯ç›¸ç­‰çš„ï¼› 123// è¯´æ˜ä¸‹é¢è¯­å¥çš„ä½œç”¨a = *b; // å°†bæŒ‡é’ˆè§£å¼•ç”¨ï¼Œèµ‹å€¼ç»™aï¼Œè¿™ä¸ªæ˜¯å€¼æ‹·è´*b = 'alex' // båœ°å€è§£å¼•ç”¨ï¼Œé‡å¤èµ‹å€¼ 15.4 æŒ‡å‘ç»“æ„çš„æŒ‡é’ˆä¸å­—ç¬¦ä¸²å’Œæ•°å€¼ä¸ä¸€æ ·ï¼Œå¤åˆå­—é¢é‡çš„å‰é¢å¯ä»¥æ”¾ç½®&amp; 12345678910111213func main() &#123; type person struct &#123; name, superpower string age int &#125; timmy := &amp;person&#123; name: \"alex\", age: 10, &#125; // (*timmy).superpower = \"flying\" // è®¿é—®å­—æ®µæ—¶ï¼Œ è§£å¼•ç”¨ä¸æ˜¯å¿…é¡»è¦åšçš„ timmy.superpower = \"flying\" fmt.Printf(\"%+v\\n\", timmy) // &amp;&#123;name:alex superpower:flying age:10&#125;&#125; è®¿é—®å­—æ®µæ—¶ï¼Œå¯¹ç»“æ„ä½“è¿›è¡Œè§£å¼•ç”¨å¹¶ä¸æ˜¯å¿…é¡»çš„ï¼› 15.5 æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆå’Œç»“æ„ä½“ä¸€æ ·ï¼Œå¯ä»¥æŠŠ&amp; æ”¾åœ¨æ•°ç»„çš„å¤åˆå­—é¢å€¼å‰é¢æ¥åˆ›å»ºæŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆ æ•°ç»„åœ¨æ‰§è¡Œç´¢å¼•æˆ–åˆ‡ç‰‡æ“ä½œæ—¶ä¼šè‡ªåŠ¨è§£å¼•ç”¨ã€‚æ²¡æœ‰å¿…è¦å†™(*array)[0]è¿™ç§å½¢å¼ 12345func main()&#123; arr := &amp;[3]string&#123;'a','b','c'&#125; arr[0] arr[1:2]&#125; ä¸Cè¯­è¨€ä¸ä¸€æ ·ï¼ŒGoé‡Œé¢æ•°ç»„å’ŒæŒ‡é’ˆæ˜¯ä¸¤ç§å®Œå…¨ç‹¬ç«‹çš„ç±»å‹ sliceå’Œmapçš„å¤åˆå­—é¢å€¼å‰é¢ä¹Ÿå¯ä»¥æ”¾ç½® &amp;æ“ä½œç¬¦ï¼Œä½†æ˜¯Goå¹¶æ²¡æœ‰ä¸ºå®ƒä»¬æä¾›è‡ªåŠ¨è§£å¼•ç”¨çš„åŠŸèƒ½ï¼› 15.5.1 ä¿®æ”¹æ•°ç»„å‡½æ•°é€šè¿‡æŒ‡é’ˆå¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œä¿®æ”¹ 12345678910// runeæŒ‡çš„æ˜¯ï¼Ÿfunc reset(board *[8][8]rune) &#123; board[0][0] = 'r'&#125;func main() &#123; var board [8][8]rune reset(&amp;board) fmt.Printf(\"%c\", board[0][0]) // r&#125; 15.5.2 ä»€ä¹ˆæƒ…å†µä¸‹åº”è¯¥ä½¿ç”¨æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆéšå¼çš„æŒ‡é’ˆ Goè¯­è¨€é‡Œä¸€äº›å†…ç½®çš„é›†åˆç±»å‹å°±åœ¨æš—ä¸­ä½¿ç”¨æŒ‡é’ˆ mapåœ¨è¢«èµ‹å€¼æˆ–è€…è¢«ä½œä¸ºå‚æ•°ä¼ é€’çš„æ—¶å€™ä¸ä¼šè¢«å¤åˆ¶ mapå°±æ˜¯ä¸€ç§éšå¼æŒ‡é’ˆ è¿™ç§å†™æ³•å°±æ˜¯å¤šæ­¤ä¸€ä¸¾ï¼š func demo(planets *map[string]string) åº”è¯¥å»æ‰ğŸŒŸ mapçš„é”®å€¼éƒ½å¯ä»¥æ˜¯æŒ‡é’ˆç±»å‹ éœ€è¦å°†æŒ‡é’ˆæŒ‡å‘mapçš„æƒ…å†µå¹¶ä¸å¤šè§ 15.5.3 sliceæŒ‡å‘æ•°ç»„ä¹‹å‰è¯´è¿‡sliceæ˜¯æŒ‡å‘æ•°ç»„çš„çª—å£ï¼Œå®é™…ä¸Šsliceåœ¨æŒ‡å‘æ•°ç»„å…ƒç´ çš„æ—¶å€™ä¹Ÿä½¿ç”¨äº†æŒ‡é’ˆï¼› æ¯ä¸ªsliceå†…éƒ¨éƒ½ä¼šè¢«è¡¨ç¤ºä¸ºä¸€ä¸ªåŒ…å«3ä¸ªå…ƒç´ çš„ç»“æ„ï¼Œå®ƒä»¬åˆ†åˆ«æŒ‡å‘ï¼š æ•°ç»„çš„æŒ‡é’ˆ sliceçš„å®¹é‡ sliceçš„é•¿åº¦ å½“sliceè¢«ç›´æ¥ä¼ é€’è‡³å‡½æ•°æˆ–æ–¹æ³•æ—¶ï¼Œsliceçš„å†…éƒ¨æŒ‡é’ˆå°±å¯ä»¥å¯¹åº•å±‚æ•°æ®è¿›è¡Œä¿®æ”¹ æŒ‡å‘sliceçš„æ˜¾å¼æŒ‡é’ˆçš„å”¯ä¸€ä½œç”¨å°±æ˜¯ä¿®æ”¹sliceæœ¬èº«ï¼š sliceçš„é•¿åº¦ã€å®¹é‡ä»¥åŠèµ·å§‹åç§»é‡ 123456789101112func reclassify(p *[]string) &#123; *p = (*p)[0:8] // ä¿®æ”¹åˆ‡ç‰‡æœ¬èº«&#125;func main() &#123; planets := []string&#123; \"m\", \"v\", \"E\", \"MA\", \"ju\", \"sa\", \"ur\", \"ne\", \"pl\", &#125; reclassify(&amp;planets) fmt.Println(planets) // [m v E MA ju sa ur ne]&#125; 15.5.4 æŒ‡é’ˆå’Œæ¥å£1234567891011121314151617181920type talker interface &#123; talk() string&#125;func shout(t talker) &#123; louder := strings.ToUpper(t.talk()) fmt.Println(louder)&#125;type martian struct&#123;&#125;func (m martian) talk() string &#123; return \"nack nack\"&#125;func main() &#123; shout(martian&#123;&#125;) shout(&amp;martian&#123;&#125;) // NACK NACK // NACK NACK&#125; æ— è®ºæ˜¯martian è¿˜æ˜¯æŒ‡å‘martiançš„æŒ‡é’ˆï¼Œéƒ½å¯ä»¥æ»¡è¶³talkeræ¥å£ å¦‚æœæ–¹æ³•ä½¿ç”¨çš„æŒ‡é’ˆæ¥æ”¶è€…ï¼Œé‚£ä¹ˆæƒ…å†µä¼šæœ‰æ‰€ä¸åŒï¼› 12345678910111213141516171819202122232425type talker interface &#123; talk() string&#125;func shout(t talker) &#123; louder := strings.ToUpper(t.talk()) fmt.Println(louder)&#125;type martian struct&#123;&#125;func (m martian) talk() string &#123; return \"nack nack\"&#125;type laser intfunc (l *laser) talk() string &#123; return strings.Repeat(\"pew\", int(*l))&#125;func main() &#123; pew := laser(2) shout(&amp;pew) // PEWPEW shout(pew) // compiler error&#125; 15.6 å®ç°ä¿®æ”¹Goè¯­è¨€çš„å‡½æ•°å’Œæ–¹æ³•éƒ½æ˜¯æŒ‰å€¼ä¼ é€’å‚æ•°çš„ï¼Œè¿™æ„å‘³ç€å‡½æ•°æ€»æ˜¯æ“ä½œäºè¢«ä¼ é€’å‚æ•°çš„å‰¯æœ¬ï¼› å½“æŒ‡é’ˆè¢«ä¼ é€’åˆ°å‡½æ•°æ—¶ï¼Œå‡½æ•°å°†æ¥æ”¶ä¼ å…¥çš„å†…å­˜åœ°å€çš„å‰¯æœ¬ï¼Œä¹‹åå‡½æ•°å¯ä»¥é€šè¿‡è§£å¼•ç”¨å†…å­˜åœ°å€æ¥ä¿®æ”¹æŒ‡é’ˆæŒ‡å‘çš„å€¼ï¼› 1234567891011121314151617181920type person struct &#123; name, superpower string age int&#125;func birthday(p *person) &#123; p.age++&#125;func main() &#123; rebecca := person&#123; name: \"alex\", age: 10, superpower: \"imagination\", &#125; birthday(&amp;rebecca) // ä¼ å…¥çš„è™½ç„¶æ˜¯æŒ‡é’ˆå‰¯æœ¬ï¼Œä½†æ˜¯æŒ‡å‘åŒä¸€åœ°å€ // birthday(rebecca) // ä¼ å…¥çš„æ˜¯å¼•ç”¨ç±»å‹å‰¯æœ¬ï¼Œç­‰äºå¤åˆ¶äº†ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œæ€§èƒ½å·® fmt.Printf(\"%+v\\n\", rebecca) // &#123;name:alex superpower:imagination age:11&#125;&#125; 15.7 æŒ‡é’ˆæ¥æ”¶è€…æ–¹æ³•çš„æ¥æ”¶è€…å’Œæ–¹æ³•çš„å‚æ•°åœ¨å¤„ç†æŒ‡é’ˆæ–¹é¢æ˜¯å¾ˆç›¸ä¼¼çš„ Goè¯­è¨€åœ¨å˜é‡é€šè¿‡ç‚¹æ ‡è®°æ³•è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œè‡ªåŠ¨ä½¿ç”¨&amp;å–å¾—å˜é‡çš„å†…å­˜åœ°å€ æ‰€ä»¥ä¸ç”¨å†™ (&amp;nathan).birthday() è¿™ç§å½¢å¼ä¹Ÿå¯ä»¥æ­£å¸¸è¿è¡Œ 123456789101112131415161718192021func (p *person) birthday() &#123; p.age++&#125;func main() &#123; terry := &amp;person&#123; name: \"alex\", age: 15, &#125; terry.birthday() fmt.Printf(\"%+v\\n\", terry) // &amp;&#123;name:alex age:16&#125; nathan := person&#123; name: \"leo\", age: 17, &#125; nathan.birthday() fmt.Printf(\"%+v\\n\", nathan) // &#123;name:leo age:18&#125;&#125; ä½¿ç”¨æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…çš„ç­–ç•¥åº”è¯¥å§‹ç»ˆå¦‚ä¸€ï¼š å¦‚æœä¸€ç§ç±»å‹çš„æŸäº›æ–¹æ³•éœ€è¦ç”¨åˆ°æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…ï¼Œå°±åº”è¯¥ä¸ºè¿™ç§ç±»å‹çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯ç”¨æŒ‡é’ˆä½œä¸ºæ¥æ”¶è€…ï¼› 15.8 å†…éƒ¨æŒ‡é’ˆGoè¯­è¨€æä¾›äº†å†…éƒ¨æŒ‡é’ˆè¿™ç§ç‰¹æ€§ å®ƒç”¨äºç¡®å®šç»“æ„ä½“ä¸­æŒ‡å®šå­—æ®µçš„å†…å­˜åœ°å€ 123456789101112131415161718192021type stats struct &#123; level int endurance, health int&#125;func levelUp(s *stats) &#123; s.level++ s.endurance = 42 + (15 * s.level) s.health = 5 * s.endurance&#125;type character struct &#123; name string stats stats&#125;func main() &#123; player := character&#123;name: \"alex\"&#125; levelUp(&amp;player.stats) // ç»“æ„ä½“æŸä¸ªå­—æ®µçš„åœ°å€ fmt.Printf(\"%+v\\n\", player.stats) // &#123;level:1 endurance:57 health:285&#125;&#125; &amp;æ“ä½œç¬¦ä¸ä»…å¯ä»¥è·å¾—ç»“æ„ä½“çš„å†…å­˜åœ°å€ï¼Œè¿˜å¯ä»¥è·å¾—ç»“æ„ä½“ä¸­æŒ‡å®šå­—æ®µçš„å†…å­˜åœ°å€ï¼› 15.9 å°ç»“åº”åˆç†ä½¿ç”¨æŒ‡é’ˆï¼Œä¸è¦è¿‡åº¦ä½¿ç”¨æŒ‡é’ˆ 16. nilnilæ˜¯ä¸€ä¸ªåå­—ï¼Œè¡¨ç¤ºâ€œæ— â€ æˆ–â€œé›¶â€ Goé‡Œé¢ï¼Œnilæ˜¯ä¸€ä¸ªé›¶å€¼ å¦‚æœä¸€ä¸ªæŒ‡é’ˆæ²¡æœ‰æ˜ç¡®çš„æŒ‡å‘ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±æ˜¯nil é™¤äº†æŒ‡é’ˆï¼Œnilè¿˜æ˜¯sliceã€mapå’Œæ¥å£çš„é›¶å€¼ Goè¯­è¨€çš„nilï¼Œæ¯”ä»¥å¾€è¯­è¨€ä¸­çš„nullæ›´ä¸ºå‹å¥½ï¼Œå¹¶ä¸”ç”¨çš„æ²¡é‚£ä¹ˆé¢‘ç¹ï¼Œä½†æ˜¯ä»éœ€è°¨æ…ä½¿ç”¨ 16.1 nilä¼šå¯¼è‡´panicå¦‚æœæŒ‡é’ˆæ²¡æœ‰æ˜ç¡®çš„æŒ‡å‘ï¼Œé‚£ä¹ˆç¨‹åºå°†æ— æ³•å¯¹å…¶å®æ–½çš„è§£å¼•ç”¨ã€‚ å°è¯•è§£å¼•ç”¨ä¸€ä¸ªnilæŒ‡é’ˆå°†å¯¼è‡´ç¨‹åºå´©æºƒ 123456789func main() &#123; var nowhere *int fmt.Println(nowhere) // &lt;nil&gt; fmt.Println(*nowhere) // compiler error // é˜²èŒƒä»£ç  if nowhere != nil &#123; fmt.Println(*nowhere) &#125;&#125; ä¿æŠ¤æ–¹æ³• 123456func (p *person) days ()&#123; if p != nil &#123; return &#125; p.age++&#125; å› ä¸ºå€¼ä¸ºnilçš„æ¥æ”¶è€…å’Œå€¼ä¸ºnilçš„å‚æ•°åœ¨è¡Œä¸ºä¸Šå¹¶æ²¡æœ‰åŒºåˆ«ï¼Œæ‰€ä»¥goè¯­è¨€å³ä½¿åœ¨æ¥æ”¶è€…ä¸ºnilçš„æƒ…å†µä¸‹ï¼Œä¹Ÿä¼šç»§ç»­è°ƒç”¨æ–¹æ³•ï¼› 16.2 nilå‡½æ•°å€¼å½“å˜é‡è¢«å£°æ˜ä¸ºå‡½æ•°ç±»å‹æ—¶ï¼Œå®ƒçš„é»˜è®¤å€¼æ˜¯nil 1234func main() &#123; var fn func(a, b int) int fmt.Println(fn == nil) // true&#125; æ£€æŸ¥å‡½æ•°å€¼æ˜¯å¦ä¸ºnilï¼Œå¹¶åœ¨æœ‰éœ€è¦æ—¶æä¾›é»˜è®¤è¡Œä¸º 123456789101112func sortStrings(s []string, less func(i, j int) bool) &#123; if less == nil &#123; less = func(i, j int) bool &#123; return s[i] &lt; s[j] &#125; &#125; sort.Slice(s, less)&#125;func main() &#123; food := []string&#123;\"onion\", \"carrot\", \"celery\"&#125; sortStrings(food, nil) fmt.Println(food) // [carrot celery onion]&#125; 16.3 nil sliceå¦‚æœslice åœ¨å£°æ˜ä¹‹åæ²¡æœ‰ä½¿ç”¨å¤åˆå­—é¢å€¼æˆ–å†…ç½®çš„make å‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°±æ˜¯nil å¹¸è¿çš„æ˜¯ï¼Œrangeã€lenã€appendç­‰å†…ç½®æ•°éƒ½å¯ä»¥æ­£å¸¸å¤„ç†å€¼ä¸ºnilçš„slice 12345678910func main() &#123; var soup []string fmt.Println(soup == nil) // true for _, ingredient := range soup &#123; fmt.Println(ingredient) &#125; fmt.Println(len(soup)) // 0 soup = append(soup, \"onion\", \"carrort\", \"celery\") fmt.Println(soup) // [onion carrort celery]&#125; è™½ç„¶ç©ºsliceå’Œå€¼ä¸ºnilçš„sliceå¹¶ä¸ç›¸ç­‰ï¼Œä½†å®ƒä»¬é€šå¸¸å¯ä»¥æ›¿æ¢ä½¿ç”¨ï¼› 1234567func mirepoix(ingredients []string) []string &#123; return append(ingredients, \"onion\", \"carrot\", \"celery\")&#125;func main() &#123; soup := mirepoix(nil) fmt.Println(soup) // [onion carrort celery]&#125; 16.4 nil mapå’Œsliceä¸€æ ·ï¼Œå¦‚æœmapåœ¨å£°æ˜åæ²¡æœ‰ä½¿ç”¨å¤åˆå­—é¢å€¼æˆ–å†…ç½®çš„makeå‡½æ•°è¿›è¡Œåˆå§‹åŒ–ï¼Œé‚£ä¹ˆå®ƒçš„å€¼å°†ä¼šæ˜¯é»˜è®¤çš„nil 1234567891011func main() &#123; var soup map[string]int fmt.Println(soup == nil) // true measurement, ok := soup[\"onion\"] // å¯¹å€¼ä¸ºnilçš„mapè¯»å–ä¸ä¼šæŠ¥é”™ if ok &#123; fmt.Println(measurement) &#125; for ingredient, measurement := range soup &#123; // å¯¹å€¼ä¸ºnilçš„ mapè¿›è¡Œ rangeæ“ä½œä¾ç„¶ä¸ä¼šæŠ¥é”™ fmt.Println(ingredient, measurement) &#125;&#125; 16.5 nilæ¥å£å£°æ˜ä¸ºæ¥å£ç±»å‹çš„å˜é‡åœ¨æœªè¢«èµ‹å€¼æ—¶ï¼Œå®ƒçš„é›¶å€¼æ˜¯nil å¯¹äºä¸€ä¸ªæœªè¢«èµ‹å€¼çš„æ¥å£å˜é‡æ¥è¯´ï¼Œå®ƒçš„æ¥å£ç±»å‹å’Œå€¼éƒ½æ˜¯nilï¼Œå¹¶ä¸”å˜é‡æœ¬èº«ä¹Ÿç­‰äºnil 123456func main() &#123; var v interface&#123;&#125; fmt.Printf(\"%T %v %v\\n\", v, v, v == nil) // &lt;nil&gt; &lt;nil&gt; true&#125;// %T æ¥å£ç±»å‹// %v å€¼ å½“æ¥å£ç±»å‹çš„å˜é‡è¢«èµ‹å€¼åï¼Œæ¥å£å°±ä¼šåœ¨å†…éƒ¨æŒ‡å‘è¯¥å˜é‡çš„ç±»å‹å’Œå€¼ã€‚ 1234567func main() &#123; var v interface&#123;&#125; fmt.Printf(\"%T %v %v\\n\", v, v, v == nil) // &lt;nil&gt; &lt;nil&gt; true var p *int v = p fmt.Printf(\"%T %v %v\\n\", v, v, v == nil) // *int &lt;nil&gt; false&#125; å½“æ¥å£ç±»å‹çš„å˜é‡è¢«èµ‹å€¼åï¼Œæ¥å£å°±ä¼šåœ¨å†…éƒ¨æŒ‡å‘è¯¥å˜é‡çš„ç±»å‹å’Œå€¼ã€‚ åœ¨Goä¸­ï¼Œæ¥å£ç±»å‹çš„å˜é‡åªæœ‰åœ¨ç±»å‹å’Œå€¼éƒ½ä¸ºnilæ—¶æ‰ç­‰äºnil å³ä½¿æ¥å£å˜é‡çš„å€¼ä»ä¸ºnilï¼Œä½†åªè¦å®ƒçš„ç±»å‹ä¸æ˜¯nilï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±ä¸ç­‰äºnilï¼› 1234567func main() &#123; var v interface&#123;&#125; fmt.Printf(\"%T %v %v\\n\", v, v, v == nil) // &lt;nil&gt; &lt;nil&gt; true var p *int v = p fmt.Printf(\"%#v\\n\", v) //(*int)(nil)&#125; 16.6 nilä¹‹å¤–çš„å¦ä¸€ä¸ªé€‰æ‹©123456789101112131415161718192021type number struct &#123; value int valid bool&#125;func newNumber(v int) number &#123; return number&#123;value: v, valid: true&#125;&#125;func (n number) String() string &#123; if !n.valid &#123; return \"not set\" &#125; return fmt.Sprintf(\"%d\", n.value)&#125;func main() &#123; n := newNumber(42) fmt.Println(n) // 42 e := number&#123;&#125; fmt.Println(e) // not set&#125;s 17 å¤„ç†é”™è¯¯Goè¯­è¨€å…è®¸å‡½æ•°å’Œæ–¹æ³•åŒæ—¶è¿”å›å¤šä¸ªå€¼ æŒ‰ç…§æƒ¯ä¾‹ï¼Œå‡½æ•°åœ¨è¿”å›é”™è¯¯æ—¶ï¼Œæœ€åè¾¹çš„è¿”å›å€¼åº”ç”¨æ¥è¡¨ç¤ºé”™è¯¯ è°ƒç”¨å‡½æ•°åï¼Œåº”ç«‹å³æ£€æŸ¥æ˜¯å¦å‘ç”Ÿé”™è¯¯ï¼› å¦‚æœæ²¡æœ‰é”™è¯¯å‘ç”Ÿï¼Œé‚£ä¹ˆè¿”å›çš„é”™è¯¯å€¼ä¸ºnil 1234567891011121314151617import ( \"fmt\" \"io/ioutil\" \"os\")func main() &#123; files, err := ioutil.ReadDir(\".\") // . è¡¨ç¤ºå½“å‰ç›®å½• if err != nil &#123; fmt.Println(err) os.Exit(1) &#125; for _, file := range files &#123; fmt.Println(file.Name()) // 00.go &#125;&#125; æ³¨æ„ å½“é”™è¯¯å‘ç”Ÿæ—¶å€™ï¼Œå‡½æ•°è¿”å›çš„å…¶å®ƒå€¼é€šå¸¸å°±ä¸å†å¯ä¿¡ 17.1 ä¼˜é›…çš„é”™è¯¯å¤„ç†å‡å°‘é”™è¯¯å¤„ç†ä»£ç æ˜¯ä¸€ç§ç­–ç•¥æ˜¯ï¼š å°†ç¨‹åºä¸­ä¸ä¼šå‡ºé”™çš„éƒ¨åˆ†å’ŒåŒ…å«æ½œåœ¨é”™è¯¯éšæ‚£çš„éƒ¨åˆ†éš”ç¦»å¼€æ¥ å¯¹äºä¸å¾—ä¸è¿”å›é”™è¯¯çš„ä»£ç ï¼Œåº”å°½åŠ›ç®€åŒ–ç›¸åº”çš„é”™è¯¯å¤„ç†ä»£ç  17.2 goçš„è°šè¯­123456789101112131415161718192021222324252627Errors are valueï¼Œ Do not just check errosï¼Œ handle them gracefully # é™¤äº†æ£€æŸ¥é”™è¯¯ï¼Œè¿˜è¦ä¼˜é›…çš„å¤„ç†å®ƒä»¬Do not panicMake the zero value usefulthe bigger the interface, the weaker the abstraction # interfaceè¶Šå¤§ï¼ŒæŠ½è±¡åº¦è¶Šå·®interface &#123;&#125; says nothing # interface&#123;&#125; ç›¸å½“äºä»€ä¹ˆéƒ½æ²¡å®šä¹‰ï¼Œå¯ä»¥è¡¨ç¤ºä»»æ„ç±»å‹Gofmt is style is no one is favorite, yet gofmt is everyone is favorite # gofmtçš„æ ·å¼æ‰€æœ‰äººéƒ½ä¸å–œæ¬¢ï¼Œä½†gofmt æ‰€æœ‰äººéƒ½å–œæ¬¢Doc is for usersa litter copying is better than a little dependency # å°‘è®¸çš„æ‹·è´è¦æ¯”å°‘è®¸çš„ä¾èµ–è¦å¥½clear is better than clever# æ¸…æ™°æ¯”èªæ˜æ›´å¥½concurrency is not parallelism# å¹¶å‘å¹¶ä¸æ˜¯å¹¶è¡Œdo not communicate by sharing memory, share memory by communicating# ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥è¿›è¡Œé€šä¿¡,é€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜channels orchestrateï¼› mutexes serialize# channels åº”è¯¥è¿›è¡Œç¼–æ’ï¼Œmutexesï¼ˆäº’æ–¥é‡ï¼‰æŒ‰åºåˆ—åŒ–æ‰§è¡Œ 17.3 æ–‡ä»¶å†™å…¥å†™å…¥æ–‡ä»¶çš„æ—¶å€™å¯èƒ½å‡ºé”™ï¼š è·¯å¾„ä¸æ­£ç¡® æƒé™ä¸å¤Ÿ ç£ç›˜ç©ºé—´ä¸è¶³ æ–‡ä»¶å†™å…¥å®Œæ¯•åï¼Œå¿…é¡»è¢«å…³é—­ï¼Œç¡®ä¿æ–‡ä»¶è¢«åˆ·åˆ°ç£ç›˜ä¸Šï¼Œé¿å…èµ„æºçš„æ³„æ¼ï¼› 123456789101112131415161718192021222324252627282930package mainimport ( \"fmt\" \"os\")func proverbs(name string) error &#123; f, err := os.Create(name) if err != nil &#123; return err &#125; // å†™å…¥åˆ° fæ–‡ä»¶å†… _, err = fmt.Fprintln(f, \"Errors are values.\") if err != nil &#123; // write error f.Close() return err &#125; _, err = fmt.Fprintln(f, \"Do not just check erros, handle them gracefully\") f.Close() return err&#125;func main() &#123; err := proverbs(\"proverbs.txt\") if err != nil &#123; fmt.Println(err) os.Exit(1) &#125;&#125; 17.4 å†…ç½®ç±»å‹ errorå†…ç½®ç±»å‹errorç”¨æ¥è¡¨ç¤ºé”™è¯¯ 18 deferå…³é”®å­—ä½¿ç”¨deferå…³é”®å­—ï¼ŒGoå¯ä»¥ç¡®ä¿æ‰€æœ‰deferredçš„åŠ¨ä½œå¯ä»¥åœ¨å‡½æ•°è¿”å›å‰æ‰§è¡Œï¼› 123456789101112131415161718192021222324252627282930package mainimport ( \"fmt\" \"os\")func proverbs(name string) error &#123; f, err := os.Create(name) if err != nil &#123; return err &#125; defer f.Close() // å†™å…¥åˆ° fæ–‡ä»¶å†… _, err = fmt.Fprintln(f, \"Errors are values.\") if err != nil &#123; // write error return err &#125; _, err = fmt.Fprintln(f, \"Do not just check erros, handle them gracefully\") return err&#125;func main() &#123; err := proverbs(\"proverbs.txt\") if err != nil &#123; fmt.Println(err) os.Exit(1) &#125;&#125; å¯ä»¥deferä»»æ„çš„å‡½æ•°å’Œæ–¹æ³• deferå¹¶ä¸æ˜¯ä¸“é—¨åšé”™è¯¯å¤„ç†çš„ï¼› deferå¯ä»¥æ¶ˆé™¤å¿…é¡»æ—¶åˆ»æƒ¦è®°æ‰§è¡Œèµ„æºé‡Šæ”¾çš„è´Ÿæ‹… 18.1 deferçš„åŠ¨ä½œä»€ä¹ˆæ—¶å€™ä¼šè¢«æ‰§è¡Œæœ‰åˆ›æ„çš„é”™è¯¯å¤„ç† 12345678910111213141516171819202122232425type safeWriter struct &#123; w io.Writer err error&#125;func (sw *safeWriter) writeln(s string) &#123; if sw.err != nil &#123; return &#125; _, sw.err = fmt.Fprintln(sw.w, s)&#125;func proverbs(name string) error &#123; f, err := os.Create(name) if err != nil &#123; return err &#125; defer f.Close() sw := safeWriter&#123;w: f&#125; sw.writeln(\"Errors are values\") sw.writeln(\"Do not juse check errors, handle them gracefully\") sw.writeln(\"do not panic\") return sw.err&#125; 18.2 New errorerrosåŒ…é‡Œæœ‰ä¸€ä¸ªæ„é€ ç”¨Newå‡½æ•°ï¼Œå®ƒæ¥æ”¶stringä½œä¸ºå‚æ•°ç”¨æ¥è¡¨ç¤ºé”™è¯¯ä¿¡æ¯ã€‚è¯¥å‡½æ•°è¿”å›errorç±»å‹ 123456789101112131415161718192021222324252627282930313233343536373839import ( \"errors\" \"fmt\" \"os\")const rows, columns = 9, 9type Grid [rows][columns]int8func (g *Grid) Set(row, column int, digit int8) error &#123; if !inBounds(row, column) &#123; return errors.New(\"out of bounds\") &#125; g[row][column] = digit return nil&#125;func inBounds(row, column int) bool &#123; if row &lt; 0 || row &gt;= rows &#123; return false &#125; if column &lt; 0 || column &gt;= columns &#123; return false &#125; return true&#125;func main() &#123; var g Grid err := g.Set(10, 0, 5) if err != nil &#123; fmt.Printf(\"An error occurred: %v, \\n\", err) os.Exit(1) // An error occurred: out of bounds, // exit status 1 &#125;&#125; æç¤º é”™è¯¯ä¿¡æ¯åº”å…·æœ‰ä¿¡æ¯æ€§ å¯ä»¥æŠŠé”™è¯¯ä¿¡æ¯å½“ä½œç”¨æˆ·ç•Œé¢çš„ä¸€éƒ¨åˆ†ï¼Œæ— è®ºå¯¹æœ€ç»ˆç”¨æˆ·è¿˜æ˜¯å¼€å‘è€…ï¼› 18.3 æŒ‰éœ€è¿”å›é”™è¯¯æŒ‰ç…§æƒ¯ä¾‹ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯çš„å˜é‡ååº”ä»¥Errå¼€å¤´ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849package mainimport ( \"errors\" \"fmt\" \"os\")const rows, columns = 9, 9type Grid [rows][columns]int8var ( // æŒ‰æƒ¯ä¾‹ï¼ŒåŒ…å«é”™è¯¯ä¿¡æ¯çš„å˜é‡ååº”ä»¥Errå¼€å¤´ ErrBounds = errors.New(\"out of bounds\") ErrDigit = errors.New(\"invalid digit\"))func (g *Grid) Set(row, column int, digit int8) error &#123; if !inBounds(row, column) &#123; return ErrBounds &#125; g[row][column] = digit return nil&#125;func inBounds(row, column int) bool &#123; if row &lt; 0 || row &gt;= rows &#123; return false &#125; if column &lt; 0 || column &gt;= columns &#123; return false &#125; return true&#125;func main() &#123; var g Grid err := g.Set(0, 0, 15) if err != nil &#123; switch err &#123; case ErrBounds, ErrDigit: fmt.Println(\"Les erreurs de parametres hors limites.\") default: fmt.Println(err) &#125; os.Exit(1) &#125;&#125; errors.New è¿™ä¸ªæ„é€ å‡½æ•°æ˜¯ä½¿ç”¨æŒ‡é’ˆå®ç°çš„ï¼Œæ‰€ä»¥ä¸Šä¾‹ä¸­çš„switchè¯­å¥æ¯”è¾ƒçš„æ˜¯å†…å­˜åœ°å€ï¼Œè€Œä¸æ˜¯é”™è¯¯åŒ…å«çš„æ–‡å­—ä¿¡æ¯ 18.4 è‡ªå®šä¹‰é”™è¯¯ç±»å‹errorç±»å‹æ˜¯ä¸€ä¸ªå†…ç½®çš„æ¥å£ï¼šä»»ä½•ç±»å‹åªè¦å®ç°äº†è¿”å›stringçš„Error()æ–¹æ³•å°±æ»¡è¶³äº†è¯¥æ¥å£ï¼› å¯ä»¥åˆ›å»ºæ–°çš„é”™è¯¯ç±»å‹ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273package mainimport ( \"errors\" \"fmt\" \"os\" \"strings\")const rows, columns = 9, 9type Grid [rows][columns]int8var ( ErrBounds = errors.New(\"out of bounds\") ErrDigit = errors.New(\"invalid digit\"))type SudokuError []errorfunc (se SudokuError) Error() string &#123; var s []string for _, err := range se &#123; s = append(s, err.Error()) &#125; return strings.Join(s, \", \")&#125;func (g *Grid) Set(row, column int, digit int8) error &#123; var errs SudokuError if !inBounds(row, column) &#123; errs = append(errs, ErrBounds) &#125; if !validDigit(digit) &#123; errs = append(errs, ErrDigit) &#125; if len(errs) &gt; 0 &#123; return errs &#125; g[row][column] = digit return nil&#125;func validDigit(digit int8) bool &#123; return digit &gt;= 1 &amp;&amp; digit &lt;= 9&#125;func inBounds(row, column int) bool &#123; if row &lt; 0 || row &gt;= rows &#123; return false &#125; if column &lt; 0 || column &gt;= columns &#123; return false &#125; return true&#125;func main() &#123; var g Grid err := g.Set(12, 0, 15) if err != nil &#123; switch err &#123; case ErrBounds, ErrDigit: fmt.Println(\"Les erreurs de parametres hors limites.\") default: fmt.Println(err) &#125; os.Exit(1) &#125;&#125;// out of bounds, invalid digit// exit status 1 æŒ‰ç…§æƒ¯ä¾‹ï¼Œ è‡ªå®šä¹‰é”™è¯¯ç±»å‹çš„åå­—åº”ä»¥Errorç»“å°¾ æœ‰æ—¶å€™åå­—å°±æ˜¯Errorï¼Œä¾‹å¦‚ url.Error 18.5 ç±»å‹æ–­è¨€ä¸Šä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ¥è®¿é—®æ¯ä¸€ç§é”™è¯¯ï¼› ä½¿ç”¨ç±»å‹æ–­è¨€ï¼Œä½ å¯ä»¥æŠŠæ¥å£ç±»å‹è½¬åŒ–æˆåº•å±‚çš„å…·ä½“ç±»å‹ ä¾‹å¦‚ï¼š err.(SudokuError) 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475package mainimport ( \"errors\" \"fmt\" \"os\" \"strings\")const rows, columns = 9, 9type Grid [rows][columns]int8var ( ErrBounds = errors.New(\"out of bounds\") ErrDigit = errors.New(\"invalid digit\"))type SudokuError []errorfunc (se SudokuError) Error() string &#123; var s []string for _, err := range se &#123; s = append(s, err.Error()) &#125; return strings.Join(s, \", \")&#125;func (g *Grid) Set(row, column int, digit int8) error &#123; var errs SudokuError if !inBounds(row, column) &#123; errs = append(errs, ErrBounds) &#125; if !validDigit(digit) &#123; errs = append(errs, ErrDigit) &#125; if len(errs) &gt; 0 &#123; return errs &#125; g[row][column] = digit return nil&#125;func validDigit(digit int8) bool &#123; return digit &gt;= 1 &amp;&amp; digit &lt;= 9&#125;func inBounds(row, column int) bool &#123; if row &lt; 0 || row &gt;= rows &#123; return false &#125; if column &lt; 0 || column &gt;= columns &#123; return false &#125; return true&#125;func main() &#123; var g Grid err := g.Set(10, 0, 15) if err != nil &#123; // ä½¿ç”¨ç±»å‹é”™è¯¯æ–­è¨€ï¼Œ if errs, ok := err.(SudokuError); ok &#123; fmt.Printf(\"%d error(s) occurred: \\n\", len(errs)) for _, e := range errs &#123; fmt.Printf(\"- %v\\n\", e) &#125; &#125; os.Exit(1) &#125;&#125;// - out of bounds// - invalid digit// exit status 1 å¦‚æœç±»å‹æ»¡è¶³å¤šä¸ªæ¥å£ï¼Œé‚£ä¹ˆç±»å‹æ–­è¨€ä½¿å®ƒä»ä¸€ä¸ªæ¥å£ç±»å‹è½¬åŒ–ä¸ºå¦ä¸€ä¸ªæ¥å£ç±»å‹ 18.6 do not panicï¼ˆä¸è¦ææ…Œï¼‰Goæ²¡æœ‰å¼‚å¸¸ï¼Œå®ƒæœ‰ä¸ªç±»ä¼¼æœºåˆ¶panic å½“panicå‘ç”Ÿï¼Œé‚£ä¹ˆç¨‹åºå°±ä¼šå´©æºƒ 18.7 å…¶å®ƒè¯­è¨€çš„å¼‚å¸¸ vs Goçš„é”™è¯¯å€¼å…¶å®ƒè¯­è¨€çš„å¼‚å¸¸åœ¨è¡Œä¸ºå’Œå®ç°ä¸Šä¸Goè¯­è¨€çš„é”™è¯¯å€¼æœ‰å¾ˆå¤§çš„ä¸åŒ å¦‚æœå‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”é™„è¿‘æ²¡äººæ•è·å®ƒï¼Œé‚£ä¹ˆå®ƒå°±ä¼š å†’æ³¡ åˆ°å‡½æ•°çš„è°ƒç”¨è€…é‚£é‡Œï¼Œå¦‚æœè¿˜æ²¡æœ‰äººè¿›è¡Œæ•è·ï¼Œé‚£ä¹ˆå°±ç»§ç»­â€œå†’æ³¡â€åˆ°æ›´ä¸Šå±‚çš„è°ƒç”¨è€…ã€‚ã€‚ã€‚ç›´åˆ°è¾¾åˆ°æ ˆï¼ˆStackï¼‰çš„é¡¶éƒ¨ï¼ˆä¾‹å¦‚mainå‡½æ•°ï¼‰ å¼‚å¸¸è¿™ç§é”™è¯¯å¤„ç†æ–¹å¼å¯è¢«çœ‹ä½œæ˜¯å¯é€‰çš„ï¼› ä¸å¤„ç†å¼‚å¸¸ï¼Œå°±ä¸éœ€è¦åŠ å…¥å…¶å®ƒä»£ç ï¼› æƒ³è¦å¤„ç†å¼‚å¸¸ï¼Œå°±éœ€è¦åŠ å…¥ç›¸å½“æ•°é‡çš„ä¸“ç”¨ä»£ç  Goè¯­è¨€ä¸­é”™è¯¯å€¼æ›´ç®€å•çµæ´»ï¼› å¿½ç•¥é”™è¯¯æ˜¯æœ‰æ„è¯†çš„å†³å®šï¼Œä»ä»£ç ä¸Šçœ‹ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ï¼› 18.8 å¦‚ä½•panicGoé‡Œæœ‰ä¸€ä¸ªå’Œå…¶å®ƒè¯­è¨€å¼‚å¸¸ç±»ä¼¼çš„æœºåˆ¶ï¼š panic å®é™…ä¸Šï¼Œpanicå¾ˆå°‘å‡ºç° åˆ›å»ºpanic 1panic(\"i forgot my towel\") panicçš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„ç±»å‹ 18.9 é”™è¯¯å€¼ã€panicã€os.Exité€šå¸¸ï¼Œæ›´æ¨èä½¿ç”¨é”™è¯¯å€¼ï¼Œå…¶æ¬¡æ‰æ˜¯panic panicæ¯”Os.Exitæ›´å¥½ï¼š panicåä¼šæ‰§è¡Œæ‰€æœ‰deferçš„åŠ¨ä½œï¼Œè€ŒOs.Exitåˆ™ä¸ä¼š æœ‰æ—¶å€™Goç¨‹åºä¼španicè€Œä¸æ˜¯è¿”å›é”™è¯¯å€¼ 12345678package mainfunc main() &#123; var zero int _ = 42 / zero // panic: runtime error: integer divide by zero // exit status 2&#125; ä¸ºäº†é˜²æ­¢panicå¯¼è‡´ç¨‹åºå´©æºƒï¼ŒGoæä¾›äº†recoverå‡½æ•°(æ¢å¤) deferçš„åŠ¨ä½œä¼šåœ¨å‡½æ•°è¿”å›å‰æ‰§è¡Œï¼Œå³ä½¿å‘ç”Ÿäº†panic ä½†å¦‚æœdeferçš„å‡½æ•°è°ƒç”¨äº†recoverï¼Œpanicå°±ä¼šåœæ­¢ï¼Œç¨‹åºå°†ç»§ç»­è¿è¡Œï¼› 1234567891011import \"fmt\"func main() &#123; defer func() &#123; // deferä¼šåœ¨å‡½æ•°è¿”å›å‰æ‰§è¡Œï¼Œå³ä½¿å‘ç”Ÿpanic if e := recover(); e != nil &#123;// deferè°ƒç”¨recoverï¼Œpanicå°±ä¼šåœæ­¢ï¼Œç¨‹åºå°†ç»§ç»­æ‰§è¡Œ fmt.Println(e) &#125; &#125;() panic(\"i forgot my towel\") // i forgot my towel&#125; 19 goroutineå’Œå¹¶å‘ï¼ˆconcurrentï¼‰19.1 goroutineåœ¨Goä¸­ï¼Œç‹¬ç«‹çš„ä»»åŠ¡å«åšgoroutine è™½ç„¶goroutineä¸å…¶å®ƒè¯­è¨€ä¸­çš„åç¨‹ã€è¿›ç¨‹ã€çº¿ç¨‹éƒ½æœ‰ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†goroutineå’Œå®ƒä»¬å¹¶ä¸å®Œå…¨ç›¸åŒ goroutineå’Œå®ƒä»¬å¹¶ä¸å®Œå…¨ç›¸åŒï¼Œ Goroutineåˆ›å»ºæ•ˆç‡éå¸¸é«˜ Goèƒ½ç›´æˆªäº†å½“çš„ååŒå¤šä¸ªå¹¶å‘ï¼ˆconcurrentï¼‰æ“ä½œ åœ¨æŸäº›è¯­è¨€ä¸­ï¼Œå°†é¡ºåºå¼ä»£ç è½¬åŒ–ä¸ºå¹¶å‘å¼ä»£ç éœ€è¦åšå¤§é‡ä¿®æ”¹ã€‚ åœ¨Goé‡Œï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰é¡ºåºå¼çš„ä»£ç ï¼Œå°±å¯ä»¥é€šè¿‡goroutineä»¥å¹¶å‘çš„æ–¹å¼è¿è¡Œä»»æ„æ•°é‡çš„ä»»åŠ¡ï¼› 19.2 å¯åŠ¨goroutineåªéœ€åœ¨è°ƒç”¨å‰é¢åŠ ä¸€ä¸ªgoå…³é”®å­—ï¼› 1234567891011121314import ( \"fmt\" \"time\")func main() &#123; go sleepGopher() // go å…³é”®å­—ç›¸å½“äºå¯åŠ¨ä¸€ä¸ª goroutine,å¦å¼€è¾Ÿäº†ä¸€æ¡é“è·¯ï¼Œåœ¨é‚£æ¡é“è·¯é‡Œé¢æ‰§è¡Œã€‚ç„¶åmainå‡½æ•°æ˜¯ä¸€æ¡ä¸»å¹²é“ã€‚ä¸»å¹²é“ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œå½“mainå‡½æ•°è¿”å›çš„æ—¶å€™ï¼Œè¯¥ç¨‹åºè¿è¡Œçš„æ‰€æœ‰goroutineéƒ½ä¼šç«‹å³åœæ­¢ï¼Œæ— è®ºæœ‰æ²¡æœ‰èµ°å®Œã€‚æ‰€ä»¥æƒ³åœ¨mainå‡½æ•°è¿”å›ä¹‹å‰è®© sleepGopher å‡½æ•°è¾“å‡º ...snore... çš„è¯ï¼Œå°±éœ€è¦å¤šç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œå·²çŸ¥ sleepGopher sleepäº†3ç§’ï¼Œæ‰€ä»¥é€‰æ‹©è®©mainå‡½æ•°sleepäº†4ç§’ time.Sleep(4 * time.Second)&#125;func sleepGopher() &#123; time.Sleep(3 * time.Second) // 3*time.Second = 3s fmt.Println(\"...snore...\")&#125; 19.3 ä¸æ­¢ä¸€ä¸ªgoroutineæ¯æ¬¡ä½¿ç”¨goå…³é”®å­—éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªæ–°çš„goroutine è¡¨é¢ä¸Šçœ‹ï¼Œgoroutineä¼¼ä¹åœ¨åŒæ—¶è¿è¡Œï¼Œä½†ç”±äºè®¡ç®—æœºå¤„ç†å•å…ƒæœ‰é™ï¼Œå…¶å®æŠ€æœ¯ä¸Šæ¥è¯´ï¼Œè¿™äº›goroutineä¸æ˜¯çœŸçš„åœ¨åŒæ—¶è¿è¡Œï¼› è®¡ç®—æœºå¤„ç†å™¨ä¼šä½¿ç”¨â€œåˆ†æ—¶â€æŠ€æœ¯ï¼Œåœ¨å¤šä¸ªgoroutineä¸Šè½®æµèŠ±è´¹ä¸€äº›æ—¶é—´ï¼› åœ¨ä½¿ç”¨goroutineæ—¶ï¼Œå„ä¸ªgoroutineçš„æ‰§è¡Œé¡ºåºæ— æ³•ç¡®å®šï¼› 123456789101112func main() &#123; for i := 0; i &lt; 5; i++ &#123; go sleepGopher() &#125; time.Sleep(4 * time.Second)&#125;func sleepGopher() &#123; time.Sleep(3 * time.Second) fmt.Println(\"...snore...\")&#125; 19.3.1 goroutineçš„å‚æ•°å‘goroutineä¼ é€’å‚æ•°å°±æ ¹å‘å‡½æ•°ä¼ é€’å‚æ•°ä¸€æ ·ï¼Œå‚æ•°éƒ½æ˜¯æŒ‰å€¼ä¼ é€’çš„ï¼ˆä¼ å…¥çš„æ˜¯å‰¯æœ¬ï¼‰ 123456789101112131415161718func main() &#123; for i := 0; i &lt; 5; i++ &#123; go sleepGopher(i) &#125; time.Sleep(4 * time.Second)&#125;func sleepGopher(id int) &#123; time.Sleep(3 * time.Second) fmt.Println(\"...snore...\", id)&#125;// ...snore... 2// ...snore... 3// ...snore... 0// ...snore... 1// ...snore... 4 åœ¨ä½¿ç”¨goroutineæ—¶ï¼Œå„ä¸ªgoroutineçš„æ‰§è¡Œé¡ºåºæ— æ³•ç¡®å®šï¼› 20. channel1234567891011func main() &#123; for i := 0; i &lt; 5; i++ &#123; go sleepGopher() // å·²çŸ¥è¯¥ç¨‹åº3ç§’åç»“æŸï¼Œè¿”å› &#125; time.Sleep(4 * time.Second) // æ‰€ä»¥mainå‡½æ•°ä¸­ï¼Œå°½é‡å¤§äº3ç§’çš„æ—¶é—´æ¥ä¿è¯æ‰€æœ‰ goroutineèƒ½å¤Ÿè¶³å¤Ÿæ—¶é—´æ‰§è¡Œå®Œï¼›ä½†æœ‰äº›æ—¶å€™å¹¶ä¸èƒ½æ˜¾å¼çš„çŸ¥é“ goroutineéœ€è¦è€—è´¹çš„æ—¶é—´ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™mainå‡½æ•°æ— æ³•ç¡®å®šä»€ä¹ˆæ—¶é—´ç‚¹ä¼šæœ‰è¿”å›å€¼å›æ¥ï¼›æ‰€ä»¥ä¹Ÿæ— æ³•ç¡®å®šéœ€è¦ç­‰å¾…çš„æ—¶é•¿ã€‚ è§£å†³è¿™ä¸ªé—®é¢˜å°±éœ€è¦å¼•å…¥ channel&#125;func sleepGopher() &#123; time.Sleep(3 * time.Second) fmt.Println(\"...snore...\")&#125; channelå¯ä»¥åœ¨å¤šä¸ªgoroutineä¹‹é—´å®‰å…¨çš„ä¼ å€¼ï¼› é€šé“å¯ä»¥ç”¨ä½œå˜é‡ã€å‡½æ•°å‚æ•°ã€ç»“æ„ä½“å­—æ®µã€‚ã€‚ã€‚ åˆ›å»ºé€šé“ç”¨makeå‡½æ•°ï¼Œå¹¶æŒ‡å®šå…¶ä¼ é€’æ•°æ®çš„ç±»å‹ 1c: make(chan int) 20.1 channelï¼ˆé€šé“ï¼‰å‘é€ã€æ¥æ”¶ä½¿ç”¨å·¦ç®­å¤´æ“ä½œç¬¦ &lt;- å‘channelå‘é€å€¼æˆ–ä»channelæ¥æ”¶å€¼ï¼› 12c &lt;- 99 // å‘é€šé“å‘é€å€¼ï¼Œ æŠŠå€¼ä¸º 99 çš„å€¼ å‘é€ç»™é€šé“cr:= &lt;- c // ä»é€šé“æ¥æ”¶å€¼ ä»é€šé“cæ¥æ”¶ä¸€ä¸ªå€¼ï¼Œå¹¶å°†æ­¤å€¼èµ‹ç»™ rå˜é‡ å‘é€æ“ä½œä¼šç­‰å¾…ç›´åˆ°å¦ä¸€ä¸ªgoroutineå°è¯•å¯¹è¯¥channelè¿›è¡Œæ¥æ”¶æ“ä½œä¸ºæ­¢ï¼› æ‰§è¡Œå‘é€æ“ä½œçš„goroutineåœ¨ç­‰å¾…æœŸé—´å°†æ— æ³•æ‰§è¡Œå…¶å®ƒæ“ä½œ æœªåœ¨ç­‰å¾…channelæ“ä½œçš„goroutineä»ç„¶å¯ä»¥ç»§ç»­è‡ªç”±çš„è¿è¡Œ æ‰§è¡Œæ¥æ”¶æ“ä½œçš„goroutineå°†ç­‰å¾…ç›´åˆ°å¦ä¸€ä¸ªgoroutineå°è¯•å‘è¯¥channelè¿›è¡Œå‘é€æ“ä½œä¸ºæ­¢ï¼› 123456789101112131415161718func main() &#123; c := make(chan int) // create a channel for i := 0; i &lt; 5; i++ &#123; go sleepGopher(i, c) &#125; for i := 0; i &lt; 5; i++ &#123; // ä¸€ä¸ªæœ‰5ä¸ª //gopherä¼šå¾€æ­¤é€šé“å‘é€å€¼ï¼› gopherID := &lt;-c // å½“i=0æ—¶ï¼Œç­‰å¾…å¤§çº¦3sä¹‹åï¼Œæœ‰å…¶å®ƒgopherç»™å®ƒå‘é€å€¼äº†ã€‚ // å¯èƒ½æ˜¯ 0 1 2 3 4 ä»»æ„ä¸€ä¸ªå€¼ï¼Œå› ä¸ºgoroutineçš„é¡ºåºæ— æ³•ç¡®å®š fmt.Println(\"gopher\", gopherID, \"has finished sleeping\") &#125;&#125;func sleepGopher(id int, c chan int) &#123; time.Sleep(3 * time.Second) fmt.Println(\"...\", id, \"snore ...\") c &lt;- id&#125; 20.2 ä½¿ç”¨selectå¤„ç†å¤šä¸ªé€šé“å‰é¢çš„ä¾‹å­ä¸­æ˜¯ä½¿ç”¨ä¸€ä¸ªchannelæ¥ç­‰å¾…å¤šä¸ª goroutineï¼Œè¿™ç§åšæ³•åœ¨æ‰€æœ‰goroutineéƒ½äº§ç”Ÿç›¸åŒç±»å‹å€¼çš„æ—¶å€™æ˜¯å¥½ç”¨çš„ã€‚ä½†å®é™…å¼€å‘ä¸­ï¼Œæƒ…å†µå¹¶ä¸åªæ˜¯å¦‚æ­¤ï¼›ç¨‹åºé€šå¸¸éœ€è¦ç­‰å¾…ä¸åŒç±»å‹çš„å€¼ï¼› å½“ç­‰å¾…é€šé“ä¸­æŸäº›å€¼çš„æ—¶å€™ï¼Œä¸æƒ³ç­‰å¤ªä¹…ã€‚æˆ–è€…æƒ³åœ¨ç½‘ç»œè¯·æ±‚ç­‰å¾…æ•°ç§’ä¹‹åå°±å°†å…¶è®¾ç½®ä¸ºè¶…æ—¶è€Œä¸æ˜¯ç™½ç™½ç­‰å¾…å¥½å‡ åˆ†é’Ÿã€‚goæ ‡å‡†åº“æä¾›äº†ä¸€ä¸ªtime.Afterå‡½æ•°ï¼Œè¯¥å‡½æ•°è¿”å›ä¸€ä¸ªchannelï¼Œè¯¥channelåœ¨æŒ‡å®šæ—¶é—´åä¼šæ¥æ”¶åˆ°ä¸€ä¸ªå€¼ï¼ˆè¿™ä¸ªå€¼æ˜¯ç”±goè¿è¡Œæ—¶çš„ä¸€ä¸ªgoroutineå‘é€çš„ ï¼‰ï¼› å¦‚æœç¨‹åºæƒ³ç»§ç»­ä»goroutineæ¥æ”¶å€¼ï¼Œé‚£å¿…é¡»ç­‰åˆ°æ‰€æœ‰goroutineéƒ½ç»“æŸç¡çœ æˆ–æˆ‘ä»¬è€å¿ƒè€—å°½ä¸ºæ­¢ã€‚è¿™æ„å‘³ç€ç¨‹åºå¿…é¡»åŒæ—¶ç­‰åˆ°time.Afterè¿™ä¸ªè®¡æ—¶å™¨channel å’Œå…¶å®ƒchannelã€‚è¿™ä¸ªæ—¶å€™å°±èƒ½ä½¿ç”¨selectè¯­å¥ã€‚selectè¯­å¥èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚ selectè¯­å¥ä¸switchæœ‰ç‚¹åƒ è¯¥è¯­å¥åŒ…å«çš„æ¯ä¸ªcaseéƒ½æŒæœ‰ä¸€ä¸ªé€šé“ï¼Œç”¨æ¥å‘é€æˆ–æ¥æ”¶æ•°æ®ï¼› selectä¼šç­‰å¾…ç›´åˆ°æŸä¸ªcaseåˆ†æ”¯çš„æ“ä½œå°±ç»ªï¼Œç„¶åå°±ä¼šæ‰§è¡Œè¯¥case åˆ†æ”¯ï¼› selectè¯­å¥ä¸åŒ…å«ä»»ä½•caseçš„æƒ…å†µä¸‹å°†æ°¸è¿œç­‰ä¸‹å» 12345678910111213141516171819202122func main() &#123; c := make(chan int) // create a channel for i := 0; i &lt; 5; i++ &#123; go sleepGopher(i, c) &#125; timeout := time.After(2 * time.Second) // åˆ›å»ºä¸€ä¸ªè¶…æ—¶æ—¶é—´2s çš„ channel for i := 0; i &lt; 5; i++ &#123; select &#123; case gopherID := &lt;-c: // ä»é€šé“æ¥æ”¶å€¼ fmt.Println(\"gopher\", gopherID, \"has finished sleeping\") case &lt;-timeout: //ç­‰2s è¶…æ—¶ è¿˜æœªæ¥æ”¶åˆ° fmt.Println(\"my patience ran out\") return &#125; &#125;&#125;func sleepGopher(id int, c chan int) &#123; time.Sleep(time.Duration(rand.Intn(4000)) * time.Millisecond) // ç”Ÿæˆä¸€ä¸ª0-4sçš„éšæœºæ—¶é—´ c &lt;- id&#125; æ³¨æ„ï¼š å³ä½¿å·²ç»åœæ­¢ç­‰å¾…goroutineï¼Œä½†åªè¦mainå‡½æ•°è¿˜æ²¡è¿”å›ï¼Œä»åœ¨è¿è¡Œçš„goroutineå°†ä¼šç»§ç»­å ç”¨å†…å­˜ï¼›ï¼ˆæœ‰æ¡ä»¶ï¼Œå°½é‡æ¸…ç†æ‰ï¼‰ 20.3 nilé€šé“ å€¼ä¸ºnilçš„é€šé“ å¦‚æœä¸ä½¿ç”¨makeåˆå§‹åŒ–channelï¼Œé‚£ä¹ˆchannelå˜é‡çš„å€¼å°±æ˜¯nil(é›¶å€¼) å¯¹nilé€šé“è¿›è¡Œå‘é€æˆ–æ¥æ”¶ä¸ä¼šå¼•èµ·panicï¼Œä½†ä¼šå¯¼è‡´æ°¸ä¹…é˜»å¡ï¼› å¯¹nilé€šé“æ‰§è¡Œcloseå‡½æ•°ï¼Œé‚£ä¹ˆä¼šå¼•èµ·panic 20.3.1 nilé€šé“çš„ç”¨å¤„ï¼šå¯¹äºåŒ…å«selectè¯­å¥çš„å¾ªç¯ï¼Œå¦‚æœä¸å¸Œæœ›æ¯æ¬¡å¾ªç¯éƒ½ç­‰å¾…selectæ‰€æ¶‰åŠçš„æ‰€æœ‰é€šé“ï¼Œé‚£ä¹ˆå¯ä»¥å…ˆå°†æŸäº›channelè®¾ç½®ä¸ºnilï¼Œç­‰åˆ°å‘é€å€¼å‡†å¤‡å°±ç»ªä¹‹åï¼Œå†å°†channelå˜æˆä¸€ä¸ªénilå€¼å¹¶æ‰§è¡Œå‘é€æ“ä½œï¼› 21 é˜»å¡å’Œæ­»é”å½“goroutineåœ¨ç­‰å¾…channelçš„å‘é€æˆ–æ¥æ”¶æ—¶ï¼Œæˆ‘ä»¬å°±è¯´å®ƒè¢«é˜»å¡äº†ï¼› é™¤äº†goroutineæœ¬èº«å ç”¨å°‘é‡çš„å†…å­˜å¤–ï¼Œè¢«é˜»å¡çš„goroutineå¹¶ä¸æ¶ˆè€—ä»»ä½•å…¶å®ƒèµ„æºï¼› goroutineé™é™åœ°åœåœ¨é‚£é‡Œï¼Œç­‰åˆ°å¯¼è‡´å…¶é˜»å¡çš„äº‹æƒ…æ¥è§£é™¤é˜»å¡ å½“ä¸€ä¸ªæˆ–å¤šä¸ªgoroutineå› ä¸ºæŸäº›æ°¸è¿œæ— æ³•å‘ç”Ÿçš„äº‹æƒ…è¢«é˜»å¡æ—¶ï¼Œæˆ‘ä»¬ç§°è¿™ç§æƒ…å†µä¸ºæ­»é”ï¼Œè€Œå‡ºç°æ­»é”çš„ç¨‹åºé€šå¸¸ä¼šå´©æºƒæˆ–æŒ‚èµ·ï¼› 12345678910111213141516// å¼•å‘æ­»é”çš„ä¾‹å­func main() &#123; c := make(chan int) &lt;-c&#125;// fatal error: all goroutines are asleep - deadlock!// goroutine 1 [chan receive]:// ä½¿ç”¨goroutine è§£å†³æ­»é”é—®é¢˜func main() &#123; c := make(chan int) go func() &#123; c &lt;- 2 &#125;() &lt;-c&#125; 21.2 åœ°é¼ è£…é…çº¿Goå…è®¸åœ¨æ²¡æœ‰å€¼å¯ä¾›å‘é€çš„æƒ…å†µä¸‹é€šè¿‡closeå‡½æ•°å…³é—­é€šé“ ä¾‹å¦‚close(c) é€šé“è¢«å…³é—­åæ— æ³•å†™å…¥ä»»ä½•å€¼ï¼Œå¦‚æœå°è¯•å†™å…¥å°†å¼•å‘panic å°è¯•è¯»å–è¢«å…³é—­çš„é€šé“ä¼šè·å¾—ä¸é€šé“ç±»å‹å¯¹åº”çš„é›¶å€¼ï¼› æ³¨æ„ï¼š å¦‚æœå¾ªç¯é‡Œè¯»å–ä¸€ä¸ªå·²å…³é—­çš„é€šé“ï¼Œå¹¶æ²¡æœ‰æ£€æŸ¥é€šé“æ˜¯å¦å…³é—­ï¼Œé‚£ä¹ˆè¯¥å¾ªç¯å¯èƒ½ä¼šä¸€ç›´è¿è½¬ä¸‹å»ï¼Œè€—è´¹å¤§é‡CPUæ—¶é—´ æ‰§è¡Œä»¥ä¸‹ä»£ç å¯å¾—çŸ¥é€šé“æ˜¯å¦è¢«å…³é—­ v,ok := &lt;-c vä¸ºé€šé“å¾—åˆ°çš„å€¼ï¼Œok boolç±»å‹ï¼Œå¦‚æœokä¸ºfalseï¼Œé‚£ä¹ˆè¯´æ˜æ­¤é€šé“å·²å…³é—­ï¼› 12345678910111213141516171819202122232425262728293031323334353637383940414243func sourceGopher(downstream chan string) &#123; for _, v := range []string&#123;\"hello, world\", \"a bad apple\", \"goodbye all\"&#125; &#123; downstream &lt;- v &#125; // downstream &lt;- \"\" // é‡æ„ä¸º close(downstream)&#125;func filterGopher(upstream, downstream chan string) &#123; for &#123; item, ok := &lt;-upstream // if item == \"\" &#123; é‡æ„ if !ok &#123; // downstream &lt;- \"\" close(downstream) return &#125; if !strings.Contains(item, \"bad\") &#123; downstream &lt;- item &#125; &#125;&#125;func printGopher(upstream chan string) &#123; for &#123; v := &lt;-upstream if v == \"\" &#123; return &#125; fmt.Println(v) &#125;&#125;func main() &#123; c0 := make(chan string) c1 := make(chan string) go sourceGopher(c0) go filterGopher(c0, c1) printGopher(c1) // hello, world // goodbye all&#125; 21.3 å¸¸ç”¨æ¨¡å¼ä»é€šé“è¯»å–å€¼ï¼Œç›´åˆ°å®ƒå…³é—­ä¸ºæ­¢ï¼ˆå¸¸ç”¨ï¼‰ å¯ä»¥ä½¿ç”¨rangeå…³é”®å­—è¾¾åˆ°è¯¥ç›®çš„ 12345678910111213141516171819202122232425262728293031323334func sourceGopher(downstream chan string) &#123; for _, v := range []string&#123;\"hello, world\", \"a bad apple\", \"goodbye all\"&#125; &#123; downstream &lt;- v &#125; // downstream &lt;- \"\" // é‡æ„ä¸º close(downstream)&#125;func filterGopher(upstream, downstream chan string) &#123; for item := range upstream &#123; if !strings.Contains(item, \"bad\") &#123; downstream &lt;- item &#125; &#125; close(downstream) // å…³é—­ä¸‹æ¸¸é€šé“&#125;func printGopher(upstream chan string) &#123; for v := range upstream &#123; fmt.Println(v) &#125;&#125;func main() &#123; c0 := make(chan string) c1 := make(chan string) go sourceGopher(c0) go filterGopher(c0, c1) printGopher(c1) // hello, world // goodbye all&#125; homework ç¼–å†™ä¸€ä¸ªæµæ°´çº¿éƒ¨ä»¶ï¼ˆä¸€ä¸ªgoroutineï¼‰ï¼Œä»–éœ€è¦è®°ä½å‰é¢å‡ºç°çš„æ‰€æœ‰å€¼ï¼Œå¹¶ä¸”åªæœ‰åœ¨å€¼ä¹‹å‰ä»æœªå‡ºç°è¿‡çš„æƒ…å†µä¸‹æ‰ä¼šå°†å€¼ä¼ é€’è‡³æµæ°´çº¿çš„ä¸‹ä¸€ä¸ªé˜¶æ®µï¼Œå‡å®šç¬¬ä¸€ä¸ªå€¼æ°¸è¿œä¸æ˜¯ç©ºå­—ç¬¦ä¸² ç¼–å†™ä¸€ä¸ªæµæ°´çº¿éƒ¨ä»¶ï¼Œå®ƒæ¥æ”¶å­—ç¬¦ä¸²å¹¶å°†å®ƒä»¬æ‹†åˆ†æˆå•è¯ï¼Œç„¶åå‘æµæ°´çº¿çš„ä¸‹ä¸€é˜¶æ®µä¸€ä¸ªæ¥ä¸€ä¸ªå‘é€è¿™äº›å•è¯ï¼ˆå¯ä»¥ç”¨strings.Fieldså‡½æ•°ï¼‰ 22 å¹¶å‘çŠ¶æ€å…±äº«å€¼ ç«äº‰æ¡ä»¶ï¼ˆrace conditionï¼‰ å·¥å‚æŸäº›ç”Ÿäº§çº¿å‡ºç°åº“å­˜ä¸è¶³çš„æƒ…å†µï¼Œå®ƒä»¬éœ€è¦è®¢è´­æ›´å¤šçš„åŸææ–™ã€‚å°½ç®¡æ¯æ¡ç”Ÿäº§çº¿éƒ½æœ‰å›ºå®šç”µè¯ï¼Œä½†æ˜¯å·¥å‚åªæœ‰ä¸€æ¡å…±äº«çš„ç”µè¯è·¯çº¿ã€‚å½“ä¸€ä¸ªå·¥äººæ‹¿èµ·ç”µè¯ä¸‹è®¢å•çš„æ—¶å€™ï¼Œå¦ä¸€åªåœ°é¼ å¯èƒ½ä¼šæ‹¿èµ·ç”µè¯æ‹¨å·ã€‚å¯¹å‰ä¸€ä¸ªå·¥äººäº§ç”Ÿå¹²æ‰°","categories":[{"name":"go","slug":"go","permalink":"http://yoursite.com/categories/go/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"}]},{"title":"webpack5_1","slug":"webpack5-1","date":"2021-02-23T06:50:45.000Z","updated":"2021-03-11T04:40:37.230Z","comments":true,"path":"2021/02/23/webpack5-1/","link":"","permalink":"http://yoursite.com/2021/02/23/webpack5-1/","excerpt":"","text":"Webpack5 boilerplate1. Common2.1 initinstall webpack5 1npm install webpack webpack-cli --save-dev --save-exact 2.2 æ·»åŠ changelog2.3 æ·»åŠ CI/CD2.4 é¡¹ç›®ç»“æ„è®¾è®¡12345678|- &#x2F;config ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚webpack configç­‰|- &#x2F;internals ä¸€äº›å†…éƒ¨è„šæœ¬ï¼Œç”Ÿæˆæ¨¡ç‰ˆæ–‡ä»¶ï¼Œ æ‰§è¡ŒcleanAndSetupæ“ä½œç­‰ï¼›|- &#x2F;scripts å¿…è¦çš„npm scripts|- package.json|- index.html|- &#x2F;src |- index.ts 2.5 æ·»åŠ  prettier æ ¼å¼åŒ–ä»£ç åˆ©å™¨ï¼Œé…åˆvscodeå…¨å±€ä½¿ç”¨ï¼› install 1npm install --save-dev --save-exact prettier init 12echo &#123;&#125;&gt; .prettierrc.jsontouch .prettierignore 12345# .prettierignore # Ignore artifacts:buildcoverage 2.6 babelbabelç®€è¿° babelæ˜¯ä¸€ä¸ªjsç¼–è¯‘å™¨ï¼Œä¸»è¦æ˜¯å°†es6+è½¬æ¢ä¸ºå‘åå…¼å®¹çš„jsè¯­æ³•ï¼›è¿™æ ·å°±èƒ½è¿è¡Œåœ¨æ—§ç‰ˆæœ¬æµè§ˆå™¨æˆ–è€…å…¶ä»–ä½ç‰ˆæœ¬çš„ç¯å¢ƒä¸­ï¼› åˆ©ç”¨@Babel/polyfillå¯ä»¥é€šè¿‡Polyfillæ–¹å¼åœ¨ç›®æ ‡ç¯å¢ƒä¸­æ·»åŠ ç¼ºå¤±çš„ç‰¹æ€§ï¼› babelèƒ½å¤Ÿè½¬æ¢jsxè¯­æ³•ï¼›ä¸»è¦ç”¨åˆ°@babel/preset-react; babelè¿˜å¯ä»¥åˆ é™¤ç±»å‹æ³¨é‡Šï¼Œä¸»è¦ç”¨åˆ°@babel/preset-typescriptï¼Œä½†æ˜¯æ— æ³•åšç±»å‹æ£€æŸ¥ï¼Œç±»å‹æ£€æŸ¥éœ€è¦Flow/Typescriptè¿™ç±»çš„å·¥å…·; babelæ˜¯æ„å»ºåœ¨æ’ä»¶ä¹‹ä¸Šçš„ï¼Œä½¿ç”¨ç°æœ‰çš„æ’ä»¶å¯ä»¥ç»„æˆä¸€ä¸ªè½¬æ¢ç®¡é“ï¼›é€šè¿‡ä½¿ç”¨æˆ–åˆ›å»ºä¸€ä¸ªpreset å³å¯è½»æ¾ä½¿ç”¨ä¸€ç»„æ’ä»¶ï¼›ä½¿ç”¨generator-babel-pluginç”Ÿæˆä¸€ä¸ªæ’ä»¶æ¨¡ç‰ˆï¼› 2.6.1 æ¦‚å¿µ1npm install --save-dev --save-exact @babel/core @babel/cli @babel/preset-env 2.6.1.1 @babel/corebabel æ ¸å¿ƒåŠŸèƒ½åŒ…å«åœ¨è¯¥æ¨¡å—ä¸­ï¼› 2.6.1.2 @babel/cli@babel/cli æ˜¯ä¸€ä¸ªèƒ½å¤Ÿä»ç»ˆç«¯ï¼ˆå‘½ä»¤è¡Œï¼‰ä½¿ç”¨çš„å·¥å…·ï¼› babelrc 1234&#123; \"presets\": [], \"plugins\": []&#125; 2.6.1.3 plugins æ’ä»¶æ˜¯å°å‹çš„jsç¨‹åºï¼Œç”¨äºæŒ‡å¯¼babelå¦‚ä½•ä»£ç è¿›è¡Œè½¬æ¢ ç°åœ¨ï¼Œbabelè™½ç„¶å¼€ç®±å³ç”¨ï¼Œä½†æ˜¯ä»€ä¹ˆåŠ¨ä½œéƒ½ä¸åšã€‚ç±»ä¼¼äºconst babel = code =&gt; codeï¼Œå°†ä»£ç è§£æä¹‹åå†è¾“å‡ºåŒæ ·çš„ä»£ç ï¼Œå¦‚æœæƒ³è¦babelåšä¸€äº›å®é™…çš„å·¥ä½œï¼Œå°±éœ€è¦ä¸ºå…¶æ·»åŠ æ’ä»¶ï¼› ä¾‹å¦‚@babel/plugin-transform-arrow-functionsä¹‹ç±»çš„æ’ä»¶èƒ½å°†es6çš„ç®­å¤´å‡½æ•°è½¬æ¢æˆes5çš„functionï¼›ä½†æ˜¯ä»£ç ä¸­ä¾ç„¶æœ‰å…¶ä»–es6å±æ€§ï¼Œæ¯”å¦‚classã€‚ æˆ‘ä»¬å¸Œæœ›å¯¹å®ƒä»¬ä¹Ÿè¿›è¡Œè½¬æ¢ï¼Œä¸éœ€è¦ä¸€ä¸ªæ¥ä¸€ä¸ªæ·»åŠ æ‰€éœ€è¦çš„æ’ä»¶ã€‚å¯ä»¥ä½¿ç”¨ä¸€ä¸ªpresetï¼ˆå³ä¸€ç»„é¢„å…ˆè®¾å®šçš„æ’ä»¶ï¼‰ å°±åƒæ’ä»¶ä¸€æ ·ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±æ‰€éœ€è¦çš„æ’ä»¶ç»„åˆåˆ›å»ºä¸€ä¸ª è‡ªå·±çš„presetå¹¶å°†å…¶åˆ†äº«å‡ºå»ï¼› æ’ä»¶å‚æ•° 12345678910111213141516// ä¸åŠ å‚æ•°çš„æ—¶å€™,ä¸‹é¢è¿™å‡ ç§æ˜¯ä¸€è‡´çš„ï¼›&#123; \"plugins\": [\"pluginA\", [\"pluginA\"], [\"pluginA\",&#123;&#125;]]&#125;// æ·»åŠ å‚æ•°ï¼Œè¯·ä¼ é€’ä¸€ä¸ªä»¥å‚æ•°åä½œä¸ºï¼ˆkeyï¼‰çš„å¯¹è±¡&#123; \"plugins\": [ [ \"transform-async-to-module-method\", &#123; \"module\": \"bluebird\", \"method\": \"coroutine\" &#125; ] ]&#125; 2.6.1.4 preset ï¼ˆ@babel/envï¼‰ é™¤äº†ä¸€ä¸ªä¸€ä¸ªæ·»åŠ æ’ä»¶ï¼Œè¿˜å¯ä»¥ä»¥ preset çš„å½¢å¼å¯ç”¨ä¸€ç»„æ’ä»¶ï¼Œå¯¹æ¯”pluginæ¥è¯´ï¼Œpresetå°±æ˜¯ä¸ºäº†è®©ä¸æƒ³è‡ªåŠ¨æ‰‹åŠ¨ç»„åˆæ’ä»¶çš„å¼€å‘è€…æä¾›çš„ï¼Œpresetå¯ä»¥ä½œä¸ºBabelæ’ä»¶çš„ç»„åˆï¼› å¯ä»¥ç®€å•æŠŠBabel Presetè§†ä¸ºBabel Pluginçš„é›†åˆï¼Œæ¯”å¦‚babel-preset-es2015 å°±åŒ…å«äº†æ‰€æœ‰è·Ÿes6è½¬æ¢æœ‰å…³çš„æ’ä»¶ï¼› 1./node_modules/.bin/babel src --out-dir lib --presets=@babel/env presetå‚æ•° æ ¼å¼ä¸pluginä¸€è‡´ï¼› å®˜æ–¹Preset 1234@babel/preset-env@babel/preset-flow@babel/preset-react@babel/preset-typescript 2.6.1.5 Pluginä¸Presetæ‰§è¡Œé¡ºåºå¯ä»¥åŒæ—¶ä½¿ç”¨å¤šä¸ªPlugin å’ŒPresetï¼Œæ­¤æ—¶ï¼Œå®ƒä»¬æ‰§è¡Œé¡ºåºéå¸¸é‡è¦ å…ˆæ‰§è¡Œå®Œæ‰€æœ‰Pluginï¼Œå†æ‰§è¡ŒPreset å¤šä¸ªPluginï¼ŒæŒ‰å£°æ˜æ¬¡åºé¡ºåºæ‰§è¡Œ å¤šä¸ªPresetï¼ŒæŒ‰ç…§å£°æ˜æ¬¡åºé€†åºæ‰§è¡Œ 12345678910&#123; \"plugins\": [ \"transform-react-jsx\", \"transform-async-to-generator\" ], \"presets\": [ \"es2015\", \"es2016\" ]&#125; æ‰§è¡Œé¡ºåº transform-react-jsxï¼Œtransform-async-to-generatorï¼Œes2016ï¼Œes2015 2.6.1.6 babel-polyfillbabelé»˜è®¤åªè½¬æ¢æ–°çš„jså¥æ³•ï¼ˆsyntaxï¼‰ï¼Œä¸è½¬æ–°çš„APIï¼Œç±»ä¼¼Proxyï¼ŒPromiseè¿™äº›ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒES6åœ¨Arrayå¯¹è±¡ä¸Šæ–°å¢äº†Array.fromæ–¹æ³•ï¼Œbabelå°±ä¸ä¼šè½¬ç è¿™ä¸ªæ–¹æ³•ã€‚å¦‚æœæƒ³è®©è¿™ä¸ªæ–¹æ³•è¿è¡Œï¼Œå¿…é¡»ä½¿ç”¨babel-polyfillï¼› ä»babel7.4.0ç‰ˆæœ¬å¼€å§‹ï¼Œè¿™ä¸ªè½¯ä»¶åŒ…å·²ç»ä¸æ¨èä½¿ç”¨äº†ï¼Œå»ºè®®ä½¿ç”¨core-js/stable å’Œregenerator-runtime/runtime 12import 'core-js/stable'import 'regenerator-runtime/runtime' useBuiltIns 12345678910111213141516&#123; \"presets\": [ [ \"@babel/env\", &#123; \"targets\": &#123; \"edge\": \"17\", \"firefox\": \"60\", \"chrome\": \"67\", \"safari\": \"11.1\" &#125;, \"useBuiltIns\": \"usage\" // å½“æ­¤å‚æ•°è®¾ç½®ä¸º \"usage\" æ—¶ï¼Œå°±ä¼šåŠ è½½ä¸Šé¢æ‰€æåˆ°çš„æœ€åä¸€ä¸ªä¼˜åŒ–æªæ–½ï¼Œä¹Ÿå°±æ˜¯åªåŒ…å«ä½ æ‰€éœ€è¦çš„ polyfill. &#125; ] ]&#125; 1234Promise.resolve().finally();// åŠ äº† \"useBuiltIns\": \"usage\" ä¹‹ç±»è½¬åŒ–ä¸ºrequire('core-js/modules/es.promise.finally');Promise.resolve().finaly(); Babelå°†æ£€æŸ¥ä½ çš„æ‰€æœ‰ä»£ç ï¼Œä»¥ä¾¿æŸ¥æ‰¾ç›®æ ‡ç¯å¢ƒä¸­ç¼ºå¤±çš„åŠŸèƒ½ï¼Œç„¶ååªæŠŠå¿…é¡»çš„polyfillåŒ…å«è¿›æ¥ï¼›å¦‚æœæ²¡åŠ useageï¼Œé‚£å¿…é¡»åœ¨æ‰€æœ‰ä»£ç ä¹‹å‰é€šè¿‡requireåŠ è½½ä¸€æ¬¡å®Œæˆçš„polyfill 2.6.1.7 å°ç»“ä½¿ç”¨@babel-cliä»ç»ˆç«¯è¿è¡ŒBabelï¼› åˆ©ç”¨ @babel/polyfillæ¨¡æ‹Ÿæ‰€æœ‰æ–°çš„jsåŠŸèƒ½ï¼Œæ¯”å¦‚Array.from, Promiseç­‰ï¼› è€Œ@babel-envpreset åªå¯¹ç›®æ ‡ç¯å¢ƒï¼ˆå¦‚æµè§ˆå™¨ï¼‰ä¸­ç¼ºå¤±çš„åŠŸèƒ½è¿›è¡Œä»£ç è½¬æ¢å’ŒåŠ è½½polyfillï¼› 2.6.2 é…ç½®1echo &#123;&#125;&gt;babel.config.json 2.6.2.1 typescript1npm install --save-dev --save-exact @babel/preset-typescript 2.6.2.2 react1npm install --save-dev --save-exact @babel/preset-react 2.7 å¼•å…¥typescriptinstall 1npm install --save-dev --save-exact typescript ts-loader tsconfig.json 1echo &#123;&#125; &gt;tsconfig.json 2.8 å¼•å…¥reactinstall 1npm install react react-dom react-router react-router-dom redux react-saga reselect react-redux immer connected-react-router history --save --save-exact è®°å¾—åŠ å…¥@types 1npm install @types/react @types/react-dom --save-dev --save-exact 2.9 è½½å…¥cssç›¸å…³èµ„æºinstall 1npm install style-loader css-loader less less-loader --save-dev --save-exact å®‰è£…PostCSS Preset Env 1npm install --save-dev --save-exact postcss-preset-env postcss postcss-loader MiniCssExtractPlugin ç”Ÿäº§æ¨¡å¼ä¸‹è¿è¡Œæ—¶ä½¿ç”¨æ¥æå–CSS 1npm install --save-dev --save-exact mini-css-extract-plugin 2.10 è§£æå›¾ç‰‡ï¼Œå­—ä½“ä¹‹ç±»çš„1npm install file-loader --save-dev --save-exact 2.11 HtmlWebpackPlugin1npm install --save-dev --save-exact html-webpack-plugin 2. Devinstall 1npm install --save-dev --save-exact webpack-hot-middleware express webpack-dev-middleware 3. Pro","categories":[{"name":"webpack","slug":"webpack","permalink":"http://yoursite.com/categories/webpack/"}],"tags":[{"name":"guide","slug":"guide","permalink":"http://yoursite.com/tags/guide/"}]},{"title":"graphics1","slug":"graphics1","date":"2021-02-09T10:24:13.000Z","updated":"2021-02-11T00:00:59.294Z","comments":true,"path":"2021/02/09/graphics1/","link":"","permalink":"http://yoursite.com/2021/02/09/graphics1/","excerpt":"","text":"å‰ç½® 1. Course Topisï¼ˆmainly 4 partsï¼‰ Rasterization ï¼ˆå…‰æ …åŒ–ï¼‰ Curves and Meshes Ray Tracing ï¼ˆå…‰çº¿è¿½è¸ªï¼‰ Animation/Simulation ï¼ˆåŠ¨ç”»/æ¨¡æ‹Ÿï¼‰ 1.1 Rasterizationå…‰æ …åŒ–ï¼Œ æŠŠä¸‰ç»´ç©ºé—´çš„å‡ ä½•å½¢ä½“æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚è¿™å°±æ˜¯å…‰æ …åŒ–ã€‚ å®æ—¶çš„è®¡ç®—æœºå›¾å½¢å­¦çš„ä¸»è¦åº”ç”¨ï¼Œåœ¨è®¡ç®—æœºå›¾å½¢å­¦çš„èŒƒç•´å†…ï¼Œå®æ—¶çš„å®šä¹‰æˆ‘ä»¬è®¤ä¸ºæ˜¯æ¯ç§’é’Ÿç”Ÿæˆ30å¹…ç”»é¢æˆ–è€…å«30å¸§ï¼Œèƒ½è¾¾åˆ°è¿™ä¸ªçº§åˆ«å°±å«å®æ—¶ï¼Œå¦åˆ™å«ç¦»çº¿ï¼› 1.2 Curves and Meshesåœ¨å›¾å½¢å­¦ä¸­ï¼Œå¦‚ä½•è¡¨ç¤ºä¸€æ¡å…‰æ»‘çš„æ›²çº¿ã€‚å¦‚ä½•è¡¨ç¤ºæ›²é¢ã€‚ 1.3 Ray Tracing ï¼ˆå…‰çº¿è¿½è¸ªï¼‰ç”ŸæˆçœŸå®ç¾è§‚çš„ç”»é¢ï¼› trade off å–èˆ","categories":[{"name":"graphics","slug":"graphics","permalink":"http://yoursite.com/categories/graphics/"}],"tags":[{"name":"guide","slug":"guide","permalink":"http://yoursite.com/tags/guide/"}]},{"title":"liner_Algebra","slug":"liner-Algebra","date":"2021-02-08T13:59:25.000Z","updated":"2021-02-21T10:25:54.752Z","comments":true,"path":"2021/02/08/liner-Algebra/","link":"","permalink":"http://yoursite.com/2021/02/08/liner-Algebra/","excerpt":"","text":"ä¸€ç³»åˆ—ç®€çŸ­å¯åˆ·çš„è§†é¢‘ï¼Œå°†çº¿æ€§ä»£æ•°ä¸­çš„å‡ ä½•ç›´è§‰åŠ¨ç”»åŒ–ï¼› å³ä½¿ä½ èƒ½è·Ÿä¸Šè§†é¢‘çš„é€Ÿåº¦ï¼Œä½ ä¹Ÿéœ€è¦ç•™ç‚¹æ—¶é—´ç»™è‡ªå·±æ€è€ƒï¼Œå­¦ä¹ å¾€å¾€å‘ç”Ÿåœ¨æ­¤åˆ»ï¼› 1. å‘é‡1.1 å«ä¹‰çº¿æ€§ä»£æ•°ä¸­æœ€åŸºç¡€ã€æœ€æ ¹æºçš„ç»„æˆéƒ¨åˆ†å°±æ˜¯å‘é‡ï¼› ä¸€èˆ¬æ¥è¯´ï¼Œæœ‰ä¸‰ç§çœ‹å¾…å‘é‡çš„è§‚ç‚¹ï¼Œçœ‹ä¼¼ä¸åŒå´æœ‰æ‰€å…³è”ï¼› 1.1.1 ç‰©ç†ä¸“ä¸šè§†è§’å‘é‡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´ï¼Œå†³å®šä¸€ä¸ªå‘é‡çš„æ˜¯å®ƒçš„é•¿åº¦å’Œå®ƒæ‰€æŒ‡çš„æ–¹å‘ï¼›ä½†æ˜¯åªè¦ä»¥ä¸Šä¸¤ä¸ªç‰¹å¾ç›¸åŒï¼Œä½ å¯ä»¥è‡ªç”±ç§»åŠ¨ä¸€ä¸ªå‘é‡è€Œä¿æŒå®ƒä¸å˜ï¼› äºŒç»´å‘é‡ å¤„åœ¨å¹³é¢ä¸­çš„å··é‡Œé‚£ä¸ªæ˜¯äºŒç»´çš„ï¼› ä¸‰ç»´å‘é‡ è€Œå¤„åœ¨æˆ‘ä»¬æ‰€ç”Ÿæ´»çš„ç©ºé—´ä¸­çš„å‘é‡æ˜¯ä¸‰ç»´çš„ï¼› 1.1.2 è®¡ç®—æœºä¸“ä¸šè§†è§’ä»è®¡ç®—æœºä¸“ä¸šå­¦ç”Ÿçš„è§†è§’çœ‹ï¼Œå‘é‡æ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨ï¼›æ¯”å¦‚ä½ æ­£åœ¨åšä¸€äº›æœ‰å…³æˆ¿ä»·çš„åˆ†æï¼›è€Œä½ åªå…³å¿ƒä¸¤ä¸ªç‰¹å¾ï¼š ``æˆ¿å±‹é¢ç§¯å’Œä»·æ ¼`ã€‚ ä½ å¯èƒ½ä¼šç”¨ä¸€å¯¹æ•°å­—å¯¹æ¯ä¸ªæˆ¿å±‹è¿›è¡Œå»ºæ¨¡ï¼›ç¬¬ä¸€ä¸ªæ•°ä»£è¡¨æˆ¿å±‹é¢ç§¯ï¼Œç¬¬äºŒä¸ªæ•°ä»£è¡¨ä»·æ ¼ï¼› æ³¨æ„ï¼Œè¿™é‡Œçš„æ•°å­—é¡ºåºä¸å¯é¢ å€’ï¼›ç”¨è¡Œè¯æ¥è®²ï¼Œä½ ä¼šç”¨äºŒç»´å‘é‡å¯¹æˆ¿å±‹è¿›è¡Œå»ºæ¨¡ï¼›åœ¨è¿™é‡Œï¼Œâ€œå‘é‡â€åªä¸è¿‡æ˜¯â€œåˆ—è¡¨â€çš„ä¸€ä¸ªèŠ±å“¨çš„è¯´æ³•ï¼›ä¹‹æ‰€ä»¥è¿™ä¸ªå‘é‡æ˜¯äºŒç»´çš„ï¼Œæ˜¯å› ä¸ºè¿™ä¸ªåˆ—è¡¨çš„é•¿åº¦æ˜¯2ï¼› 1.1.3 æ•°å­¦ä¸“ä¸šè§†è§’å¦ä¸€æ–¹é¢ï¼Œæ•°å­¦å®¶è¯•å›¾å»æ¦‚æ‹¬è¿™ä¸¤ç§è§‚ç‚¹ï¼Œå¤§è‡´åœ°è¯´ï¼Œå‘é‡å¯ä»¥æ˜¯ä»»ä½•ä¸œè¥¿ã€‚åªè¦ä¿è¯ä¸¤ä¸ªå‘é‡ç›¸åŠ ä»¥åŠæ•°å­—ä¸å‘é‡ç›¸ä¹˜æ˜¯æœ‰æ„ä¹‰çš„å³å¯ï¼› å‘é‡åŠ æ³•å’Œå‘é‡æ•°ä¹˜è´¯ç©¿çº¿æ€§ä»£æ•°å§‹ç»ˆï¼ŒäºŒè€…èµ·ç€å¾ˆé‡è¦çš„ä½œç”¨ ä¸€ç§æ€è€ƒâ€œå‘é‡â€çš„ç‰¹å®šæ–¹å¼ ç°åœ¨å…³æ³¨çš„æ˜¯å®ƒçš„å‡ ä½•æ–¹é¢ï¼Œé¦–å…ˆéœ€è¦è€ƒè™‘ä¸€ä¸ªç®­å¤´ï¼Œè€ƒè™‘è¿™ä¸ªç®­å¤´åœ¨æŸä¸ªåæ ‡ç³»ä¸­ï¼Œæ¯”å¦‚x-yå¹³é¢ã€‚å¹¶ä¸”ç®­å¤´èµ·ç‚¹ä½äºåŸç‚¹ï¼›è¿™ä¸ç‰©ç†ä¸“ä¸šå­¦ç”Ÿçš„çœ‹æ³•ç•¥æœ‰ä¸åŒã€‚å› ä¸ºåœ¨ä»–ä»¬çœ¼ä¸­ï¼Œå‘é‡å¯ä»¥åœ¨ç©ºé—´ä¸­è‡ªç”±è½è„šï¼›ä½†æ˜¯åœ¨çº¿æ€§ä»£æ•°ä¸­ï¼Œå‘é‡ç»å¸¸ä»¥åŸç‚¹ä½œä¸ºèµ·ç‚¹ï¼› ä¸€æ—¦ä½ ç†è§£äº†â€œå‘é‡æ˜¯ç©ºé—´ä¸­çš„ç®­å¤´â€è¿™ç§è§‚ç‚¹ï¼Œå°±æ¥çœ‹çœ‹â€œå‘é‡æ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨â€è¿™ç§è§‚ç‚¹ï¼› åœ¨ç›´è§’åæ ‡ç³»ä¸­ï¼Œä¸€ä¸ªå‘é‡çš„åæ ‡ç”±ä¸€å¯¹æ•°æ„æˆï¼›ï¼ˆ-2ï¼Œ3ï¼‰ï¼Œè¿™å¯¹æ•°æŒ‡å¯¼ä½ å¦‚ä½•ä»åŸç‚¹ï¼ˆå‘é‡èµ·ç‚¹ï¼‰å‡ºå‘åˆ°è¾¾å®ƒçš„å°–ç«¯ï¼ˆå‘é‡ç»ˆç‚¹ï¼‰ ç¬¬ä¸€ä¸ªæ•°å‘Šè¯‰ä½ æ²¿ç€Xè½´èµ°å¤šè¿œï¼Œæ­£æ•°ä»£è¡¨å‘å³ç§»åŠ¨ï¼Œè´Ÿæ•°ä»£è¡¨å‘å·¦ç§»åŠ¨ï¼› ç¬¬äºŒä¸ªæ•°å‘Šè¯‰ä½ æ²¿ç€Yè½´èµ°å¤šè¿œï¼›æ­£æ•°ä»£è¡¨å‘ä¸Šç§»åŠ¨ï¼Œè´Ÿæ•°ä»£è¡¨å‘ä¸‹ç§»åŠ¨ï¼› ä¸ºäº†æŠŠå‘é‡å’Œç‚¹åŒºåˆ«å¼€ï¼Œæƒ¯ç”¨æ–¹æ³•æ˜¯æŠŠè¿™å¯¹æ•°ç«–ç€å†™ï¼Œç„¶åç”¨æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼›æ¯ä¸€å¯¹æ•°ç»™å‡ºå”¯ä¸€ä¸€ä¸ªå‘é‡ï¼› 1.2 å‘é‡çš„å’Œ å¹³ç§»ç¬¬äºŒä¸ªå‘é‡ï¼Œä½¿å®ƒçš„èµ·ç‚¹ä¸ç¬¬ä¸€ä¸ªå‘é‡çš„ç»ˆç‚¹é‡åˆã€‚ç„¶åç”»ä¸€ä¸ªå‘é‡ï¼Œå®ƒä»ç¬¬ä¸€ä¸ªå‘é‡çš„èµ·ç‚¹å‡ºå‘ï¼ŒæŒ‡å‘ç¬¬äºŒä¸ªå‘é‡çš„ç»ˆç‚¹ï¼›è¿™ä¸ªå‘é‡å°±æ˜¯å®ƒä»¬çš„å’Œï¼› é¡ºä¾¿ä¸€æï¼Œè¿™ä¸ªå‘é‡åŠ æ³•çš„å®šä¹‰å·®ä¸å¤šæ˜¯çº¿æ€§ä»£æ•°ä¸­å”¯ä¸€å…è®¸å‘é‡ç¦»å¼€åŸç‚¹çš„æƒ…å½¢ï¼› 1.2.1 æ•°å­¦è§’åº¦çœ‹å‘é‡åŠ æ³• æˆ‘ä»¬é‡æ–°ç¼–æ’å®ƒä»¬çš„å®å¸ï¼Œä½¿å¾—æˆ‘ä»¬å…ˆå®Œæˆæ‰€æœ‰æ°´å¹³è¿é€ï¼Œå†å®Œæˆæ‰€æœ‰ç«–ç›´è¿åŠ¨ï¼› æ‰€ä»¥æ–°å‘é‡çš„åæ ‡å°±æ˜¯ (1+3, 2+(-1)); å³(x1+x2,y1+y2),æ€»ä½“æ¥è¯´ï¼Œåœ¨â€œå‘é‡æ˜¯æœ‰åºçš„æ•°å­—åˆ—è¡¨â€è§‚ç‚¹é‡Œï¼Œå‘é‡åŠ æ³•å°±æ˜¯æŠŠå¯¹åº”é¡¹ç›¸åŠ ï¼› 1.3 å‘é‡æ•°ä¹˜å¦ä¸€ä¸ªå‘é‡åŸºç¡€è¿ç®—å°±æ˜¯å‘é‡æ•°ä¹˜ 1.3.1 ç¼©æ”¾æ¯”å¦‚è¯´ä½ é€‰æ‹©æ•°å­—2ï¼ŒæŠŠå®ƒä¸ä¸€ä¸ªç»™å®šå‘é‡ç›¸ä¹˜ã€‚æ„å‘³ç€ä½ æŠŠè¿™ä¸ªå‘é‡æ‹‰é•¿ä¸ºåŸå‘é‡çš„2å€ã€‚ å¦‚æœå°†å‘é‡ä¹˜ä»¥1/3ï¼Œå°±æ„å‘³ç€è¿™ä¸ªå‘é‡é•¿åº¦ç¼©çŸ­ä¸ºåŸæ¥çš„1/3.å¦‚æœä¹˜ä»¥-1.8ï¼Œç›¸å½“äºå¾€åæ–¹å‘æ‹‰é•¿1.8å€ï¼›2,1/3,-1.8,å®ƒä»¬ç”¨äºç¼©æ”¾å‘é‡ï¼Œè¢«ç§°ä¸ºâ€œæ ‡é‡â€å®é™…ä¸Šè‡ªå§‹è‡³ç»ˆï¼Œæ•°å­—åœ¨çº¿æ€§ä»£æ•°ä¸­èµ·åˆ°çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç¼©æ”¾å‘é‡ï¼›æ‰€ä»¥ï¼Œâ€œæ ‡é‡â€å’Œâ€œæ•°å­—â€ä¸¤ä¸ªè¯é€šå¸¸åœ¨è¿™é‡Œå¯ä»¥ç›¸äº’æ›¿æ¢ï¼› è¿™ç§æ‹‰ä¼¸æˆ–å‹ç¼©ï¼Œæœ‰æ—¶åˆä½¿å‘é‡åå‘çš„è¿‡ç¨‹è¢«ç§°ä¸ºâ€œç¼©æ”¾â€ï¼› 1.3.2 æ•°å­¦è§’åº¦çœ‹å‘é‡æ•°ä¹˜ä»æ•°å­—çš„è§’åº¦æ¥çœ‹ï¼Œå°†ä¸€ä¸ªå‘é‡ä¼¸é•¿ä¸ºåŸæ¥çš„2å€ï¼›å¯¹åº”äºå°†æ¯ä¸€ä¸ªåˆ†é‡åˆ†åˆ«ä¹˜ä»¥2ï¼› æ‰€ä»¥å°†å‘é‡çœ‹ä½œä¸€ä¸ªæ•°å­—åˆ—è¡¨æ—¶ï¼Œå‘é‡ä¸æ ‡é‡ç›¸ä¹˜å°±æ˜¯å°†å‘é‡ä¸­çš„æ¯ä¸ªåˆ†é‡ä¸æ ‡é‡ç›¸ä¹˜ï¼› 1.4 å‘é‡ç‚¹ä¹˜ä¸å‰ä¹˜1.5 æ€»ç»“çº¿æ€§ä»£æ•°å›´ç»•ä¸¤ç§åŸºæœ¬è¿ç®—ï¼š å‘é‡åŠ æ³•ä¸å‘é‡ä¹˜æ³•â€œç©¶ç«Ÿæ˜¯ä»€ä¹ˆæ„æ€äº†â€ï¼› ä¸ºä»€ä¹ˆæ•°å­¦å®¶åªè€ƒè™‘è¿™ä¸¤ç§è¿ç®—ï¼Œå¹¶ä¸”åˆæ˜¯å¦‚ä½•å°†å®ƒä»¬æŠ½è±¡ç‹¬ç«‹å‡ºæ¥ï¼Œä¸ç®¡ä½ é€‰ä»€ä¹ˆä»£è¡¨å‘é‡éƒ½ä¸ä¹‹æ— å…³ï¼› å®é™…ä¸Šæ— è®ºä½ æ€ä¹ˆçœ‹å¾…å‘é‡éƒ½æ— æ‰€è°“ï¼Œæˆ–æŠŠå‘é‡çœ‹ä½œç©ºé—´ä¸­çš„ç®­å¤´ï¼›æˆ–è€…æŠŠå‘é‡çœ‹ä½œæ•°å­—åˆ—è¡¨ï¼›è¿™ç§è§‚ç‚¹åˆæ°å¥½æœ‰æ¼‚äº®çš„å‡ ä½•æ„ä¹‰ä¸ä¹‹å¯¹åº”ã€‚çº¿æ€§ä»£æ•°çš„æ•ˆç”¨å¾ˆå°‘æç°åœ¨è¿™äº›è§‚ç‚¹çš„å…¶ä¸­ä¸€ä¸ªä¸Šï¼Œè€Œæ˜¯æ›´å¤šåœ°ä½“ç°åœ¨å®ƒèƒ½å¤Ÿåœ¨è¿™äº›è§‚ç‚¹ä¸­ç›¸äº’è½¬åŒ–ï¼› çº¿æ€§ä»£æ•°ä¸ºæ•°æ®åˆ†ææä¾›äº†ä¸€æ¡å°†å¤§é‡æ•°æ®åˆ—è¡¨æ¦‚å¿µåŒ–ã€å¯è§†åŒ–çš„æ¸ é“ï¼›å®ƒè®©æ•°æ®æ ·å¼å˜å¾—éå¸¸æ˜æ™°ï¼Œå¹¶è®©ä½ å¤§è‡´äº†è§£ç‰¹å®šè¿ç®—çš„æ„ä¹‰ï¼› å¦ä¸€æ–¹é¢ï¼Œçº¿æ€§ä»£æ•°ç»™ç‰©ç†å­¦å®¶å’Œè®¡ç®—æœºå›¾å½¢ç¨‹åºå‘˜æä¾›äº†ä¸€ç§è¯­è¨€ï¼›è®©ä»–ä»¬é€šè¿‡è®¡ç®—æœºèƒ½å¤„ç†æ•°å­—æ¥æè¿°å¹¶æ“çºµç©ºé—´ï¼› 2. çº¿æ€§ç»„åˆã€å¼ æˆçš„ç©ºé—´ä¸åŸº2.1 åŸºå‘é‡å…³äºå‘é‡åæ ‡ï¼Œè¿˜æœ‰ä¸€ç§æœ‰è¶£çš„æ–¹å¼æ¥çœ‹å¾…è¿™äº›åæ ‡ï¼Œå®ƒå¯¹çº¿æ€§ä»£æ•°å¾ˆé‡è¦ã€‚å½“ä½ çœ‹åˆ°ä¸€å¯¹æè¿°å‘é‡çš„æ•°æ—¶ï¼Œæ¯”å¦‚ï¼ˆ3ï¼Œ-2ï¼‰ï¼Œå¯ä»¥æŠŠå®ƒçš„æ¯ä¸ªåæ ‡çœ‹ä½œä¸€ä¸ªæ ‡é‡ï¼› åœ¨xyåæ ‡ç³»ä¸­ï¼Œæœ‰ä¸¤ä¸ªéå¸¸ç‰¹åˆ«çš„å‘é‡ã€‚ä¸€ä¸ªæŒ‡å‘æ­£å³æ–¹ï¼Œé•¿åº¦ä¸º1ï¼Œé€šå¸¸è¢«ç§°ä¸ºi å¸½æˆ–è€…xæ–¹å‘çš„å•ä½å‘é‡ï¼›å¦ä¸€ä¸ªæŒ‡å‘æ­£ä¸Šæ–¹ï¼Œé•¿åº¦ä¸º1ã€‚é€šå¸¸è¢«ç§°ä¸ºjå¸½ æˆ–è€…yæ–¹å‘çš„å•ä½å‘é‡ï¼› ç°åœ¨æƒ³è±¡å‘é‡(3,-2)çš„xåæ ‡æ˜¯ä¸€ä¸ªæ ‡é‡ï¼Œå®ƒå°†iå¸½æ‹‰ä¼¸ä¸ºåŸæ¥çš„3å€ï¼›å®ƒå°†jå¸½æ‹‰ä¼¸ä¸ºåŸæ¥çš„2å€ï¼›ä»è¿™ä¸ªè§’åº¦å»çœ‹ï¼Œè¿™ä¸ªå‘é‡å®é™…ä¸Šæ˜¯ä¸¤ä¸ªç»è¿‡ç¼©æ”¾çš„å‘é‡çš„å’Œï¼› â€œç¼©æ”¾å‘é‡å¹¶ä¸”ç›¸åŠ â€ è¿™ä¸€æ¦‚å¿µè‡³å…³é‡è¦ï¼Œi ä¸ j æ˜¯xyåæ ‡ç³»çš„â€œåŸºå‘é‡â€ï¼›å®ƒä»¬åˆèµ·æ¥è¢«ç§°ä¸ºåæ ‡ç³»çš„åŸºï¼› è¿™æ˜¯åœ¨è¯´ï¼Œå½“ä½ æŠŠåæ ‡çœ‹ä½œæ ‡é‡æ—¶ï¼›åŸºå‘é‡å®é™…ä¸Šå°±æ˜¯è¿™äº›æ ‡é‡ç¼©æ”¾çš„å¯¹è±¡ï¼› æˆ‘ä»¬æ ¹æ®è¿™ä¸¤ä¸ªç‰¹æ®Šçš„åŸºå‘é‡æ„å»ºåæ ‡ç³»æ—¶ï¼Œä¹Ÿæµ®ç°äº†ä¸€äº›æœ‰è¶£è€Œå¾®å¦™çš„é—®é¢˜ï¼Œå¦‚æœæˆ‘ä»¬é€‰æ‹©ä¸åŒçš„åŸºå‘é‡ä¼šæ€ä¹ˆæ ·ï¼Ÿæˆ‘ä»¬å®Œå…¨å¯ä»¥é€‰æ‹©ä¸åŒçš„åŸºå‘é‡ï¼Œè·å¾—ä¸€ä¸ªåˆç†çš„æ–°åæ ‡ç³»ï¼› æ¯”å¦‚è¯´ï¼Œéšä¾¿é€‰ä¸€ä¸ªæŒ‡å‘å³ä¸Šæ–¹çš„å‘é‡ï¼ˆçº¢è‰²ï¼‰ï¼Œå†éšä¾¿é€‰ä¸€ä¸ªæŒ‡å‘å³ä¸‹æ–¹çš„å‘é‡ï¼ˆè“è‰²ï¼‰ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œé€šè¿‡é€‰æ‹©ä¸¤ä¸ªæ ‡é‡ï¼Œåˆ†åˆ«ç”¨äºç¼©æ”¾äºŒè€…çš„å…¶ä¸­ä¸€ä¸ªï¼›ç„¶åæŠŠå®ƒä»¬ç›¸åŠ ï¼Œä½ èƒ½å¾—åˆ°ä¸åŒçš„ç»“æœï¼› é€šè¿‡æ”¹å˜æ‰€é€‰æ‹©çš„æ ‡é‡ï¼Œä½ å¯ä»¥å¾—åˆ°å“ªäº›äºŒç»´å‘é‡ï¼Ÿ ç­”æ¡ˆæ˜¯ï¼Œä½ å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„äºŒç»´å‘é‡ã€‚ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ è¿™æ ·ä¸€å¯¹æ–°çš„åŸºå‘é‡ï¼ŒåŒæ ·å…è®¸æˆ‘ä»¬åœ¨ä¸€å¯¹æ•°å’ŒäºŒç»´å‘é‡ä¹‹é—´è‡ªç”±è½¬åŒ–ï¼› ä½†æ˜¯è¿™ç§å˜æ¢å…³ç³»ä¸ä¹‹å‰ç”¨iå¸½ å’Œ jå¸½çš„å˜æ¢å…³ç³»å®Œå…¨ä¸åŒï¼› æ¯å½“æˆ‘ä»¬ç”¨æ•°å­—æè¿°å‘é‡æ—¶ï¼Œå®ƒéƒ½ä¾èµ–äºæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨çš„åŸºä¸¤ä¸ªæ•°ä¹˜å‘é‡å’Œè¢«ç§°ä¸ºè¿™ä¸¤ä¸ªå‘é‡çš„çº¿æ€§ç»„åˆã€‚ 2.2 å‘é‡å¼ æˆçš„ç©ºé—´ï¼ˆspanï¼‰â€œçº¿æ€§â€è¿™ä¸ªè¯ä»å“ªå„¿æ¥ï¼Ÿè¿™æ ¹ç›´çº¿åˆåˆä»€ä¹ˆå…³ç³»ï¼Ÿ å¦‚æœå›ºå®šå…¶ä¸­ä¸€ä¸ªæ ‡é‡ï¼Œè®©å¦ä¸€ä¸ªæ ‡é‡è‡ªç”±å˜åŒ–ã€‚æ‰€äº§ç”Ÿçš„å‘é‡çš„ç»ˆç‚¹ä¼šæå‡ºä¸€æ¡ç›´çº¿ï¼›(ä¸‹é¢ä¸¤å¼ å›¾åˆ†åˆ«ä¸ºå›ºå®šå‘é‡Wç¼©æ”¾V å’Œ å›ºå®šVç¼©æ”¾W) å¦‚æœä½ è®©ä¸¤ä¸ªæ ‡é‡åŒæ—¶è‡ªç”±å˜åŒ–ï¼Œè€ƒè™‘æ‰€æœ‰å¯èƒ½å¾—åˆ°çš„å‘é‡ï¼›å¯èƒ½æœ‰ä¸¤ç§æƒ…å†µï¼› å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œå¯¹äºä¸€å¯¹åˆå§‹å‘é‡ï¼Œä½ èƒ½åˆ°è¾¾å¹³é¢ä¸­çš„æ¯ä¸€ä¸ªç‚¹ï¼›æ‰€æœ‰äºŒç»´å‘é‡éƒ½å°½åœ¨æŒæ¡ï¼› ä½†æ˜¯ä¹Ÿæœ‰ç³Ÿç³•çš„æƒ…å†µï¼Œå½“ä¸¤ä¸ªåˆå§‹å‘é‡æ°å¥½å…±çº¿æ—¶ï¼Œæ‰€äº§ç”Ÿçš„å‘é‡çš„ç»ˆç‚¹è¢«é™åˆ¶åœ¨ä¸€æ¡è¿‡åŸç‚¹çš„ç›´çº¿ä¸Šï¼› å®é™…ä¸Šè¿˜æœ‰ç¬¬ä¸‰ç§æƒ…å†µï¼š ä¸¤ä¸ªå‘é‡éƒ½æ˜¯é›¶å‘é‡ã€‚é‚£å°±åªèƒ½ä¹–ä¹–å‘†åœ¨åŸç‚¹äº†ï¼› æ‰€æœ‰å¯ä»¥è¡¨ç¤ºä¸ºç»™å®šå‘é‡çº¿æ€§ç»„åˆçš„å‘é‡çš„é›†åˆï¼›è¢«ç§°ä¸ºç»™å®šå‘é‡å¼ æˆçš„ç©ºé—´ï¼ˆspanï¼‰; ç°åœ¨ç”¨è¡Œè¯é‡æ–°å™è¿°åˆšæ‰çš„å†…å®¹ï¼›å¯¹å¤§éƒ¨åˆ†äºŒç»´å‘é‡å¯¹æ¥è¯´ï¼Œå®ƒä»¬å¼ æˆçš„ç©ºé—´æ˜¯æ‰€æœ‰äºŒç»´å‘é‡çš„é›†åˆã€‚ ä½†å½“å…±çº¿çš„æ—¶ï¼Œå®ƒä»¬å¼ æˆçš„ç©ºé—´å°±æ˜¯ç»ˆç‚¹è½åœ¨ä¸€æ¡ç›´çº¿ä¸Šçš„å‘é‡çš„é›†åˆï¼› çº¿æ€§ä»£æ•°ç´§ç´§å›´ç»•å‘é‡åŠ æ³•ä¸æ•°ä¹˜ ä¸¤ä¸ªå‘é‡å¼ æˆçš„ç©ºé—´å®é™…ä¸Šæ˜¯é—®ä»…é€šè¿‡å‘é‡åŠ æ³•ä¸å‘é‡æ•°ä¹˜è¿™ä¸¤ç§åŸºç¡€è¿ç®—ï¼Œä½ èƒ½è·å¾—çš„æ‰€æœ‰å¯èƒ½å‘é‡çš„é›†åˆæ˜¯ä»€ä¹ˆï¼Ÿ ç°åœ¨æ˜¯æ—¶å€™è®¨è®ºä¸€ä¸‹é€šå¸¸æˆ‘ä»¬æ˜¯å¦‚ä½•å°†å‘é‡çœ‹ä½œç‚¹çš„ï¼› æƒ³è±¡è½åœ¨ä¸€æ¡ç›´æ¥ä¸Šçš„ä¸€äº›å‘é‡æ—¶ï¼Œä½ ä¼šè§‰å¾—æ‹¥æŒ¤ã€‚è€ŒåŒæ—¶æƒ³è±¡æ‰€æœ‰äºŒç»´å‘é‡å¡«æ»¡å¹³é¢æ—¶ï¼Œä½ ä¼šè§‰å¾—éå¸¸æ‹¥æŒ¤ï¼› æ‰€ä»¥ä¸ºäº†å¯¹æŠ—è¿™ç§æƒ…å†µï¼Œé€šå¸¸æˆ‘ä»¬å°±ç”¨å‘é‡çš„ç»ˆç‚¹ä»£è¡¨æ”¹å‘é‡ã€‚è€Œåƒä»¥å¾€ä¸€æ ·ï¼Œå®ƒçš„èµ·ç‚¹ä»æ—§ä½äºåŸç‚¹ï¼›ç”¨è¿™ç§æ–¹æ³•æ¥çœ‹ï¼Œå¦‚æœä½ è¦è€ƒè™‘è½åœ¨ä¸€æ¡ç›´çº¿ä¸Šçš„æ‰€æœ‰å‘é‡æ—¶ï¼Œä½ éœ€è¦è€ƒè™‘ç›´çº¿æœ¬èº«å°±è¡Œäº†ï¼›ç±»ä¼¼åœ°ï¼ŒåŒæ—¶è€ƒè™‘æ‰€æœ‰äºŒç»´å‘é‡æ—¶ï¼Œå°†æ¯ä¸ªå‘é‡æŠ½è±¡ä¸ºå®ƒçš„ç»ˆç‚¹ï¼›å®é™…ä¸Šï¼Œä½ å°±ä¸å¿…è€ƒè™‘æ‰€æœ‰çš„ç®­å¤´äº†ï¼Œåªéœ€è¦è€ƒè™‘æ— é™å¤§çš„äºŒç»´å¹³é¢æœ¬èº«å³å¯ï¼› å½“ä½ åªè€ƒè™‘ä¸€ä¸ªå‘é‡æ—¶ï¼Œå°±æŠŠå®ƒçœ‹ä½œç®­å¤´ã€‚å½“ä½ è€ƒè™‘å¤šä¸ªå‘é‡æ—¶ï¼Œå°±æŠŠå®ƒä»¬éƒ½çœ‹ä½œç‚¹ï¼›å‰é¢æœ‰æåˆ°å¯¹å¤§éƒ¨åˆ†äºŒç»´å‘é‡æ¥è¯´ï¼Œå®ƒä»¬å¼ æˆçš„ç©ºé—´æ˜¯æ•´ä¸ªæ— é™å¤§çš„äºŒç»´å¹³é¢ï¼›å¦‚æœå…±çº¿ï¼Œå®ƒä»¬å¼ æˆçš„ç©ºé—´å°±æ˜¯ä¸€æ¡ç›´çº¿ï¼› 2.2.1 ä¸¤ä¸ªä¸‰ç»´å‘é‡å¼ æˆçš„ç©ºé—´æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿå¦‚æœæˆ‘ä»¬å†å»è€ƒè™‘ä¸‰ç»´ç©ºé—´ï¼Œå¼ æˆç©ºé—´è¿™ä¸ªæ¦‚å¿µå°±å¼€å§‹å˜å¾—æœ‰è¶£äº†ã€‚è¿™ä¸¤ä¸ªå‘é‡å¼ æˆçš„ç©ºé—´å°±æ˜¯å®ƒä»¬æ‰€æœ‰å¯èƒ½çš„çº¿æ€§ç»„åˆã€‚ è¿™ä¸ªç»ˆç‚¹ä¼šç”»å‡ºä¸‰ç»´ç©ºé—´ä¸­æŸä¸ªè¿‡åŸç‚¹çš„å¹³é¢ï¼›è¿™ä¸ªå¹³é¢å°±æ˜¯è¿™ä¸¤ä¸ªå‘é‡å¼ æˆçš„ç©ºé—´ï¼›æˆ–è€…è¯´ï¼Œæ‰€æœ‰ç»ˆç‚¹è½åœ¨è¿™ä¸ªå¹³é¢ä¸Šçš„å‘é‡çš„é›†åˆæ˜¯è¿™ä¸¤ä¸ªå‘é‡å¼ æˆçš„ç©ºé—´ï¼› å¦‚æœå†åŠ ä¸Šç¬¬ä¸‰ä¸ªå‘é‡ï¼Œé‚£ä¹ˆå®ƒä»¬å¼ æˆçš„ç©ºé—´åˆæ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ ä¼šæœ‰ä¸¤ç§æƒ…å†µï¼Œå¦‚æœç¬¬ä¸‰ä¸ªå‘é‡æ°å¥½è½åœ¨å‰ä¸¤ä¸ªå‘é‡æ‰€å¼ æˆçš„å¹³é¢ä¸Šã€‚é‚£ä¹ˆå®ƒä»¬å¼ æˆçš„ç©ºé—´å¹¶ä¸ä¼šæ”¹å˜ï¼Œè¿˜æ˜¯è¢«å›°åœ¨è¿™ä¸ªå¹³é¢ä¸Šï¼› å¦å¤–ä¸€ç§æƒ…å†µï¼Œå¦‚æœä½ éšæœºé€‰ä¸€ä¸ªå‘é‡ï¼Œå®ƒå‡ ä¹ä¸å¯èƒ½è½åœ¨å‰é¢ä¸¤ä¸ªå‘é‡æ‰€å¼ æˆçš„å¹³é¢ä¸­ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äºç¬¬ä¸‰ä¸ªå‘é‡æŒ‡å‘ä¸åŒçš„æ–¹å‘ã€‚å½“ä½ ç¼©æ”¾ç¬¬ä¸‰ä¸ªå‘é‡æ—¶ï¼Œå®ƒå°†å‰ä¸¤ä¸ªå‘é‡å¼ æˆçš„å¹³é¢æ²¿å®ƒçš„æ–¹å‘æ¥å›ç§»åŠ¨ï¼Œä»è€Œæ‰«è¿‡æ•´ä¸ªç©ºé—´ï¼› 2.3 çº¿æ€§æ— å…³ä¸çº¿æ€§ç›¸å…³å½“æœ‰å¤šä¸ªå‘é‡ï¼Œå¹¶ä¸”å¯ä»¥ç§»é™¤å…¶ä¸­ä¸€ä¸ªè€Œä¸å‡å°‘å¼ æˆçš„ç©ºé—´ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬ç§°å®ƒä»¬æ˜¯â€œçº¿æ€§ç›¸å…³â€çš„ï¼›å¦ä¸€ç§è¡¨è¿°æ–¹æ³•æ˜¯å…¶ä¸­ä¸€ä¸ªå‘é‡ï¼Œå¯ä»¥è¡¨ç¤ºä¸ºå…¶å®ƒå‘é‡çš„çº¿æ€§ç»„åˆï¼Œå› ä¸ºè¿™ä¸ªå‘é‡å·²ç»è½åœ¨å…¶å®ƒå‘é‡å¼ æˆçš„ç©ºé—´ä¹‹ä¸­ï¼› å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‰€æœ‰å‘é‡éƒ½ç»™å¼ æˆçš„ç©ºé—´å¢æ·»äº†æ–°çš„ç»´åº¦ï¼›å®ƒä»¬å°±è¢«ç§°ä¸ºæ˜¯â€œçº¿æ€§æ— å…³â€çš„ã€‚ 2.4 å°ç»“â€œå‘é‡ç©ºé—´çš„ä¸€ç»„åŸºæ˜¯å¼ æˆè¯¥ç©ºé—´çš„ä¸€ä¸ªçº¿æ€§æ— å…³çš„å‘é‡é›†ï¼›â€ ç©ºé—´çš„ä¸€ç»„åŸºçš„ä¸¥æ ¼å®šä¹‰æ˜¯è¿™æ ·çš„ï¼š å¼ æˆè¯¥ç©ºé—´çš„ä¸€ä¸ªçº¿æ€§æ— å…³å‘é‡çš„é›†åˆï¼ŒåŸºäºç›®å‰å¯¹â€œå¼ æˆâ€ å’Œ â€œçº¿æ€§æ— å…³â€ è¿™ä¸¤ä¸ªè¯çš„ç†è§£ã€‚æ€è€ƒä¸€ä¸‹ä¸ºä»€ä¹ˆè¿™ä¸ªå®šä¹‰åˆä¹æƒ…ç†ï¼› 3. çŸ©é˜µä¸çº¿æ€§å˜æ¢3.1 çº¿æ€§å˜æ¢ å¾ˆé—æ†¾ï¼Œ Matrixï¼ˆçŸ©é˜µï¼‰æ˜¯ä»€ä¹ˆæ˜¯è¯´ä¸æ¸…çš„ï¼Œä½ å¿…é¡»å¾—è‡ªå·±äº²çœ¼çœ‹çœ‹ï¼› â€œå¦‚æœè¦æˆ‘é€‰å‡ºä¸€ä¸ªä¸»é¢˜ï¼Œå®ƒä¸ä»…è®©çº¿æ€§ä»£æ•°çš„å…¶å®ƒå†…å®¹ä¸€ç›®äº†ç„¶ï¼Œåˆç»å¸¸è¢«åˆæ¬¡å­¦ä¹ çº¿æ€§ä»£æ•°çš„äººå¿½è§†ï¼Œæˆ‘ä¼šé€‰æ‹©è¿™ä¸ªâ€”â€”çº¿æ€§å˜æ¢çš„æ¦‚å¿µä»¥åŠå®ƒå’ŒçŸ©é˜µçš„å…³ç³»â€ åœ¨è¿™æœŸè§†é¢‘ä¸­ï¼Œåªä¼šé›†ä¸­è®¨è®ºè¿™äº›å˜æ¢åœ¨äºŒç»´ç©ºé—´ä¸­é•¿ä»€ä¹ˆæ ·ã€‚ä»¥åŠå®ƒä»¬å¦‚ä½•ä¸çŸ©é˜µå‘é‡ä¹˜æ³•å…³è”ã€‚å°¤å…¶å±•ç¤ºä¸€ç§ä¸ç”¨æ­»è®°ç¡¬èƒŒçš„è€ƒè™‘çŸ©é˜µå‘é‡ä¹˜æ³•çš„æ–¹æ³•ï¼› é¦–å…ˆï¼Œå…ˆæ¥è§£æâ€œçº¿æ€§å˜æ¢â€è¿™ä¸ªæœ¯è¯­ã€‚â€œå˜æ¢â€æœ¬è´¨ä¸Šæ˜¯â€œå‡½æ•°â€çš„ä¸€ç§èŠ±å“¨çš„è¯´æ³•ï¼Œå®ƒæ¥æ”¶è¾“å…¥å†…å®¹ï¼Œå¹¶è¾“å‡ºå¯¹åº”ç»“æœï¼› ç‰¹åˆ«åœ°ï¼Œåœ¨çº¿æ€§ä»£æ•°çš„æƒ…å†µä¸‹ã€‚æˆ‘ä¹ˆè€ƒè™‘çš„æ˜¯æ¥æ”¶ä¸€ä¸ªå‘é‡å¹¶ä¸”è¾“å‡ºä¸€ä¸ªå‘é‡çš„å˜æ¢ï¼› ç‰¹åˆ«çš„ï¼Œåœ¨çº¿æ€§ä»£æ•°çš„æƒ…å†µä¸‹ã€‚æˆ‘ä»¬è€ƒè™‘çš„æ˜¯æ¥æ”¶ä¸€ä¸ªå‘é‡å¹¶ä¸”è¾“å‡ºä¸€ä¸ªå‘é‡çš„å˜æ¢ï¼› æ—¢ç„¶â€œå˜æ¢â€å’Œâ€œå‡½æ•°â€æ„ä¹‰ç›¸åŒï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨å‰è€…è€Œä¸æ˜¯åè€…ï¼Ÿå› ä¸ºä½¿ç”¨â€œå˜æ¢â€æ˜¯åœ¨æš—ç¤ºä»¥ç‰¹å®šæ–¹å¼æ¥å¯è§†åŒ–è¿™ä¸€è¾“å…¥-è¾“å‡ºå…³ç³»ï¼› ä¸€ç§ç†è§£â€œå‘é‡çš„å‡½æ•°â€çš„æ–¹æ³•æ˜¯ä½¿ç”¨è¿åŠ¨ã€‚ å¦‚æœä¸€ä¸ªå˜æ¢æ¥æ”¶ä¸€ä¸ªå‘é‡å¹¶è¾“å‡ºä¸€ä¸ªå‘é‡ï¼›æˆ‘ä»¬æƒ³è±¡è¿™ä¸ªè¾“å…¥å‘é‡ç§»åŠ¨åˆ°è¾“å‡ºå‘é‡çš„ä½ç½®ï¼› æ¥ä¸‹æ¥ï¼Œè¦ç†è§£æ•´ä¸ªå˜æ¢ã€‚æˆ‘ä»¬å¯ä»¥æƒ³è±¡æ¯ä¸€ä¸ªè¾“å…¥å‘é‡éƒ½ç§»åŠ¨åˆ°å¯¹åº”è¾“å‡ºå‘é‡çš„ä½ç½®ï¼›åŒæ ·å¤šä¸ªç®­å¤´æ˜¾å¾—å¾ˆæ‹¥æŒ¤ï¼Œåªç”¨ç»ˆç‚¹è¡¨ç¤ºè¯¥å‘é‡ï¼Œç”¨è¿™ç§æ–¹æ³•è€ƒè™‘æ‰€æœ‰è¾“å…¥å‘é‡éƒ½ç§»åŠ¨åˆ°å¯¹åº”è¾“å‡ºå‘é‡çš„ä½ç½®æ—¶ã€‚æˆ‘ä»¬åªç”¨çœ‹ç©ºé—´ä¸­çš„æ‰€æœ‰ç‚¹ç§»åŠ¨åˆ°å…¶å®ƒç‚¹çš„ä½ç½®ï¼› å„ç§ä¸ªæ ·å¯¹ç©ºé—´çš„å˜æ¢æ‰€äº§ç”Ÿçš„æ•ˆæœæ˜¯ç¾å¦™çš„ï¼Œä»»æ„ä¸€ä¸ªå˜æ¢å¯ä»¥éå¸¸å¤æ‚ã€‚å¹¸è¿çš„æ˜¯ï¼Œçº¿æ€§ä»£æ•°é™åˆ¶åœ¨ä¸€ç§ç‰¹æ®Šç±»å‹çš„å˜æ¢ä¸Šï¼›è¿™ç§å˜æ¢æ›´å®¹æ˜“ç†è§£ï¼Œç§°ä¸ºçº¿æ€§å˜æ¢ ç›´è§‚åœ°è¯´ï¼Œå¦‚æœä¸€ä¸ªå˜æ¢å…·æœ‰ä»¥ä¸‹ä¸¤æ¡æ€§è´¨ï¼Œæˆ‘ä»¬å°±ç§°å®ƒæ˜¯çº¿æ€§çš„ï¼› ä¸€æ˜¯ç›´çº¿åœ¨å˜æ¢åä»ç„¶ä¿æŒä¸ºç›´çº¿ï¼Œä¸èƒ½æœ‰æ‰€å¼¯æ›²ï¼› äºŒæ˜¯åŸç‚¹å¿…é¡»ä¿æŒå›ºå®šï¼› ä¸¾ä¾‹ï¼š ä¸Šå›¾å˜æ¢ä¿æŒåŸç‚¹ä¸åŠ¨ï¼Œä¹ä¸€çœ‹å®ƒå¥½åƒä¿æŒç›´çº¿å¹³ç›´ï¼›ä½†å®é™…å¹¶éå¦‚æ­¤ï¼Œå› ä¸ºåªå±•ç¤ºäº†æ°´å¹³å’Œç«–ç›´çš„ç½‘æ ¼çº¿ï¼› å½“ä½ çœ‹çœ‹å®ƒå¯¹ä¸€æ¡å¯¹è§’çº¿çš„ä½œç”¨æ—¶ï¼Œå¾ˆæ˜æ˜¾å®ƒä¸æ˜¯ä¸€ä¸ªçº¿æ€§å˜æ¢ï¼› æ€»ä½“æ¥è¯´ï¼Œä½ åº”è¯¥æŠŠçº¿æ€§å˜æ¢çœ‹ä½œæ˜¯â€œä¿æŒç½‘æ ¼çº¿å¹³è¡Œä¸”ç­‰è·åˆ†å¸ƒâ€çš„å˜æ¢ï¼› 3.1.1 å¦‚ä½•ç”¨æ•°å€¼æè¿°çº¿æ€§å˜æ¢ å½“ä½ åœ¨é€šè¿‡ç¼–ç¨‹åˆ¶ä½œåŠ¨ç”»å’Œè§†é¢‘æ¥æ•™æˆè¿™ä¸€ä¸»é¢˜ï¼Œä½ åº”è¯¥ç»™è®¡ç®—æœºä»€ä¹ˆæ ·çš„è®¡ç®—å…¬å¼ï¼›ä½¿å¾—ä½ ç»™å®ƒä¸€ä¸ªå‘é‡çš„åæ ‡ï¼Œå®ƒèƒ½ç»™ä½ å˜æ¢åå‘é‡çš„åæ ‡å‘¢ï¼Ÿ å®é™…ç»“æœæ˜¯ï¼Œä½ åªéœ€è¦è®°å½•ä¸¤ä¸ªåŸºå‘é‡iå¸½å’Œjå¸½å˜æ¢åçš„ä½ç½®ï¼› æ¯”å¦‚è¯´ï¼Œè€ƒè™‘åæ ‡ä¸ºï¼ˆ-1ï¼Œ2ï¼‰çš„å‘é‡Vã€‚ è¿™ä¸ªå‘é‡å°±æ˜¯ -1 ä¸ iå¸½ä¹‹ç§¯ä¸2ä¸jå¸½ä¹‹ç§¯çš„å’Œï¼› å¦‚æœè¿ç”¨ä¸€äº›å˜æ¢ï¼Œå¹¶ä¸”è·Ÿéšè¿™ä¸‰ä¸ªå‘é‡çš„è¿åŠ¨ã€‚ç½‘æ ¼çº¿ä¿æŒå¹³è¡Œä¸”ç­‰è·åˆ†å¸ƒçš„æ€§è´¨æœ‰ä¸€ä¸ªé‡è¦çš„æ¨è®ºï¼› å˜æ¢åçš„å‘é‡Vçš„ä½ç½®ï¼Œæ˜¯-1ä¸å˜æ¢åçš„iå¸½ä¹‹ç§¯ï¼ŒåŠ ä¸Š2ä¸å˜æ¢åçš„jå¸½ä¹‹ç§¯ï¼› æ¢å¥è¯è¯´ï¼Œå‘é‡Væ˜¯iå¸½å’Œjå¸½çš„ä¸€ä¸ªç‰¹å®šçº¿æ€§ç»„åˆï¼Œé‚£ä¹ˆå˜æ¢åçš„å‘é‡Vä¹Ÿæ˜¯å˜æ¢åiå¸½å’Œjå¸½çš„åŒæ ·çš„çº¿æ€§ç»„åˆï¼›è¿™æ„å‘³ç€ï¼Œä½ å¯ä»¥åªæ ¹æ®å˜æ¢åçš„iå¸½å’Œjå¸½ï¼Œå°±æ¨æ–­å‡ºå˜æ¢åçš„Vï¼› å¦‚ä¸Šå›¾æ‰€ç¤ºçš„å˜æ¢ï¼Œå¯ä»¥çœ‹å‡ºiå¸½è½åœ¨åæ ‡ï¼ˆ1ï¼Œ-2ï¼‰ä¸Šã€‚jå¸½è½åœ¨xè½´ä¸Šï¼Œåæ ‡ä¸ºï¼ˆ3ï¼Œ0ï¼‰ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œ-1ä¹˜ä»¥iå¸½åŠ ä¸Š2ä¹˜ä»¥jå¸½æ‰€ä»£è¡¨çš„å‘é‡ï¼›ä¼šè½åœ¨-1 ä¹˜ä»¥å‘é‡ï¼ˆ1ï¼Œ-2ï¼‰åŠ ä¸Š2ä¹˜ä»¥å‘é‡ï¼ˆ3ï¼Œ0ï¼‰çš„ä½ç½®ä¸Šï¼›ç®€å•è¿ç®—ä¹‹åï¼Œä½ å°±èƒ½æ¨æ–­å‡ºå‘é‡Vä¸€å®šè½åœ¨å‘é‡ï¼ˆ5ï¼Œ2ï¼‰ä¸Šï¼› 1Transformed V = -1(Transformed i) + 2(Transformed j) å®é™…ä¸Šï¼Œå› ä¸ºå±•ç¤ºå‡ºæ•´ä¸ªå˜æ¢çš„æ ·å­ã€‚å®Œå…¨å¯ä»¥ç›´æ¥è¯»å‡ºå‘é‡Våœ¨å˜æ¢åè½åœ¨åæ ‡ï¼ˆ5ï¼Œ2ï¼‰ä¸Šï¼›ä½†æ˜¯æ›´ç‚«é…·çš„æ˜¯ï¼Œåªè¦è®°å½•äº†å˜æ¢åçš„iå¸½å’Œjå¸½ã€‚æˆ‘ä»¬å°±å¯ä»¥æ¨æ–­å‡ºä»»æ„å‘é‡åœ¨å˜æ¢ä¹‹åçš„ä½ç½®ï¼›å®Œå…¨å¿…é¡»è§‚å¯Ÿå˜æ¢æœ¬èº«æ˜¯ä»€ä¹ˆæ ·ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå‘é‡çš„åæ ‡æ˜¯ï¼ˆxï¼Œyï¼‰ï¼Œå˜æ¢åè¿™ä¸ªå‘é‡å°±æ˜¯xä¹˜ä»¥å˜æ¢åçš„iå¸½ï¼ˆ1ï¼Œ-2ï¼‰ï¼›åŠ ä¸Šyä¹˜ä»¥å˜æ¢åçš„jå¸½ï¼ˆ3ï¼Œ0ï¼‰ã€‚ç®€å•è¿ç®—ä¹‹åä½ å°±çŸ¥é“å®ƒè½åœ¨åæ ‡ï¼ˆ1x+3y, -2x+0yï¼‰ä¸Šã€‚è¿ç”¨è¿™ä¸ªå…¬å¼ï¼Œæˆ‘ç»™ä½ ä»»æ„ä¸€ä¸ªå‘é‡ï¼Œä½ éƒ½èƒ½å‘Šè¯‰å®ƒåœ¨å˜æ¢åçš„ä½ç½®ï¼› ä»¥ä¸Šè¿™äº›å†…å®¹æ˜¯åœ¨è¯´ï¼Œä¸€ä¸ªäºŒç»´çº¿æ€§å˜æ¢ä»…ç”±å››ä¸ªæ•°å­—å®Œå…¨ç¡®å®šã€‚å˜æ¢åiå¸½çš„ä¸¤ä¸ªåæ ‡ä¸å˜æ¢åjå¸½çš„ä¸¤ä¸ªåæ ‡ã€‚é€šå¸¸æˆ‘ä»¬å°†è¿™äº›åæ ‡åŒ…è£…åœ¨ä¸€ä¸ª2*2çš„æ ¼å­ä¸­ï¼Œç§°å®ƒä¸º2*2çŸ©é˜µï¼› ä½ å¯ä»¥æŠŠå®ƒçš„åˆ—ç†è§£ä¸ºä¸¤ä¸ªç‰¹æ®Šçš„å‘é‡ï¼Œå³å˜æ¢åçš„iå¸½å’Œjå¸½ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªæè¿°çº¿æ€§å˜æ¢çš„2*2çŸ©é˜µï¼Œä»¥åŠä¸€ä¸ªç»™å®šå‘é‡ï¼›ä½ æƒ³äº†è§£çº¿æ€§å˜æ¢å¯¹è¿™ä¸ªå‘é‡çš„ä½œç”¨ï¼›ä½ åªéœ€è¦å–å‡ºå‘é‡çš„åæ ‡ï¼›å°†å®ƒä»¬åˆ†åˆ«ä¸çŸ©é˜µçš„ç‰¹å®šåˆ—ç›¸ä¹˜ï¼Œç„¶åå°†ç»“æœç›¸åŠ å³å¯ï¼›è¿™ä¸â€œç¼©æ”¾åŸºå‘é‡å†ç›¸åŠ â€çš„æ€æƒ³ä¸€è‡´ 4. çŸ©é˜µä¹˜æ³•ä¸çº¿æ€§å˜æ¢å¤åˆ5. ä¸‰ç»´ç©ºé—´ä¸­çš„çº¿æ€§å˜æ¢6. è¡Œåˆ—å¼7. é€†çŸ©é˜µã€åˆ—ç©ºé—´ä¸é›¶ç©ºé—´8. éæ–¹é˜µ9. ç‚¹ç§¯ä¸å¯¹å¶æ€§10. å‰ç§¯çš„æ ‡å‡†ä»‹ç»11. ä»¥çº¿æ€§å˜æ¢çš„çœ¼å…‰çœ‹å‰ç§¯12. åŸºå˜æ¢13. ç‰¹å¾å‘é‡ä¸ç‰¹å¾å€¼14. æŠ½è±¡å‘é‡ç©ºé—´15. å…‹è±å§†æ³•åˆ™ï¼Œå‡ ä½•è§£é‡Š","categories":[{"name":"algebra","slug":"algebra","permalink":"http://yoursite.com/categories/algebra/"}],"tags":[{"name":"skill","slug":"skill","permalink":"http://yoursite.com/tags/skill/"}]},{"title":"cli","slug":"cli","date":"2021-02-07T07:50:09.000Z","updated":"2021-02-20T07:31:56.962Z","comments":true,"path":"2021/02/07/cli/","link":"","permalink":"http://yoursite.com/2021/02/07/cli/","excerpt":"","text":"1. Quick start1.1 åˆ›å»ºæ–‡ä»¶å¤¹12$&gt; mkdir sunmao &amp;&amp; cd sunmao &amp;&amp; npm init -y$&gt; touch sm.js 1.2 è®¾ç½®package.json12345678910111213141516171819202122&#123; \"name\": \"sunmao\", \"bin\": &#123; \"sunmao\": \"sm.js\" // æ·»åŠ  bin é…ç½®ï¼Œsumao å‘½ä»¤å³ æŒ‡å‘ sm.js &#125;, \"version\": \"0.0.1\", \"description\": \"A Iterating scaffolding for react, redux-saga and Typescript\", \"main\": \"main.js\", \"scripts\": &#123; \"test\": \"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\" &#125;, \"repository\": &#123; \"type\": \"git\", \"url\": \"git+https://github.com/TenonMortise/sunmao\" &#125;, \"author\": \"ruanhan\", \"license\": \"MIT\", \"bugs\": &#123; \"url\": \"https://github.com/TenonMortise/sunmao/issues\" &#125;, \"homepage\": \"https://github.com/TenonMortise/sunmao#readme\"&#125; 1.3 npm link1234// sm.js#!/usr/bin/env nodeconsole.log('hello, sunmao') 123456789$&gt; chmod 755 sm.js$&gt; sudo npm linkup to date in 10.078s/usr/local/bin/sunmao -&gt; /usr/local/lib/node_modules/sunmao/sm.js/usr/local/lib/node_modules/sunmao -&gt; /Users/ruanhan/sunmao$&gt; sunmao$&gt; hello, sunmao å‚è€ƒæ–‡æ¡£ï¼š npm link 1.4 npm unlinkå¦‚æœä½ çš„é¡¹ç›®ä¸å†éœ€è¦è¯¥æ¨¡å—ï¼Œå¯ä»¥åœ¨é¡¹ç›®ç›®å½•å†…ä½¿ç”¨npm unlinkå‘½ä»¤ï¼Œåˆ é™¤ç¬¦å·é“¾æ¥ã€‚ 2. ç¬¬ä¸‰æ–¹å·¥å…·ä»‹ç»2.1 commander.jså¯ä»¥è‡ªåŠ¨çš„è§£æå‘½ä»¤å’Œå‚æ•°ï¼Œç”¨äºå¤„ç†ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤ã€‚ 2.2 download-git-repo,ä¸‹è½½å¹¶æå– git ä»“åº“ï¼Œç”¨äºä¸‹è½½é¡¹ç›®æ¨¡æ¿ã€‚ 2.3 inrequire.jsé€šç”¨çš„å‘½ä»¤è¡Œç”¨æˆ·ç•Œé¢é›†åˆï¼Œç”¨äºå’Œç”¨æˆ·è¿›è¡Œäº¤äº’ã€‚ 2.4 oraä¸‹è½½è¿‡ç¨‹ä¹…çš„è¯ï¼Œå¯ä»¥ç”¨äºæ˜¾ç¤ºä¸‹è½½ä¸­çš„åŠ¨ç”»æ•ˆæœã€‚ 2.5 chalkå¯ä»¥ç»™ç»ˆç«¯çš„å­—ä½“åŠ ä¸Šé¢œè‰²ã€‚ 2.6 log-symbolså¯ä»¥åœ¨ç»ˆç«¯ä¸Šæ˜¾ç¤ºå‡º âˆš æˆ– Ã— ç­‰çš„å›¾æ ‡ã€‚ 2.7 install1npm install commander download-git-repo inquirer ora chalk log-symbols","categories":[{"name":"tools","slug":"tools","permalink":"http://yoursite.com/categories/tools/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"},{"name":"guide","slug":"guide","permalink":"http://yoursite.com/tags/guide/"}]},{"title":"dp","slug":"dp","date":"2021-02-02T02:16:56.000Z","updated":"2021-02-09T10:27:09.525Z","comments":true,"path":"2021/02/02/dp/","link":"","permalink":"http://yoursite.com/2021/02/02/dp/","excerpt":"","text":"1 åŠ¨æ€è§„åˆ’é¢˜ç›®ç‰¹ç‚¹ è®¡æ•°ç±» æœ‰å¤šå°‘ç§æ–¹å¼èµ°åˆ°å³ä¸‹è§’ æœ‰å¤šå°‘ç§æ–¹æ³•é€‰å‡ºKä¸ªæ•°ä½¿å¾—å’Œæ˜¯sum æ±‚æœ€å¤§æœ€å°å€¼ï¼ˆDPæœ€å¤§çš„ä¸€ç±»ï¼‰ ä»å·¦ä¸Šè§’èµ°åˆ°å³ä¸‹è§’è·¯å¾„çš„æœ€å¤§æ•°å­—å’Œ æœ€é•¿ä¸Šå‡å­åºåˆ—é•¿åº¦ æ±‚å­˜åœ¨æ€§ å–çŸ³å­æ¸¸æˆï¼Œå…ˆæ‰‹æ˜¯å¦å¿…èƒœ èƒ½ä¸èƒ½é€‰å‡ºKä¸ªæ•°ä½¿å¾—å’Œæ˜¯sum 2 dpè§£é¢˜æ­¥éª¤ä»¥ Coin Change ä¸ºä¾‹ï¼› ä¸‰ç§ç¡¬å¸ï¼Œåˆ†åˆ«é¢å€¼2å…ƒï¼Œ5å…ƒå’Œ7å…ƒï¼Œ æ²¡ç§ç¡¬ä¸éƒ½æœ‰è¶³å¤Ÿå¤šï¼Œå»ä¹¦åº—ä¹°æœ¬ä¹¦éœ€è¦27å…ƒã€‚å¦‚ä½•ç”¨æœ€å°‘çš„ç¡¬å¸ç»„åˆæ­£å¥½ä»˜æ¸…ï¼Œä¸éœ€è¦å¯¹æ–¹æ‰¾é’± åˆ†æï¼š è¿™é¢˜å‡ºç°æ±‚æœ€å°‘ï¼Œæ˜¾ç„¶å¯ä»¥ä½¿ç”¨DPæ–¹æ³•æ¥è§£å†³ 2.1 åŠ¨æ€è§„åˆ’ç»„æˆéƒ¨åˆ†ä¸€ï¼š ç¡®å®šçŠ¶æ€2.1.1 çŠ¶æ€åœ¨åŠ¨æ€è§„åˆ’ä¸­çš„ä½œç”¨å±äºå®šæµ·ç¥é’ˆ2.1.2 ç®€å•æ¥è¯´ï¼Œè§£åŠ¨æ€è§„åˆ’çš„æ—¶å€™éœ€è¦å¼€ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸ªå…ƒç´ f[i] æˆ–è€… f[i][j]ä»£è¡¨ä»€ä¹ˆï¼› ç±»ä¼¼äºè§£æ•°å­¦é¢˜ä¸­ï¼ŒXï¼Œ Yï¼ŒZä»£è¡¨ä»€ä¹ˆï¼›2.1.3 ç¡®å®šçŠ¶æ€éœ€è¦ä¸¤ä¸ªæ„è¯†ï¼š2.1.3.1 æœ€åä¸€æ­¥ è™½ç„¶æˆ‘ä»¬ä¸çŸ¥é“æœ€ä¼˜ç­–ç•¥æ˜¯ä»€ä¹ˆï¼Œä½†æ˜¯æœ€ä¼˜ç­–ç•¥è‚¯å®šæ˜¯Kæ¢…ç¡¬å¸a1,a2,â€¦,ak é¢å€¼åŠ èµ·æ¥æ˜¯27ï¼› æœ€åä¸€æ­¥æŒ‡çš„å°±æ˜¯æœ€ä¼˜ç­–ç•¥ä¸­çš„æœ€åä¸€ä¸ªå†³ç­–ï¼Œå¯¹åº”åˆ°è¿™ä¸€é¢˜å°±æ˜¯ä¸€å®šä¼šæœ‰ä¸€æšæœ€åçš„ç¡¬å¸å†³ç­–ï¼š akï¼Œ é‚£ä¹ˆé™¤äº†è¿™æšç¡¬å¸ï¼Œå‰é¢ç¡¬å¸çš„é¢å€¼åŠ èµ·æ¥æ˜¯27-akï¼› å…³é”®ç‚¹1ï¼š æˆ‘ä»¬ä¸å…³å¿ƒå‰é¢çš„ k-1 æšç¡¬å¸æ˜¯æ€ä¹ˆæ‹¼å‡º27-akçš„ï¼ˆå¯èƒ½æœ‰1ç§æ‹¼æ³•ï¼Œå¯èƒ½æœ‰100ç§æ‹¼æ³•ï¼‰ï¼Œè€Œä¸”æˆ‘ä»¬ç°åœ¨ç”šè‡³è¿˜ä¸çŸ¥é“ak å’Œkï¼Œ ä½†æ˜¯æˆ‘ä»¬ç¡®å®šå‰é¢çš„ç¡¬å¸æ‹¼å‡ºäº† 27-akï¼› å…³é”®ç‚¹2: å› ä¸ºæ˜¯æœ€ä¼˜ç­–ç•¥ï¼Œæ‰€ä»¥æ‹¼å‡º27-akçš„ç¡¬å¸æ•°ä¸€å®šè¦æœ€å°‘ï¼Œå¦åˆ™è¿™å°±ä¸æ˜¯æœ€ä¼˜ç­–ç•¥äº†ï¼› è§£æå…³é”®ç‚¹2ï¼š æ¯”å¦‚æœ€ä¼˜ç­–ç•¥è¦ç”¨5æšç¡¬å¸ï¼Œå‡è®¾æœ€åä¸€æšæ˜¯5å…ƒé¢é¢ï¼Œé‚£ä¹ˆ4æšç¡¬å¸ç»„æˆäº†22å…ƒã€‚ä½ ä¸å¯èƒ½ç”¨3æšï¼Œ2æšç”šè‡³1æšæ‹¼æˆ22å…ƒï¼› æµ…æ˜¾çš„é“ç†ï¼Œå¦‚æœç”¨3æšå¯ä»¥æ‹¼å‡ºæ¥22å…ƒçš„è¯ï¼Œé‚£ä¹ˆæœ€ä¼˜ç­–ç•¥è¦ç”¨5æšçš„å‡è®¾å°±ä¸æˆç«‹ï¼› 2.1.3.2 å­é—®é¢˜æˆ‘ç°åœ¨å½“ç„¶æƒ³æ±‚Kï¼Œä½†æ˜¯æƒ³æ±‚Kçš„è¯ï¼Œéœ€è¦çŸ¥é“å‰é¢k-1ç­‰äºå‡ ã€‚ï¼ˆå³æœ€å°‘éœ€è¦å¤šå°‘æšç¡¬å¸å¯ä»¥æ‹¼å‡º27-akï¼‰ æ‰€ä»¥ï¼Œæˆ‘ä»¬çš„è¦æ±‚å°±å˜æˆäº†ï¼šæœ€å°‘è¦ç”¨å¤šå°‘æšç¡¬å¸å¯ä»¥æ‹¼å‡º27-akæšç¡¬å¸ï¼› åŸé—®é¢˜æ˜¯æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸æ‹¼å‡º27ï¼› æˆ‘ä»¬å°†åŸé—®é¢˜è½¬åŒ–æˆäº†ä¸€ä¸ªå­é—®é¢˜ï¼Œè€Œä¸”è§„æ¨¡æ›´å°ï¼š 27-ak é‚£è¯¥å¦‚ä½•å®šä¹‰çŠ¶æ€å‘¢ï¼Œä¸€æ—¦å­é—®é¢˜å‡ºæ¥äº†ï¼ŒçŠ¶æ€å°±ç›´æ¥æŠŠç›¸åŒçš„æ±‰å­—copyä¸‹æ¥ã€‚å³æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸æ‹¼å‡ºX ä¸ºäº†ç®€åŒ–å®šä¹‰ï¼Œæˆ‘ä»¬è®¾çŠ¶æ€ f(x)=æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸æ‹¼å‡ºxç»“åˆè¿™ä¸€é¢˜å°±æ˜¯f(x)=æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸æ‹¼å‡º27.æ•´ä¸ªé—®é¢˜å°±å˜æˆï¼Œä»¥å‰æ±‚f(27),ç°åœ¨æ±‚f(27-ak); ç­‰ç­‰ï¼Œæˆ‘ä»¬è¿˜ä¸çŸ¥é“æœ€åé‚£æšç¡¬å¸akæ˜¯å¤šå°‘ï¼Œ å½“ç„¶æœ€åé‚£æšç¡¬å¸akåªå¯èƒ½æ˜¯2ï¼Œ5æˆ–è€…7 å¦‚æœakæ˜¯2çš„è¯ï¼Œf(27)åº”è¯¥æ˜¯f(27-2)+1ï¼ˆåŠ ä¸Šæœ€åè¿™ä¸€æšç¡¬å¸2ï¼‰ å¦‚æœakæ˜¯5çš„è¯ï¼Œf(27)åº”è¯¥æ˜¯f(27-5)+1ï¼ˆåŠ ä¸Šæœ€åè¿™ä¸€æšç¡¬å¸5ï¼‰ å¦‚æœakæ˜¯7çš„è¯ï¼Œf(27)åº”è¯¥æ˜¯f(27-7)+1ï¼ˆåŠ ä¸Šæœ€åè¿™ä¸€æšç¡¬å¸7ï¼‰ é™¤æ­¤ä¹‹å¤–ï¼Œæ²¡æœ‰å…¶ä»–çš„å¯èƒ½äº†ï¼› å› ä¸ºæˆ‘ä»¬éœ€æ±‚æœ€å°‘çš„ç¡¬å¸æ•°ï¼Œæ‰€ä»¥ï¼š 1f(27) = min&#123;f(27-2)+1, f(27-5)+1, f(27-7)+1&#125; 2.1.4 é€’å½’è§£æ³•çš„é—®é¢˜é€’å½’åšäº†å¾ˆå¤šé‡å¤è®¡ç®—ï¼Œæ•ˆç‡ä½ä¸‹ å¦‚ä½•é¿å…ï¼Ÿ DPæ˜¯å°†è®¡ç®—ç»“æœä¿å­˜ä¸‹æ¥ï¼Œå¹¶æ”¹å˜è®¡ç®—é¡ºåºï¼› 2.2 åŠ¨æ€è§„åˆ’ç»„æˆéƒ¨åˆ†äºŒï¼š è½¬ç§»æ–¹ç¨‹è®¾çŠ¶æ€f[x] = æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸æ‹¼å‡ºXï¼› å¯¹äºä»»æ„X 2.2.1 f[x] ä¸ f(x)çš„åŒºåˆ«f[x] ï¼Œ[] ä»£è¡¨æ•°ç»„ä¸‹æ ‡ f(x) ï¼Œï¼ˆï¼‰ä»£è¡¨å‡½æ•°è°ƒç”¨ 2.3 åŠ¨æ€è§„åˆ’ç»„æˆéƒ¨åˆ†ä¸‰ï¼š åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œæ¡ä»¶f[x]=min{f[x-2]+1, f[x-5]+1, f[x-7]+1} ä¸¤ä¸ªé—®é¢˜ x-2, x-5æˆ–è€…x-7 å°äº0æ€ä¹ˆåŠï¼Ÿä»€ä¹ˆæ—¶å€™åœä¸‹æ¥ï¼Ÿ å¦‚æœä¸èƒ½æ‹¼å‡ºYï¼Œå°±å®šä¹‰f[Y] = æ­£æ— ç©·ï¼Œä¾‹å¦‚ f[-1] = f[-2] = â€¦ = æ­£æ— ç©· æ‰€ä»¥f[1] = min{f[-1]+1, f[-4]+1, f[-6]+1} = æ­£æ— ç©·ï¼Œè¡¨ç¤ºæ‹¼ä¸å‡ºæ¥1ï¼› åˆå§‹æ¡ä»¶ï¼š f[0] = 0; å› ä¸ºåˆå§‹æ¡ä»¶ç”¨è½¬ç§»æ–¹ç¨‹æ˜¯ç®—ä¸å‡ºæ¥çš„ã€‚ä½†æˆ‘åˆéœ€è¦å®ƒçš„å®šä¹‰ã€‚ æ ¹æ® f[0] = min{f[-2]+1, f[-5]+1, f[-7]+1} ç®—ï¼Œf[0]æ˜¯æ­£æ— ç©·çš„ã€‚è€Œæˆ‘ä»¬æ˜æ˜çŸ¥é“ï¼Œf[0] ä¸ç­‰äºæ­£æ— ç©·ï¼Œè€Œæ˜¯ç­‰äº0ï¼Œæ‰€ä»¥éœ€è¦æ‰‹åŠ¨åˆ¶å®šã€‚æœ‰çš„æ—¶å€™åˆå§‹æ¡ä»¶ä¸éœ€è¦ç»™å¾ˆå¤šä¸ªï¼Œæ¯”å¦‚f[0], f[1], f[2] ç­‰ç­‰æ˜¯ä¸éœ€è¦é¢å¤–å¤šä¸ªå»å®šä¹‰ï¼Œå®šä¸å®šä¹‰è¯¥å€¼å–å†³äºèƒ½å¦æ ¹æ®å…¶ä»–é¢„è®¾çš„å€¼;æ¯”å¦‚f[1] æ˜¯æ­£æ— ç©·ï¼Œf[2] = {f[0]+1, f[-3]+1, f[-5]+1} æ˜¯ 1ï¼Œ ç„¶ååé¢çš„å€¼éƒ½èƒ½åŸºäºæ­¤ç®—å‡ºæ¥äº†ï¼› åˆå§‹æ¡ä»¶çš„å®è´¨å°±æ˜¯æŠŠé‚£äº›æœ€å°çš„å€¼å®šä¹‰ä¸‹æ¥ï¼Œè¾¹ç•Œæƒ…å†µçš„å®è´¨å°±æ˜¯ä¸è¦æ•°ç»„è¶Šç•Œï¼›ä¸ç®¡æ•°ç»„å¾€ä¸‹è¶Šç•Œåˆ°è´Ÿæ•°ï¼Œè¿˜æ˜¯æ•°ç»„å¾€ä¸Šè¶Šç•Œè¶…è¿‡äº†éƒ½ä¸è¡Œï¼› 2.4 åŠ¨æ€è§„åˆ’ç»„æˆéƒ¨åˆ†å››ï¼šè®¡ç®—é¡ºåºæ‹¼å‡ºXæ‰€éœ€è¦çš„æœ€å°‘ç¡¬å¸æ•°ï¼š f[X] = min{f[X-2]+1, f[X-5]+1, f[X-7]+1} åˆå§‹æ¡ä»¶ï¼š f[0] = 0 ç„¶åè®¡ç®— f[1], f[2],â€¦ , f[27] ï¼ˆå¯¹äºæ­¤é¢˜æ¥è¯´ï¼Œæ˜¯ä»å°åˆ°å¤§æ¥è®¡ç®—ï¼ŒDPå¤§å¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯ä»å°åˆ°å¤§ï¼ŒäºŒç»´çš„è¯å°±æ˜¯ä»ä¸Šåˆ°ä¸‹ï¼Œä»å·¦åˆ°å³ï¼‰ è®¡ç®—é¡ºåºåªæœ‰ä¸€ä¸ªåŸåˆ™ï¼Œé‚£å°±æ˜¯å½“æˆ‘ä»¬è®¡ç®—åˆ°f[X]æ—¶ï¼Œf[X-2], f[X-5], f[X-7] éƒ½å·²ç»å‡ºç»“æœäº†ï¼› 2.5 åŠ¨æ€è§„åˆ’è®¡ç®—æ­¥éª¤f[X] = æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸æ‹¼å‡ºX f[X] = æ­£æ— ç©· è¡¨ç¤ºæ— æ³•ç”¨ç¡¬å¸æ‹¼å‡ºX æ¯ä¸€æ­¥å°è¯•ä¸‰ç§ç¡¬å¸ï¼Œä¸€å…±27æ­¥ï¼› ä¸é€’å½’ç®—æ³•ç›¸æ¯”ï¼Œæ²¡æœ‰ä»»ä½•é‡å¤è®¡ç®—ï¼› ç®—æ³•æ—¶é—´å¤æ‚åº¦ï¼ˆå³éœ€è¦è¿›è¡Œçš„æ­¥æ•°ï¼‰ï¼š 27*3 (æ€»é¢é¢*å¤šå°‘ç§ç¡¬å¸) 1234567891011121314151617181920212223242526272829303132333435363738/** * * @param &#123;*&#125; A [2, 5, 7] * @param &#123;*&#125; M 27 */function coinChange(A, M) &#123; // 0 ... n: [n+1] // 0 ... n-1: [n] const f = new Array(M + 1); // number of kind of coins let n = A.length; // initialization f[0] = 0; let i, j; //æœ€å°‘ç”¨å¤šå°‘æšç¡¬å¸ ä¾æ¬¡æ‹¼å‡º f[1], f[2], ... f[27]ï¼Œä»å°åˆ°å¤§çš„é¡ºåº for (i = 1; i &lt;= M; ++i) &#123; // åˆå§‹è®¾ç½®ä¸ºæ— ç©·å¤§ f[i] = Number.MAX_VALUE; // last coin A[j] è¦æ‹¼å‡ºiå—é’±ï¼Œæœ€åä¸€æšç¡¬å¸åº”è¯¥æ˜¯è°ï¼ˆè¿™æšç¡¬å¸ä¸åº”è¯¥è·³å‡ºAçš„èŒƒå›´ï¼‰ // f[i] = min&#123;f[i-A[0]] + 1,..., f[i-A[n-1]]+1&#125;; for (j = 0; j &lt; n; ++j) &#123; if (i &gt;= A[j] &amp;&amp; f[i - A[j]] != Number.MAX_VALUE) &#123; // i - A[j] å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥éœ€è¦æ·»åŠ åˆ¤æ–­ // æ— ç©·å¤§ä¸èƒ½+1ï¼Œä¼šè¶Šç•Œã€‚æ‰€ä»¥éœ€è¦æ·»åŠ æ ¡éªŒï¼› f[i] = Math.min(f[i - A[j]] + 1, f[i]); &#125; &#125; &#125; if (f[M] == Number.MAX_VALUE) &#123; // å¦‚æœæ‹¼ä¸å‡ºæ¥ï¼Œè¦æ±‚è¿”å›-1ï¼› f[M] = -1; &#125; return f[M];&#125;console.log(coinChange([1, 5, 6], 27)); 2.6 å°ç»“æ±‚æœ€å€¼å‹åŠ¨æ€è§„åˆ’ åŠ¨æ€è§„åˆ’ç»„æˆéƒ¨åˆ†ï¼š ç¡®å®šçŠ¶æ€ æœ€åä¸€æ­¥ (æœ€ä¼˜ç­–ç•¥ä¸­ä½¿ç”¨çš„æœ€åä¸€æšç¡¬å¸ak) åŒ–æˆå­é—®é¢˜ ï¼ˆæœ€å°‘çš„ç¡¬å¸æ‹¼å‡ºæ›´å°çš„é¢å€¼27-akï¼‰ è½¬ç§»æ–¹ç¨‹ f[X] = min{f[X-2]+1, f[X-5]+1, f[X-7]+1} åˆå§‹æ¡ä»¶å’Œè¾¹ç•Œæ¡ä»¶ f[0] = 0, å¦‚æœä¸èƒ½æ‹¼å‡ºYï¼Œf[Y]= æ­£æ— ç©· è®¡ç®—é¡ºåº f[0], f[1], f[2], â€¦ æ¶ˆé™¤å†—ä½™ï¼ŒåŠ é€Ÿè®¡ç®—ï¼›","categories":[{"name":"algo","slug":"algo","permalink":"http://yoursite.com/categories/algo/"}],"tags":[{"name":"dp","slug":"dp","permalink":"http://yoursite.com/tags/dp/"}]},{"title":"webgl01","slug":"webgl01","date":"2021-01-28T02:30:44.000Z","updated":"2021-02-17T08:29:26.395Z","comments":true,"path":"2021/01/28/webgl01/","link":"","permalink":"http://yoursite.com/2021/01/28/webgl01/","excerpt":"","text":"1. å›¾å½¢ç³»ç»Ÿç»˜å›¾åŸç†webglç»˜å›¾ï¼Œè¦æ·±å…¥ç»†èŠ‚é‡Œï¼Œæ ¹å†…å­˜ã€cpuäº¤äº’ï¼ŒçœŸæ­£æ§åˆ¶å›¾å½¢è¾“å‡ºçš„æ¯ä¸€ä¸ªç»†èŠ‚ï¼› webglåŸºç¡€æ¦‚å¿µï¼ŒGPUï¼Œ æ¸²æŸ“ç®¡çº¿ï¼Œç€è‰²å™¨ï¼› 1.1 è®¡ç®—æœºå›¾å½¢ç³»ç»Ÿä¸€ä¸ªé€šç”¨è®¡ç®—æœºå›¾å½¢ç³»ç»Ÿä¸»è¦åŒ…æ‹¬ 6 ä¸ªéƒ¨åˆ†ï¼Œåˆ†åˆ«æ˜¯è¾“å…¥è®¾å¤‡ã€ä¸­å¤®å¤„ç†å•å…ƒã€å›¾å½¢å¤„ç†å•å…ƒã€å­˜å‚¨å™¨ã€å¸§ç¼“å­˜å’Œè¾“å‡ºè®¾å¤‡ã€‚ å…‰æ …ï¼ˆRasterï¼‰ï¼šå‡ ä¹æ‰€æœ‰çš„ç°ä»£å›¾å½¢ç³»ç»Ÿéƒ½æ˜¯åŸºäºå…‰æ …æ¥ç»˜åˆ¶å›¾å½¢çš„ï¼Œå…‰æ …å°±æ˜¯æŒ‡æ„æˆå›¾åƒçš„åƒç´ é˜µåˆ—ã€‚ åƒç´ ï¼ˆPixelï¼‰ï¼šä¸€ä¸ªåƒç´ å¯¹åº”å›¾åƒä¸Šçš„ä¸€ä¸ªç‚¹ï¼Œå®ƒé€šå¸¸ä¿å­˜å›¾åƒä¸Šçš„æŸä¸ªå…·ä½“ä½ç½®çš„é¢œè‰²ç­‰ä¿¡æ¯ã€‚ å¸§ç¼“å­˜ï¼ˆFrame Bufferï¼‰ï¼šåœ¨ç»˜å›¾è¿‡ç¨‹ä¸­ï¼Œåƒç´ ä¿¡æ¯è¢«å­˜æ”¾äºå¸§ç¼“å­˜ä¸­ï¼Œå¸§ç¼“å­˜æ˜¯ä¸€å—å†…å­˜åœ°å€ã€‚ CPUï¼ˆCentral Processing Unitï¼‰ï¼šä¸­å¤®å¤„ç†å•å…ƒï¼Œè´Ÿè´£é€»è¾‘è®¡ç®—ã€‚ GPUï¼ˆGraphics Processing Unitï¼‰ï¼šå›¾å½¢å¤„ç†å•å…ƒï¼Œè´Ÿè´£å›¾å½¢è®¡ç®—ã€‚ 1.1.1 ç»˜å›¾é€šç”¨è¿‡ç¨‹é¦–å…ˆï¼Œç»è¿‡CPUå¤„ç†ï¼Œæˆä¸ºå…·æœ‰ç‰¹å®šç»“æ„çš„å‡ ä½•ä¿¡æ¯ï¼Œç„¶åï¼Œè¿™äº›ä¿¡æ¯ä¼šè¢«é€åˆ°GPUä¸­è¿›è¡Œå¤„ç†ã€‚åœ¨GPUä¸­è¦ç»è¿‡ä¸¤ä¸ªæ­¥éª¤ç”Ÿæˆå…‰æ …ä¿¡æ¯ã€‚è¿™äº›å…‰æ …ä¿¡æ¯ä¼šè¾“å‡ºåˆ°å¸§ç¼“å­˜ä¸­ï¼Œæœ€åæ¸²æŸ“åˆ°å±å¹•ä¸Šï¼› è¿™ä¸ªè¿‡ç¨‹ä¸»è¦åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼Œ ä¸€æ˜¯å¯¹ ç»™å®šçš„æ•°æ®ç»“åˆç»˜å›¾çš„åœºæ™¯è¿›è¡Œè®¡ç®—ï¼ˆä¾‹å¦‚ç›¸æœºï¼Œå…‰æºï¼Œé®æŒ¡ç‰©ä½“ç­‰ç­‰ï¼‰è¿›è¡Œè®¡ç®—ï¼Œæœ€ç»ˆå°†å›¾å½¢å˜ä¸ºå±å¹•ç©ºé—´çš„2Dåæ ‡ã€‚ äºŒæ˜¯ä¸ºå±å¹•ç©ºé—´çš„æ¯ä¸ªåƒç´ ç‚¹è¿›è¡Œç€è‰²ï¼ŒæŠŠæœ€ç»ˆå®Œæˆçš„å›¾å½¢è¾“å‡ºåˆ°æ˜¾ç¤ºè®¾å¤‡ä¸Šï¼Œè¿™æ•´ä¸ªè¿‡ç¨‹æ˜¯ä¸€æ­¥ä¸€æ­¥è¿›è¡Œçš„ï¼Œå‰ä¸€æ­¥çš„è¾“å‡ºå°±æ˜¯æœ€åä¸€æ­¥çš„è¾“å…¥ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšæ¸²æŸ“ç®¡çº¿ï¼ˆRenderPipelinesï¼‰ 1.1.2 GPUCPU å’Œ GPU éƒ½å±äºå¤„ç†å•å…ƒï¼Œä½†æ˜¯ç»“æ„ä¸åŒã€‚ CPUåƒä¸ªå¤§çš„å·¥ä¸šç®¡é“ï¼Œç­‰å¾…å¤„ç†çš„ä»»åŠ¡å°±åƒæ˜¯ä¾æ¬¡é€šè¿‡è¿™ä¸ªç®¡é“çš„è´§ç‰©ï¼Œä¸€æ¡CPUæµæ°´çº¿ä¸²è¡Œå¤„ç†è¿™äº›ä»»åŠ¡çš„é€Ÿåº¦ï¼Œå–å†³äºCPUï¼ˆç®¡é“ï¼‰çš„å¤„ç†èƒ½åŠ›ï¼›ä¸€ä¸ªè®¡ç®—æœºç³»ç»Ÿä¼šæœ‰å¾ˆå¤šæ¡CPUæµæ°´çº¿ï¼Œä»»ä½•ä¸€ä¸ªä»»åŠ¡ éƒ½å¯ä»¥éšæœºé€šè¿‡ä»»æ„ä¸€ä¸ªæµæ°´çº¿ï¼Œè¿™æ ·è®¡ç®—æœºå°±èƒ½å¤Ÿå¹¶è¡Œå¤„ç†å¤šä¸ªä»»åŠ¡äº†ï¼Œè¿™æ ·ä¸€æ¡æµæ°´çº¿å¯¹åº”çš„å°±æ˜¯ threadï¼› CPUå¤„ç†å¤§å‹ä»»åŠ¡æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æ˜¯å¤„ç†å›¾åƒåº”ç”¨å°±ä¸åˆé€‚äº†ã€‚å¤„ç†å›¾åƒï¼Œå®é™…ä¸Šæ˜¯å¤„ç†è®¡ç®—å›¾ç‰‡ä¸Šæ¯ä¸€ä¸ªåƒç´ ç‚¹çš„é¢œè‰²å’Œå…¶ä»–ä¿¡æ¯ã€‚æ¯å¤„ç†ä¸€ä¸ªåƒç´ ç‚¹å°±ç›¸å½“äºå®Œæˆä¸€ä¸ªç®€å•çš„ä»»åŠ¡ï¼Œè€Œæ¯ä¸€ä¸ªå›¾ç‰‡åº”ç”¨åˆæ˜¯ç”±æ— æ•°ä¸ªä¸ªåƒç´ ç‚¹ç»„æˆçš„ï¼Œæ‰€ä»¥ï¼Œéœ€è¦åœ¨åŒä¸€æ—¶é—´å¤„ç†æ— æ•°ä¸ªå°ä»»åŠ¡ã€‚è¦å¤„ç†è¿™ä¹ˆå¤šçš„å°ä»»åŠ¡ï¼Œä½¿ç”¨æ›´å°ï¼Œæ›´å¤šçš„å¤„ç†å•å…ƒï¼Œæ˜¯ä¸€ç§æ›´å¥½çš„å¤„ç†æ–¹å¼ï¼ŒGPUå°±æ˜¯è¿™æ ·çš„å¤„ç†å•å…ƒï¼› GPUç”±å¤§é‡çš„å°å‹å¤„ç†å•å…ƒæ„æˆï¼Œå®ƒæ²¡æœ‰CPUé‚£ä¹ˆå¼ºå¤§ï¼Œä½†èƒœåœ¨æ•°é‡ä¼—å¤šï¼Œå¯ä»¥ä¿è¯æ¯ä¸ªå•å…ƒå¤„ç†ä¸€ä¸ªç®€å•çš„ä»»åŠ¡ã€‚å³ä½¿æˆ‘ä»¬è¦å¤„ç†ä¸€å¼ 800*600å¤§å°çš„å›¾ç‰‡ï¼ŒGPUä¹Ÿå¯ä»¥ä¿è¯è¿™48ä¸‡ä¸ªåƒç´ ç‚¹åˆ†åˆ«å¯¹åº”ä¸€ä¸ªå°å•å…ƒï¼Œè¿™æ ·å°±å¯ä»¥åŒæ—¶å¯¹æ¯ä¸ªåƒç´ ç‚¹è¿›è¡Œè®¡ç®—äº†ï¼› 2 .helloWorldæµè§ˆå™¨æä¾›çš„webgl APIæ˜¯ OpenGL ESçš„jsç»‘å®šç‰ˆæœ¬ï¼Œå®ƒèµ‹äºˆäº†å¼€å‘è€…æ“ä½œGPUçš„èƒ½åŠ›ã€‚è¿™ä¸€ç‰¹ç‚¹ä¹Ÿè®©webGLçš„ç»˜å›¾æ–¹å¼ç•¥å¾®å¤æ‚ï¼Œæ— æ³•ç›´æ¥è°ƒç”¨APIæ§åˆ¶ç”»ç¬”ã€‚å¤§è‡´éœ€è¦ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ 2.1 webGLç»˜å›¾æ­¥éª¤ åˆ›å»ºwebglä¸Šä¸‹æ–‡ åˆ›å»ºwebglç¨‹åº å°†æ•°æ®å­˜å…¥ç¼“å†²åŒº å°†ç¼“å†²åŒºæ•°æ®è¯»å–åˆ°GPU GPUæ‰§è¡Œwebglç¨‹åºï¼Œè¾“å‡ºç»“æœ 2.1.1 åˆ›å»ºwebglä¸Šä¸‹æ–‡1const gl = canvas.getContext('webgl'); 2.2.2 åˆ›å»ºwebglç¨‹åºwebglç¨‹åºæ˜¯ä¸€ä¸ªwebGL Programå¯¹è±¡ï¼Œå®ƒæ˜¯ç»™GPU æœ€ç»ˆè¿è¡Œç€è‰²å™¨çš„ç¨‹åºï¼› é¦–å…ˆç¼–å†™ä¸¤ä¸ªç€è‰²å™¨ï¼›ä¸¤ä¸ªç€è‰²å™¨åˆ†åˆ«å¯¹åº”çš„æ˜¯ é¡¶ç‚¹ å’Œå›¾å…ƒï¼Œ webglæ˜¯ä»¥é¡¶ç‚¹å’Œå›¾å…ƒæ¥æè¿°å›¾å½¢å‡ ä½•ä¿¡æ¯çš„ï¼›æ‰€ä»¥é¡¶ç‚¹å’Œå›¾å…ƒæ˜¯ç»˜å›¾è¿‡ç¨‹ä¸­å¿…ä¸å¯å°‘çš„ã€‚webglç»˜åˆ¶ä¸€ä¸ªå›¾å½¢çš„è¿‡ç¨‹ï¼Œä¸€èˆ¬éœ€è¦ä¸¤æ®µç€è‰²å™¨ï¼Œä¸€æ®µå«é¡¶ç‚¹ç€è‰²å™¨ï¼ˆVertex Shaderï¼‰è´Ÿè´£å¤„ç†å›¾å½¢çš„é¡¶ç‚¹ä¿¡æ¯ï¼Œä¸€æ®µå«ç‰‡å…ƒç€è‰²å™¨ï¼ˆFragment Shaderï¼‰è´Ÿè´£å¤„ç†å›¾å½¢çš„åƒç´ ä¿¡æ¯ï¼› 2.2.2.1 é¡¶ç‚¹é¡¶ç‚¹å°±æ˜¯å‡ ä½•å›¾å½¢çš„é¡¶ç‚¹ï¼Œä¸‰è§’å½¢æœ‰ä¸‰ä¸ªé¡¶ç‚¹ï¼Œå››è¾¹å½¢æœ‰å››ä¸ªé¡¶ç‚¹ã€‚ 2.2.2.2 å›¾å…ƒå›¾å…ƒæ˜¯webglå¯ç›´æ¥å¤„ç†çš„å›¾å½¢å•å…ƒï¼Œç”±webglç»˜å›¾æ¨¡å¼å†³å®šï¼Œæœ‰ç‚¹ã€çº¿ã€ä¸‰è§’å½¢ç­‰ï¼›webglä¸­æœ€å°çš„å›¾å…ƒæ˜¯ä¸‰è§’å½¢ï¼› webglæ”¯æŒçš„å›¾å…ƒç±»å‹æœ‰ä¸ƒç§ï¼› gl.POINTS(ç‚¹), gl.LINES(çº¿æ®µ), gl.LINE_STRIP(çº¿æ¡), gl.LINE_LOOP(å›è·¯), gl.TRIANGLES(ä¸‰è§’å½¢), gl.TRIANGLE_STRIP(ä¸‰è§’å¸¦), gl.TRIANGLE_FAN(ä¸‰è§’æ‰‡)ã€‚ è¦ç»˜åˆ¶ç©ºå¿ƒä¸‰è§’å½¢ï¼Œgl.LINE_STRIP(çº¿æ¡)ã€gl.LINES(çº¿æ®µ)ã€ gl.LINE_LOOP(å›è·¯)éƒ½å¯ä»¥å®ç°ã€‚ ä½†æ˜¯gl.LINES(çº¿æ®µ)éœ€è¦å†™å…¥å…­ä¸ªé¡¶ç‚¹([-1, -1, 0, 1, 0, 1, 1, -1, 1, -1,-1, -1]), gl.LINE_STRIP(çº¿æ¡)ä¹Ÿéœ€è¦å†™å…¥å››ä¸ªé¡¶ç‚¹([-1, -1, 0, 1, 1, -1,-1, -1]), è€Œgl.LINE_LOOP(å›è·¯)ï¼Œåªéœ€è¦æ˜¯ä¸‰ä¸ªé¡¶ç‚¹([-1, -1, 0, 1, 1, -1])ï¼› 2.2.2.3 é¡¶ç‚¹ç€è‰²å™¨å’Œç‰‡å…ƒç€è‰²å™¨é¡¶ç‚¹ç€è‰²å™¨ç†è§£ä¸ºå¤„ç†é¡¶ç‚¹çš„ GPU ç¨‹åºä»£ç ã€‚å®ƒå¯ä»¥æ”¹å˜é¡¶ç‚¹çš„ä¿¡æ¯ï¼ˆå¦‚é¡¶ç‚¹çš„åæ ‡ã€æ³•çº¿æ–¹å‘ã€æè´¨ç­‰ç­‰ï¼Œä»è€Œæ”¹å˜æˆ‘ä»¬ç»˜åˆ¶å‡ºæ¥çš„å›¾å½¢çš„å½¢çŠ¶æˆ–è€…å¤§å°ç­‰ç­‰ï¼› é¡¶ç‚¹å¤„ç†å®Œæˆä¹‹åï¼Œwebglå°±ä¼šæ ¹æ®é¡¶ç‚¹å’Œç»˜å›¾æ¨¡å¼æŒ‡å®šçš„å›¾å…ƒï¼Œè®¡ç®—å‡ºéœ€è¦ç€è‰²çš„åƒç´ ç‚¹ï¼Œç„¶åå¯¹å®ƒä»¬æ‰§è¡Œç‰‡å…ƒç€è‰²å™¨ç¨‹åºã€‚ç®€å•è®²ï¼Œå°±æ˜¯å¯¹æŒ‡å®šå›¾å…ƒä¸­çš„åƒç´ ç‚¹ç€è‰²ï¼› webglä»é¡¶ç‚¹ç€è‰²å™¨å’Œå›¾å…ƒæå–åƒç´ ç‚¹ç»™ç‰‡å…ƒç€è‰²å™¨æ‰§è¡Œä»£ç çš„è¿‡ç¨‹ï¼Œå°±æ˜¯ç”Ÿæˆå…‰æ …ä¿¡æ¯çš„è¿‡ç¨‹ï¼Œä¹Ÿå«å®ƒå…‰æ …åŒ–è¿‡ç¨‹ã€‚æ‰€ä»¥ï¼Œç‰‡å…ƒç€è‰²å™¨çš„ä½œç”¨ï¼Œå°±æ˜¯å¤„ç†å…‰æ …åŒ–åçš„åƒç´ ä¿¡æ¯ï¼› ä¸¾ä¾‹ å°†å›¾å…ƒè®¾ä¸ºçº¿æ®µï¼Œé‚£ä¹ˆç‰‡å…ƒç€è‰²å™¨å°±ä¼šå¤„ç†é¡¶ç‚¹ä¹‹é—´çš„çº¿æ®µä¸Šçš„åƒç´ ç‚¹ä¿¡æ¯ï¼Œè¿™æ ·ç”»å‡ºæ¥çš„å›¾å½¢å°±æ˜¯ç©ºå¿ƒçš„ã€‚ å°†å›¾å…ƒè®¾ä¸ºä¸‰è§’å½¢ï¼Œé‚£ä¹ˆç‰‡å…ƒç€è‰²å™¨å°±ä¼šå¤„ç†ä¸‰è§’å½¢å†…éƒ¨çš„æ‰€æœ‰åƒç´ ç‚¹ï¼Œè¿™æ ·ç”»å‡ºæ¥çš„å›¾å½¢å°±æ˜¯å®å¿ƒçš„ï¼› å› ä¸ºå›¾å…ƒæ˜¯webGLå¯ä»¥ç›´æ¥å¤„ç†çš„å›¾å½¢å•å…ƒï¼Œæ‰€ä»¥å…¶ä»–éå›¾å…ƒçš„åœ†å½¢æœ€ç»ˆå¿…é¡»è¦è½¬æ¢ä¸ºå›¾å…ƒæ‰å¯ä»¥è¢«webGLå¤„ç†ã€‚æ¯”å¦‚ç»˜åˆ¶å®å¿ƒå››è¾¹å½¢ï¼Œå°±éœ€è¦å°†å››è¾¹å½¢æ‹†åˆ†æˆä¸¤ä¸ªä¸‰è§’å½¢ï¼Œå†äº¤ç»™webGLåˆ†åˆ«ç»˜åˆ¶å‡ºæ¥ï¼› 1234567891011121314151617181920212223// é¡¶ç‚¹ç€è‰²å™¨// attribute ç›¸å½“äºvar constï¼Œå£°æ˜å˜é‡çš„å…³é”®å­—// vec2 å˜é‡ç±»å‹ï¼Œvec2è¡¨ç¤ºäºŒç»´å‘é‡// position å˜é‡åconst vertex = `attribute vec2 position;void main()&#123; gl_PointSize = 1.0; gl_Position = vec4(position, 1.0, 1.0);&#125;`;// é€šè¿‡gl_Position è®¾ç½®é¡¶ç‚¹ï¼›// ç‰‡å…ƒç€è‰²å™¨const fragment = `precision mediump float;void main()&#123; gl_FragColor = vec4(0.0, 1.0, 1.0, 1.0);&#125;`;// gl_FragColor æ˜¯webGLç‰‡å…ƒç€è‰²å™¨å†…ç½®å˜é‡ï¼Œè¡¨ç¤ºå½“å‰åƒç´ ç‚¹é¢œè‰²ã€‚ å®ƒæ˜¯ä¸€ä¸ªç”¨RGBAè‰²å€¼è¡¨ç¤ºçš„å››ç»´å‘é‡æ•°æ®ï¼›// å˜é‡ç±»å‹ vec4 è¡¨ç¤ºå››ç»´å‘é‡// webGLå¯ä»¥å¹¶è¡Œåœ°å¯¹æ•´ä¸ªä¸‰è§’å½¢çš„æ‰€æœ‰åƒç´ ç‚¹åŒæ—¶è¿è¡Œç‰‡å…ƒç€è‰²å™¨ï¼Œå¹¶è¡Œå¤„ç†æ˜¯WebGLç¨‹åºéå¸¸é‡è¦çš„æ¦‚å¿µï¼›ä¸è®ºè¿™ä¸ªä¸‰è§’å½¢æ˜¯å¤§æ˜¯å°ï¼Œæœ‰å‡ åä¸ªåƒç´ ç‚¹è¿˜æ˜¯ä¸Šç™¾ä¸‡ä¸ªåƒç´ ç‚¹ï¼ŒGPUéƒ½æ˜¯åŒæ—¶å¤„ç†æ¯ä¸ªåƒç´ ç‚¹çš„ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå›¾å½¢ä¸­æœ‰å¤šå°‘ä¸ªåƒç´ ç‚¹ï¼Œç€è‰²å™¨ç¨‹åºåœ¨GPUä¸­å°±ä¼šè¢«åŒæ—¶æ‰§è¡Œå¤šå°‘æ¬¡ï¼› 123456789101112131415161718// åˆ›å»ºé¡¶ç‚¹ç€è‰²å™¨å¯¹è±¡const vertexShader = gl.createShader(gl.VERTEX_SHADER);gl.shaderSource(vertexShader, vertex);gl.compileShader(vertexShader);// åˆ›å»ºç‰‡å…ƒç€è‰²å™¨å¯¹è±¡const fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);gl.shaderSource(fragmentShader, fragment);gl.compileShader(fragmentShader);// åˆ›å»ºwebGLProgram å¯¹è±¡const program = gl.createProgram();gl.attachShader(program, vertexShader);gl.attachShader(program, fragmentShader);gl.linkProgram(program);// å¯ç”¨webGLProgramå¯¹è±¡gl.useProgram(program); 2.2.2.4 å‘ç‰‡å…ƒç€è‰²å™¨ä¼ é€’æ•°æ®ï¼ˆä¸ç»˜å›¾æ­¥éª¤æ— å…³ï¼‰1234567891011121314151617181920// é¡¶ç‚¹ç€è‰²å™¨attribute vec2 postion;varying vec3 color; // é¡¶ç‚¹ç€è‰²å™¨å¯é€šè¿‡ varyingå˜é‡ä¼ ç»™ç‰‡å…ƒç€è‰²å™¨ï¼›void main()&#123; gl_PointSize = 1.0; color = vec3(0.5 + position * 0.5, 0.0); // å°†é¡¶ç‚¹å€¼æ˜ å°„ä¸ºä¸€ä¸ªRGBé¢œè‰²å€¼ï¼› gl_Position = vec4(position*0.5, 1.0, 1.0);&#125;// ç‰‡å…ƒç€è‰²å™¨precision mediump float;varying vec3 color;void main()&#123; gl_FragColor = vec4(color, 1.0);&#125;// å°†gl_FragColor çš„rgbå€¼è®¾ä¸ºå˜é‡colorçš„å€¼ï¼›// è¿™ä¸ªä¸‰è§’å½¢æ˜¯ä¸€ä¸ªé¢œè‰²å‡åŒ€æ¸å˜çš„ä¸‰è§’å½¢ï¼Œå®ƒçš„ä¸‰ä¸ªé¡¶ç‚¹çš„è‰²å€¼å°±æ˜¯æˆ‘ä»¬é€šè¿‡é¡¶ç‚¹ç€è‰²å™¨æ¥è®¾ç½®çš„ã€‚webgl// åœ¨æ‰§è¡Œç‰‡å…ƒç€è‰²å™¨ç¨‹åºçš„æ—¶å€™ï¼Œé¡¶ç‚¹ç€è‰²å™¨ä¼ ç»™ç‰‡å…ƒç€è‰²å™¨çš„å˜é‡ï¼Œä¼šæ ¹æ®ç‰‡å…ƒç€è‰²å™¨çš„åƒç´ åæ ‡å¯¹å˜é‡è¿›è¡Œçº¿æ€§æ’å€¼// åˆ©ç”¨çº¿æ€§æ’å€¼å¯ä»¥è®©åƒç´ ç‚¹çš„é¢œè‰²å‡åŒ€æ¸å˜è¿™ä¸€ç‰¹ç‚¹ï¼Œå¯ä»¥ç»˜åˆ¶æ›´å¤šé¢œè‰²ä¸°å¯Œçš„å›¾å½¢ï¼› 2.2.3 å°†æ•°æ®å­˜å…¥ç¼“å†²åŒº123456789101112// å®šä¹‰ä¸‰è§’å½¢çš„é¡¶ç‚¹const points = new Float32Array([ -1, -1, 0, 1, 1, -1,]);// å°†pointså†™å…¥webGLç¼“å†²åŒºconst bufferId = gl.createBuffer();gl.bindBuffer(gl.ARRAY_BUFFER, bufferId);gl.bufferData(gl.ARRAY_BUFFER, points, gl.STATIC_DRAW); 2.2.4 å°†ç¼“å†²åŒºæ•°æ®è¯»å–åˆ°GPU123456// è·å–é¡¶ç‚¹ç€è‰²å™¨ä¸­çš„positionå˜é‡çš„åœ°å€const vPosition = gl.getAttribLocation(program, 'position');// ç»™å˜é‡è®¾ç½®é•¿åº¦å’Œç±»å‹gl.vertexAttribPointer(vPosition, 2, gl.FLOAT, false, 0, 0);// æ¿€æ´»è¿™ä¸ªå˜é‡gl.enableVertexAttribArray(vPosition); ç»è¿‡è¿™æ ·å¤„ç†ï¼Œåœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œå®šä¹‰çš„pointsç±»å‹æ•°ç»„ä¸­å¯¹åº”çš„å€¼ï¼Œå°±èƒ½é€šè¿‡å˜é‡positionè¯»å–åˆ°äº†ï¼› 2.2.5 GPUæ‰§è¡Œwebglç¨‹åºï¼Œè¾“å‡ºç»“æœ12gl.clear(gl.COLOR_BUFFER_BIT);gl.drawArrays(gl.TRIANGLES,0, points.length/2); 3. Mathæˆ‘ä»¬è¦å»ºç«‹ä¸€å¥—ä¸å„ä¸ªå›¾å½¢ç³»ç»Ÿæ— å…³è”çš„ï¼Œç®€å•åŸºäºå‘é‡å’ŒçŸ©é˜µè¿ç®—çš„æ•°å­¦ä½“ç³»ï¼Œç”¨å®ƒæ¥æè¿°æ‰€æœ‰çš„å‡ ä½•å›¾å½¢ä¿¡æ¯ã€‚ å¦‚ä½•å»ºç«‹ä¸€å¥—æè¿°å‡ ä½•å›¾å½¢ä¿¡æ¯çš„æ•°å­¦ä½“ç³»ï¼Œä»¥åŠå¦‚ä½•ç”¨è¿™ä¸ªä½“ç³»æ¥è§£å†³å¯è§†åŒ–å›¾å½¢å‘ˆç°çš„é—®é¢˜ï¼› 3.1 åæ ‡ç³»åæ ‡ç³»ä¸å‘é‡æ¥æè¿°åŸºæœ¬å›¾å½¢çš„æ–¹æ³•ï¼Œä»å¦‚ä½•å®šä¹‰å’Œå˜æ¢å›¾å½¢çš„ç›´è§’åæ ‡ç³»ï¼Œä»¥åŠå¦‚ä½•è¿ç”¨å‘é‡è¡¨ç¤ºç‚¹å’Œçº¿æ®µï¼› 3.1.1 HTMLçª—å£åæ ‡ä½“ç³»ï¼Œä»¥å‚è€ƒå¯¹è±¡çš„å…ƒç´ ç›’å­å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œxè½´å‘å³ï¼Œyè½´å‘ä¸‹ï¼Œåæ ‡å€¼å¯¹åº”åƒç´ å€¼ï¼› 3.1.2 SVGè§†åŒºç›’å­ï¼ˆviewBoxï¼‰åæ ‡ç³»ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ˜¯ä»¥svgæ ¹å…ƒç´ å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œxè½´å‘å³ï¼Œyè½´å‘ä¸‹ï¼Œsvgæ ¹å…ƒç´ å³ä¸‹è§’åæ ‡ä¸ºå®ƒçš„åƒç´ å®½é«˜å€¼ã€‚ å¦‚æœè®¾ç½®äº†viewBoxå±æ€§ï¼Œé‚£ä¹ˆsvgæ ¹å…ƒç´ å·¦ä¸Šè§’ä¸ºviewBoxçš„å‰ä¸¤ä¸ªå€¼ï¼Œå³ä¸‹è§’ä¸ºviewBoxçš„åä¸¤ä¸ªå€¼ï¼› 3.1.3 Canvasç”»å¸ƒå·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œå³ä¸‹è§’åæ ‡å€¼ä¸ºcanvasç”»å¸ƒå®½é«˜å€¼ï¼› 3.1.4 webGLä¸‰ç»´åæ ‡ç³»ï¼Œå®ƒé»˜è®¤ä»¥ç”»å¸ƒæ­£ä¸­é—´ä¸ºåæ ‡åŸç‚¹ï¼Œxè½´æœå³ï¼Œyè½´æœä¸Šï¼Œzè½´æœå¤–ï¼Œxè½´ï¼Œyè½´åœ¨ç”»å¸ƒä¸­èŒƒå›´æ˜¯ -1 åˆ°1ï¼› 3.1.5 åæ ‡ç³»è½¬æ¢(ä»¥canvasä¸ºä¾‹)å› ä¸ºhtml svg canvas webgléƒ½æ˜¯ç›´è§’åæ ‡ç³»ï¼Œæ‰€ä»¥å®ƒä»¬å¯ä»¥æ–¹ä¾¿åœ°ç›¸äº’è½¬åŒ–ã€‚htmlï¼Œsvgï¼Œcanvasæä¾›äº†transformçš„apiå¾ˆæ–¹ä¾¿è¿›è¡Œåæ ‡ç³»è½¬æ¢ï¼› webglæœ¬èº«ä¸æä¾›tranformçš„apiï¼Œå¯ä»¥åœ¨shaderé‡ŒåšçŸ©é˜µè¿ç®—æ¥å®ç°åæ ‡è½¬æ¢ã€‚ åœ¨å¾ˆå¤šå¯è§†åŒ–åœºæ™¯ä¸‹ï¼Œè¦å¤„ç†æˆåƒä¸Šä¸‡çš„å›¾å½¢ï¼Œå¦‚æœè¿™ä¸ªæ—¶å€™ï¼Œåœ¨åŸå§‹åæ ‡ä¸‹é€šè¿‡è®¡ç®—é¡¶ç‚¹æ¥ç»˜åˆ¶å›¾å½¢ï¼Œè®¡ç®—é‡ä¼šéå¸¸å¤§ï¼Œå¾ˆéº»çƒ¦ã€‚é‡‡ç”¨åæ ‡å˜æ¢çš„æ–¹å¼å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¼˜åŒ–æ€è·¯ï¼Œå®ƒèƒ½å¤Ÿç®€åŒ–è®¡ç®—é‡ï¼Œè¿™ä¸ä»…è®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œä¹Ÿå¯ä»¥èŠ‚çœCPUè¿ç®—æ—¶é—´ï¼› 1234567891011121314151617181920const rc2 = rough.canvas(canvas2);const ctx = rc2.ctx;// é€šè¿‡translateå˜æ¢ ï¼Œå°†canvasåæ ‡ç”»å¸ƒåŸç‚¹ä»å·¦ä¸Šè§’ï¼ˆ0ï¼Œ0ï¼‰ç§»åŠ¨è‡³ï¼ˆ256ï¼Œ 256ï¼‰çš„ä½ç½®ï¼Œå³ç”»å¸ƒçš„åº•è¾¹ä¸Šçš„ä¸­å¿ƒä½ç½®ï¼›ctx.translate(256, 256); // ä»¥ç§»åŠ¨äº†åŸç‚¹åçš„æ–°çš„åæ ‡ä¸ºå‚ç…§ï¼Œé€šè¿‡scale(1,-1) å°†Yè½´å‘ä¸‹çš„éƒ¨åˆ†ï¼Œå³y&gt;0çš„éƒ¨åˆ†æ²¿xè½´ç¿»è½¬180åº¦ï¼›è¿™æ ·å°±å˜æˆç”»å¸ƒåº•è¾¹ä¸­ç‚¹ä¸ºåŸç‚¹ï¼Œxè½´å‘å³ï¼Œyè½´å‘ä¸Šçš„åæ ‡ç³»äº†ï¼›ctx.scale(1, -1); const hillOpts2 = &#123; roughness: 2.8, strokeWidth: 2, fill: \"blue\" &#125;;rc2.path(\"M-180 0L-80 100L20 0\", hillOpts2);rc2.path(\"M-20 0L80 100L180 0\", hillOpts2);rc2.circle(0, 150, 105, &#123; stroke: \"red\", strokeWidth: 4, fill: \"rgba(255,255, 0, 0.4)\", fillStyle: \"solid\",&#125;); 3.2 å‘é‡åœ¨ç›´è§’åæ ‡ç³»é‡Œç»˜åˆ¶å›¾å½¢ï¼Œä¸€èˆ¬çš„å‡ ä½•å›¾å½¢éƒ½æ˜¯ç”±ç‚¹ï¼Œçº¿æ®µå–é¢æ„æˆï¼Œå…¶ä¸­ï¼Œç‚¹å’Œçº¿æ®µæ˜¯åŸºç¡€çš„å›¾å…ƒä¿¡æ¯ï¼Œå› æ­¤ï¼Œå¦‚ä½•æè¿°å®ƒä»¬æ˜¯ç»˜å›¾çš„å…³é”®ï¼› å¦‚ä½•ç”¨å‘é‡æ¥æè¿°ç‚¹å’Œçº¿æ®µï¼Ÿä¸€èˆ¬ç”¨å‘é‡æ¥è¡¨ç¤ºä¸€ä¸ªç‚¹æˆ–è€…ä¸€ä¸ªçº¿æ®µï¼› ç”¨äºŒç»´å‘é‡æ¥è¡¨ç¤ºè¿™ä¸ªå¹³é¢ä¸Šçš„ç‚¹å’Œçº¿æ®µï¼ŒäºŒç»´å‘é‡å…¶å®å°±æ˜¯ä¸€ä¸ªåŒ…å«äº†ä¸¤ä¸ªæ•°å€¼çš„æ•°ç»„ï¼Œä¸€ä¸ªæ˜¯xåæ ‡å€¼ï¼Œä¸€ä¸ªæ˜¯yåæ ‡å€¼ï¼› å‘é‡V(x,y)æœ‰ä¸¤ä¸ªå«ä¹‰ï¼Œä¸€æ˜¯è¡¨ç¤ºè¯¥åæ ‡ç³»ä¸‹ä½äºï¼ˆxï¼Œyï¼‰å¤„çš„ä¸€ä¸ªç‚¹ï¼ŒäºŒæ˜¯å¯ä»¥è¡¨ç¤ºä»åŸç‚¹ï¼ˆ0ï¼Œ0ï¼‰åˆ°åæ ‡ï¼ˆxï¼Œyï¼‰çš„ä¸€æ ¹çº¿æ®µã€‚ 3.2.1 å‘é‡åŸºæœ¬è¿ç®— ç°åœ¨æœ‰ä¸¤ä¸ªå‘é‡ï¼Œv1å’Œv2ï¼› v1+v2 ç›¸å½“äºå°†V1çš„ç»ˆç‚¹æ²¿ç€v2å‘é‡çš„æ–¹å‘ç§»åŠ¨ä¸€æ®µè·ç¦»ã€‚è¿™æ®µè·ç¦»ç­‰äºv2å‘é‡çš„é•¿åº¦ã€‚ è¿™æ ·åœ¨å¹³é¢ä¸Šå¾—åˆ°ä¸‰ä¸ªå…ƒç´  ä¸€ä¸ªæ–°çš„ç‚¹ (x1+x2, y1+y2)ï¼› ä¸€æ¡æ–°çš„çº¿æ®µ [(0, 0), (x1+x2, y1+y2)]; ä¸€æ®µæŠ˜çº¿ [(0,0),(x1,y1),(x1+x2, y1+y2)]; 3.2.2 å‘é‡é•¿åº¦å’Œæ–¹å‘ä¸€ä¸ªå‘é‡åŒ…å«é•¿åº¦å’Œæ–¹å‘ä¿¡æ¯ å®ƒçš„é•¿åº¦å¯ä»¥ç”¨å‘é‡çš„ xã€y çš„å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹ ï¼ˆå‹¾ä¸‰è‚¡å››å¼¦äº”ï¼‰æ¥è¡¨ç¤º 1v.length = function()&#123;return Math.hypot(this.x, this.y)&#125;; å®ƒçš„æ–¹å‘å¯ä»¥ç”¨ä¸ x è½´çš„å¤¹è§’æ¥è¡¨ç¤º 12v.dir = function() &#123; return Math.atan2(this.y, this.x);&#125;// Math.atan2 çš„å–å€¼èŒƒå›´æ˜¯ -Ï€åˆ°Ï€ï¼Œè´Ÿæ•°è¡¨ç¤ºåœ¨ x è½´ä¸‹æ–¹ï¼Œæ­£æ•°è¡¨ç¤ºåœ¨ x è½´ä¸Šæ–¹ã€‚ æ ¹æ®é•¿åº¦å’Œæ–¹å‘çš„å®šä¹‰ï¼Œè¿˜èƒ½æ¨å¯¼å‡ºä¸€ç»„å…³ç³»æ–¹å¼ï¼š 12v.x = v.length * Math.cos(v.dir);v.y = v.length * Math.sin(v.dir); æ¨å¯¼è¿‡ç¨‹ 12345678#è§’A å¯¹è¾¹=y é‚»è¾¹ = x, æ–œè¾¹ = zx*x + y*y = z*zsinA = å¯¹è¾¹/æ–œè¾¹ = y/zcosA = é‚»è¾¹/æ–œè¾¹ = x/ztanA = å¯¹è¾¹/é‚»è¾¹ = sinA/cosA = (y/z) / (x/z) = y/x;v.length * cosA = z * (x/z) = xv.length * sinA = z * (y/z) = y ç»“è®ºï¼š å¯ä»¥å¾ˆç®€å•æ„é€ å‡ºä¸€ä¸ªç»˜å›¾å‘é‡ã€‚å¦‚æœä»¥ç‚¹ Vï¼ˆx0, y0ï¼‰ä¸ºèµ·ç‚¹ï¼Œæ²¿ç€æŸä¸ªæ–¹å‘ç”»ä¸€æ®µé•¿åº¦ä¸ºlengthçš„çº¿æ®µï¼Œåªéœ€æ„é€ å¦‚ä¸‹ä¸€ä¸ªå‘é‡å³å¯ï¼› 1v1 = length * v(cos(A), sin(A)) æ¨å¯¼è¿‡ç¨‹ 12345v1 = length * v(cos(A), sin(A))# è¿™é‡Œå†™æˆ v1 = length (cosA, sinA) æ›´å®¹æ˜“ç†è§£ä¸€äº›cosA = x/z;sinA = y/z;length = z; å¯è§†åŒ–å‘ˆç°ä¾èµ–äºè®¡ç®—æœºå›¾å½¢å­¦ï¼Œè€Œå‘é‡è¿ç®—æ˜¯æ•´ä¸ªè®¡ç®—æœºå›¾å½¢å­¦çš„æ•°å­¦åŸºç¡€ï¼› 3.3 å‘é‡ä¹˜æ³•å‘é‡çš„ç‚¹ä¹˜Dot.product, å‘é‡çš„ç‚¹ä¹˜ä¹Ÿå«å‘é‡çš„å†…ç§¯ã€æ•°é‡ç§¯ï¼› å‘é‡çš„å‰ä¹˜Corss.productï¼Œä¹Ÿå«å‘é‡ç§¯ï¼Œå¤–ç§¯ã€å‰ç§¯ï¼› 3.3.1 ä¸€ä¸ªä¾‹å­å¼•å‡ºå‘é‡ä¹˜æ³•çš„*åˆ¤æ–­ï¼šä¸€ä¸ªç‚¹æ˜¯å¦åœ¨æ‰«æå™¨å†… * è§£ç­” å¦‚å›¾æ‰€ç¤ºï¼Œæ‰«æå™¨æ˜¯60åº¦ï¼Œå‚ç›´å‘ä¸Šï¼Œæ‰€ä»¥å®ƒçš„èŒƒå›´åº”è¯¥æ˜¯60åº¦åˆ°120åº¦ï¼› ä¹Ÿå°±æ˜¯ Math.PI/3 åˆ° 2*Math.PI/3 1234// å…ˆæ±‚å‡ºç›®æ ‡å‘é‡ä¸Xè½´çš„å¤¹è„šv.dir = Math.atan2(v.y, v.x); // æ­¤æ–¹æ³•æ˜¯æ±‚è§£å¤¹è§’çš„ï¼Œæ¯”å¦‚ Math.atan2(1,1) === Math.PI/4 // true// æ±‚è§£è¯¥ diræ˜¯å¦åœ¨æ‰«æå™¨ä¹‹å†…isIn = v.dir &gt; Math.PI/3 &amp;&amp; v.dir &lt; 2*Math.PI/ 3 3.3.2 å‘é‡ç‚¹ä¹˜ä¸¤ä¸ªNç»´å‘é‡ï¼Œaå’Œbï¼Œ a = [a1,a2,a3,â€¦an], b = [b1b2b3â€¦.bn]; é‚£å‘é‡çš„ç‚¹ç§¯ä»£ç ï¼š 1a*b = a1*b1 + a2*b2 + .... an*bn a, b å‘é‡ç‚¹ç§¯çš„å‡ ä½•æ„ä¹‰ï¼Œæ˜¯aå‘é‡ä¹˜ä»¥bå‘é‡åœ¨aå‘é‡ä¸Šçš„æŠ•å½±åˆ†é‡ã€‚ å®ƒçš„ç‰©ç†å«ä¹‰ç›¸å½“äºaåŠ›ä½œç”¨äºç‰©ä½“ï¼Œäº§ç”Ÿbä½ç§»æ‰€åšçš„åŠŸã€‚ 1234// å½“aã€bå‘é‡å¹³è¡Œæ—¶ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å¤¹è§’ä¸º0a.x * b.x + a.y * b.y = a.length * b.length;// å½“aã€bä¸¤ä¸ªå‘é‡å‚ç›´æ—¶ï¼Œå®ƒä»¬çš„å¤¹è§’å°±æ˜¯90åº¦ï¼Œé‚£ä¹ˆa.b = 0ï¼›a.x * b.x + a.y * b.y === a*b*cos(90åº¦) = a*b*0 = 0; æ€»ç»“ å‘é‡çš„ç‚¹ä¹˜ï¼Œ å¯¹ä¸¤ä¸ªå‘é‡æ‰§è¡Œç‚¹ä¹˜è¿ç®—ï¼Œç»“æœæ˜¯ä¸€ä¸ªã€Scaleræ ‡é‡ã€‘ï¼ˆä¸€ä¸ªæ•°å­—ï¼‰ ï¼ˆæ ‡é‡ï¼š scalarï¼Œ åªæœ‰å¤§å°æ²¡æœ‰æ–¹å‘çš„é‡ï¼Œä¾‹å¦‚ç‰©ä½“ç§»åŠ¨ä¸­çš„å¹³å‡é€Ÿç‡Â·è·¯ç¨‹ï¼‰ 3.3.3 å‘é‡çš„å‰ä¹˜å‘é‡çš„å‰ä¹˜ï¼Œåˆ™æ˜¯é’ˆå¯¹ä¸¤æ¡å‘é‡çš„å¦ä¸€ç§è¿ç®—æ–¹å¼ã€‚ å‘é‡å‰ä¹˜è¿ç®—çš„ç»“æœä¸æ˜¯æ ‡é‡ï¼Œè€Œæ˜¯ä¸€ä¸ªæ–°çš„å‘é‡ï¼›æ–°çš„å‘é‡ä¼š å‚ç›´äº åŸæ¥çš„è¿™ä¸¤æ¡å‘é‡ï¼› å‘é‡Aå’Œå‘é‡Bçš„å‰ç§¯æ˜¯å‘é‡Cï¼Œ ã€å‘é‡Cã€‘åŒæ—¶å‚ç›´äºã€å‘é‡Aå’Œå‘é‡Bã€‘ ã€å‘é‡çš„å‰ä¹˜ã€‘ä¸€ä¸ªç”¨é€”å°±æ˜¯æ‰¾åˆ°æˆ‘ä»¬åº”è¯¥åœ¨å“ªä¸€è½´ä¸Šæ–½åŠ ã€æ‰­åŠ›Torqueã€‘ï¼ˆè¿˜æœ‰ï¼Œè·Ÿè¸ªå¯¼å¼¹ï¼Œæ¯”å¦‚åˆé‡‘å¼¹å¤´çš„Cå¼¹ï¼Œä¹Ÿæ˜¯å¯ä»¥é€šè¿‡å‰ä¹˜çš„æ–¹æ³•å»å®ç°çš„ï¼‰ï¼› å¦‚ä¸‹ç¤ºä¾‹ï¼š ã€å‘é‡Aã€‘è¡¨ç¤ºçš„æ˜¯ç‚®å£ã€å½“å‰æœå‘ã€‘ ã€å‘é‡Bã€‘è¡¨ç¤ºçš„æ˜¯ç‚®å£å°†è¦ã€è°ƒæ•´åçš„æœå‘ã€‘ ã€å‘é‡Cã€‘å°†ä¸¤ä¸ªå‘é‡è¿›è¡Œå‰ä¹˜åï¼Œæ‰¾åˆ°ç‚®å£éœ€è¦åœ¨å“ªä¸€è½´ä¸Šè¿›è¡Œæ—‹è½¬å¹¶ä¸”æ–½åŠ ç›¸åº”çš„æ‰­åŠ›ï¼› å‰ç§¯å‡ ä½•æ„ä¹‰ å‘é‡aå’Œbçš„å‰ç§¯ï¼Œå°±ç›¸å½“äºå‘é‡aï¼ˆè“è‰²å¸¦ç®­å¤´çº¿æ®µï¼‰ä¸å‘é‡bæ²¿å‚ç›´æ–¹å‘çš„æŠ•å½±ï¼ˆçº¢è‰²å¸¦ç®­å¤´çº¿æ®µï¼‰çš„ä¹˜ç§¯ã€‚ï¼ˆå¦‚ä¸Šå›¾æ‰€ç¤ºï¼‰ï¼ŒäºŒç»´å‘é‡å‰ç§¯çš„å‡ ä½•æ„ä¹‰å°±æ˜¯å‘é‡aã€bç»„æˆçš„å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼› 1|a| è¡¨ç¤ºå‘é‡açš„lengthï¼› æ€è€ƒé¢˜ï¼šæ±‚ç‚¹åˆ°çº¿æ®µçš„è·ç¦» åœ¨äº†è§£å‘é‡å‰ç§¯çš„å‡ ä½•æ„ä¹‰ä¹‹åï¼Œ æˆ‘ä»¬é€šè¿‡å‘é‡å‰ç§¯å¾—åˆ°å¹³è¡Œå››è¾¹å½¢çš„é¢ç§¯ï¼Œå†é™¤ä»¥åº•è¾¹é•¿ï¼›å°±èƒ½å¾—åˆ°ç‚¹åˆ°å‘é‡æ‰€åœ¨ç›´çº¿çš„è·ç¦» å‰ä¹˜åœ¨æ•°å­¦ä¸Šçš„è®¡ç®—æ–¹æ³• 12// å…¶ä¸­ï¼Œiï¼Œjï¼Œk åˆ†åˆ«æ˜¯ xï¼Œyï¼Œz è½´çš„å•ä½å‘é‡ï¼Œæˆ‘ä»¬æŠŠè¡Œåˆ—å¼å±•å¼€ï¼Œå°±èƒ½å¾—åˆ°å¦‚ä¸‹å…¬å¼ï¼ša X b = [y1 * z2 - y2 * z1, - (x1 * z2 - x2 * z1), x1 * y2 - x2 * y1] æ›´å¤šç‚¹ç§¯å·®ç§¯ç›¸å…³çŸ¥è¯†å‚è€ƒhttps://geek-docs.com/linear-algebra/vector/vector-chaji.html å›åˆ°æ€è€ƒé¢˜3: ç»™ä»»æ„ä¸€ä¸ªç‚¹ï¼Œåˆ¤æ–­è¿™ä¸ªç‚¹åœ¨ä¸åœ¨æ‰«æå™¨å†… å½’ä¸€åŒ– å½’ä¸€åŒ–ï¼Œç”¨ v0çš„ xã€y åˆ†åˆ«é™¤ä»¥å®ƒçš„ç»å¯¹å€¼ã€‚å½’ä¸€åŒ–åçš„å‘é‡æ–¹å‘ä¸å˜ï¼Œé•¿åº¦ä¸º 1ã€‚ åœ¨å‘é‡ä¹˜æ³•é‡Œï¼Œå¦‚æœ aã€b éƒ½æ˜¯é•¿åº¦ä¸º 1 çš„å½’ä¸€åŒ–å‘é‡ï¼Œé‚£ä¹ˆ|a X b| çš„ç»“æœå°±æ˜¯ aã€b å¤¹è§’çš„æ­£å¼¦å€¼ï¼Œè€Œ|a â€¢ b|çš„ç»“æœå°±æ˜¯ aã€b å¤¹è§’çš„ä½™å¼¦å€¼ã€‚ å¥½äº†ï¼Œå†è¯´å›æ¥ï¼Œæˆ‘ä»¬æŠŠå½’ä¸€åŒ–çš„å‘é‡ a å‰ä¹˜æ‰«æå™¨ä¸­çº¿ä¸Šçš„ v(0,1)ï¼Œç”±äºæ‰«æå™¨å…³äº y è½´å¯¹ç§°ï¼Œæ‰€ä»¥æ‰«æå™¨è¾¹ç¼˜ä¸ y è½´çš„å¤¹è§’æ˜¯æ­£è´Ÿ 30 åº¦ã€‚é‚£ä¹ˆåœ¨ä¸å•ä½å‘é‡æ±‚å‰ç§¯çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç° 2 ç§æƒ…å†µï¼š ç‚¹åœ¨æ‰«æèŒƒå›´å†…ï¼Œå¦‚å‘é‡ aï¼Œå°±ä¸€å®šæ»¡è¶³ï¼š |a X v| &lt;= ||a||v|sin(30Â°)| = |sin(30Â°)| = 0.5ï¼› ç‚¹ä¸åœ¨æ‰«æèŒƒå›´å†…ï¼Œå¦‚å‘é‡ bï¼Œå°±ä¸€å®šæ»¡è¶³ï¼š|b X v| &gt; ||b||v|sin(30Â°)| = |sin(30Â°)| = 0.5ã€‚ å› æ­¤ï¼Œåªè¦ä»»æ„ä¸€ç‚¹æ‰€åœ¨çš„å‘é‡ä¸å•ä½å‘é‡çš„å‰ç§¯ç»“æœçš„ç»å¯¹å€¼ä¸å¤§äº0.5ï¼ˆå³sin30åº¦ï¼‰ï¼Œå°±è¯´æ˜è¿™ä¸ªç‚¹åœ¨æ‰«æèŒƒå›´å†…ï¼Œæ‰€ä»¥å¦‚ä¸‹åˆ¤æ–­æ–¹æ³• 123const isInRange = Math.abs(new Vec2(0, 1).cross(v0.normalize())) &lt;= 0.5; // v0.normalize()å³å°†v0å½’ä¸€åŒ– 3.3.4 ç‚¹ä¹˜ä¸å‰ä¹˜åŠ è¿° Dot product 12345aå‘é‡ * bå‘é‡ = aé•¿åº¦ * bé•¿åº¦ * cos@ // @ ä¸ºaå‘é‡å’Œbå‘é‡çš„å¤¹è§’ // ç‚¹ä¹˜ä½¿ç”¨åœºæ™¯1ï¼Œ å¿«é€Ÿå¾—åˆ°ä¸¤ä¸ªå‘é‡çš„å¤¹è§’ cos@ = ï¼ˆaå‘é‡ * bå‘é‡ï¼‰ / ï¼ˆaé•¿åº¦ * bé•¿åº¦ï¼‰ ç‚¹ä¹˜èƒ½å¿«é€Ÿå¾—åˆ°ä¸¤ä¸ªå‘é‡çš„å¤¹è§’ï¼Œ ç‰¹åˆ«æ˜¯åœ¨ä¸¤ä¸ªå‘é‡éƒ½æ˜¯å•ä½å‘é‡çš„æ—¶å€™ã€‚å®ƒä»¬çš„é•¿åº¦è‡ªç„¶éƒ½æ˜¯1ï¼›æ‰€ä»¥å®ƒä»¬çš„ç‚¹ä¹˜è‡ªç„¶å°±æ˜¯å¤¹è§’çš„coså€¼ï¼› ç‚¹ä¹˜æ»¡è¶³çš„è®¡ç®—è§„å¾‹ äº¤æ¢å¾‹ï¼Œåˆ†é…å¾‹ï¼Œç»“åˆç‡ï¼› Cross product 3.4 å‘é‡å’Œå‚æ•°æ–¹ç¨‹æè¿°æ›²çº¿ç”¨å‚æ•°æ–¹ç¨‹æè¿°æ›²çº¿çš„æ–¹æ³•ï¼Œé€šè¿‡æ­¤æ–¹æ³•å¯ä»¥æè¿°å¸¸è§çš„åœ†ï¼Œæ¤­åœ†ï¼ŒæŠ›ç‰©çº¿ï¼Œæ­£ä½™å¼¦ç­‰æ›²çº¿ï¼Œè¿˜èƒ½æè¿°æ›´å…·ä¸€èˆ¬æ€§çš„æ›²çº¿ï¼›æ¯”å¦‚è´å¡å°”æ›²çº¿ï¼Œæˆ–è€…Catmull-Romæ›²çº¿ç­‰ç­‰ï¼› 3.4.1 ç”»åœ† å¦‚ä¸‹å›¾æ‰€ç¤ºçš„å‚æ•°æ–¹ç¨‹ï¼Œåœ†å¿ƒä¸ºï¼ˆx0, y0ï¼‰ï¼ŒåŠå¾„ä¸ºrï¼› 3.4.2 ç”»åœ†æ¤æ›²çº¿é™¤äº†ç”»åœ†ï¼Œå‚æ•°æ–¹ç¨‹è¿˜å¯ä»¥æè¿°å¾ˆå¤šå…¶ä»–åœ†æ¤æ›²çº¿ï¼Œæ¯”å¦‚æ¤­åœ†çš„å‚æ•°æ–¹ç¨‹ã€‚å®ƒå…¶å®å’Œåœ†çš„å‚æ•°æ–¹ç¨‹å¾ˆæ¥è¿‘ã€‚å…¶ä¸­ï¼Œaï¼Œb åˆ†åˆ«æ˜¯æ¤­åœ†çš„é•¿è½´å’ŒçŸ­è½´ï¼Œå½“a=b=ræ—¶ï¼Œè¿™ä¸ªæ–¹ç¨‹å°±æ˜¯æ¤­åœ†çš„æ–¹ç¨‹å¼ã€‚åœ†æ˜¯æ¤­åœ†çš„ç‰¹ä¾‹ï¼› 3.4.3 æŠ›ç‰©çº¿çš„å‚æ•°æ–¹ç¨‹ï¼Œå…¶ä¸­pæ˜¯å¸¸æ•°ï¼Œä¸ºç„¦ç‚¹åˆ°å‡†çº¿çš„è·ç¦» 3.4.4 è´å¡å°”æ›²çº¿3.5 ä¸‰è§’å‰–åˆ†å’Œå‘é‡æ“ä½œæè¿°å¹¶å¤„ç†å¤šè¾¹å½¢3.6 ä»¿å°„å˜æ¢å¯¹å‡ ä½•å›¾å½¢è¿›è¡Œåæ ‡å˜æ¢","categories":[{"name":"webgl","slug":"webgl","permalink":"http://yoursite.com/categories/webgl/"}],"tags":[{"name":"guide","slug":"guide","permalink":"http://yoursite.com/tags/guide/"}]},{"title":"canvas","slug":"canvas","date":"2021-01-26T10:08:55.000Z","updated":"2021-02-09T10:26:35.151Z","comments":true,"path":"2021/01/26/canvas/","link":"","permalink":"http://yoursite.com/2021/01/26/canvas/","excerpt":"","text":"1. canvas åŸºç¡€API1.1 contextcontextå¯¹è±¡ proto æŒ‡å‘CanvasRenderingContext2Dï¼Œä¸€äº›ç»˜å›¾APIé›†ä¸­åœ¨è¿™äº›åœ°æ–¹ 12const canvas = document.querySelector('canvas')const context = canvas.getContext('2d'); contextå¯¹è±¡APIå¤§ä½“åˆ†ä¸¤ç±» è®¾ç½®çŠ¶æ€çš„ ï¼ˆé¢œè‰²ï¼Œçº¿å®½ï¼Œ åæ ‡å˜æ¢ï¼‰ ç»˜åˆ¶æŒ‡ä»¤APIï¼Œç»˜åˆ¶ä¸åŒå½¢çŠ¶çš„å‡ ä½•å›¾å½¢ 1.2 ç»˜å›¾API1.2.1 rectç»˜åˆ¶çŸ©å½¢æŒ‡ä»¤ å‚æ•° å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸ºè¦ç»˜åˆ¶çŸ©å½¢çš„xåæ ‡ï¼Œè¦ç»˜åˆ¶çŸ©å½¢yåæ ‡, çŸ©å½¢å®½å’ŒçŸ©å½¢é«˜ï¼› 1.2.2 ç¼“å­˜å½“å‰çŠ¶æ€å’Œæ¢å¤ç±»ä¼¼ä¸€ä¸ªå‹æ ˆå’Œå¼¹æ ˆåŠŸèƒ½ï¼› save ä¿ç•™å½“å‰çš„è·¯å¾„å’Œé¢œè‰²ç­‰çŠ¶æ€ restore 123456789ctx.fillStyle = \"green\";ctx.save(); // ä¿å­˜ç”»ç¬”åˆå§‹åæ ‡(0,0), å¡«å……è‰²ä¸ºç»¿è‰²ctx.fillRect(10, 10, 100, 100);// Restore the default statectx.restore();ctx.fillRect(150, 40, 100, 100); // è¯¥å›¾å½¢çš„ç”»ç¬”åæ ‡å›åˆ° åˆå§‹çŠ¶æ€ï¼Œå³ (0,0) ,å¡«å……è‰²ä¸ºç»¿è‰²ï¼Œè€Œä¸æ˜¯é»˜è®¤è‰²ï¼› 1.3 ç»˜åˆ¶çŠ¶æ€APIfillStyle 1context.fillStyle = color; 1.4 åæ ‡ç³»ç»Ÿ å·¦ä¸Šè§’ä¸º (0, 0) å³ä¸‹è§’ä¸º (canvas.width, canvas.height) 1.5 ç»˜å›¾è¿‡ç¨‹ è·å–canvaså¯¹è±¡ï¼ŒgetContext(â€˜2dâ€™) ç»˜åˆ¶çŠ¶æ€ï¼Œ fillStyleï¼Œ translateç­‰ï¼› beginPathå¼€å§‹ç»˜åˆ¶ è°ƒç»˜å›¾æŒ‡ä»¤ï¼Œrectç­‰ è°ƒfillæŒ‡ä»¤ï¼Œå°†ç»˜åˆ¶å†…å®¹è¾“å‡ºåˆ°ç”»å¸ƒä¸­ï¼› 1.6 å›¾å½¢ä¿¡æ¯æœ‰çš„æ—¶å€™ï¼Œç±»ä¼¼ä¸€ä»½å±‚çº§æ•°æ®ï¼ˆåŸå¸‚ &gt; çœä»½ &gt; ä¸­å›½ï¼‰è¿™æ ·å±‚çº§æ•°æ®ï¼Œè¦å°†å®ƒä¸ç»˜å›¾æŒ‡ä»¤å»ºç«‹è”ç³»ï¼Œå»ºç«‹è”ç³»æŒ‡çš„æ˜¯ è¦æŠŠæ•°æ®çš„å±‚çº§ã€ä½ç½®ã€å’Œè¦ç»˜åˆ¶çš„åœ†çš„åŠå¾„ã€ä½ç½®ä¸€ä¸€å¯¹åº”èµ·æ¥ï¼› æ¢å¥è¯è¯´å°±æ˜¯è¦æŠŠæ•°æ®è½¬æ¢æˆå›¾å½¢ä¿¡æ¯ï¼Œè¿™ä¸ªæ­¥éª¤éœ€è¦æ•°å­¦è®¡ç®—ï¼› å‡è®¾ï¼Œæˆ‘ä»¬è¦å°†æ•°æ®å±•ç°åœ¨ä¸€ä¸ªç”»å¸ƒå®½é«˜ä¸º 1600 * 1600 çš„ Canvas ä¸­ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡ d3.pack() å°†æ•°æ®æ˜ å°„ä¸ºä¸€ç»„ 1600 å®½é«˜èŒƒå›´å†…çš„åœ†å½¢ã€‚ å…·ä½“ç»˜åˆ¶çš„è¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼Œåªéœ€è¦éå†æ•°æ®å¹¶ä¸”æ ¹æ®æ•°æ®å†…å®¹ç»˜åˆ¶åœ†å¼§","categories":[{"name":"canvas","slug":"canvas","permalink":"http://yoursite.com/categories/canvas/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"}]},{"title":"C","slug":"C","date":"2021-01-25T02:12:49.000Z","updated":"2021-02-09T10:26:22.189Z","comments":true,"path":"2021/01/25/C/","link":"","permalink":"http://yoursite.com/2021/01/25/C/","excerpt":"","text":"å‰ç½®1.ç¨‹åº å†™ç¨‹åºå‰ï¼Œå…ˆæ„æƒ³å¥½ç¨‹åºçš„ç»“æ„ï¼Œè€Œä¸æ˜¯å…ˆä»å®šä¹‰å˜é‡å¼€å§‹ã€‚ æ²¡æœ‰æƒ³å¥½è§£å†³æ–¹æ¡ˆï¼Œä¸è¦æ€¥äºåŠ¨æ‰‹å†™ç¨‹åºï¼Ÿ æœ‰äº†è§£å†³æ–¹æ¡ˆä»¥åï¼Œå¯ä»¥æŒ‰ç…§â€œå…ˆç²—åç»†ï¼Œå…ˆæŠ½è±¡åå…·ä½“â€çš„åŠæ³•ï¼Œå…ˆæœ‰ç¨‹åºçš„è½®å»“ï¼Œå¦‚æœ‰å¿…è¦å¯ä»¥è§£å†³â€œå»ºæ¨¡å·¥å…·â€ç”»ä¸€äº›å›¾ï¼Œè€Œåå†åŠ¨æ‰‹å†™ç¨‹åºï¼› å†™ç¨‹åºæ—¶ï¼Œå¯ä»¥å…ˆå†™å‡ºç¨‹åºè½®å»“ï¼Œè€Œåå†è¡¥å……å˜é‡å®šä¹‰ç­‰ç»†èŠ‚ï¼› ç¨‹åºå¹¶ä¸çº ç»“äºæ˜¯å¦æ›´ä¼˜ã€‚è€Œåœ¨äºç¨‹åºç»“æ„æ˜¯ä¸æ˜¯æ¸…æ¥šï¼Œæ˜¯ä¸æ˜¯å®¹æ˜“è¢«äººçœ‹æ‡‚ 1.1 å†™ç¨‹åºçš„è¿‡ç¨‹ æŒ‰ç…§ç”±å¤§åˆ°å°ï¼Œç”±ç²—åˆ°ç»†ï¼Œç”±æŠ½è±¡åˆ°å…·ä½“çš„æ–¹æ³•åˆ†æã€ç¼–å†™ç¨‹åº ç¨‹åºçš„ç»“æ„ ï¼ˆåŸºæœ¬æ€æƒ³ï¼‰ ç¨‹åºç”±è‹¥å¹²ä¸ªâ€œæ¨¡å—â€ç»„æˆ æ¨¡å—ä¹‹å†…â€œé«˜å†…èšâ€ï¼ˆé«˜å†…èšï¼Œ å°±æ˜¯è¿™ä¸ªæ¨¡å—åªåšè¿™ä¸ªäº‹æƒ…ï¼Œä¸å¹²åˆ«çš„ã€‚åŠŸèƒ½å•ä¸€ï¼‰ æ¨¡å—ä¹‹é—´â€œä½è€¦åˆâ€ ï¼ˆå½“ä¸€ä¸ªæ¨¡å—è¢«æ”¹åŠ¨çš„æ—¶å€™ï¼Œåªä¼šå°è±¡å®ƒè‡ªå·±ï¼Œè€Œä¸ä¼šå½±å“åˆ«çš„ï¼‰ 1.2 ç¼–ç¨‹è¯­è¨€å…±æ€§ ï¼ˆè¯­æ³•ï¼‰ç¨‹åºè®¾è®¡è¯­è¨€çš„æ„æˆ,è¯­è¨€ç§ç±»åƒå·®ä¸‡åˆ«ï¼Œä½†æ˜¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼ŒåŸºæœ¬æˆåˆ†ä¸å¤–å››ç§ï¼š æ•°æ®ï¼Œ ç”¨ä»¥æè¿°ç¨‹åºä¸­æ‰€æ¶‰åŠçš„æ•°æ® ï¼ˆæ•°æ®ç±»å‹ï¼‰ è¿ç®—ï¼Œç”¨ä»¥æè¿°ç¨‹åºä¸­æ‰€åŒ…å«çš„è¿ç®—ï¼›ï¼ˆè¿ç®—ç¬¦ï¼‰ æ§åˆ¶ï¼Œç”¨ä»¥è¡¨è¾¾ç¨‹åºä¸­çš„æ§åˆ¶æ„é€ ï¼›ï¼ˆä¸‰ç§ç±»å‹çš„æ§åˆ¶è¯­å¥æ˜¯å¦‚ä½•å†™çš„ï¼Œé¡ºåºï¼Œåˆ†æ”¯ï¼Œå¾ªç¯ï¼‰ IOï¼Œç”¨ä»¥è¡¨è¾¾ç¨‹åºä¸­æ•°æ®çš„ä¼ è¾“ï¼› ï¼ˆå¦‚ä½•è¾“å…¥å’Œè¾“å‡ºæ•°æ®ï¼‰ 1.3 å¤§çº² åŸºæœ¬æ¦‚å¿µ æ•°æ®ç±»å‹ï¼Œè¿ç®—ç¬¦ï¼Œè¡¨è¾¾å¼ IO æµç¨‹æ§åˆ¶ï¼ˆé¡ºåºï¼Œåˆ†æ”¯ï¼Œå¾ªè½¬ï¼‰ æ•°ç»„ æŒ‡é’ˆ å‡½æ•° æ„é€ ç±»å‹ åŠ¨æ€å†…å­˜ç®¡ç† è°ƒè¯•å·¥å…·ï¼Œï¼ˆgdbï¼Œmakeï¼‰ å¸¸ç”¨åº“å‡½æ•° 2. åŸºæœ¬æ¦‚å¿µ æŠŠå†…å­˜æƒ³è±¡æˆä¸€ä¸ªé•¿é•¿çš„å¸¦å­,å¸¦å­ä¸Šé¢æœ‰å¾ˆå¤šå°æ–¹æ ¼ï¼Œæ¯ä¸ªæ ¼å­éƒ½æ˜¯ä¸€ä¸ªå­—èŠ‚ï¼ˆå­˜å‚¨å•å…ƒï¼‰ã€‚æ¯ä¸ªå°æ–¹æ ¼éƒ½æœ‰å®ƒå¯¹åº”çš„åœ°å€ï¼Œæ¯ä¸ªå­—èŠ‚ï¼ˆå•å…ƒï¼‰æœ‰å…«ä½ï¼Œ1Bï¼ˆbyteï¼‰ = 8bï¼ˆbitï¼‰æ¯ä¸€ä¸ªä½å­˜å‚¨ä¸€ä¸ªäºŒè¿›åˆ¶çš„æ•°ã€‚ 2.1 å˜é‡ä¸å¸¸é‡2.1.1 å¸¸é‡ åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å€¼ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„é‡ï¼Œæ•°ç»„åæ˜¯ä¸€ä¸ªå…¸å‹çš„å¸¸é‡ï¼Œä¸€æ—¦æ•°ç»„å®šä¹‰äº†ï¼Œgccä¸ºå½“å‰çš„æ•°ç»„åˆ†é…äº†ä¸€æ®µç©ºé—´äº†ã€‚ç„¶åæ•°ç»„çš„ä½ç½®å°±å®šæ­»äº†ã€‚æ•°ç»„åå°±æ˜¯ä¸€ä¸ªæ•°ç»„çš„èµ·å§‹ä½ç½®ã€‚æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå¦‚æœä½ åœ¨=å·¦è¾¹å†™ä¸Šä¸€ä¸ªå¸¸é‡ï¼Œå°±è¡¨ç¤ºä¼å›¾æ›´æ”¹ä¸€ä¸ªå¸¸é‡çš„å€¼ï¼›æ¯”å¦‚1=f ï¼Œæ˜¾ç„¶ä¸æˆç«‹ï¼› å¸¸é‡çš„åˆ†ç±» æ•´å‹å¸¸é‡ å®å‹å¸¸é‡ 3.14, 5.26; å­—ç¬¦å¸¸é‡ ç”±å•å¼•å·å°èµ·æ¥çš„å•ä¸ªå­—ç¬¦æˆ–è€…è½¬ä¹‰å­—ç¬¦ï¼Œå¦‚â€™aâ€™ è½¬ä¹‰å­—ç¬¦ï¼š â€˜\\nâ€™, â€˜\\râ€™, â€˜\\tâ€™ ï¼Œâ€™\\015â€™(å…«è¿›åˆ¶æ•°)ï¼Œ â€˜\\x7fâ€™(åå…­è¿›åˆ¶æ•°) å­—ç¬¦ä¸²å¸¸é‡ ç”±åŒå¼•å·å°èµ·æ¥çš„ä¸€ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ç»„æˆçš„åºåˆ—ï¼Œå¦‚: â€œâ€(ç©ºä¸²) ä¸€ä¸ªå­—ç¬¦ä¸²åœ¨å­˜å‚¨çš„æ—¶å€™ï¼Œæœ€æœ«å°¾ä¼šæœ‰ä¸€ä¸ªç»“æŸæ ‡è®°ï¼Œé€šå¸¸ç§°ä½œå°¾0\\0.æ‰€ä»¥&quot;&quot;æ˜¯å ç©ºé—´çš„ï¼Œç©ºå­—ç¬¦å ä¸€ä¸ªå­—èŠ‚çš„ç©ºé—´ï¼› åˆæ³•çš„å­—ç¬¦ä¸² ï¼ˆâ€â€, â€œaâ€, â€œabXYZâ€ï¼‰ æš‚æ—¶ä¸ç¡®å®šæ˜¯å¦åˆæ³•çš„å­—ç¬¦ ï¼ˆâ€abc\\n\\021\\018â€) å› ä¸º\\018ä¸æ˜¯å…«è¿›åˆ¶ï¼Œå› ä¸ºå‡ºç°äº†8ï¼Œè€Œæˆ‘ä»¬çŸ¥é“\\0æ˜¯å­—ç¬¦ä¸²æ•°ç»„çš„æœ«å°¾ã€‚æ‰€ä»¥\\0åˆ°åº•èƒ½å¦æ’å…¥è¿›å­—ç¬¦ä¸²ä¸­é—´ï¼Œè¿™ä¸ªéœ€è¦åç»­å­—ç¬¦æ•°ç»„ä¸“é¢˜æ­ç§˜ï¼› å­—ç¬¦ä¸²å¸¸é‡éœ€è¦å€ŸåŠ©æ„é€ ç±»å‹â€”â€”æ•°ç»„æ¥ä¿å­˜ &#39;a&#39;å’Œ&quot;a&quot;çš„åŒºåˆ«ï¼šå‰è€…æ˜¯å­—ç¬¦å¸¸é‡ï¼Œåè€…æ˜¯å­—ç¬¦ä¸²å¸¸é‡ã€‚ æ ‡è¯†å¸¸é‡ #defineï¼Œ ç¨‹åºä¸­ä¸€æ”¹å…¨æ”¹ #define PI 3.14ï¼Œåœ¨ç¨‹åºé¢„å¤„ç†ä¹‹åï¼Œå®åè¢«å®ä½“å®Œæ•´çš„æ›¿æ¢ï¼›define ADD 2+3 ADD*ADD = 2+3*2+3è€Œä¸æ˜¯(2+3)*(2+3)ã€‚ #defineï¼Œå¤„ç†åœ¨ç¨‹åºçš„é¢„å¤„ç†é˜¶æ®µï¼Œå ç¼–è¯‘æ—¶é—´ã€‚ä¸å è¿è¡Œæ—¶é—´ã€‚ä¸€æ”¹å…¨æ”¹ï¼›ç¼ºç‚¹ï¼š ä¸æ£€æŸ¥è¯­æ³•ï¼Œåªæ˜¯å•çº¯çš„å®ä½“ä¸å®åä¹‹é—´çš„æ›¿æ¢ï¼› å¸¦å‚æ•°çš„#define 1234567891011121314151617#define MAX(a, b) a&gt;b?a:bint main() &#123; int i, j; i = 5; j=3; printf(\"/d\\n\", MAX(i, j)); exit(0);&#125;// gcc -E define.c int main() &#123; int i, j; i = 5; j=3; printf(\"/d\\n\", (i&gt;j?i:j)); exit(0);&#125; ä¸€ä¸ªç‰¹æ®Šé—®é¢˜çš„è§£å†³æ–¹å¼ 12345678910111213141516171819#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define MAX(a, b) ((a) &gt; (b) ? (a) : (b))int max(int a, int b)&#123;return a&gt;b?a:b;&#125;int main()&#123; int i = 5; int j = 3; printf(\"max = %d\\n\", MAX(i++, j++)); printf(\"i=%d\\tj=%d\\n\", i, j); exit(0);&#125;((i++) &gt; (j++) ? (i++) : (j++))// max = 6// i=7 j=4 é¦–å…ˆï¼Œmaxå’ŒMAXçš„åŒºåˆ«ï¼ŒMAXåªå ç”¨é¢„ç¼–è¯‘æ—¶é—´ï¼Œç­‰è¿è¡Œçš„æ—¶å€™ï¼Œå®é™…ä¸Šå·²ç»å°†æ‰€æœ‰å®ä½“æ›¿æ¢åˆ°ç¨‹åºä¸­å»äº†ã€‚ä¸ä¼šå†éœ€è¦é¢å¤–çš„æ—¶é—´äº†ã€‚è€Œmaxåˆ™ä¸åŒï¼Œåœ¨å‡½æ•°çš„è°ƒç”¨ä½ç½®ï¼Œå¯¹å½“å‰çš„ä¸€ä¸ªæ‰§è¡Œç°åœºåšä¸€ä¸ªå‹æ ˆä¿å­˜ã€‚ç„¶åå»åˆ°æŒ‡å®šçš„å‡½æ•°å»æ‰§è¡Œã€‚ï¼ˆè·³å¾€å¦å¤–ä¸€ä¸ªå…¥å£åœ°å€ï¼‰ç„¶åå†å›æ¥ï¼Œå¼¹æ ˆæ¢å¤å½“å‰ç°åœºçš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹ å ç”¨äº†è¿è¡Œçš„æ—¶é—´ï¼› ä»€ä¹ˆæ—¶å€™ç”¨å®ï¼Œä»€ä¹ˆæ—¶å€™ç”¨å‡½æ•°ï¼Ÿåœ¨éœ€è¦æè‡´æ€§èƒ½çš„åœºæ™¯ç”¨å®ï¼Œå‰ææ˜¯å®èƒ½æ»¡è¶³ï¼›æ¯”å¦‚å†…æ ¸ã€‚åœ¨åº”ç”¨å±‚é¢ï¼Œç³»ç»Ÿå±‚é¢ï¼Œå¤šç”¨å‡½æ•°ã€‚å› ä¸ºåº”ç”¨å±‚è¦æ±‚æ›´é«˜çš„æ˜¯ç¨³å®šæ€§ï¼Œè€Œéå®æ—¶æ€§ã€‚ è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦æ‰¾ä¸€ä¸ªå˜é‡æ¥æ¥å—ï¼›è€Œä¸æ˜¯è®©å…¶ç»§ç»­åšåŠ è¿ç®—ï¼› 1234567891011121314#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define MAX(a, b) (&#123;typeof(a) A = a, B = b;((A) &gt; (B) ? (A) : (B)); &#125;)// typeof(a) ç”¨açš„ç±»å‹å®šä¹‰Aï¼Œå°±å¾ˆçµæ€§äº†ã€‚æœ‰ç‚¹æ³›å‹çš„æ„æ€äº†ï¼›int main()&#123; int i = 5; int j = 3; printf(\"max = %d\\n\", MAX(i++, j++)); printf(\"i=%d\\tj=%d\\n\", i, j); exit(0);&#125;// max = 5// i=6 j=4 2.1.2 å˜é‡ ç”¨æ¥ä¿å­˜ä¸€äº›ç‰¹å®šå†…å®¹ï¼Œå¹¶ä¸”åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å€¼éšæ—¶ä¼šå‘ç”Ÿå˜åŒ–çš„é‡ï¼› å½“è®¡ç®—æœºæ‰§è¡Œåˆ° int max=0 è¿™å¥ç¨‹åºæ—¶ï¼Œè®¡ç®—æœºä¼šåœ¨å†…å­˜é‡Œé¢æ‰¾åˆ°ä¸€ç‰‡å­˜å‚¨ç©ºé—´ï¼ˆå‡ ä¸ªè¿ç»­çš„å­˜å‚¨å•å…ƒï¼‰ï¼Œç„¶åç»™è¯¥ç‰‡å­˜å‚¨ç©ºé—´å–ä¸ªåå­—å« Maxï¼Œ å†æŠŠ 0 è¿™ä¸ªåˆå§‹å€¼æ”¾åœ¨è¿™ä¸ªå­˜å‚¨ç©ºé—´ä¸­æ¥ã€‚å¹¶è®°ä¸‹è¿™ä¸ªåå­—ï¼ˆMaxï¼‰å’Œè¿™ç‰‡è¿ç»­çš„å­˜å‚¨ç©ºé—´çš„èµ·å§‹çš„åœ°å€ä¹‹é—´çš„å¯¹åº”å…³ç³» å®šä¹‰ï¼š [å­˜å‚¨ç±»å‹] æ•°æ®ç±»å‹ æ ‡è¯†ç¬¦ = å€¼ TYPE NAME = VALUE; å­˜å‚¨ç±»å‹ å¯é€‰ 2.1.2.1 æ ‡è¯†ç¬¦å½“å®šä¹‰ä¸€ä¸ªæŸç§ç±»å‹çš„æ ‡è¯†ç¬¦çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šä¸ºå½“å‰çš„å€¼åˆ†é…ä¸€å—å†…å­˜ç©ºé—´ï¼›å¦‚ä½•ç§°å‘¼è¿™å—ç©ºé—´ï¼Œå°±æ˜¯æˆ¿é—´å·ã€‚æˆ¿é—´å·å°±æ˜¯æ ‡è¯†ç¬¦ã€‚ç¼–è¯‘å™¨ä¼šç»™æ ‡è¯†ç¬¦ï¼ˆæˆ¿é—´å·ï¼‰å’Œå†…å­˜åœ°å€æ ‡è¯†åšå…³è”ã€‚å½“æœç´¢å˜é‡åçš„æ—¶å€™ï¼Œç¼–è¯‘å™¨çŸ¥é“è¦å»åˆ°å“ªå—å†…å­˜åœ°å€å»æœç´¢ï¼›ç®€å•è¯´ï¼Œæ ‡è¯†ç¬¦å°±æ˜¯è¿™å—ç©ºé—´çš„ä¸´æ—¶åˆ«åï¼› 2.1.3 å­˜å‚¨ç±»å‹ auto, static register extern(è¯´æ˜å‹) 2.1.3.1 auto é»˜è®¤ï¼Œè‡ªåŠ¨åˆ†é…ç©ºé—´ï¼Œè‡ªåŠ¨å›æ”¶ç©ºé—´ autoç±»å‹åˆ†é…åœ¨æ ˆä¸Šï¼Œå †ä¸»è¦æ˜¯æ¥è¿›è¡ŒåŠ¨æ€å†…å­˜åˆ†é…çš„ç©ºé—´ï¼›å †æ ˆä¸æŒ¨ç€ 12345678910int main ()&#123; auto int i; // åŸåˆ™ä¸Šä¸ä¼š å¯¹ iæ‰€åœ¨è¿™å—ç©ºé—´è¿›è¡Œåˆå§‹åŒ– int j; printf(\"i = %d\\n\", i); // éšæœºçš„ç»“æœï¼Œå½“ç„¶æœ‰çš„ç¼–è¯‘å™¨ä¼šç½®ä¸º0 printf(\"j= %d\\n\", j); // 0 ç¼–è¯‘å™¨ä¼šåˆå§‹åŒ–ä¸º0 exit(0);&#125; 123456789101112131415161718192021void func(void)&#123; int x =0; x = x+1; printf(\"%p-&gt;%d\\n\", &amp;x, x);&#125;int main()&#123; func(); func(); func();&#125;// 0x7ffee6b3c928-&gt;1// 0x7ffee6b3c928-&gt;1// 0x7ffee6b3c928-&gt;1/**è¯´æ˜ï¼š è¿™ä¸‰ä¸ªåœ°å€æœªå¿…ä¸€è‡´ï¼Œä½†ä¸€è‡´çš„åŸå› æ˜¯ autoç±»å‹çš„å˜é‡éƒ½å­˜æ”¾åœ¨æ ˆä¸Šï¼Œæ ˆä¸Šçš„ç©ºé—´æŒ‰æ­£å¸¸ç†è®ºæ¥è®²ï¼Œå®ƒå®é™…ä¸Šæ˜¯è¿ç»­åˆ†é…çš„ã€‚è€Œå½“å‰xåœ¨ funcå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œå®ƒæ‰ä¼šè¢«äº§ç”Ÿã€‚ç„¶ååœ¨å½“å‰å‡½æ•°æ‰§è¡Œç»“æŸçš„æ—¶å€™ï¼Œè¿™å—ç©ºé—´è¢«é‡Šæ”¾æ‰äº†ã€‚*/ 2.1.3.2 register å»ºè®®å‹å…³é”®å­—ï¼› å¯„å­˜å™¨ç±»å‹ï¼Œèµ„æºå°‘ï¼Œé€Ÿåº¦å¿«ï¼Œå¯„å­˜å™¨å­˜æ”¾åœ¨CPUå½“ä¸­ï¼Œå¯„å­˜å™¨çš„æ•°æ®æ¯”è¾ƒåƒç´§ï¼Œ 1register int i =1; // é™¤éiåœ¨ç¨‹åºä¸­ï¼Œè¶…é«˜é¢‘ç‡è¢«ä½¿ç”¨ï¼Œæ‰å»ºè®®ç¼–è¯‘å™¨å°†iåˆ†é…åˆ°å¯„å­˜å™¨ä¸­ï¼›è‡³äºæœ‰æ²¡æœ‰è¢«æ”¾åˆ°å¯„å­˜å™¨ä¸­ï¼Œç”±gccæ¥å†³å®šï¼› registerçš„è‹›åˆ»æ¡ä»¶ï¼› åªèƒ½å®šä¹‰å±€éƒ¨å˜é‡ï¼Œä¸èƒ½å®šä¹‰å…¨å±€å˜é‡ï¼› å¤§å°æœ‰é™åˆ¶ï¼Œåªèƒ½å®šä¹‰ 32 ä½å¤§å°çš„æ•°æ®ç±»å‹ï¼Œå¦‚double å°±ä¸å¯ä»¥ å¯„å­˜å™¨ä¸­æ²¡æœ‰åœ°å€ï¼Œæ‰€ä»¥ä¸€ä¸ªå¯„å­˜å™¨ç±»å‹å˜é‡æ— æ³•æ‰“å°å‡ºåœ°å€æŸ¥çœ‹æˆ–è€…ä½¿ç”¨ï¼› 2.1.3.3 static é™æ€å‹ï¼Œè‡ªåŠ¨åˆå§‹åŒ–ä¸º0å€¼æˆ–ç©ºå€¼ï¼Œå¹¶å€¼å…¶å˜é‡çš„å€¼æœ‰ç»§æ‰¿æ€§ï¼ˆç»§æ‰¿æ€§æŒ‡çš„çš„staticåœ¨å†…å­˜ä¸­åªæ­¤ä¸€ä»½ï¼Œæ‰€ä»¥ä¸‹æ¬¡ä½¿ç”¨çš„æ—¶å€™è¿˜æ˜¯åŸºäºä¸Šä¸€æ¬¡çš„å€¼ï¼Œè€Œä¸ä¼šè¢«åˆå§‹åŒ–ï¼‰ã€‚å¦å¤–ï¼Œå¸¸ç”¨äºä¿®é¥°å˜é‡æˆ–å‡½æ•° 1234567891011121314151617181920void func(void)&#123; static int x =0; x = x+1; printf(\"%p-&gt;%d\\n\", &amp;x, x);&#125;int main()&#123; func(); func(); func();&#125;// 0x10c4b1018-&gt;1// 0x10c4b1018-&gt;2// 0x10c4b1018-&gt;3/**è¯´æ˜ï¼š staticç±»å‹çš„å˜é‡ï¼Œåªç”¨ä¸€å—ç©ºé—´ã€‚*/ static ä¿®é¥°å‡½æ•°ï¼š é˜²æ­¢è¯¥å‡½æ•°å¯¹å¤–æ‰©å±•ï¼Œï¼ˆç®€å•è¯´å°±æ˜¯è¯¥å‡½æ•°åªèƒ½åœ¨å½“å‰æ–‡ä»¶ä¸‹ä½¿ç”¨ï¼Œåœ¨åˆ«çš„æ–‡ä»¶ä¸‹æ²¡æ³•ä½¿ç”¨ï¼›ï¼‰ 123456789static void func(void)&#123; printf(\"hello func\");&#125;void call_func() // å¤–ç•Œå¯ä»¥é€šè¿‡ call_func è¿™ä¸ªæ¡¥æ¢å‡½æ•°æ¥å¼•ç”¨ func&#123; func()&#125; ä¸€èˆ¬æ¥è¯´å…¨å±€å˜é‡éƒ½è¦ä¿®é¥°æˆstaticï¼Œé˜²æ­¢è·Ÿåˆ«çš„.cæ–‡ä»¶ä¸­åŒåå˜é‡å†²çªã€‚ç„¶åç”¨staticæ¥ä¿®é¥°å‡½æ•°ï¼Œä¸ºçš„æ˜¯å¼ºè°ƒå½“å‰å‡½æ•°ä¸å¯å¤–æ‰©ï¼Œï¼ˆè¯¥å‡½æ•°åªèƒ½åœ¨å½“å‰æ–‡ä»¶ä½¿ç”¨ï¼Œåˆ«çš„æ–‡ä»¶ä¸‹æ²¡æ³•ä½¿ç”¨ï¼‰ 2.1.3.4 extern è¯´æ˜å‹ï¼Œ æ„å‘³ç€ä¸èƒ½æ”¹å˜è¢«è¯´æ˜çš„å˜é‡çš„å€¼æˆ–ç±»å‹ï¼› 12345678910111213141516171819202122// proj.hvoid func(void);// main.cint i =10;int main()&#123; printf(\"%d\\n\", i); func(); exit(0);&#125;// proj.c#include \"proj.h\"extern int i; // æˆ‘çš„iä¸æ˜¯è‡ªå·±å®šä¹‰çš„ï¼Œæ˜¯å¼•ç”¨å…¶ä»–æ–‡ä»¶é‡Œé¢çš„iï¼Œç¼–è¯‘å™¨è‡ªå·±å»æ‰¾ï¼Œexternä¸èƒ½æ”¹å˜å£°æ˜çš„ç±»å‹å’Œå€¼ï¼›void func(void)&#123; printf(\"%d\\n\", i); exit(0);&#125; 2.1.4 å˜é‡çš„ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨èŒƒå›´ï¼ˆå³ä½œç”¨åŸŸï¼‰ å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ å±€éƒ¨å˜é‡å’Œå±€éƒ¨å˜é‡ å‚è€ƒå›¾ç‰‡ 3. Cç¨‹åº3.1 ç¨‹åºè§„èŒƒ ä»¥helleworldä¸ºä¾‹å¯¹å†™ç¨‹åºçš„æ€è·¯æå‡ºå¦‚ä¸‹è¦æ±‚: 123456789101112#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;//void main(void);//void main(int argc, char **argv); // char * argv[]//int main(int argc, char **argv);//int main(void);void main()&#123; printf(\"hello c!\\n\"); exit(0);&#125; å¤´æ–‡ä»¶æ­£ç¡®åŒ…å«çš„é‡è¦æ€§ï¼› çŸ¥é“ç¨‹åºä¸­çš„æ‰€æœ‰è­¦å‘Šgcc file.c -Wall å¦‚ä½•è°ƒè¯•æ®µé”™è¯¯ï¼Œå…ˆæŠŠç¨‹åºä¸­çš„æ‰€æœ‰è­¦å‘Šè°ƒå¥½ï¼› ä»¥å‡½æ•°ä¸ºå•ä½æ¥è¿›è¡Œç¨‹åºç¼–å†™ï¼› å£°æ˜éƒ¨åˆ† å’Œ å®ç°éƒ¨åˆ†ï¼ˆå˜é‡å…ˆå®šä¹‰ï¼Œåä½¿ç”¨ï¼‰ return 0 ï¼ˆexit(0) åœ¨å•è¿›ç¨‹å•çº¿ç¨‹çš„ç¨‹åºä¸­ å’Œ return 0æ„ä¹‰ä¸€æ ·çš„ï¼Œexit(0)æ˜¯ç»™å®ƒçˆ¶è¿›ç¨‹çœ‹çš„ï¼Œå½“å‰mainå‡½æ•°çš„çˆ¶è¿›ç¨‹æ˜¯shellï¼‰ å¤šç”¨ç©ºæ ¼ç©ºè¡Œ æ·»åŠ æ³¨é‡Š 1echo $? # ä¸Šä¸€æ¡è¯­å¥æ‰§è¡Œçš„çŠ¶æ€ 3.2 æ³¨é‡Š #if #endif æ³¨é‡Š 12345#if(0)int main()&#123; return 0;&#125;#endif 3.3 ç¼–è¯‘12#gcc hello.c.c -&gt; .out gccè¿‡ç¨‹(cæºæ–‡ä»¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶éœ€è¦ç»è¿‡çš„é¡ºåº) cæºæ–‡ä»¶ - é¢„å¤„ç† - ç¼–è¯‘ - æ±‡ç¼– - é“¾æ¥ - å¯æ‰§è¡Œæ–‡ä»¶ é¢„å¤„ç† gcc -E hello.c &gt; hello.i (é¢„å¤„ç†hello.cï¼Œä¿å­˜è‡³ hello.i æ–‡ä»¶)ä»¥#å¼€å¤´çš„è¯­å¥éƒ¨åˆ†éƒ½æ˜¯åœ¨é¢„å¤„ç†é˜¶æ®µè§£å†³æ‰çš„ï¼›`include`æˆ–è€… `if define` ç¼–è¯‘é˜¶æ®µgcc -S hello.i (ç¼–è¯‘hello.i)é»˜è®¤ä¼šç”Ÿæˆä¸€ä¸ª .sæ–‡ä»¶ï¼Œç¼–è¯‘æˆæ±‡ç¼–æ–‡ä»¶ï¼› æ±‡ç¼–é˜¶æ®µgcc -c hello.sç”Ÿæˆä¸€ä¸ª .oæ–‡ä»¶ï¼› é“¾æ¥é˜¶æ®µgcc hello.o -o hello (é“¾æ¥.oæ–‡ä»¶ ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ hello)ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶hello; 3.3.1 Cç¼–è¯‘123gcc -o test test.c # æŠŠtest.c ç¼–è¯‘æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ testgcc hello.c -Wall # æ˜¾ç¤ºç¼–è¯‘è­¦å‘Šï¼ŒåŸåˆ™ä¸Šç¼–ç è¿‡ç¨‹å½“ä¸­æŠŠç¨‹åºè°ƒåˆ°æ²¡æœ‰è­¦å‘Šä¸ºæ­¢ï¼›./test # æ‰§è¡Œ test 3.3.2 å¤šä¸ª.cæ–‡ä»¶ main() é‡Œçš„ä»£ç å¤ªé•¿äº† é€‚åˆåˆ†æˆå‡ ä¸ªå‡½æ•° ä¸€ä¸ªæºæ–‡ä»¶å¤ªé•¿é€‚åˆåˆ†æˆå‡ ä¸ªæ–‡ä»¶ ä¸¤ä¸ªç‹¬ç«‹çš„æºæ–‡ä»¶ä¸èƒ½ç¼–è¯‘å½¢æˆå¯æ‰§è¡Œçš„ç¨‹åº 3.3.3 å¤´æ–‡ä»¶ æŠŠå‡½æ•°åŸå‹æ”¾åœ¨ä¸€ä¸ªå¤´æ–‡ä»¶ï¼ˆä»¥.hç»“å°¾ï¼‰ä¸­ï¼Œåœ¨éœ€è¦è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æºä»£ç æ–‡ä»¶(.cæ–‡ä»¶)ä¸­ #include è¿™ä¸ªå¤´æ–‡ä»¶ï¼Œå°±èƒ½è®©ç¼–è¯‘å™¨åœ¨ç¼–è¯‘çš„æ—¶å€™çŸ¥é“å‡½æ•°çš„åŸå‹ 12# main.c max.c max.hgcc main.c max.c 4. æ•°æ®ç±»å‹ ä¸åŒæ•°æ®ç±»å‹æ‰€å å­—èŠ‚æ•° å­˜å‚¨åŒºåˆ« ä¸åŒç±»å‹çš„æ•°æ®é—´è½¬æ¢ ç‰¹æ®Šæ€§ï¼š 4.1 åŸºæœ¬ç±»å‹ æ•°å€¼ç±»å‹ æ•´å‹ çŸ­æ•´å‹ short ï¼ˆ2ä¸ªå­—èŠ‚ï¼Œ16ä½ï¼‰ æ•´å‹ int ï¼ˆ4ä¸ªå­—èŠ‚ï¼Œ32ä½ï¼‰ é•¿æ•´å‹ long ï¼ˆ4ä¸ªå­—èŠ‚ï¼Œ32ä½ï¼‰ æµ®ç‚¹å‹ å•ç²¾åº¦å‹ float ï¼ˆ4ä¸ªå­—èŠ‚ï¼Œ32ä½ï¼‰ åŒç²¾åº¦å‹ double ï¼ˆ8ä¸ªå­—èŠ‚ï¼Œ64ä½ï¼‰ å­—ç¬¦ç±»å‹ char ï¼ˆ1ä¸ªå­—èŠ‚ï¼Œ8ä½ï¼‰ 4.1.1 æ•´å½¢å­˜å‚¨æ•´å‹çš„å­˜å‚¨éƒ½æ˜¯ä»¥è¡¥ç çš„å½¢åŠ¿æ¥å­˜å‚¨çš„ è¡¥ç ï¼šæ­£æ•°çš„è¡¥ç æ˜¯å®ƒäºŒè¿›åˆ¶æœ¬èº«ï¼Œè´Ÿæ•°çš„è¡¥ç æ˜¯å®ƒç»å¯¹å€¼çš„é‚£ä¸ªæ•°çš„äºŒè¿›åˆ¶å½¢å¼å–åå†åŠ 1çš„ç»“æœï¼› 254 -&gt; unsigned int(æ— ç¬¦å· int) -&gt; 32ä½ -254 -&gt; 254-&gt; 1111 1110 å–å +1 æœ‰æ— ç¬¦å·çš„åŒºåˆ«ï¼Œæœ€é«˜ä½åˆ°åº•ä»£è¡¨æ˜¯ç¬¦å·è¿˜æ˜¯æ­£å¸¸æœ‰æ•ˆå€¼ï¼›æœ‰ç¬¦å·çš„è¯ï¼Œä¸º0è¡¨ç¤ºæ­£æ•°ï¼Œä¸º1è¡¨ç¤ºè´Ÿæ•°ï¼› (254)10 =&gt; (11111110)2 æ–¹æ³•ï¼š é™¤2å–ä½™å€’åºæ’åˆ—ï¼›ï¼ˆè½¬2è¿›åˆ¶ï¼‰11111110 é™¤8å–ä½™å€’åºæ’åˆ—ï¼›ï¼ˆè½¬8è¿›åˆ¶ï¼‰376 é™¤16å–ä½™å€’åºæ’åˆ—ï¼›ï¼ˆè½¬16è¿›åˆ¶ï¼‰ FEè¿›åˆ¶è¡¨ç¤º 254 åè¿›åˆ¶ B11111110 äºŒè¿›åˆ¶ 0376 å…«è¿›åˆ¶ 0xFE åå…­è¿›åˆ¶ 4.1.2 æµ®ç‚¹å‹å­˜å‚¨12343.14 * 10^00.314 * 10^10.0314 * 10^2314 * 10^-2 æµ®ç‚¹æ•°æ˜¯ä»¥0.314 * 10^1çš„æ–¹å¼æ¥å­˜å‚¨3.14çš„ æ•´æ•°éƒ¨åˆ†ä¸º0ï¼Œåªæ˜¯åœ¨æ„ç²¾åº¦éƒ¨åˆ†æ˜¯å¤šå°‘ã€‚ç„¶ååœ¨æ„æŒ‡æ•°éƒ¨åˆ†æ˜¯å¤šå°‘ã€‚ æµ®ç‚¹æ•°åœ¨32 ä¸ªbitä¸Šæ˜¯å¦‚ä½•å­˜æ”¾çš„0ï½22ä½ï¼ˆå…±23ä¸ªbitï¼‰ç”¨æ¥è®°å½•ç²¾åº¦éƒ¨åˆ†ã€‚ 22ä½ï½30ä½ï¼ˆå…±8ä¸ªbitï¼‰ ç”¨æ¥å­˜å‚¨çš„æ˜¯æŒ‡æ•°éƒ¨åˆ†ã€‚æœ€é«˜ä½ï¼ˆç¬¬31ä½ï¼‰ è¡¨ç¤ºçš„æ˜¯ç¬¦å·ä½ç½®ï¼Œè¡¨ç¤ºæ˜¯æ­£æ•°è¿˜æ˜¯è´Ÿæ•°ï¼› ä¸¾ä¾‹ 0.000789 -&gt; 0.789 -&gt; 10^3 ç²¾åº¦éƒ¨åˆ†å­˜å‚¨ 789çš„äºŒè¿›åˆ¶å½¢å¼ï¼Œ8ä¸ªä½å­˜å‚¨3 float 32ä½ double 64ä½ ï¼Œæ¯”floatå¤šå‡ºæ¥çš„32ä½å®Œå…¨æ”¾åœ¨ç²¾åº¦çš„æ§åˆ¶ä¸Š 4.1.3 charå­˜å‚¨ char 8ä½ã€‚ -128ï½127 unsigned char 8ä½ã€‚ 0ï½255 4.1.4 ä¸åŒç±»å‹çš„æ•°æ®é—´è½¬æ¢4.1.4.1 ç²¾åº¦ä¸¢å¤±12float f = 3.9;int i = f; // 4 4.1.4.2 éšå¼è½¬æ¢ç¼–è¯‘å™¨é»˜è®¤åšçš„ 12345678int i;char ch;float f;double d;ch + i --&gt; i // é»˜è®¤å¾€ç²¾åº¦é«˜ï¼Œæˆ–è€…æ‰€å å­—èŠ‚é•¿æ¯”è¾ƒé«˜çš„é‚£ä¸€ç§æ•°æ®ç±»å‹å»é æ‹¢çš„f -d --&gt; d // ç²¾åº¦é«˜çš„ double(ch + i) - (float - double) --&gt; double 4.1.4.3 æ˜¾å¼è½¬æ¢å¼ºåˆ¶ç±»å‹è½¬æ¢ 4.1.4.4 ç‰¹æ®Šæ€§ï¼š å¸ƒå°”å‹bool floatç±»å‹ï¼› 1.0/3*3 ï¼= 1 charå‹æ˜¯å¦æœ‰ç¬¦å·ï¼Œä¸çŸ¥é“ï¼Œä¸€ä¸ªæœªå®šä¹‰çš„è¡Œä¸º ä¸åŒå½¢å¼çš„0å€¼ï¼› 12340;'0';\"0\";'\\0'; æ•°æ®ç±»å‹ä¸åç»­ä»£ç ä¸­æ‰€ä½¿ç”¨çš„è¾“å…¥è¾“å‡ºè¦ç›¸åŒ¹é…ï¼ˆé˜²æ­¢è‡ªç›¸çŸ›ç›¾ï¼‰ 4.2 æ„é€ ç±»å‹ æ•°ç»„ ç»“æ„ä½“ struct å…±ç”¨ä½“ union æšä¸¾ç±»å‹ enum 4.2.1 enum*è¯­æ³•: * 1234enum æ ‡è¯†ç¬¦&#123; æˆå‘˜1,&#125; 123456789101112131415enum day&#123; MON, //é»˜è®¤ä»0 å¼€å§‹å¾€ä¸‹æ’ TUS, THR, WES, FRI = 1, // å¦‚æœç»™FRIèµ‹å€¼ä¸º1çš„è¯ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥ä¼šä»1ç»§ç»­æ’ SAT, SUN&#125;int main () &#123; enum day a = FRI; printf(\"%d\\n\", a); // 5&#125; *æŠŠenumå½“å®ä½¿ç”¨: * 12345678910111213141516171819202122232425262728293031323334enum &#123; STATE_RUNNING = 1, STATE_CANCELED, STATE_OVER&#125;;struct time_t &#123;&#125;;struct job_st&#123; int id; int state; char start; char end;&#125;;int main() &#123; struct job_st job1; // job1.state = STATE_CANCELED; switch (job1.state) &#123; case STATE_CANCELED: break; case STATE_OVER: break; case STATE_RUNNING: break; default: abort(); // ä¿¡å·ï¼Œæ“ä½œç³»ç»Ÿåç»­ä¼šè®² &#125; return 0;&#125; *è¿™ç§åœºæ™¯å¯ä»¥ç”¨ enumä»£æ›¿å®çš„ä½¿ç”¨: * å› ä¸ºå®ç»è¿‡é¢„ç¼–è¯‘ä¹‹åè¢«æ›¿æ¢æ‰äº†ï¼Œå®çš„éƒ¨åˆ†ä¼šè¢«æ›¿æ¢ã€‚å½±å“è°ƒè¯•ã€‚å½“ç„¶enumä¸æ˜¯ä¸‡èƒ½ï¼Œå¹¶ä¸èƒ½æ›¿ä»£å®ï¼›å®è¿˜å¯ä»¥ä¼ é€’å‚æ•° 4.2.2 ç»“æ„ä½“ç±»å‹ ç±»å‹æè¿° 1234struct ç»“æ„ä½“å &#123; æ•°æ®ç±»å‹ æˆå‘˜1; æ•°æ®ç±»å‹ æˆå‘˜2;&#125; ç±»å‹åµŒå¥— 1234567891011121314151617181920212223242526272829struct birthdata_st &#123; int year; int month; int day;&#125;struct student_st&#123; int id; char name[NAMESIZE]; struct birthday_st birth; // åµŒå¥—å®šä¹‰ int math; int chinese;&#125;// æˆ–è€…struct student_st&#123; int id; char name[NAMESIZE]; struct birthdata_st // åµŒå¥—å®šä¹‰ &#123; int year; int month; int day; &#125;birth; int math; int chinese;&#125; å®šä¹‰å˜é‡ï¼ˆå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆï¼‰ï¼Œåˆå§‹åŒ–åŠæˆå‘˜å¼•ç”¨ï¼› 12345struct student &#123; // student ä¸æ˜¯å˜é‡åè€Œæ˜¯ç±»å‹ int id; char name[20] .....&#125;; æˆå‘˜å¼•ç”¨ï¼š å˜é‡å.æˆå‘˜å æŒ‡é’ˆå-&gt;æˆå‘˜å 1234567891011121314151617181920212223#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;struct simp_st&#123; /* data */ int bigint; float mfloat; char name;&#125;;int main()&#123; struct simp_st a = &#123; 123, 456.789, 'a'&#125;; a.bigint = 333; printf(\"%d, %f, %c\\n\", a.bigint, a.mfloat, a.name); exit(0);&#125; *å®šä¹‰ç»“æ„ä½“å˜é‡çš„æ–¹å¼: * student tudent1,student2;(ç»“æ„ä½“ç±»å‹å) (ç»“æ„ä½“å˜é‡å) 12345struct student &#123; int id; char name[20] .....&#125; lige_1, lige_2; *ç»“æ„ä½“èµ‹å€¼: * 123456789101112int main()&#123; struct student mike = &#123;123, &#123;'m', 'i', 'k', 'e', '\\0'&#125;&#125;; struct student mike2 = mike; // ç»“æ„ä½“èµ‹å€¼ç›¸å½“äºcopyä¸€ä»½ç»™å¯¹æ–¹ mike.id_num = 20130000 + mike.id_num; for (int i = 0; mike2.name[i]!='\\0'; i++) &#123; mike2.name[i] = toupper(mike2.name[i]); printf(\"%d\\n\", mike2.id_num); printf(\"%s\\n\", mike2.name); &#125; return 0;&#125; *ç»“æ„ä½“å†…å­˜ * 12345678struct simp_st &#123; int i; char ch; float f; char ch1;&#125;// çœ‹ä¸Šå»æ˜¯10ä¸ªå­—èŠ‚ï¼Œç»“æœæ‰“å°å‡ºæ¥çš„æ˜¯16ä¸ªå­—èŠ‚ï¼›// åœ°å€å¯¹é½ï¼Œ ç»“æ„ä½“å¯¹é½çš„æ¦‚å¿µï¼› ä¸€ä¸ªå…¬å¼ addressï¼ˆå½“å‰å‡†å¤‡å­˜å‚¨çš„å˜é‡çš„åœ°å€ï¼‰%ï¼ˆä½ å½“å‰è¦å­˜æ”¾å˜é‡çš„sizeOfï¼‰å¦‚æœèƒ½æ•´é™¤çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå˜é‡å°±å­˜æ”¾åœ¨è¿™é‡Œï¼Œå¦‚æœè¿™ä¸ªè¡¨è¾¾å¼ä¸æˆç«‹ï¼Œé‚£ä¹ˆaddresså°±å¾— + 1ï¼› ä¸¾ä¾‹å­è¯´æ˜,é¦–å…ˆä¸‹é¢æ˜¯ä¸€æ®µå†…å­˜ 123456789101112131415161718192021222324252627----------0----------1----------2----------3----------4----------5----------6----------7----------8----------9----------10----------11----------12---------- 1234567// ç›®æ ‡ç»“æ„ä½“struct simp_st &#123; int i; char ch; float f; char ch1;&#125; *è§£é‡Š * é¦–å…ˆå†…å­˜ç¬¬ä¸€ä¸ªåœ°å€çš„å€¼æ˜¯0ï¼Œç»“æ„ä½“çš„ç¬¬ä¸€ä¸ªå±æ€§æ˜¯intï¼Œæˆ‘ä»¬çŸ¥é“intå 4ä¸ªå­—èŠ‚ã€‚0/4 èƒ½æ•´é™¤ï¼Œå› æ­¤ç¬¬ä¸€ä¸ªintå æ®ä»0-3 è¿™ä¸ªå‡ ä¸ªå†…å­˜ä¸­ï¼Œç„¶å charå 1ä¸ªå­—èŠ‚ï¼Œ4/1èƒ½æ•´é™¤ï¼Œå› æ­¤ç¬¬äºŒä¸ªcharå æ®äº†4è¿™ä¸ªå†…å­˜ä¸­ã€‚æ¥ç€ç»“æ„ä½“ç¬¬ä¸‰ä¸ªå±æ€§ä¸ºfloatï¼Œå æ®4ä¸ªå­—èŠ‚ã€‚å†…å­˜åœ°å€5/4æ²¡æ³•æ•´é™¤ï¼Œå½“å‰å†…å­˜++ï¼Œåˆ†åˆ«åˆ°6ï¼Œ7ï¼Œéƒ½æ— æ³•æ•´é™¤4.åˆ°äº†8ï¼Œ8/4èƒ½æ•´é™¤ï¼Œæ‰€ä»¥ï¼Œä»8æ‰“11è¿™ä¸€æ®µå†…å­˜å°±å­˜æ”¾ç€floatè¿™ä¸ªå±æ€§ï¼Œæ¥ä¸‹æ¥åˆæ˜¯char12/1èƒ½æ•´é™¤ï¼Œæ‰€ä»¥charå±æ€§å æ®äº†char12è¿™ä¸ªå†…å­˜åœ°å€ï¼› å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿå†…å­˜å¯¹é½çš„æ–¹å¼æ˜¯ä¸åŒçš„ï¼›å› æ­¤åœ¨socketç¼–ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¼ è¿‡å»çš„ç»“æ„ä½“æ•°æ®åœ¨æœ«ç«¯ä¸€å®šä¸èƒ½åšå¯¹é½ï¼›å› ä¸ºä¸çŸ¥é“ä¸åŒå¹³å°åˆ°åº•æ˜¯ä»€ä¹ˆå­—èŠ‚å¯¹é½çš„ *ç»“æ„ä½“å¯¹é½ * 1234struct point &#123; int x; int y;&#125;__attribute__((packed)); è¿™ä¸ªæ“ä½œåœ¨ç½‘ç»œç¼–ç¨‹å½“ä¸­å¾ˆå¸¸ç”¨ï¼› æ€»ç»“ å¦‚æœæ²¡æœ‰å†…å­˜å¯¹é½ï¼Œå°±æ˜¯æŒ‡å®šattribute((packed))çš„è¯ï¼Œé‚£ä¹ˆç»“æ„ä½“å†…å­˜çš„å¤§å°å°±æ˜¯å„ä¸ªå±æ€§çš„sizeofç´¯åŠ çš„ç»“æœã€‚å¦‚æœæ²¡åŠ å°±éœ€è¦è€ƒè™‘å†…å­˜å¯¹é½çš„é—®é¢˜ï¼Œä¸åŒçš„æœºå™¨å†…å­˜å¯¹é½çš„æ–¹å¼æ˜¯ä¸åŒçš„ã€‚å› ä¸ºåœ¨è·¨æœºå™¨ç¼–ç¨‹æ¯”å¦‚socketç¼–ç¨‹å½“ä¸­ï¼Œæ˜¯éœ€è¦æŒ‡å®šattribute((packed))æ¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§å’Œ å®‰å…¨æ€§ï¼› 4.2.2.1 ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼ˆå€¼ä¼ é€’ï¼Œåœ°å€ä¼ é€’ï¼‰123456789101112131415161718192021void renew (struct student mike) &#123; mike.id_num = 20130000 + mike.id_num; for (int i = 0; mike.name[i]!='\\0'; i++) &#123; mike.name[i] = toupper(mike.name[i]); &#125; printf(\"%d\\n\", mike.id_num); printf(\"%s\\n\", mike.name);&#125;int main()&#123; struct student mike = &#123;123, &#123;'m', 'i', 'k', 'e', '\\0'&#125;&#125;; renew(mike); printf(\"%d\\n\", mike.id_num); printf(\"%s\\n\", mike.name); return 0;&#125;#20130123#MIKE#123#mike ç»“è®º ç»“æ„ä½“çš„ä¼ å…¥æ˜¯ å€¼æ‹·è´ï¼Œå‡½æ•°å†…éƒ¨æ‰§è¡Œçš„æ˜¯å‰¯æœ¬ 4.2.2.2 å½“æŠŠç»“æ„ä½“å½“æˆå½¢å‚ä¼ é€’çš„æ—¶å€™ï¼Œæ„å‘³ç€ä»€ä¹ˆ1234567891011void func (struct simp_st b)&#123; // å†…å­˜æ€»æ˜¯è¦åˆ†é…ä¸€ä¸ªå®Œæ•´çš„ ç»“æ„ä½“ ä½“ç§¯æ‰€å çš„ç©ºé—´ç”¨æ¥æ¥å—è¿™ä¸ªå½¢å‚ printf(\"%d\\n\", sizeof(b)); // 12&#125;int main() &#123; struct simp_st a; struct simp_st *p = &amp;a; func(a); // func(a.i, a.ch, a.f)&#125; å°ç»“ï¼š æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šè¿™ä¹ˆå»ç”¨ã€‚ä¼šæœ‰éå¸¸ä¸¥é‡çš„æ€§èƒ½æµªè´¹ï¼›ä¸€èˆ¬æˆ‘ä»¬ä¼šä¼ é€’ç»“æ„ä½“æŒ‡é’ˆï¼› 4.2.2.3 ç»“æ„ä½“ä½œä¸ºå‡½æ•°è¿”å›å€¼æ—¶ æ€»ç»“ï¼š ç»“æ„ä½“ä½œä¸ºå‡½æ•°è¿”å›å€¼æ—¶ï¼Œç›¸å½“äºcopyä¸€ä»½ç»™è°ƒç”¨è€… 4.2.2.4 æŒ‡å‘ç»“æ„ä½“å˜é‡çš„æŒ‡é’ˆ12345678910int main()&#123; struct student mike = &#123;123, &#123;'m', 'i', 'k', 'e', '\\0'&#125;&#125;; struct student *p = &amp;mike; printf(\"%d\\n\", (*p).id_num); // 123 printf(\"%d\\n\", p-&gt;id_num); // 123 å¦å¤–ä¸€ç§å†™æ³• -&gt; æŒ‡å‘è¿ç®—ç¬¦ printf(\"%s\\n\", p-&gt;name); // mike å¦å¤–ä¸€ç§å†™æ³• printf(\"%s\\n\", (*p).name); // mike return 0;&#125; 4.2.2.5 æŒ‡å‘ç»“æ„ä½“å˜é‡çš„æŒ‡é’ˆä½œä¸ºå‚æ•°ä¼ å…¥å‡½æ•°1234567891011121314void renew (struct student mike) &#123; mike.id_num = 20130000 + mike.id_num; for (int i = 0; mike.name[i]!='\\0'; i++) &#123; mike.name[i] = toupper(mike.name[i]); &#125;&#125;int main()&#123; struct student mike = &#123;123, &#123;'m', 'i', 'k', 'e', '\\0'&#125;&#125;; renew(&amp;mike); printf(\"%d\\n\", mike.id_num); // 20130123 å€¼è¢«ç¯¡æ”¹ printf(\"%s\\n\", mike.name); // MIKE å€¼è¢«ç¯¡æ”¹ return 0;&#125; 4.2.2.6 ç»“æ„ä½“æ•°ç»„12345678910111213141516int main()&#123; struct student myclass[3] = &#123; 123, &#123;'m','k','k','e'&#125;, 133, &#123;'j','o','y'&#125;, 143, &#123;'t','o','m'&#125; &#125;; struct student * p = &amp;myclass; printf(\"%d\\n\", p-&gt;id_num); // 123 printf(\"%s\\n\", p-&gt;name); // mkke p++; // è·³ä¸€ä¸ªç»“æ„ä½“ ä½“ç§¯çš„å†…å­˜ printf(\"%d\\n\", p-&gt;id_num); // 133 printf(\"%s\\n\", p-&gt;name); // joy return 0;&#125; 4.2.2.7 é“¾è¡¨ åŠ¨æ€åœ° ç”³è¯·å†…å­˜ç©ºé—´ 123456int *pint = new int(1024); // å¼€è¾Ÿä¸€ç‰‡å†…å­˜å­˜å‚¨ç©ºé—´å¹¶è¿”å›èµ·å§‹åœ°å€ï¼› delete pint; // é‡Šæ”¾æ‰æŒ‡é’ˆæ‰€æŒ‡å‘çš„å†…å­˜ç©ºé—´ï¼›int *pia = new int[4]; // ç”³è¯·ä¸€ä¸ª 4ä¸ªæ•´å‹å°æ•°ç»„çš„ç©ºé—´ï¼›å¹¶è¿”å›èµ·å§‹åœ°å€ï¼›delete [] pia; // å¼€ä¸ªæ–¹æ‹¬å·ï¼ŒæŒ‡çš„æ˜¯é‡Šæ”¾æ‰çš„æ˜¯ä¸€ä¸ªæ•°ç»„åŒºåŸŸ åŠ¨æ€åœ° å»ºç«‹é“¾è¡¨èŠ‚ç‚¹ 123456struct student &#123; int id; student *next;&#125;student *head;head = new student; 4.2.3 å…±ç”¨ä½“ å…±ç”¨ä½“å’Œç»“æ„ä½“è¯­æ³•å¾ˆåƒï¼Œä½†æˆªç„¶ä¸åŒçš„æ˜¯ï¼Œç»“æ„ä½“å„ä¸ªæˆå‘˜ä¼šå ç”¨ä¸åŒçš„å†…å­˜ï¼Œç»“æ„ä½“æ•´ä½“å†…å­˜ &gt;= sizeofï¼ˆæ‰€æœ‰å±æ€§ï¼‰ï¼Œ å› ä¸ºæœ‰å†…å­˜ç¼éš™çš„ æ¦‚å¿µï¼Œæ‰€ä»¥æœ‰æ—¶å€™ä¼šå¤§ä¸€äº›ï¼› è€Œå…¬ç”¨ä½“çš„å†…å­˜ä½“ç§¯å–å†³äºæœ€å¤§å±æ€§çš„ä½“ç§¯ï¼›å…±ç”¨ä½“æ‰€æœ‰æˆå‘˜å æ®åŒä¸€æ®µå†…å­˜ï¼›å…±ç”¨ä½“ä½¿ç”¨äº†å†…å­˜è¦†ç›–æŠ€æœ¯ï¼ŒåŒä¸€æ—¶åˆ»åªèƒ½ä¿å­˜ä¸€ä¸ªæˆå‘˜çš„å€¼ï¼Œå¦‚æœå¯¹æ–°çš„æˆå‘˜èµ‹å€¼ï¼Œå°±ä¼šæŠŠåŸæ¥çš„å€¼è¦†ç›–æ‰ã€‚ å…±ç”¨ä½“æ˜¯ç¡¬ä»¶ç¨€ç¼ºæ—¶ä»£çš„äº§ç‰©ï¼›ç»“åˆå®é™…åœºæ™¯ï¼Œæ¯”å¦‚ checkbox ç”·å¥³åªèƒ½åŒæ—¶å­˜åœ¨ä¸€ä¸ªï¼› è¯­æ³• 123union å…±ç”¨ä½“å &#123; æˆå‘˜åˆ—è¡¨&#125; ç±»å‹åµŒå¥— ç¡¬ä»¶å­˜å‚¨åˆ†å¤§å°ç«¯çš„ï¼› å¤§ç«¯æ ¼å¼ï¼š æ•°æ®çš„ä½ä½ä¿å­˜åœ¨é«˜åœ°å€ä¸­ï¼› å°ç«¯æ ¼å¼ï¼š æ•°æ®çš„ä½ä½ä¿å­˜åœ¨ä½åœ°å€ä¸­ï¼› å®šä¹‰å˜é‡ï¼ˆå˜é‡ï¼Œæ•°ç»„ï¼ŒæŒ‡é’ˆï¼‰ï¼Œåˆå§‹åŒ–åŠæˆå‘˜å¼•ç”¨ (å˜é‡å.æˆå‘˜ æŒ‡é’ˆå-&gt;æˆå‘˜) å ç”¨å†…å­˜å¤§å° 123456789101112131415161718192021#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;union test_un&#123; /* data */ int i; float f; double d; char ch;&#125;;int main()&#123; union test_un a; a.f = 345.678; printf(\"%d\\n\", sizeof(a)); // 8 éªŒè¯å¤šä¸ªæˆå‘˜å…±ç”¨ä¸€å—ç©ºé—´ printf(\"%f\\n\", a.f); exit(0);&#125; 123456789101112131415161718union unioz&#123; int a; double d; struct &#123; int arr[10]; float f; &#125; c;&#125;;int main()&#123; union unioz x; printf(\"%d\\n\", sizeof(double)); // 8 printf(\"%d\\n\", sizeof(x)); // 48 exit(0);&#125; å‡½æ•°ä¼ å‚ï¼ˆå€¼ï¼Œåœ°å€ï¼‰ ä½åŸŸ 5. ç±»å‹è½¬æ¢å­˜å‚¨æ¶‰åŠåˆ°2è¿›åˆ¶ï¼Œ8è¿›åˆ¶ï¼Œ10è¿›åˆ¶ï¼Œ16è¿›åˆ¶ã€‚è¿™å‡ ç§è¿›åˆ¶ä¹‹é—´çš„è½¬æ¢é¦–å…ˆè¦åŒºåˆ«å¼€ï¼Œå¦‚ä½•å»è·å¾—ä¸€ä¸ªäºŒè¿›åˆ¶ 5.1 åè¿›åˆ¶è½¬äºŒè¿›åˆ¶ é™¤2å–ä½™ï¼Œä½™æ•°å€’åºæ’åˆ— 254 -&gt; unsigned int -&gt; 32ä½ ï¼ˆ4ä¸ªå­—èŠ‚ï¼‰ 254ï¼ˆ10è¿›åˆ¶ï¼‰-&gt; 11111110 (2è¿›åˆ¶) -&gt; 376 (8è¿›åˆ¶) -&gt; FE(16è¿›åˆ¶) cè¯­è¨€ç¨‹åºå½“ä¸­æ˜¯ä¸è¯†åˆ«äºŒè¿›åˆ¶çš„ 254 é»˜è®¤10è¿›åˆ¶B11111110 äºŒè¿›åˆ¶0376 å…«è¿›åˆ¶0xFE åå…­è¿›åˆ¶ 5.2 è¡¥ç  ä¸€ä¸ªæ­£æ•°çš„è¡¥ç å½¢å¼å°±æ˜¯ å®ƒäºŒè¿›åˆ¶æœ¬èº«,è´Ÿæ•°çš„è¡¥ç æ˜¯å®ƒç»å¯¹å€¼çš„äºŒè¿›åˆ¶å½¢å¼å–å + 1 254 -&gt; unsigned int -&gt; 32ä½-254 -&gt; 254 -&gt; 1111 1110 å–å + 1 6. è¿ç®—ç¬¦å’Œè¡¨è¾¾å¼è¡¨è¾¾å¼ä¸è¯­å¥çš„åŒºåˆ« è¿ç®—ç¬¦éƒ¨åˆ†ï¼š æ¯ä¸ªè¿ç®—ç¬¦æ‰€éœ€è¦çš„å‚ä¸è¿ç®—çš„æ“ä½œä¸ªæ•° ç»“åˆæ€§ ä¼˜å…ˆçº§ è¿ç®—ç¬¦çš„ç‰¹æ®Šæ€§ % è¦æ±‚ é™¤æ•°ï¼Œè¢«é™¤æ•°éƒ½æ˜¯æ•´å‹ ä½è¿ç®—çš„é‡è¦æ€§ 8.1 è‡ªå¢å’Œè‡ªå‡ è¿ç®—ç¬¦åœ¨å‰ï¼Œå…ˆè¿›è¡Œè®¡ç®—ï¼Œå†å–å˜é‡å€¼ä½¿ç”¨å˜é‡åœ¨å‰ï¼Œ å…ˆå–å˜é‡å€¼ä½¿ç”¨ï¼Œå†è¿›è¡Œè®¡ç®— 7. ä½è¿ç®—3.1 &gt;&gt; &lt;&lt; ä½è¿ç®—ï¼ˆå·¦ç§»å³ç§»ï¼‰åŸºæœ¬ç­‰åŒäºä¹˜2é™¤2è¿ç®—,åƒæ±‡ç¼–å½“ä¸­ä¹˜ä»¥å¤šå°‘ï¼Œé™¤ä»¥å¤šå°‘ï¼Œå‡ ä¹æŒ‰è¿™ç§æ–¹å¼æ¥å®ç°çš„ 123456int i = B1100 = 12~i -&gt; B0011 // å–å// æŠŠiå¾€å³ç§»ä¸€ä½ï¼Œ1100 å˜æˆ 110ï¼Œ è½¬åŒ–ä¸º10è¿›åˆ¶å°±æ˜¯12i &gt;&gt; 1 --&gt; 110 = 6 // æŠŠiå¾€å·¦ç§»ä¸€ä½ï¼Œ 1100å˜æˆ11000ï¼Œ è½¬åŒ–ä¸º10è¿›åˆ¶å°±æ˜¯24i &lt;&lt; 1 --&gt; 11000 = 24 3.2 ~ ï¼ˆå–åï¼‰12int i = B1100 = 12~i -&gt; B0011 // å–å 3.3 æŒ‰ä½æˆ– æŒ‰ä½æˆ–çš„è®¡ç®—åŸåˆ™æ˜¯ï¼ŒåŒä¸€ä¸ªä½ä¸Šï¼Œä¸¤è€…æœ‰ä¸€è€…ä¸º1å°±ä¸ºçœŸï¼Œä¸¤è€…éƒ½ä¸ºå‡æ‰ä¸ºå‡ 1234567891011int i = B1100;int j = B1001;i|j 1 1 0 0ï½œ 1 0 0 1---------- 1 1 0 11101 -&gt; 13 3.4 æŒ‰ä½ä¸ æŒ‰ä½ä¸çš„è®¡ç®—åŸåˆ™æ˜¯ï¼ŒåŒä¸€ä¸ªä½ä¸Šï¼Œä¸¤è€…æœ‰éƒ½ä¸º1å°±ä¸ºçœŸï¼Œå¦åˆ™ä¸ºå‡ 1234567891011int i = B1100;int j = B1001;i&amp;j 1 1 0 0&amp; 1 0 0 1---------- 1 0 0 01000 -&gt; 8 3.5 ^ (ç›¸åŒä¸º0ï¼Œ ä¸åŒä¸º1) äº¦æˆ–è®¡ç®—åŸåˆ™ï¼Œ åŒä¸€ä¸ªä½ä¸Šï¼Œç›¸åŒä¸º0ï¼Œ ä¸åŒä¸º1 1234567891011int i = B1100;int j = B1001;i^j 1 1 0 0^ 1 0 0 1---------- 0 1 0 11000 -&gt; 5 3.6 ä½è¿ç®—çš„é‡è¦æ„ä¹‰ å°†æ“ä½œæ•°ä¸­ç¬¬Nä½ ç½®1ï¼Œ å…¶ä»–ä½ä¸å˜ï¼› 1234567891011121314//num = num | 1 &lt;&lt; n // æŠŠæŸä¸€ä½ ç½®1çš„è¯ï¼ŒæŠŠ1å·¦ç§» Nä¸ªä½// æ¯”å¦‚å°†i çš„ç¬¬äºŒä½ ç½®1int i = B1011;int j = B1001;i = i | i &lt;&lt; 2; 1 0 1 1| 0 1 0 0 // æ³¨æ„æ˜¯æŠŠ 1 å·¦ç§»åŠ¨ Nä¸ªä½ã€‚ 1 -&gt; 0100 ç©ºä½è¡¥0---------- 1 1 1 11000 -&gt; 5 å°†æ“ä½œæ•°ä¸­ç¬¬Nä½ æ¸…0ï¼Œ å…¶ä»–ä½ä¸å˜ï¼› 1234567891011121314//num = num &amp; ~(1 &lt;&lt; n) // æŠŠæŸä¸€ä½ ç½®1çš„è¯ï¼ŒæŠŠ1å·¦ç§» Nä¸ªä½// æ¯”å¦‚å°†i çš„ç¬¬1ä½ ç½®0int i = B1011;int j = B1001;i = i | i &lt;&lt; 2; 1 0 1 1| 1 1 0 1 // -&gt; æŠŠ1å·¦ç§»Nä½å–å---------- 1 0 0 11000 -&gt; 5 æµ‹è¯•ç¬¬nä½ï¼š if (num &amp; i 1 &lt;&lt; n) ä»ä¸€ä¸ªæŒ‡å®šå®½åº¦çš„æ•°ä¸­å–å‡ºå…¶ä¸­çš„æŸå‡ ä½ ï¼ˆç»ƒä¹ é¢˜ï¼‰ 8. å†…æ ¸ä»£ç ä½ç½®12cd /linux/include/linuxvim list.h 9. å® #å¼€å¤´çš„æ˜¯ç¼–è¯‘é¢„å¤„ç†æŒ‡ä»¤ å®ƒä»¬ä¸æ˜¯Cè¯­è¨€çš„æˆåˆ†ï¼Œä½†æ˜¯Cè¯­è¨€ç¨‹åºç¦»ä¸å¼€å®ƒä»¬ #define ç”¨æ¥å®šä¹‰ä¸€ä¸ªå®ï¼› define (å®šä¹‰ä¸€ä¸ªå®) 12345678910#include &lt;stdio.h&gt;#define PI 3.14159 // æŒ‡å®šä¹‰äº†ä¸€ä¸ªå®// PI æ˜¯è¿™ä¸ªå®çš„åå­—ï¼Œ 3.14159æ˜¯è¿™ä¸ªå®çš„å€¼ï¼›int main() &#123; prinft(\"%d\\n\", 2*PI*3.0); return 0;&#125;// Cè¯­è¨€ç¨‹åºåœ¨ç¼–è¯‘ä¹‹å‰ï¼Œä¼šåšä¸€æ¬¡ç¼–è¯‘é¢„å¤„ç†ï¼›// ä¼šæŠŠç¨‹åºä¸­æ‰€æœ‰çš„PIéƒ½æ›¿æ¢æˆ 3.14159 4.1 save-tempså¯¹ä¸€ä¸ª .c æ–‡ä»¶æ‰§è¡Œ 1gcc 02.c --save-temps ç”Ÿæˆ å››ä¸ªæ–‡ä»¶ 02.i02.s02.oa.out è¿‡ç¨‹ä¾æ¬¡æ˜¯ .c -&gt; .i -&gt; .s -&gt; .o -&gt; a.out .cæ˜¯æºä»£ç ï¼Œç»è¿‡ç¼–è¯‘é¢„å¤„ç†ä¹‹åå˜æˆ .i è¿™ç§ä¸­é—´ç»“æœæ–‡ä»¶ï¼Œå½“ä¸­æ‰€æœ‰ç¼–è¯‘é¢„å¤„ç†æŒ‡ä»¤éƒ½æ‰§è¡Œå®Œï¼Œæ¯”å¦‚ define å®éœ€è¦æ›¿æ¢æ‰;ç„¶åç”±äºç¼–è¯‘å™¨å¯¹ .iæ–‡ä»¶è¿›è¡Œç¼–è¯‘ ç”Ÿæˆæ±‡ç¼–ä»£ç  .sæ–‡ä»¶ï¼›ç„¶åæ±‡ç¼–ä»£ç æ–‡ä»¶ï¼Œè¿›è¡Œæ±‡ç¼–å˜æˆç›®æ ‡æ–‡ä»¶ï¼Œ ç›®æ ‡æ–‡ä»¶å†ç»è¿‡é“¾æ¥ä¹‹åå½¢æˆä¸€ä¸ªå¯æ‰§è¡Œçš„ä¸œè¥¿ï¼› æŸ¥çœ‹ .i æ–‡ä»¶ 12tail 03.itail -n 50 03.i # çœ‹03.iæ–‡ä»¶ æœ€å 50è¡Œ 123456789extern void funlockfile (FILE *__stream) __attribute__ ((__nothrow__ , __leaf__));# 943 \"/usr/include/stdio.h\" 3 4# 3 \"03.c\" 2int main()&#123; printf(\"%f\\n\", 2*3.1415927*3.0); // è¿™é‡Œæ˜æ˜¾æŠŠå®æ›¿æ¢æˆäº†å€¼ï¼› return 0;&#125; ** åŒæ ·çš„å¯ä»¥æŠŠ â€œ%f\\nâ€ ä¹Ÿæ›¿æ¢æˆå®** 12345678#include &lt;stdio.h&gt;#define PI 3.14159 // æŒ‡å®šä¹‰äº†ä¸€ä¸ªå®#define FORMATTER \"%f\\n\" // æŒ‡å®šä¸€ä¸ªFORMATTER å®// PI æ˜¯è¿™ä¸ªå®çš„åå­—ï¼Œ 3.14159æ˜¯è¿™ä¸ªå®çš„å€¼ï¼›int main() &#123; prinft(FORMATTER, 2*PI*3.0); return 0;&#125; 4.2 å®çš„ç¼ºç‚¹ ä¸æ£€æŸ¥è¯­æ³•ï¼Œåœ¨é¢„å¤„ç†æˆ–è€…ç¼–è¯‘é˜¶æ®µæ˜¯ä¸æŠ¥é”™çš„ï¼› 4.3 define #define &lt;åå­—&gt; &lt;å€¼&gt; ç»“å°¾æ²¡æœ‰ åˆ†å·ï¼Œå› ä¸ºä¸æ˜¯Cçš„è¯­å¥ åå­—å¿…é¡»æ˜¯ä¸€ä¸ªå•è¯ï¼Œå€¼å¯ä»¥æ˜¯å„ç§ä¸œè¥¿ åœ¨Cè¯­è¨€çš„ç¼–è¯‘å™¨å¼€å§‹ç¼–è¯‘ä¹‹å‰ï¼Œç¼–è¯‘é¢„å¤„ç†ç¨‹åº(cpp)ä¼šæŠŠç¨‹åºä¸­çš„åå­—æ¢æˆå€¼ï¼› å®Œå…¨çš„æ–‡æœ¬æ›¿æ¢ gcc â€“save-temps å¦‚æœä¸€ä¸ªå®çš„å€¼ä¸­æœ‰å…¶ä»–çš„å®çš„åå­—ï¼Œä¹Ÿæ˜¯ä¼šè¢«æ›¿æ¢çš„ å¦‚æœä¸€ä¸ªå®çš„å€¼è¶…è¿‡ä¸€è¡Œï¼Œæœ€åä¸€è¡Œä¹‹å‰çš„è¡Œæœ«éœ€è¦åŠ \\ å®çš„å€¼åé¢å‡ºç°çš„æ³¨é‡Šä¸ä¼šè¢«å½“ä½œå®çš„ä¸€éƒ¨åˆ† 123456789#include &lt;stdio.h&gt;#define PI 3.14159 // æŒ‡å®šä¹‰äº†ä¸€ä¸ªå®#define FORMATTER \"%f\\n\" // æŒ‡å®šä¸€ä¸ªFORMATTER å®#define PI2 2*PI // PI * 2// PI æ˜¯è¿™ä¸ªå®çš„åå­—ï¼Œ 3.14159æ˜¯è¿™ä¸ªå®çš„å€¼ï¼›int main() &#123; prinft(FORMATTER, 2*PI*3.0); return 0;&#125; 1234567891011#include &lt;stdio.h&gt;#define PI 3.14159 // æŒ‡å®šä¹‰äº†ä¸€ä¸ªå®#define FORMATTER \"%f\\n\" // æŒ‡å®šä¸€ä¸ªFORMATTER å®#define PI2 2*PI // PI * 2#define PRT printf(\"%f\", PI)\\ printf(\"%f\\n\", PI2)// PI æ˜¯è¿™ä¸ªå®çš„åå­—ï¼Œ 3.14159æ˜¯è¿™ä¸ªå®çš„å€¼ï¼›int main() &#123; PRT; return 0;&#125; 4.4 æ²¡æœ‰å€¼çš„å® #define_DEBUG è¿™ç±»å®æ˜¯ç”¨äºæ¡ä»¶ç¼–è¯‘çš„ï¼Œåé¢æœ‰å…¶ä»–çš„ç¼–è¯‘é¢„å¤„ç†æŒ‡ä»¤æ¥æ£€æŸ¥è¿™ä¸ªå®æ˜¯å¦å·²ç»è¢«å®šä¹‰è¿‡äº†ï¼› 4.5 é¢„å®šä¹‰çš„å® ç”¨æ¥è¡¨ç¤ºä¸€äº›ç‰¹æ®Šçš„ä¸œè¥¿ï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨æ›¿æˆ‘ä»¬æ’å…¥ä¸€äº›ç‰¹æ®Šçš„å€¼ã€‚ 12345_LINE_ //è¿™ä¸ªæºä»£ç æ‰€åœ¨å½“å‰çš„è¡Œå·ï¼›_FILE_ // æºä»£ç çš„æ–‡ä»¶å_DATE_ // ç¼–è¯‘æ—¶å€™çš„æ—¥æœŸ_TIME_ // ç¼–è¯‘æ—¶å€™çš„æ—¶é—´_STDC_ 4.6 åƒå‡½æ•°çš„å®#define cube(x) ((x)*(x)*(x)) å®å¯ä»¥å¸¦å‚æ•° 123456#define cube(x) ((x)*(x)*(x))int main(int argc, char const *argv[])&#123; printf(\"%d\\n\", cube(5)); // 125 return 0;&#125; æ‰“å¼€ .i æ–‡ä»¶ 12345int main()&#123;printf(\"%d\\n\", ((5)*(5)*(5))); // è¢«é¢„å¤„ç†æˆè¿™æ ·äº†ï¼› printf(\"%f\\n\", 2*3.1415927*3.0);return 0;&#125; 4.7 é”™è¯¯å®šä¹‰çš„å®#define RADTODEG(x) (x*57.29578)#define RADTODEG(x) (x)*57.29578 1234567#define RADTODEG(x) (x*57.29578)#define RADTODEG(x) (x)*57.29578int main() &#123; printf(\"%f\\n\", RADTODEG(5+2)); printf(\"%f\\n\", 180/RADTODEG2(1));&#125; è¢«é¢„å¤„ç†çš„ç»“æœ 1234int main() &#123; printf(\"%f\\n\", (5+2 * 57.29578)); printf(\"%f\\n\", 180/1*57.29678);&#125; æˆ‘ä»¬å‘ç° è¢«é¢„å¤„ç†çš„ç»“æœæ˜¯ä¸ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚çš„ï¼› 4.8å¸¦å‚æ•°çš„å®çš„åŸåˆ™ ä¸€åˆ‡éƒ½è¦æœ‰æ‹¬å· æ•´ä¸ªå€¼è¦æœ‰æ‹¬å·ï¼ŒæŒ‡çš„æ˜¯æ•´ä¸ªå®çš„å€¼æœ‰æ‹¬å· å‚æ•°å‡ºç°çš„æ¯ä¸ªåœ°æ–¹éƒ½è¦æ‹¬å· #define RADTODEG(x) ((x)*57.29578) å¯ä»¥å¸¦å¤šä¸ªå‚æ•° #define MIN((a,b) ((a)&gt;(b)?(b):(a)) ä¹Ÿå¯ä»¥ç»„åˆï¼ˆåµŒå¥—ï¼‰ä½¿ç”¨å…¶ä»–å® åœ¨å¤§å‹ç¨‹åºçš„ä»£ç ä¸­ä½¿ç”¨éå¸¸æ™®é å¯ä»¥éå¸¸å¤æ‚ï¼Œå¦‚â€œäº§ç”Ÿâ€å‡½æ•° åœ¨# å’Œ ## è¿™ä¸¤ä¸ªè¿ç®—ç¬¦çš„å¸®åŠ©ä¸‹ å­˜åœ¨ä¸­è¥¿æ–¹æ–‡åŒ–å·®å¼‚ éƒ¨åˆ†å®ä¼šè¢«inlineå‡½æ•°æ›¿ä»£ 4.9 ä»€ä¹ˆæ—¶å€™ç”¨å® ä»€ä¹ˆæ—¶å€™ç”¨å‡½æ•°åº”ç”¨æ±‚ç¨³å®šï¼Œç”¨å‡½æ•°è¿½æ±‚æè‡´æ€§èƒ½ï¼Œç”¨å® 4.10 include â€œâ€ è¿˜æ˜¯ &lt;&gt;include åšäº†ä»€ä¹ˆï¼Ÿ includeå°±æ˜¯æŠŠå¤´æ–‡ä»¶é‡Œå¤´æ‰€æœ‰çš„æ–‡æœ¬æ’å…¥åˆ°includeæ‰€åœ¨.cæ–‡ä»¶çš„é‚£ä¸€è¡Œ. #includeæœ‰ä¸¤ç§å½¢å¼æ¥æŒ‡å‡ºè¦æ’å…¥çš„æ–‡ä»¶ â€œâ€è¦æ±‚ç¼–è¯‘å™¨é¦–å…ˆåœ¨å½“å‰ç›®å½•ï¼ˆ.cæ–‡ä»¶æ‰€åœ¨çš„ç›®å½•ï¼‰å¯»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ°ç¼–è¯‘å™¨æŒ‡å®šçš„ç›®å½•å»æ‰¾ &lt;&gt; è®©ç¼–è¯‘å™¨åªåœ¨æŒ‡å®šçš„ç›®å½•å»æ‰¾ ç¼–è¯‘å™¨è‡ªå·±çŸ¥é“è‡ªå·±çš„æ ‡å‡†åº“çš„å¤´æ–‡ä»¶åœ¨å“ªé‡Œ ç¯å¢ƒå˜é‡å’Œç¼–è¯‘å™¨å‘½ä»¤è¡Œå‚æ•°ä¹Ÿå¯ä»¥æŒ‡å®šå¯»æ‰¾å¤´æ–‡ä»¶çš„ç›®å½• 4.11 å¤´æ–‡ä»¶ ï¼ˆ.hæ–‡ä»¶ï¼‰ åœ¨ä½¿ç”¨å’Œå®šä¹‰è¿™ä¸ªå‡½æ•°çš„åœ°æ–¹éƒ½åº”è¯¥ #include è¿™ä¸ªå¤´æ–‡ä»¶ ä¸€èˆ¬çš„åšæ³•å°±æ˜¯ä»»ä½•.céƒ½æœ‰å¯¹åº”çš„åŒåçš„.h,æŠŠæ‰€æœ‰å¯¹å¤–å…¬å¼€çš„å‡½æ•°çš„åŸå‹å’Œå…¨å±€å˜é‡çš„å£°æ˜éƒ½æ”¾è¿›å» åœ¨å‡½æ•°å‰é¢åŠ ä¸Šstatic å°±ä½¿å¾—å®ƒæˆä¸ºåªèƒ½åœ¨æ‰€åœ¨çš„ç¼–è¯‘å•å…ƒä¸­è¢«ä½¿ç”¨çš„å‡½æ•° åœ¨å…¨å±€å˜é‡å‰é¢åŠ ä¸Šstaticå°±ä½¿å¾—å®ƒæˆä¸ºåªèƒ½åœ¨æ‰€åœ¨çš„ç¼–è¯‘å•å…ƒä¸­è¢«ä½¿ç”¨çš„å…¨å±€å˜é‡ 4.12 å˜é‡çš„å£°æ˜123// add.hint add(int a, int b);extern int gAll; // å…¨å±€å£°æ˜ä¸€ä¸ª å˜é‡ int iï¼› æ˜¯å˜é‡çš„å®šä¹‰ extern int iï¼› æ˜¯å˜é‡çš„å£°æ˜ 4.13å£°æ˜å’Œå®šä¹‰ å£°æ˜æ˜¯ä¸äº§ç”Ÿçš„ä»£ç çš„ä¸œè¥¿ å‡½æ•°åŸå‹ å˜é‡å£°æ˜ ç»“æ„å£°æ˜ å®å£°æ˜ æšä¸¾å£°æ˜ ç±»å‹å£°æ˜ inlineå‡½æ•° å®šä¹‰æ˜¯äº§ç”Ÿä»£ç çš„ä¸œè¥¿ 10. typedef ä¸ºå·²æœ‰çš„æ•°æ®ç±»å‹æ”¹å typedef å·²æœ‰çš„æ•°æ®ç±»å‹ æ–°åå­—; 1234567typedef int INT;int main () &#123; INT i; printf(D, i); exit(0);&#125; 5.1 typedef å’Œ defineçš„åŒºåˆ«12345#define IP int *typedef int *IP;IP p,q --&gt; int *p, q;IP p,q --&gt; int *p, *q; ** æ›´å¤šç¤ºä¾‹** 12typedef int ARR[6]; ---&gt; int [6] -&gt; ARR;ARR a; --&gt; int a[6]; 123456789101112131415161718192021222324252627struct node_st&#123; int i; float f;&#125;;typedef struct node_st NODE;NODE a; --&gt; struct node_st a;NODE *p; --&gt; struct node_st *p;typedef struct node_st *NODEP;NODEP p --&gt; struct node_st *p;struct&#123; int i; float f;&#125;NODE, *NODEP;typedef int FUNC(int); --&gt; int(int) FUNC;FUNC f; --&gt; int f(int);typedef int *FUNCP(int);FUNCP p; ---&gt; int *p(int);typedef int *(*FUNCP)(int);FUNCP p; ---&gt; int *(*p)(int); æ•°ç»„ç±»å‹ æ•°ç»„å[å¸¸é‡è¡¨è¾¾å¼] 12float sheep[10]int a2001[1000] 11. ä¸€å”¯æ•°ç»„1.1.1 å®šä¹‰ ã€å­˜å‚¨ç±»å‹ã€‘ æ•°æ®ç±»å‹ æ ‡è¯†ç¬¦ ã€ä¸‹æ ‡ã€‘ 1.1.2 åˆå§‹åŒ–ä¸åˆå§‹åŒ–å…¨éƒ¨åˆå§‹åŒ–éƒ¨åˆ†åˆå§‹åŒ– 123456int main () &#123; int a[] = &#123;1,2,3,4&#125; // ä¸ç»™é•¿åº¦ä¹Ÿè¡Œ int b[4] = &#123;1,2&#125; // [1,2,0,0] éƒ¨åˆ†å…ƒç´ åˆå§‹åŒ– int c[4] = &#123;0&#125; // [0,0,0,0] éƒ¨åˆ†å…ƒç´ åˆå§‹åŒ– int d[4] = &#123;1,2,3,4,5,6&#125; // compile error&#125; 1.1.3 å…ƒç´ å¼•ç”¨ æ•°ç»„åã€ä¸‹æ ‡ã€‘ 12345678910111213141516171819#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define M 3int main()&#123; int arr[M]; int i; printf(\"%d\\n\", sizeof(arr)); for(; i&lt;M; i++) printf(\"%p-&gt;%d\\n\", &amp;arr[i], arr[i]); exit(0);&#125;// 0x7ffee4394940-&gt;-466007712// 0x7ffee4394944-&gt;32766// 0x7ffee4394948-&gt;201064485 ä¸‹æ ‡ æŸ¥æ‰¾å— 1.1.4 æ•°ç»„å å½“å‰æ•°ç»„çš„èµ·å§‹ä½ç½®ï¼Œæ•°ç»„åæœ¬èº«å°±æ˜¯è¡¨ç¤ºåœ°å€çš„ä¸€ä¸ªå¸¸é‡ã€‚ å¸¸é‡ï¼š ç¨‹åºæ‰§è¡Œè¿‡ç¨‹å½“ä¸­ä¸ä¼šå‘ç”Ÿå˜åŒ–çš„é‡ï¼›æ­£å› ä¸ºæ•°ç»„åæ˜¯å¸¸é‡ï¼Œæ‰€ä»¥å®ƒä¸èƒ½æ— æ¡ä»¶å‡ºç°åœ¨æ•°ç»„çš„å·¦è¾¹ï¼› 123456789101112131415#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define M 3int main()&#123; int arr[M] = &#123;1,2,3&#125;; int i; arr[M] = &#123;4,5, 6&#125;; // è¯­æ³•é”™è¯¯ï¼Œæ•°ç»„åæ˜¯å¸¸é‡ï¼Œæ— æ³•è¢«ç›´æ¥èµ‹å€¼ printf(\"%d\\n\", sizeof(arr)); for(; i&lt;M; i++) printf(\"%p-&gt;%d\\n\", &amp;arr[i], arr[i]); exit(0);&#125; 1.1.5 æ•°ç»„è¶Šç•Œ æº¢å‡ºæ•°ç»„æ‰€åœ¨å†…å­˜åŒºåŸŸ 1.1.6 fb12345678910111213#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt; int main() &#123; int fib[10] = &#123;1,1&#125;; int i; for (i =2; i&lt;10; i++) fib[i] = fib[i-1] + fib[i-2]; for (i=0;i&lt;10;i++) printf(\"%d\\n\",fib[i]); printf(\"\\n\"); return; &#125; 12345678910111213141516171819202122232425262728293031// fbåŠ ä¸ªæ’åº #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; int main() &#123; int fib[10] = &#123;1,1&#125;; int i; int j; int tmp; for (i =2; i&lt;10; i++) fib[i] = fib[i-1] + fib[i-2]; for (i=0;i&lt;10;i++) printf(\"%d\\n\",fib[i]); printf(\"\\n\"); i=0; j=sizeof(fib)/sizeof(fib[0]) -1; while(i&lt;j) &#123; tmp = fib[i]; fib[i] = fib[j]; fib[j] = tmp; i++; j--; &#125; for (i=0;i&lt;10;i++) printf(\"%d\\n\",fib[i]); return; &#125; 12. äºŒç»´æ•°ç»„1.2.1 å®šä¹‰ï¼Œåˆå§‹åŒ– ã€å­˜å‚¨ç±»å‹ã€‘ æ•°æ®ç±»å‹ æ ‡è¯†ç¬¦ ã€è¡Œä¸‹æ ‡ã€‘ ã€åˆ—ä¸‹æ ‡ã€‘ 123int a[3][3] = &#123;&#123;1,2,3&#125;, &#123;4,5,6&#125;, &#123;7,8,9&#125;&#125;;int b[][4] = &#123;1,2,3,4,5,6,7,8,9&#125;;int c[3][4] = &#123;0&#125;; 1234int main()&#123; int a[M][N]&#125; 1.2.2 äºŒç»´æ•°ç»„å…ƒç´ å¼•ç”¨æ•°ç»„å[è¡Œæ ‡][åˆ—æ ‡]int a[3][4] // å®šä¸€ä¸ªä¸‰è¡Œå››åˆ—çš„äºŒç»´æ•°ç»„ 1.2.3 å­˜å‚¨å½¢å¼ é¡ºåºå­˜å‚¨ï¼ŒæŒ‰è¡Œå­˜å‚¨,äºŒç»´æ•°ç»„åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ï¼Œ æ˜¯æ‹‰å¹³çš„ 12345678910111213141516171819202122232425----------a[0][0]----------a[0][1]----------a[0][2]----------a[0][3]----------a[1][0]----------a[1][1]----------a[1][2]----------a[1][3]----------a[2][0]----------a[2][1]----------a[2][2]----------a[2][3]---------- æ·±å…¥ç†è§£äºŒç»´æ•°ç»„ 1 a[0][0] 2 a[0][1] 3 a[0][2] 4 a[0][3] 5 a[1][0] 6 a[1][1] 7 a[1][2] 8 a[1][3] 9 a[2][0] 10 a[2][1] 11 a[2][2] 12 a[2][3] 1.2.4 äºŒç»´æ•°ç»„ç»ƒä¹ é¢˜1.2.4.1 è¡Œåˆ—äº’æ¢123456789101112131415161718192021222324252627#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define M 2#define N 3int main()&#123; int arr[M][N] = &#123;1,2,3,4,5,6&#125;; int b[N][M]; int i,j; for (i=0;i&lt;M;i++) &#123; for (j=0;j&lt;N;j++) &#123; b[j][i] = arr[i][j]; printf(\"%d\",arr[i][j]); &#125; printf(\"\\n\"); &#125;; for (i=0;i&lt;N;i++) &#123; for (j=0;j&lt;M;j++) printf(\"%d\", b[i][j]); printf(\"\\n\"); &#125; exit(0);&#125; 1.2.4.2 æ±‚æœ€å¤§å€¼åŠå…¶æ‰€åœ¨ä½ç½®12345678910111213141516171819202122232425262728293031#define M 2#define N 3static void max(void)&#123; int a[M][N] = &#123;43,4,23,89,9,7&#125;; int i,j; int max = a[0][0], row =0, col = 0; for (i=0;i&lt;M;i++) &#123; for (j=0;j&lt;N;j++) &#123; if(a[i][j]&gt;max) &#123; max= a[i][j]; row = i; col = j; &#125; &#125; &#125; printf(\"%d\\n\",max); printf(\"%d --- %d\\n\", row, col);&#125;int main()&#123; int arr[M][N] = &#123;1,2,3,4,5,6&#125;; int b[N][M]; int i,j; max(); exit(0);&#125; 1.2.4.3 æ±‚å„è¡Œä¸å„åˆ—çš„å’Œ 123456789101112131415161718192021222324252627282930static void sum(void)&#123; int a[5][4] = &#123;&#123;1,2,3&#125;,&#123;4,5,6&#125;,&#123;7,8,9&#125;,&#123;10,11,12&#125;&#125;; int i, j; for (i=0; i&lt;4; i++) &#123; for (j=0;j&lt;3;j++) &#123; a[4][3] += a[i][j]; a[4][j] += a[i][j]; a[i][3] += a[i][j]; &#125; &#125; for(i=0;i&lt;5;i++) &#123; for(j=0;j&lt;4;j++) &#123; printf(\"%4d\",a[i][j]); &#125; printf(\"\\n\"); &#125;&#125;int main()&#123; sum(); exit(0);&#125; 1.2.4.4 çŸ©é˜µä¹˜ç§¯123456789101112131415161718192021222324252627282930313233343536#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define M 2#define N 3#define K 2 static void mul(void) &#123; int a[M][N] = &#123;1,2,3,4,5,6&#125; ; int b[N][K]= &#123;1,0,0,1,1,0&#125;; int c[M][K]; int i,j,k; for(i=0;i&lt;M;i++) &#123; for(j=0;j&lt;K;j++) &#123; for(k=0; k&lt;N; k++) &#123; c[i][j] += a[i][k] * b[k][j]; &#125; &#125; &#125; for(i=0;i&lt;M;i++) &#123; for(j=0;j&lt;K;j++) &#123; printf(\"%4d\",c[i][j]); &#125; printf(\"\\n\"); &#125; &#125; int main() &#123; mul(); exit(0); &#125; 1.2.5 æ·±å…¥ç†è§£äºŒç»´æ•°ç»„ 1.2.5.1 ä¸‰ç»´æ•°ç»„a[5][3][4] æ•°æ®ç«‹æ–¹ä½“ 5 -&gt; ç‰‡3 -&gt; è¡Œ4 -&gt; åˆ— åœ¨å†…å­˜ä¸­ä¾ç„¶æ˜¯æ‰“å¹³å­˜æ”¾ï¼› 13. å­—ç¬¦æ•°ç»„1.3.1 å®šä¹‰ï¼Œåˆå§‹åŒ–ï¼Œå­˜å‚¨ç‰¹ç‚¹ ã€å­˜å‚¨ç±»å‹ã€‘ æ•°æ®ç±»å‹ æ ‡è¯†ç¬¦ ã€ä¸‹æ ‡ã€‘ã€‚ã€‚ã€‚ 1.3.1.1 å•ä¸ªå­—ç¬¦åˆå§‹åŒ–1char str[3] = &#123;'a','b','c'&#125; char c[] = {â€˜Câ€™, â€˜hâ€™, â€˜iâ€™, â€˜nâ€™, â€˜aâ€™};// c[0] = C c[1] = h c[2]= i c[3]=n c[4]=a 1.3.1.2 ç”¨å­—ç¬¦ä¸²å¸¸é‡åˆå§‹åŒ–1char str1[6] = \"hello\"; // æœ€åä¸€ä½ ä»¥ '\\0' ç»“å°¾ char c[] = â€œChinaâ€// c[0] = C c[1] = h c[2]= i c[3]=n c[4]=a c[5]=\\0 1.3.2 è¾“å…¥è¾“å‡º1234567891011int main()&#123; char str[N], str1[N], str2[N]; int i; scanf(\"%s%s%s\", str, str1,str2); printf(\"%s\\n%s\\n%s\\n\", str, str1,str2);&#125;// how are you// how// are// you 1.3.2.1 å•è¯è®¡æ•°12345678910111213141516171819202122#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; int main() &#123; char str[128]; int count =0, flag = 0; int i; gets(str); for(i=0;str[i]!='\\0';i++) &#123; if(str[i]==' ') flag = 0; else if(flag == 0) &#123; count++; flag=1; &#125; &#125; printf(\"count = %d\\n\", count); &#125; 1.3.3 å­—ç¬¦æ•°ç»„æ³¨æ„äº‹é¡¹ æ‰€æœ‰å­—ç¬¦ä¸²éƒ½æ˜¯ä»¥ \\0 æ¥ç»“å°¾çš„ï¼›æ‰€æœ‰ä»¥ \\0ç»“å°¾ çš„å­—ç¬¦æ•°ç»„éƒ½å¯ä»¥è¢«çœ‹ä¸ºå­—ç¬¦ä¸² 123456char c[6] = \"China\"; //åªå¯ä»¥åœ¨æ•°ç»„å®šä¹‰å¹¶åˆå§‹åŒ–çš„æ—¶å€™// ä¸èƒ½ç”¨èµ‹å€¼è¯­å¥å°†ä¸€ä¸ªå­—ç¬¦ä¸²å¸¸é‡æˆ–å­—ç¬¦æ•°ç»„ç›´æ¥èµ‹ç»™å¦ä¸€ä¸ªå­—ç¬¦æ•°ç»„str1[] = \"China\" // èµ‹å€¼ï¼Œä¸åˆæ³•str1 = \"China\" // èµ‹å€¼ï¼Œä¸åˆæ³•str2 = str1 // èµ‹å€¼ï¼Œä¸åˆæ³• æŒ‡é’ˆ å˜é‡ä¸åœ°å€ æŒ‡é’ˆä¸æŒ‡é’ˆå˜é‡ ç›´æ¥è®¿é—®ä¸é—´æ¥è®¿é—® ç©ºæŒ‡é’ˆä¸é‡æŒ‡é’ˆ ç©ºç±»å‹æŒ‡é’ˆ å®šä¹‰ï¼Œåˆå§‹åŒ–ï¼Œä¹¦å†™è§„åˆ™ æŒ‡é’ˆè¿ç®— æŒ‡é’ˆä¸æ•°ç»„ æŒ‡é’ˆä¸ä¸€ç»´æ•°ç»„ æŒ‡é’ˆä¸äºŒç»´æ•°ç»„ æŒ‡é’ˆä¸å­—ç¬¦æ•°ç»„ constä¸æŒ‡é’ˆ æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ å¤šçº§æŒ‡é’ˆ 14. å˜é‡ä¸åœ°å€å˜é‡åï¼š å˜é‡åå°±æ˜¯ç”¨æˆ·å¯¹æŸä¸€å—å†…å­˜ç©ºé—´çš„æŠ½è±¡è¡¨ç¤ºï¼›æƒ³æŠŠè¿™å—å„¿å†…å­˜ç½®æˆ100ï¼Œå°±å†™int i = 100;å˜é‡åå°±æ˜¯æŸä¸ªå†…å­˜ç©ºé—´çš„åˆ«åï¼› åœ°å€ï¼š æŒ‡é’ˆå°±æ˜¯åœ°å€ï¼ŒæŒ‡é’ˆå°±æ˜¯æŒ‡å‘æŸä¸ªå†…å­˜ç©ºé—´åœ°å€çš„åœ°å€å€¼ï¼› 1.1 å˜é‡çš„ä¸‰è¦ç´ int a = 3 åœ¨å†…å­˜ä¸­ï¼Œ å³äº§ç”Ÿ 0x0012FF78ï¼Œ3ï¼Œa ä¸‰ä¸ªè¦ç´ ã€‚ 0x0012FF78å³å˜é‡çš„åœ°å€ï¼Œ æŠŠè¿™ä¸ªå˜é‡çš„åœ°å€ç§°ä¸ºâ€œæŒ‡å‘è¯¥å˜é‡çš„æŒ‡é’ˆâ€ï¼› 3å³å˜é‡å€¼ï¼› aå³å˜é‡çš„ç­¾åï¼› 1.2 è¾“å‡ºå˜é‡çš„åœ°å€åœ°å€è¿ç®—ç¬¦ â€œ&amp;â€ int a = 3; printf(&quot;%x&quot;, &amp;a) 15. æŒ‡é’ˆä¸æŒ‡é’ˆå˜é‡è¯­æ³• TYPE NAME = VALUEï¼› 12int i = 1; // type ä¸º intint * p = &amp;i; // type ä¸º int *, è€Œä¸æ˜¯ int 2.1 éæ³•æ“ä½œï¼ˆé‡æŒ‡é’ˆï¼‰12int * p = &amp;i; // åˆæ³•æ“ä½œï¼ŒæŒ‡é’ˆä¸€æ—¦å®šä¹‰å‡ºæ¥ï¼Œå°±è¦ç»™ä¸€ä¸ªæ˜ç¡®æŒ‡å‘ï¼›æ²¡æœ‰çš„è¯ï¼Œä¸‹å›åˆ†è§£int * p = 0x7fffa37eac60; // å¯èƒ½è¿™ä¸ªåœ°å€å·²ç»è¢«å ç”¨äº†ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæ˜¯ä¸ªéæ³•æ“ä½œï¼› 2.2 æŒ‡é’ˆå˜é‡ ä¸“é—¨ç”¨äºå­˜æ”¾æŒ‡é’ˆï¼ˆæŸä¸ªå˜é‡çš„åœ°å€ï¼‰çš„å˜é‡ 123456789101112int c = 76;int * pointer; //å®šä¹‰åå­—ä¸ºpointerçš„æŒ‡é’ˆå˜é‡ï¼›åªèƒ½å­˜æ”¾åœ°å€ï¼// int *pointer;// 1) int æ˜¯æŒ‡é’ˆå˜é‡çš„åŸºç±»å‹ æ‰€è°“åŸºç±»å‹ï¼šæŒ‡é’ˆå˜é‡æŒ‡å‘çš„å˜é‡çš„ç±»å‹// 2) * æ˜¯æŒ‡é’ˆè¿ç®—ç¬¦ï¼Œè¡¨ç¤ºpointerè¿™ä¸ªå˜é‡çš„ç±»å‹// 3) pointer æ˜¯æŒ‡æŒ‡é’ˆå˜é‡çš„åå­—pointer = &amp;c;// å°†å˜é‡c çš„åœ°å€èµ‹å€¼ç»™æŒ‡é’ˆå˜é‡pointerï¼›// èµ‹å€¼åï¼Œç§°æŒ‡é’ˆå˜é‡pointeræŒ‡å‘äº†å˜é‡cï¼› åˆ™*pointerï¼š ä¸ºpointeræ‰€æŒ‡å‘çš„å­˜å‚¨å•å…ƒçš„å†…å®¹ï¼›æ˜¯å˜é‡cã€‚å› æ­¤*pointerå¯ä»¥å½“ä½œ å˜é‡c æ¥ä½¿ç”¨ 2.3 æŒ‡é’ˆå˜é‡çš„åœ°å€ æŒ‡é’ˆå˜é‡ä¹Ÿæ˜¯å˜é‡ï¼Œæ˜¯å˜é‡å°±æœ‰åœ°å€ 12345678910int main() &#123; int a = 13; int * p = &amp;a; *p = 100; printf(P, p); printf(P, &amp;p); // æŒ‡é’ˆå˜é‡ä¹Ÿæœ‰åœ°å€ï¼› // 0x7ffee6a26ac8 // 0x7ffee6a26ac0 return 0;&#125; 2.4 æŒ‡é’ˆå˜é‡ç¤ºä¾‹12345678910111213int main()&#123; int a = 0, b=3, temp; int *p1 = NULL, *p2 = NULL; p1 = &amp;a; p2 = &amp;b; printf(\"%p\\n\", &amp;a); printf(\"%p\\n\", &amp;b); if(*p1 &lt; *p2) &#123; temp = *p1; *p1 = *p2; *p2 = temp; &#125; printf(\"%d\\n\", *p1); // 3 printf(\"%d\\n\", *p2); // 0&#125; 2.5 æŒ‡é’ˆä½œè¿ç®— (å–åœ°å€ å’Œ å– * å’Œå…³ç³»è¿ç®—) 2.5.1 å–åœ°å€ è¦è·å–æŸä¸ªå˜é‡åœ¨å†…å­˜ä¸­çš„æˆ¿é—´å· 2.5.2 å–* æ‰¾åˆ°ç°åœ¨ç»™å®šæˆ¿é—´å·é‡Œé¢å­˜æ”¾çš„å†…å®¹ 16. ç›´æ¥è®¿é—®å’Œé—´æ¥è®¿é—®3.1ä¸€çº§é—´æ¥è®¿é—®å’Œ äºŒçº§é—´æ¥è®¿é—®1234567891011121314int main ()&#123; int i = 1; int *p = &amp;i; int **q = &amp;p; printf(P, p); // 0x7ffee92579b8 printf(P, q); // 0x7ffee92579b0 printf(P, *q); // 0x7ffee92579b8 printt(D, i); // 1 ç›´æ¥è®¿é—® printf(D, *p); // 1 ä¸€çº§é—´æ¥è®¿é—® printf(D, **q);// 1 äºŒçº§é—´æ¥è®¿é—® exit(0);&#125; 3.2 æŒ‡é’ˆå…³ç³»è¿ç®— å½“ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ˜¯ä¸€å—è¿ç»­å†…å­˜ç©ºé—´çš„æ—¶å€™ï¼Œ æ¯”å¦‚ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘åŒä¸€ä¸ªæ•°ç»„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªæŒ‡é’ˆå¯ä»¥åšä¸€ä¸ªå…³ç³»ä¸Šçš„æ¯”è¾ƒï¼› ++ -- ++ â€“ è¿ç®—å®é™…ä¸Šæ”¹å˜æŒ‡é’ˆä½ç½®ï¼› 3.3 æŒ‡é’ˆå˜é‡ç±»å‹ä¸æŒ‡é’ˆå˜é‡å¤§å°12345678910111213141516171819202122int main ()&#123;int i = 1;int * p;float *q;double *d;printf(D, sizeof(i)); // 8printf(D, sizeof(p)); // 8printf(D, sizeof(q)); // 8printf(D, sizeof(d)); // 8// ç»“æ„ä½“æŒ‡é’ˆçš„å¤§å°ä¹Ÿæ˜¯8/** ä¸ç®¡æŒ‡é’ˆæ˜¯å¤šå°‘çº§çš„æŒ‡é’ˆï¼Œä¸ç®¡æŒ‡é’ˆæ˜¯ä»€ä¹ˆæ ·çš„ç±»å‹ã€‚æŒ‡é’ˆåœ¨æŸä¸ªå¹³å°ä¸‹æ‰€å çš„åœ°å€ç©ºé—´æ˜¯ç¡®å®šçš„ã€‚é‚£æ—¢ç„¶å¦‚æ­¤ä¸ºä½• è¦ç»™æŒ‡é’ˆå˜é‡åŠ ç±»å‹å‘¢ï¼Œæ¯”å¦‚ int *p, float *q. é‚£æ˜¯å› ä¸ºæœ‰ *p å–* çš„æ“ä½œï¼Œæ¯”å¦‚*qçš„æ—¶å€™ï¼Œæ€ä¹ˆå°±èƒ½çŸ¥é“å»å¯¹åº”åœ°å€è¯»å– 4ä¸ªå­—èŠ‚å‘¢ï¼Ÿ è¿™ä¸ªæ—¶å€™å°±è¦é  æŒ‡é’ˆå˜é‡çš„ å˜é‡ç±»å‹åŠ æŒäº†ã€‚æ‰€ä»¥è¿™ä¸ªå˜é‡ç±»å‹ä¹‹é—´çš„æ„ä¹‰ å°±ä¸å°½ç›¸åŒäº†ã€‚*/char * s;s = &amp;i;printf(D, *s); // è¿™ä¸ªæ—¶å€™ï¼Œä¸çŸ¥é“è¦å»è¯»å– 4ä¸ªå­—èŠ‚ï¼Œæ‰€ä»¥ç»“æœä¸æ˜¯1ï¼›&#125; 17. ç©ºæŒ‡é’ˆä¸é‡æŒ‡é’ˆ12345int main ()&#123; int * p = NULL;// æŒ‡é’ˆè¢«å®šä¹‰å‡ºæ¥ï¼Œè¿˜æœªå†³å®šæŒ‡å‘å“ªé‡Œçš„æ—¶å€™ï¼Œå¯ä»¥å…ˆæŒ‡å‘NULLï¼Œç³»ç»Ÿä¸Š 0 å·ä¸åˆ†é…ç»™ä»»ä½•è¿›ç¨‹ï¼›æŠŠæŒ‡é’ˆç½®ä¸ºç©ºæ˜¯ä¸ºäº†é¢„é˜²é‡æŒ‡é’ˆï¼› exit(0);&#125; 4.1 é‡æŒ‡é’ˆ å½“å‰è¿™ä¸ªæŒ‡é’ˆçš„æŒ‡å‘æ˜¯ä¸ç¡®å®šçš„ï¼Œæˆ–è€…å‹æ ¹å°±æ²¡æœ‰æŒ‡å‘ï¼›ä½†æ˜¯ç›´æ¥ä½¿ç”¨è¿™ä¸ªæŒ‡é’ˆäº†ã€‚ 1234567int main()&#123; int *p; printf(\"%p --&gt; %d\\n\", p ,*p); // 0x7ffee67879d8---&gt;0&#125; 1234567int main()&#123; int *p; printf(\"%p --&gt; %d\\n\", p ,*p); *p = 1; // æ®µé”™è¯¯&#125; 4.1.1 å¦‚ä½•æœç»é‡æŒ‡é’ˆ æŒ‡é’ˆä¸€ç»å®šä¹‰ï¼Œå°±å¿…é¡»æœ‰ä¸€ä¸ªæ˜ç¡®çš„æŒ‡å‘ï¼Œæ²¡æœ‰æš‚æ—¶æ²¡æœ‰æŒ‡å‘çš„è¯ï¼Œå°±å…ˆæŒ‡å‘NULLï¼› 18. ç©ºç±»å‹1void * p = NULL; // å³ ç©ºç±»å‹ void * æ˜¯ä¸€ä¸ªç™¾æ­çš„ç±»å‹ï¼Œä»»ä½•ç±»å‹çš„æŒ‡é’ˆå€¼éƒ½å¯ä»¥èµ‹å€¼ç»™å®ƒã€‚void * ä¹Ÿå¯ä»¥æŠŠè‡ªå·±çš„å€¼èµ‹å€¼ç»™ä»»ä½•ç±»å‹çš„æŒ‡é’ˆï¼› 5.1 ç©ºç±»å‹çš„ä½¿ç”¨åœºæ™¯1void *memcpy(void *dest, const void *src, size_t n); 19. è¿ç®—ç¬¦ä¼˜å…ˆçº§ ä¸Šé¢ä¼˜å…ˆçº§æ¯”ä¸‹é¢é«˜ åç½®++ â€“ å‰ç½®++ â€“ é€»è¾‘é (!) * &amp; // åŒçº§åˆ«ï¼Œä¼˜å…ˆçº§ç”±å³å¾€å·¦ç»“åˆé¡ºåºï¼Œ ç¦»ç›®æ ‡è¶Šè¿‘ï¼Œä¼˜å…ˆçº§è¶Šé«˜ ç®—æœ¯è¿ç®—ç¬¦ å…³ç³»è¿ç®—ç¬¦ &amp;&amp;å’Œï½œï½œ èµ‹å€¼è¿ç®—ç¬¦ åŒçº§åˆ«ï¼Œä¼˜å…ˆçº§ç”±å³å¾€å·¦ç»“åˆé¡ºåºï¼Œ ç¦»ç›®æ ‡è¶Šè¿‘ï¼Œä¼˜å…ˆçº§è¶Šé«˜ å¦‚ 12&amp;*pointer = &amp;(*pointer)*&amp;a = *(&amp;a) (*pointer)++ ä¸ç­‰äº *pointer++ (pointer)++ æ˜¯å…ˆ åšå–è¿ç®—ï¼Œå¾—åˆ°çš„intç±»å‹è‡ªå¢ï¼Œ pointer++ åˆ™æ˜¯ æŒ‡é’ˆå˜é‡ç§»ä½ï¼Œç„¶åå†å–è¿ç®— *pointer++ çš„å«ä¹‰ å‡è®¾ï¼š pointerå½“å‰æ‰€å­˜çš„åœ°å€æ˜¯0x00000100 è‹¥pointer çš„æŒ‡é’ˆå˜é‡åŸºç±»å‹æ˜¯ æŒ‡å‘ä¸€ä¸ª intæˆ–å®å‹ï¼ˆå 4ä¸ªå­—èŠ‚ï¼‰ï¼Œåˆ™pointer++ ç­‰äº iptr + 1*4 = 0x00000104 è‹¥pointer æŒ‡å‘ä¸€ä¸ª å­—ç¬¦å‹ï¼ˆå 1ä¸ªå­—èŠ‚ï¼‰ï¼Œåˆ™pointer++ ç­‰äº iptr + 1*1 = 0x00000101 12345678910111213int main() &#123; int a[5] = &#123;5,11,19,21,33&#125;; int *p = NULL; printf(P, a); // 0x7ffee0eeda20 p = a; printf(P, p); // 0x7ffee0eeda20 printf(D, *p); // 5 printf(D, *p++); // 5 printf(D, *p++); // 11 printf(D, *p); // 19 return 0;&#125;*p++ æ˜¯åœ°å€ç§»åŠ¨ ** å°ç»“** æŒ‡é’ˆå’ŒæŒ‡é’ˆå˜é‡æ˜¯ä¸åŒçš„ã€‚æŒ‡é’ˆæ˜¯åœ°å€ï¼ŒæŒ‡é’ˆå˜é‡å°±æ˜¯ä¸€ä¸ªæ™®é€šçš„å˜é‡ã€‚pointeræŒ‡çš„æ˜¯è¿™ä¸ªæŒ‡é’ˆå˜é‡ æ‰€æŒ‡å‘çš„é‚£ç‰‡å†…å­˜ç©ºé—´é‡Œé¢çš„å†…å®¹ã€‚(pointer)++ ä¸ç­‰äº *pointer++ 20. æŒ‡é’ˆä¸æ•°ç»„ æ•°ç»„åä»£è¡¨æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ ï¼ˆæ•°ç»„åç›¸å½“äºæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼‰ï¼›æ•°ç»„åä¸æ˜¯å˜é‡ï¼Œä¸èƒ½ç»™aèµ‹å€¼ï¼›int *p = &amp;a[0]; a++æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼ˆaåªæ˜¯ä¸ªå¸¸é‡ï¼‰ï¼Œä½†p++ä¼šå¼•èµ·på˜åŒ–ã€‚på¯ä»¥æŒ‡å‘æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ä»¥åçš„å…ƒç´ ã€‚æŒ‡é’ˆåšåŠ å‡è¿ç®—æ—¶ä¸€å®šæ³¨æ„æœ‰æ•ˆçš„èŒƒå›´ï¼›ï¼ˆæŒ‡é’ˆç†è®ºä¸Šèƒ½å¤Ÿåœ¨å†…å­˜ä¸­è‡ªç”±çš„æ¼‚ç§»ï¼Œå¾ˆå¯èƒ½ç§»é™¤æŸä¸€ä¸ªæ•°ç»„çš„èŒƒå›´ï¼Œæœ‰çš„æ—¶å€™å°±æ¯”è¾ƒå±é™©äº†ï¼‰ 7.1 æ•°ç»„åä»£è¡¨æ•°ç»„é¦–å…ƒç´ çš„åœ°å€ æ•°ç»„åæ˜¯æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼› å¯¹äºæ•°ç»„a[10], æ•°ç»„å aä»£è¡¨æ•°ç»„ a[10]ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ a[0]çš„åœ°å€ï¼› å³ a ä¸ a[0]ç­‰ä»· æ³¨æ„ï¼š aæ˜¯åœ°å€å¸¸é‡ï¼Œä¸æ˜¯å˜é‡ï¼Œä¸èƒ½ç»™aèµ‹å€¼ï¼› 7.2 åˆ›å»ºä¸€ä¸ªåŒ¿åæ•°ç»„ æŒ‡é’ˆå’Œæ•°ç»„çš„å…³ç³»ï¼Œå…¶å®å°±æ˜¯ä¸€ç§å¼•ç”¨æ–¹å¼è€Œå·²ã€‚ä½ çš„ä¸€ç»´æ•°ç»„åå’Œä¸€çº§æŒ‡é’ˆä¹‹é—´çš„å…³ç³»å…¶å®é™¤äº†ä¸€ä¸ªæ˜¯å˜é‡ï¼Œä¸€ä¸ªæ˜¯å¸¸é‡ä¹‹å¤–ã€‚å®Œå…¨å¯ä»¥ç­‰ä»·ä»£æ¢ã€‚ 1234567int main()&#123; int *p = (int [3])&#123;1,2,3&#125;; int i; for (i=0;i&lt;3;i++) printf(D, p[i])&#125; 7.3 åˆ©ç”¨æŒ‡é’ˆå˜é‡å¼•ç”¨æ•°ç»„å…ƒç´  è‹¥å®šä¹‰ æ•°ç»„ int a[10]; æŒ‡é’ˆ int * pointer; åˆ™: pointer =a; ç­‰ä»·äºpointer = &amp;a[0]; æ•°ç»„è®¿é—® pointer+ i; ç­‰ä»·äº a+i; ç­‰ä»·äº &amp;a[i]; *(pointer+i); ç­‰ä»·äº *(a+i); ç­‰ä»·äºa[i]; è¡¨ç¤ºå½¢å¼ pointer[i] ç­‰ä»·äº *(pointer+i); 1234567891011121314151617int main () &#123; int a[9] = &#123;4,5,6,7,8,9,1,2,3&#125;; int *p = NULL; p = a; // a æ˜¯ æ•°ç»„çš„åœ°å€ï¼Œ printf(\"%d\\n\", *p); // 4 printf(\"%d\\n\", *p++); // 4 ++çš„å«ä¹‰æ˜¯å…ˆä½¿ç”¨pï¼Œç„¶åå†++ printf(\"%d\\n\", *p); // 5 printf(\"%d\\n\", *++p); // 6 å‰+ å’Œ å+ è·Ÿjsä¸€æ · printf(\"%d\\n\", p[0]); // å› ä¸ºp=aäº†ï¼Œæ‰€ä»¥p[0] å³a[0] printf(\"%d\\n\", p[1]); printf(\"%d\\n\", p[2]); printf(\"%d\\n\", p[3]); printf(\"%d\\n\", p[4]); return 0;&#125; 7.4 æŠ½è±¡å…¬å¼12345int * p = a;// a[i]: a[i] = *(a+i) = *(p+i) = p[i];// &amp;a[i]: &amp;a[i] = a+i = p+i = &amp;p[i];p = a; 7.5 é‡ç½®æŒ‡é’ˆå˜é‡1234567891011int a[3];int *p = a;int i;for (i=0; i&lt;sizeof(a)/sizeof(*a); i++) scanf(\"%d/n\", p++);p = a; // è¿™é‡Œéœ€è¦ é‡ç½®ä¸€ä¸‹ pçš„æŒ‡é’ˆï¼›ä¸ç„¶ä¼šæ•°ç»„è¶Šç•Œï¼›for (i=0; i&lt;sizeof(a)/sizeof(*a); i++) printf(\"%d\", *p++); 7.6 éœ€è¦æ³¨æ„çš„é—®é¢˜ int * p = &amp;a[0]; , * a++æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼ˆå› ä¸ºaæ˜¯ä¸ªå¸¸é‡ï¼‰ï¼Œä½†p++ä¼šå¼•èµ·på˜åŒ–ï¼›* på¯ä»¥æŒ‡å‘æ•°ç»„æœ€åä¸€ä¸ªå…ƒç´ ä»¥åçš„å…ƒç´ ï¼›ï¼ˆå› ä¸ºpæ˜¯å†…å­˜ä¸­çš„ä¸€ä¸ªæŒ‡é’ˆï¼‰ï¼Œæ‰€ä»¥æŒ‡é’ˆåšåŠ å‡è¿ç®—æ—¶ä¸€å®šæ³¨æ„æœ‰æ•ˆçš„èŒƒå›´ã€‚ 123456int a[5],int *iPtr = &amp;a[1];iPtr--; // æŒ‡å‘&amp;a[0]*iPtr = 3; // a[0] = 3iPtr--; // æŒ‡å‘&amp;a[-1], dangerous*iPtr = 6; // (damage) å¯¹å†…å­˜é€ æˆæŸåï¼Œå½±å“å†…å­˜ä¸­å…¶ä»–çš„å˜é‡ ç¤ºä¾‹ 123456789int main()&#123; int a[5] = &#123;6,7,8,9,0&#125;; int *p = &amp;a[3]; *p = 100; printf(\"%d\\n\", *p++); // 100 printf(\"%d\\n\", *p--); // 0 printf(\"%d\\n\", *--p); // 8 return 0;&#125; 7.7 æŒ‡å‘äºŒç»´æ•°ç»„çš„æŒ‡é’ˆ7.7.1 éå†æ•°ç»„å…ƒç´ 1234567891011121314151617181920212223242526272829303132int main()&#123; int a[3][4] = &#123;1,3,5,7,9,11,13,15,17,19,21,23&#125;; int *p; for (p= &amp;a[0][0] ;p &lt; &amp;a[0][0]+12; p++) &#123; printf(\"%d\\n\", *p); &#125; return 0;&#125;// 0x7ffeefbff4f0// 1// 0x7ffeefbff4f4// 3// 0x7ffeefbff4f8// 5// 0x7ffeefbff4fc// 7// 0x7ffeefbff500// 9// 0x7ffeefbff504// 11// 0x7ffeefbff508// 13// 0x7ffeefbff50c// 15// 0x7ffeefbff510// 17// 0x7ffeefbff514// 19// 0x7ffeefbff518// 21// 0x7ffeefbff51c// 23 å¦‚ä¸Šæ‰€ç¤ºï¼Œ ä¼šå°†è¿™ä¸ªæ•°ç»„çš„å†…å®¹éƒ½æ‰“å°å‡ºæ¥äº†ï¼Œå› ä¸ºäºŒç»´æ•°ç»„ä¼šè¢«æ‹‰å¹³å­˜å‚¨åˆ°ä¸€æ®µè¿ç»­çš„å†…å­˜ç©ºé—´å½“ä¸­ 7.7.2 äºŒç»´æ•°ç»„è¡Œåˆ—æŒ‡é’ˆ12345678910111213141516171819202122232425262728293031323334353637383940414243 #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #define M 3 #define N 4 #define D \"%d\\n\" #define P \"%p\\n\" int main () &#123; int a[M][N] = &#123;1,2,3,4,5,6,7,8,9,10,11,12&#125;; int i, j; printf(\"&amp;a = %p, &amp;a+1 = %p\\n\", &amp;a, &amp;a+1); printf(\"%&amp;a[0][0] = %p, &amp;a[1][0] = %p\\n\", &amp;a[0][0], &amp;a[1][0]); for (i=0;i&lt;M;i++) &#123; for (j=0;j&lt;N;j++) &#123; printf(\"%p---&gt;%d\\n\", &amp;a[i][j], a[i][j]); &#125; printf(\"\\n\"); &#125; exit(0); &#125;// &amp;a = 0x7ffefe385370, &amp;a+1 = 0x7ffefe3853a0// %&amp;a[0][0] = 0x7ffefe385370, &amp;a[1][0] = 0x7ffefe385380// 0x7ffefe385370---&gt;1// 0x7ffefe385374---&gt;2// 0x7ffefe385378---&gt;3// 0x7ffefe38537c---&gt;4// 0x7ffefe385380---&gt;5// 0x7ffefe385384---&gt;6// 0x7ffefe385388---&gt;7// 0x7ffefe38538c---&gt;8// 0x7ffefe385390---&gt;9// 0x7ffefe385394---&gt;10// 0x7ffefe385398---&gt;11// 0x7ffefe38539c---&gt;12 å°ç»“ï¼š æ‰€ä»¥aé™¤äº†æ˜¯äºŒç»´æ•°ç»„çš„æ•°ç»„åï¼ˆåœ°å€å¸¸é‡ï¼‰ä¹‹å¤–ï¼Œåœ¨ä½¿ç”¨ä¸Šæ¯”è¾ƒåå‘ä¸€ä¸ªæŒ‡å‘è¡ŒæŒ‡é’ˆã€‚ 7.7.3 èƒ½å¤Ÿæ¥æ”¶äºŒç»´æ•°ç»„æŒ‡é’ˆçš„æŒ‡é’ˆå˜é‡å¼•å­ 1234567891011&#123; int a[M][N] = &#123;1,2,3,4,5,6,7,8,9,10,11,12&#125;; int i=0, j=0; int *p = NULL; p =&amp;a[i][j]; // *(a+0) , *a for (i=0; i&lt;12; i++,p++) // for (i=0; i&lt;12; i++) printf(\"%d \", *p); // printf(\"%d \", p[i]); printf(\"\\n\"); exit(0); // 1 2 3 4 5 6 7 8 9 10 11 12 &#125; 7.7.4 å¦ä¸€æ®µç¨‹åº123456789int main()&#123; int a[3][4] = &#123;1,3,5,7,9,11,13,15,17,19,21,23&#125;; int (*p)[4], i,j; p = a; cin&gt;&gt;i&gt;&gt;j; // i&lt;3 ä»£è¡¨è¡Œå·ï¼Œ j&lt;4 ä»£è¡¨åˆ—å·ï¼› cout &lt;&lt; setw(4) &lt;&lt; *(*(p+i)+j); // æ­£è¯¯åˆ¤æ–­ï¼š è®¿é—®å…ƒç´  a[i][j] return 0;&#125; ç¨‹åºåˆ†æ ä» p = a å¼€å§‹ aç›¸å½“äºæŒ‡å‘a[3][4]çš„â€œç¬¬ä¸€ä¸ªå…ƒç´ â€çš„æŒ‡é’ˆï¼› æ‰€è°“â€œç¬¬ä¸€ä¸ªå…ƒç´ â€æ˜¯æŒ‡ä¸€ä¸ªâ€œåŒ…å«4ä¸ªintå‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„â€ï¼› æ‰€ä»¥ï¼Œaç›¸å½“äºä¸€ä¸ªâ€œåŒ…å«4ä¸ªintå‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„â€çš„åœ°å€ï¼› å› æ­¤ï¼Œpçš„åŸºç±»å‹åº”è¯¥æ˜¯ï¼š â€œåŒ…å«4ä¸ªintå‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„â€ å˜é‡å®šä¹‰è¯­å¥çš„è¯­æ³•ä¸ºï¼š int (*p)[4]; *p(æ•°ç»„) p -&gt; | (p)[0] | (p)[1] | (p)[2] | (p)[3] | 7.7.5 åˆ©ç”¨æŒ‡é’ˆå˜é‡å¼•ç”¨å¤šç»´æ•°ç»„ä¸­çš„æ•°ç»„((p+i)+j)æ˜¯ä»€ä¹ˆï¼Ÿ p æ˜¯æŒ‡å‘ä¸€ä¸ªâ€œåŒ…å«4ä¸ªintå‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„â€ï¼› p+i æ˜¯ç¬¬i+1ä¸ªâ€œåŒ…å«4ä¸ªintå‹å…ƒç´ çš„ä¸€ç»´æ•°ç»„â€çš„åœ°å€; p+i ç­‰ä»·äº&amp;a[i]ï¼› *(p+i)ç­‰ä»·äºa[i]ï¼› *(p+i)+j ç­‰ä»·äº a[i]+j; // è¿™é‡ŒæŠŠa[i] å½“ä½œä¸€ä¸ªæŒ‡é’ˆæ¥çœ‹ å› æ­¤ï¼Œ a[i]+j ç­‰ä»·äº &amp;a[i][j]; ((p+i)+j) ç­‰ä»·äº a[i][j]; 7.8 æŒ‡é’ˆä¸å­—ç¬¦æ•°ç»„12345678910111213 int main () &#123; char s[] = \"i love coding!\"; // codeing char *p = s+7; printf(\"%s\\n\", s+7); puts(s); puts(p); // puts(p) ç›¸å½“äºæŠŠpçš„èµ·å§‹ä½ç½®æ‹¿è¿›æ¥ï¼Œ ä¾æ¬¡è¾“å‡ºï¼Œç›´åˆ°ç¢°åˆ°\\0 ä¸ºæ­¢ï¼› exit(0); &#125;// coding!// i love coding!// coding! 7.8.1 å­—ç¬¦æ•°ç»„æ‹¼æ¥12345678910#include &lt;string.h&gt;int main()&#123; char str[] = \"hello\"; // str = \"world\" false strcpy(str, \"world123\"); // è¦†ç›–åŸæ¥æ•°ç»„ç©ºçš„æ¯ä¸€é¡¹ puts(str); // world123 exit(0);&#125;// world123 7.8.2 å­—ç¬¦ä¸²é•¿åº¦å’Œå­—ç¬¦ä¸²å­—èŠ‚æ•°12char str[] = \"hello\";printf(\"%d ,%d\", sizeof(str), strlen(str)); // 6, 5 7.8.3 å­—ç¬¦æŒ‡é’ˆè·Ÿå­—ç¬¦æ•°ç»„çš„åŒºåˆ«12345678char *str = \"hello\";sizeof(str); // 8 æŒ‡é’ˆå˜é‡ä¸åˆ†ç±»å‹ ï¼Œ 64ä½ç³»ç»Ÿä¸‹é•¿åº¦éƒ½æ˜¯8ä¸ªå­—èŠ‚ï¼Œ 32ä½ç³»ç»Ÿä¸º4ä¸ªå­—èŠ‚ï¼›strlen(str); // 5 å­—ç¬¦ä¸²é•¿åº¦strcpy(str, \"world\"); // æ®µé”™è¯¯ï¼Œ å­—ç¬¦æŒ‡é’ˆè·Ÿå­—ç¬¦æ•°ç»„çš„åŒºåˆ«å°±åœ¨äºæ­¤ã€‚å› ä¸ºstr æŒ‡å‘çš„æ˜¯ä¸€ä¸ª å­—ç¬¦ä¸²å¸¸é‡çš„åœ°å€ï¼Œ strcpyæ˜¯ä¸€ä¸ªè¦†ç›–å†™æ“ä½œï¼Œæ˜¾ç„¶ï¼Œä¼å›¾å»æ›´æ”¹ä¸€ä¸ªå¸¸é‡æ˜¯æ— æ•ˆçš„ã€‚ä¹‹æ‰€ä»¥æ˜¯å¸¸é‡ï¼Œæ˜¯ä¸²å¸¸é‡ï¼Œè¿™ä¸ªä¸²åœ¨å½“å‰å­˜å‚¨ä½ç½®æ˜¯ç‰¹æ®Šçš„ã€‚åœ¨ä½¿ç”¨ä¸Šä¸å…è®¸è¢«æ”¹å˜å’Œè¦†ç›–ã€‚// æ­£ç¡®çš„åšæ³•str = \"world123\"; //æ›´æ”¹æŒ‡é’ˆæŒ‡å‘ï¼›puts(str); 21. å­—ç¬¦ä¸²ä¸æŒ‡é’ˆ æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆ æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆå˜é‡ï¼š char a[10]; char *p; p=a; æ•°ç»„å’Œå­—ç¬¦ä¸²å¤ªæ¥è¿‘äº†ã€‚é‚£æ€ä¹ˆå»å®šä¹‰æŒ‡å‘å­—ç¬¦ä¸²çš„æŒ‡é’ˆå‘¢ï¼Ÿä¹Ÿå¾ˆç®€å•ï¼Œ æˆ‘é¦–å…ˆå®šä¹‰ä¸€ä¸ªå­—ç¬¦æ•°ç»„ï¼Œå®ƒå°±æ˜¯ç”¨æ¥å­˜æ”¾å­—ç¬¦ä¸²çš„ã€‚ æˆ‘ä»¬ä»¥å‰è®²è¿‡å­—ç¬¦ä¸²å’Œå­—ç¬¦æ•°ç»„å…¶å®åŒºåˆ«å°±åœ¨äºæœ‰æ²¡æœ‰æœ€åçš„åæ–œæ é›¶ï¼Œ æœ¬è´¨ä¸Šéƒ½æ˜¯å­—ç¬¦æ•°ç»„ã€‚ 123456789101112int main()&#123; int a = 5; int *p = &amp;a; char c[6] = &#123;'h', 'e', 'l', 'l', 'o','\\0'&#125;; char *s = c; printf(P, s); // 0x7ffee2066aba printf(P, c); // 0x7ffee2066aba printf(S, s); // hello printf(S, c); // hello s++; printf(S, s); // ello&#125; 8.1 å­—ç¬¦ä¸²æŒ‡é’ˆä¸¾ä¾‹123456789101112int main() &#123; char buffer[10] = \"ABC\"; char *pc; pc = \"hello\"; // è™½ç„¶ helloèµ‹å€¼ç»™äº†pcï¼Œä½†æ˜¯å´ä¸èƒ½é€šè¿‡pcå»æ”¹å˜helloï¼Œ å› ä¸ºhelloæ˜¯å¸¸é‡ï¼Œå¸¸é‡åœ¨å†…å­˜ä¸­è¢«æ”¾åœ¨ç‰¹æ®Šçš„åœ°æ–¹äº†ï¼›è¿™ç‰‡åŒºåŸŸä¸å…è®¸ä¿®æ”¹ï¼› cout &lt;&lt; pc &lt;&lt; endl; // hello pc++; cout &lt;&lt; pc &lt;&lt; endl; // ello cout &lt;&lt; *pc &lt;&lt; endl; // e pc = buffer; cout &lt;&lt; pc; // ABC return 0;&#125; 22. constä¸æŒ‡é’ˆ constæ˜¯æŠŠæŸäº›å†…å®¹å¸¸é‡åŒ– 1234567891011121314const int a;const float pi = 3.14; // çº¦æŸ piè¿™ä¸ªå˜é‡å€¼ ä¸€ç›´ä¿æŒæ˜¯ 3.14ä¸å˜ï¼›è¿™ç§è¯­æ³•å®é™…æ˜¯åœ¨å®šä¸€ä¸ªå˜é‡ï¼Œåªæ˜¯æŠŠå˜é‡çš„å€¼å¸¸é‡åŒ–äº†ã€‚int const a;// å¸¸é‡æŒ‡é’ˆï¼Œ const int *p; å’Œ int const *p; ç±»å‹åœ¨å‰é¢æˆ–è€…åé¢ å…³ç³»ä¸å¤§ï¼Œè¡¨ç¤ºç›¸åŒçš„æ„æ€ const int *p;int const *p;// æŒ‡é’ˆå¸¸é‡int *const p;const int *const p; 9.1 å˜é‡å€¼å¸¸é‡åŒ–123const int a;const float pi = 3.14; // çº¦æŸ piè¿™ä¸ªå˜é‡å€¼ ä¸€ç›´ä¿æŒæ˜¯ 3.14ä¸å˜ï¼›è¿™ç§è¯­æ³•å®é™…æ˜¯åœ¨å®šä¸€ä¸ªå˜é‡ï¼Œåªæ˜¯æŠŠå˜é‡çš„å€¼å¸¸é‡åŒ–äº†ã€‚int const a; 9.2 å¸¸é‡æŒ‡é’ˆ æŒ‡é’ˆçš„æŒ‡å‘å¯ä»¥å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯æŒ‡é’ˆæ‰€æŒ‡å‘å½“å‰çš„é‚£å—å†…å­˜çš„å€¼æ˜¯ä¸å¯ä»¥å‘ç”Ÿå˜åŒ–çš„ï¼› 123// å¸¸é‡æŒ‡é’ˆï¼Œ const int *p; å’Œ int const *p; ç±»å‹åœ¨å‰é¢æˆ–è€…åé¢ å…³ç³»ä¸å¤§ï¼Œè¡¨ç¤ºç›¸åŒçš„æ„æ€const int *p;int const *p; 12345678910int main ()&#123; const float pi = 3.14; // float *p = &amp;pi; // è­¦å‘Šï¼š initialization discards â€˜constâ€™ qualifier from pointer target type const float *p = &amp;pi; *p = 3.14159; printf(\"%f\\n\", pi); printf(\"%f\\n\", *p); exit(0);&#125; ä¸¾ä¾‹ï¼š 1int open(const chart * pathname, int flags); // å¸¸é‡æŒ‡é’ˆï¼Œä¿æŠ¤pathnameå€¼ä¸è¢«ç¯¡æ”¹ 9.3 æŒ‡é’ˆå¸¸é‡int *const p; æŒ‡é’ˆå¸¸é‡æŒ‡ æŒ‡é’ˆçš„æŒ‡å‘æ°¸è¿œä¸èƒ½å‘ç”Ÿå˜åŒ–ï¼›ä½†æ˜¯æŒ‡é’ˆæŒ‡å‘çš„å€¼å¯ä»¥æœ‰å˜åŒ–ï¼› 9.4 å¦‚ä½•åŒºåˆ†åˆ°åº•æ˜¯ å¸¸é‡æŒ‡é’ˆï¼Œè¿˜æ˜¯æŒ‡é’ˆå¸¸é‡1234const int *p; // å¦‚æœå…ˆç¢°åˆ°constå…³é”®å­—ï¼Œå°±æŠŠå¸¸é‡å…ˆå¿µå‡ºæ¥int const *p; int *const p; // å¦‚æœå…ˆçœ‹åˆ° *ï¼Œå°±æŠŠæŒ‡é’ˆå…ˆå¿µå‡ºæ¥ 9.5 ä¸¤ä¸ªconstä¿®é¥°const int *const p; 12345678910int main ()&#123; int i = 1; int j = 100; const int * const p = &amp;i; p = &amp;j; // warning å› ä¸ºpæ˜¯åªè¯»çš„ï¼Œä¸èƒ½æ›´æ”¹æŒ‡å‘ï¼› *p = 10; // warning å› ä¸º*p ä¹Ÿæ˜¯åªè¯»çš„ï¼›&#125; 9.6 æŒ‡å‘ç¬¦å·å¸¸é‡çš„æŒ‡é’ˆconst int * p; å½“æŠŠpå®šä¹‰æˆä¸€ä¸ªæŒ‡å‘ç¬¦å·å¸¸é‡çš„æŒ‡é’ˆçš„æ—¶ä¾¯ï¼Œ ç„¶åå†è®©è¿™ä¸ªpæŒ‡å‘ä»€ä¹ˆä¸œè¥¿ï¼Œ å®ƒæ‰€æŒ‡å‘çš„é‚£ä¸ªä¸œè¥¿å°±ä¸èƒ½è¢«ä¿®æ”¹äº†ã€‚æˆ‘ä»¬å°±ä¸èƒ½é€šè¿‡på†å»ä¿®æ”¹ å®ƒæ‰€æŒ‡å‘çš„é‚£ä¸ªä¸œè¥¿äº†ã€‚ æ·±å‘å•Š,è¦ç•™æ„ 1234567891011121314int main() &#123; const int a = 78; const int b = 28; int c = 18; const int * p1 = &amp;a; *p1 = 58; // (error, *pä¸èƒ½è¢«èµ‹å€¼) p1 = &amp;b; // ï¼ˆå¯ä»¥ç»™ p1 é‡æ–°èµ‹å€¼ï¼‰ *p1 = 68; // (error, *pä¸èƒ½è¢«èµ‹å€¼) printf(D, *p1); // 28 p1 = &amp;c; // ï¼ˆå¯ä»¥ç»™ p1 é‡æ–°èµ‹å€¼ï¼‰ *p1 = 88; // (error, *pä¸èƒ½è¢«èµ‹å€¼) printf(D, *p1) // 18&#125; 9.7 å†è°ˆä¸€ç»´æ•°ç»„çš„åœ°å€æ•°ç»„åç›¸å½“äºæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ 123456789101112131415int main() &#123; int a[4] = &#123;1,3,5,7&#125;; cout&lt;&lt;a&lt;&lt;endl; // a[1]çš„åœ°å€ï¼Œç®¡è¾–èŒƒå›´åªæœ‰a[1] cout&lt;&lt;&amp;a&lt;&lt;endl; // a[1]çš„åœ°å€ï¼Œç®¡è¾–èŒƒå›´æ˜¯æ•´ä¸ªaçš„å†…å­˜ç©ºé—´ cout&lt;&lt;a+1&lt;&lt;endl; // a[2]çš„åœ°å€ cout&lt;&lt;&amp;a+1&lt;&lt;endl; // è·³å‡ºäº†açš„å†…å­˜èŒƒå›´ï¼Œç†è®ºä¸Šæ˜¯ a[5]çš„åœ°å€ printf(P, a); // 0x7ffee42adab0 printf(P, a+1); // 0x7ffee42adab4 è·¨è¶Š4ä¸ªå­—èŠ‚ printf(P, &amp;a); // 0x7ffee42adab0 printf(P, &amp;a+1); // 0x7ffee42adac0 // è·¨è¶Š16ä¸ªå­—èŠ‚ printf(P, *(&amp;a)); // 0x7ffee42adab0 printf(P, *(&amp;a) + 1); // 0x7ffee42adab4&#125; æ ¹æ®Cè¯­è¨€çš„è§„èŒƒ *(&amp;a) ç­‰åŒäº a; å³aæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å†…å­˜åœ°å€*(&amp;a) + 1 ç­‰åŒäº a+1; å³aæ•°ç»„ç¬¬äºŒä¸ªå…ƒç´ çš„å†…å­˜åœ°å€ &amp;açš„ç®¡è¾–èŒƒå›´æ˜¯æ•´ä¸ªæ•°ç»„aã€‚cè¯­è¨€è§„èŒƒä¸­ï¼Œå½“å®ƒå‰é¢å‡ºç°*æ—¶ï¼Œç®¡è¾–èŒƒå›´é™çº§ï¼Œå³å •è½æˆäº† a[0]çš„åœ°å€ï¼› 9.8 æ€»ç»“ æ•°ç»„åç›¸å½“äºæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆ &amp;è¿ç®—ç¬¦ - å‡çº§ è‹¥ a æ˜¯æŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼Œå³aç›¸å½“äº &amp;a[0]; &amp;aæ˜¯â€œæŒ‡å‘æ•°ç»„â€çš„æŒ‡é’ˆï¼›&amp;a+1å°†è·¨è¶Š16ä¸ªå­—èŠ‚ï¼› &amp;aç›¸å½“äºç®¡è¾–èŒƒå›´ â€œä¸Šå‡â€ äº†ä¸€çº§; *è¿ç®—ç¬¦ - é™çº§*aæ˜¯æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ a[0]ï¼›å³ *aç­‰ä»·äºa[0]ï¼› *a ç›¸å½“äºç®¡è¾–èŒƒå›´â€œä¸‹é™â€äº†ä¸€çº§ï¼› 9.9 æŒ‡å‘äºŒç»´æ•°ç»„çš„æŒ‡é’ˆ äºŒç»´æ•°ç»„çš„å®šä¹‰ äºŒç»´æ•°ç»„a[3][4]åŒ…å«ä¸‰ä¸ªå…ƒç´ ï¼š a[0] a[1] a[2] æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªâ€œåŒ…å«å››ä¸ªæ•´å‹å…ƒç´ â€çš„æ•°ç»„ | 1 a[0][0] | 2 a[0][1] | 3 a[0][2] | 4 a[0][3] || 5 a[1][0] | 6 a[1][1] | 7 a[1][2] | 8 a[1][3] || 9 a[2][0] | 10 a[2][1]| 11 a[2][2]| 12 a[2][3]| - äºŒç»´æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯a[0]; - a[0]æ˜¯ä¸€ä¸ªâ€œåŒ…å«å››ä¸ªæ•´å½¢å…ƒç´ â€çš„ä¸€ç»´æ•°ç»„ï¼› æ¨è®º a ä¸ &amp;a[0] ç­‰ä»·a[0] ä¸ &amp;a[0][0] ç­‰ä»·a[0] ä¸ a ç­‰ä»·a[0][0] ä¸ *a ç­‰ä»· 9.10 æ€»ç»“ä¸‰æ¡è§„å¾‹1ï¼‰ æ•°ç»„åç›¸å½“äºæŒ‡å‘æ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ çš„æŒ‡é’ˆï¼›2ï¼‰ &amp;Eç›¸å½“äºæŠŠEçš„ç®¡è¾–èŒƒå›´ä¸Šå‡äº†ä¸€ä¸ªçº§åˆ«ï¼›3ï¼‰ *Eç›¸å½“äºæŠŠEçš„ç®¡è¾–èŒƒå›´ä¸‹é™äº†ä¸€ä¸ªçº§åˆ«ï¼› 23. æŒ‡é’ˆä¸å‡½æ•°10.1 æŒ‡é’ˆç”¨ä½œå‡½æ•°å‚æ•°123456789101112131415161718void Rank(int *q1, int *q2) &#123; int temp; if (*q1 &lt; *q2)&#123; temp = *q1; *q1 = *q2; *q2 = temp; &#125;&#125;int main() &#123; int a, b, *p1, *p2; scanf(a); scanf(b); p1 = &amp;a; p2 = &amp;b; Rank(p1, p2); // æŒ‡é’ˆä¼ é€’ï¼Œå³åœ°å€ä¼ é€’ printf(\"%d\\n\", a); printf(\"%d\\n\", b); return 0;&#125; 10.2 å°†æ•°ç»„åä½œä¸ºå®å‚123456789101112void sum(int *p, int n) &#123; int total = 0; for (int i=0; i&lt;n; i++)&#123; total += *p++; &#125; printf(\"%d\\n\", total); // 6&#125;int main() &#123; int a[3] = &#123;1,2,3&#125;; sum(a, 3); // å°†æ•°ç»„åä½œä¸ºå®å‚èµ‹ç»™æŒ‡é’ˆå‹å½¢å‚ return 0;&#125; 10.3 â€œæ•°ç»„åâ€ åšå½¢å‚12345678910111213// c++ ç¼–è¯‘å™¨å°†å½¢å‚æ•°ç»„å ä½œä¸º æŒ‡é’ˆå˜é‡æ¥å¤„ç†ï¼int sum(int array[], int n)&#123; for (int i=0; i&lt;10-1; i++) &#123; *(array+1) = *array + *(array+1); // æ•°ç»„ä»ç¬¬äºŒé¡¹å¼€å§‹ï¼Œæ¯ä¸€é¡¹éƒ½ç­‰äºè‡ªå·±åŠ ä¸Šå‰ä¸€é¡¹çš„å’Œï¼› array++; &#125; return *array;&#125;int main() &#123; int a[10] = &#123;1,2,3,4,5,6,7,8,9,10&#125;; printf(\"%d\\n\", sum(a, 10)); return 0;&#125; å½“ç¨‹åºé‡Œï¼ŒæŠŠä¸€ä¸ªæŒ‡é’ˆå˜é‡æˆ–è€…æ˜¯æ•°ç»„çš„åå­—ï¼Œä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œæ˜¯æŒºå±é™©çš„ï¼Œå› ä¸ºè¿™ä¸ªå‡½æ•°æ‹¿åˆ°çš„ï¼Œæ˜¯è¿™ä¸ªå˜é‡æˆ–è€…æ˜¯æ•°ç»„çš„åœ°å€ï¼Œ å®ƒæ‹¿åˆ°äº†åœ°å€ï¼Œå®ƒå°±å¯ä»¥ç›´æ¥å¯¹åœ°å€é‡Œé¢å­˜æ”¾çš„è¿™äº›å€¼ï¼Œè¿›è¡Œè‚†æ„çš„ä¿®æ”¹ï¼Œé‚£æœ‰æ²¡æœ‰ä¸€ç§åŠæ³•ï¼Œå¯ä»¥å‘¢ ä½¿æˆ‘æ—¢èƒ½å¤ŸæŠŠè¿™ä¸ªåœ°å€ä¼ é€’ç»™æŸä¸ªå‡½æ•°ï¼Œåˆèƒ½å¤Ÿç¡®ä¿ä¸è®©è¿™ä¸ªå‡½æ•°éšæ„çš„ä¿®æ”¹è¿™ç‰‡åœ°å€é‡Œé¢çš„å€¼å‘¢ï¼Ÿ å¦‚ä½• â€œé™åˆ¶â€ æŒ‡é’ˆçš„åŠŸèƒ½ å¦‚ä½•â€œé™åˆ¶â€æŒ‡é’ˆå®å‚çš„åŠŸèƒ½ 10.4 å³æŒ‡å‘ç¬¦å·å¸¸é‡çš„æŒ‡é’ˆ123456789101112int sum(const int array[], int n)&#123; // è¡¥å……ä¸ºconst for (int i=0; i&lt;10-1; i++) &#123; *(array+1) = *array + *(array+1); // arrayå˜æˆå¸¸é‡ä¹‹åï¼Œæ— æ³•ä¿®æ”¹ array++; &#125; return *array;&#125;int main() &#123; int a[10] = &#123;1,2,3,4,5,6,7,8,9,10&#125;; printf(\"%d\\n\", sum(a, 10)); return 0;&#125; ç¬¦å·å¸¸é‡å£°æ˜è¯­å¥ const æ•°ç»„ç±»å‹ å¸¸é‡å = å¸¸é‡å€¼ï¼› æ•°æ®ç±»å‹ const å¸¸é‡å = å¸¸é‡å€¼ï¼› 10.5 æŒ‡é’ˆç”¨ä½œå‡½æ•°è¿”å›å€¼å‡½æ•°çš„è¿”å›å€¼å¯ä»¥æ˜¯å¤šç§ç±»å‹ è¿”å›æ•´å½¢æ•°æ®çš„å‡½æ•° int max(int x, int y); è¿”å›æŒ‡é’ˆç±»å‹æ•°æ®çš„å‡½æ•° int *min(int x, int y) å‡½æ•°åå­—å‰é¢è¡¨ç¤ºå‡½æ•°çš„ç±»å‹ * 123456789101112// int arr[][4] é™¤äº†è¿™ä¹ˆå®šä¹‰ï¼Œè¿˜å¯ä»¥ int *(arr)[4]int *get(int arr[][4], int n, int m) &#123; int *pt; pt = *(arr+n-1) + m-1; return (pt);&#125;int main() &#123; int a[4][4] = &#123;1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16&#125;; int *p; p = get(a, 2,3); printf(\"%d\\n\", *p);&#125; åˆ†æä¸€ä¸‹è¿”å›ç»“æœï¼Œ åˆä¸€ä¸ªéœ€è¦æ³¨æ„çš„æ·±å‘ 1234567891011int *getInt1() &#123; int value1 = 20; return &amp;value1;&#125;int main() &#123; int *p; p = getInt1(); printf(\"%d\\n\", *p); // è¿™é‡Œä¼šæ‰“å°æœªçŸ¥æ•°ï¼Œä¹Ÿå¯èƒ½ä¼šæ‰“å°20ï¼›ä¸ºä»€ä¹ˆå‘¢ï¼Œå› ä¸ºéšç€getInt1çš„è¿è¡Œæ—¶å®Œæ¯•ï¼Œå¯¼è‡´å®ƒå‡½æ•°å†…éƒ¨çš„æ‰€æœ‰å¼•ç”¨è¢«é‡Šæ”¾äº†ã€‚æ‰€ä»¥è¿”å›çš„åœ°å€&amp;value1 æŒ‡å‘çš„å†…å­˜ç©ºé—´è¢«é‡Šæ”¾æ‰äº†ï¼›æ‰€ä»¥è°ä¹Ÿä¸ä¼šçŸ¥é“è¿™ä¸ªåœ°å€ç°åœ¨å­˜æ”¾çš„æ˜¯ä¸ªå•¥ï¼Œå¦‚æœè¯¥å—å†…å­˜æ²¡æœ‰è¢«æ–°å†™å…¥å€¼ï¼Œé‚£ä¹ˆè¿˜æ˜¯20ï¼›æ–°å†™å…¥çš„è¯ï¼Œé‚£å°±æ˜¯æ–°çš„æœªçŸ¥é‡äº†ï¼› return 0;&#125; éªŒè¯ 1234567891011121314151617int *getInt1() &#123; int value1 = 20; return &amp;value1;&#125;int *getInt2() &#123; int value2 = 30; return &amp;value2;&#125;int main() &#123; int *p, *q; p = getInt1(); q = getInt2(); printf(\"%d\\n\", *p); // è¿™é‡Œå¤§æ¦‚ç‡ä¼šæ˜¯30 return 0;&#125; é‚£æ—¢ç„¶å¦‚æ­¤ï¼Œæœ‰ä»€ä¹ˆåŠæ³•è§£å†³è¿™ä¸ªé—®é¢˜ é™æ€å±€éƒ¨å˜é‡ 123456789101112131415161718int *getInt1() &#123; static int value1 = 20; return &amp;value1;&#125;int *getInt2() &#123; static int value2 = 30; return &amp;value2;&#125;int main() &#123; int *p, *q; p = getInt1(); q = getInt2(); printf(\"%d\\n\", *p); // 20 printf(\"%d\\n\", *q); // 30 return 0;&#125; ä»€ä¹ˆæ˜¯é™æ€å±€éƒ¨å˜é‡ ** é™æ€å±€éƒ¨å˜é‡ ** å‡½æ•°ä¸­å±€éƒ¨å˜é‡çš„å€¼åœ¨å‡½æ•°è°ƒç”¨ç»“æŸåä¸æ¶ˆå¤±è€Œä¿ç•™åŸå€¼ å³å…¶å ç”¨çš„å­˜å‚¨å•å…ƒä¸é‡Šæ”¾ï¼Œåœ¨ä¸‹ä¸€æ¬¡è¯¥å‡½æ•°è°ƒç”¨æ—¶ï¼Œä»å¯ä»¥ç»§ç»­ä½¿ç”¨è¯¥å˜é‡ï¼› 12345678910111213141516171819202122void function() &#123; int a = 0; static int b = 0; // æœ‰ç‚¹åƒ hooksï¼Œåªåˆå§‹åŒ–ä¸€æ¬¡ï¼Œåç»­ä¸å†é‡æ–°å°†å…¶èµ‹å€¼ä¸º0ï¼› a = a+1; b = b+1; printf(\"%d\\n\", a); printf(\"%d\\n\", b);&#125;int main() &#123; for (int i =3; i&lt;3;i--)&#123; function(); &#125; return 0;&#125;// 1// 1// 1// 2// 1// 3 å°ç»“ æŒ‡é’ˆä¸å‡½æ•° æŒ‡é’ˆç”¨åšå‡½æ•°å‚æ•° å‡½æ•°æ‹¿åˆ°åœ°å€å¯å¯¹å…¶æ‰€æŒ‡å†…å®¹è¿›è¡Œä¿®æ”¹ï¼› å¯ä»¥ä½¿ç”¨constæ¥â€œé™åˆ¶â€æŒ‡é’ˆçš„åŠŸèƒ½ï¼› æŒ‡é’ˆç”¨åšå‡½æ•°è¿”å›å€¼ å¿…é¡»ç¡®ä¿å‡½æ•°è¿”å›çš„åœ°å€æ˜¯æœ‰æ„ä¹‰çš„ï¼› è¿”å›å…¨å±€å˜é‡æˆ–é™æ€å±€éƒ¨å˜é‡ï¼›24. æŒ‡é’ˆæ•°ç»„å’Œæ•°ç»„æŒ‡é’ˆ11.1 æ•°ç»„æŒ‡é’ˆ å½’æ ¹ç»“åº•æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæ˜¯æŒ‡å‘æ•°ç»„çš„æŒ‡é’ˆã€‚ ã€å­˜å‚¨ç±»å‹ã€‘ æ•°æ®ç±»å‹ ï¼ˆ*æŒ‡é’ˆåï¼‰ã€ä¸‹æ ‡ã€‘ = å€¼ï¼› å¦‚ï¼š int (*p)[3]; ---&gt; type name ----&gt; int[3] *p è§£æï¼š å®šä¹‰ä¸€ä¸ªæŒ‡é’ˆå˜é‡ p, ç”¨æ¥æŒ‡å‘ int[3] ç±»å‹çš„å…ƒç´ çš„èµ·å§‹ä½ç½®ã€‚åŸæ¥ int * p çš„æ—¶å€™ï¼Œp+1 çš„æ“ä½œæ˜¯ç§»åŠ¨ä¸€ä¸ª int çš„å¤§å°ã€‚å¦‚æœpçš„ç±»å‹ å˜æˆäº† int [3]çš„è¯ï¼Œp+1çš„æ“ä½œæ˜¯ä¸€ä¸‹ç§»åŠ¨ä¸‰ä¸ª int å…ƒç´ çš„å¤§å°ã€‚æ‰€ä»¥æ•°ç»„æŒ‡é’ˆæ˜¯åœ¨æŸç§ å¤§å°çš„æ•°ç»„ä¸­è¿›è¡Œç§»åŠ¨ã€‚ 12345678910111213141516171819202122232425262728293031323334353637383940int main () &#123; int a[M][N] = &#123;1,2,3,4,5,6,7,8,9,10,11,12&#125;; int i=0, j=0; int *p = *a; int (*q)[N]= a; printf(\"%p %p\\n\", a, a+1); printf(\"%p %p\\n\\n\", q, q+1); for (i =0; i&lt;M; i++) &#123; for (j=0;j&lt;N;j++) &#123; printf(\"%p -&gt; %d\\n\", *(a+i)+j, *(*(a+i)+j)); // printf(\"%p -&gt; %d\\n\", *(q+i)+j, *(*(q+i)+j)); // a å’Œ qç°åœ¨æ˜¯ç­‰ä»·çš„ï¼ŒåŒºåˆ«åªæ˜¯ä¸€ä¸ªæ˜¯å¸¸é‡ï¼Œä¸€ä¸ªæ˜¯å˜é‡ï¼› &#125; printf(\"\\n\"); &#125; exit(0); &#125;// 0x7ffd6f5ad1f0 0x7ffd6f5ad200// 0x7ffd6f5ad1f0 0x7ffd6f5ad200// 0x7ffd6f5ad1f0 -&gt; 1// 0x7ffd6f5ad1f4 -&gt; 2// 0x7ffd6f5ad1f8 -&gt; 3// 0x7ffd6f5ad1fc -&gt; 4// 0x7ffd6f5ad200 -&gt; 5// 0x7ffd6f5ad204 -&gt; 6// 0x7ffd6f5ad208 -&gt; 7// 0x7ffd6f5ad20c -&gt; 8// 0x7ffd6f5ad210 -&gt; 9// 0x7ffd6f5ad214 -&gt; 10// 0x7ffd6f5ad218 -&gt; 11// 0x7ffd6f5ad21c -&gt; 12 11.2 æŒ‡é’ˆæ•°ç»„ å½’æ ¹ç»“åº•æ˜¯ä¸€ä¸ªæ•°ç»„ ã€å­˜å‚¨ç±»å‹ã€‘ æ•°æ®ç±»å‹ * æ•°ç»„å ã€é•¿åº¦ã€‘ å¦‚ï¼š int * arr[3]; ---&gt; TYPE NAME ---&gt; int *[3] arr; 11.3 æŒ‡é’ˆæ•°ç»„ä¸æ•°ç»„æŒ‡é’ˆçš„åŒºåˆ«1234567891011121314151617181920212223242526272829int main()&#123; int i, k, j; // æŒ‡é’ˆæ•°ç»„ char *name[5] = &#123;\"Follow me\", \"Basic\", \"Great\", \"Fortran\", \"Computer\"&#125;; char *tmp; for (i = 0; i &lt; 5 - 1; i++) &#123; k = i; for (j = i + 1; j &lt; 5; j++) &#123; if (strcmp(name[k], name[j]) &gt; 0) &#123; k = j; &#125; &#125; if (k != i) &#123; tmp = name[i]; name[i] = name[k]; name[k] = tmp; &#125; &#125;; for (i = 0; i &lt; 5; i++) &#123; puts(name[i]); &#125;; return 0;&#125; 25 .å¤šçº§æŒ‡é’ˆ 12345Line1 int num = 1;Line2 int *p = &amp;numLine3 int *p1 = p;Line4 int **p2 = &amp;p1;Line5 int ***p3 = &amp;p2; å¤šçº§æŒ‡é’ˆçš„æœ¬è´¨ï¼Œåªæ˜¯Cè¯­è¨€çš„ä¸€ä¸ªä¹¦å†™è§„èŒƒï¼Œäº‹å®ä¸Šä»»ä½•æŒ‡é’ˆéƒ½å¯ä»¥ä¿å­˜ä»»ä½•åœ°å€ï¼› å¤šçº§æŒ‡é’ˆçš„å­˜å‚¨çš„å€¼çš„æ¨ç†è¿‡ç¨‹ 12345Line1 int num = 1;Line2 int *p = &amp;numLine3 int *p1 = p;Line4 int **p2 = &amp;p1;Line5 int ***p3 = &amp;p2; å‡½æ•° å‡½æ•°çš„å®šä¹‰ å‡½æ•°çš„ä¼ å‚ å‡½æ•°çš„è°ƒç”¨ ï¼ˆåµŒå¥—å’Œé€’å½’ï¼‰ å‡½æ•°ä¸æ•°ç»„ å‡½æ•°ä¸æŒ‡é’ˆ ï¼ˆæŒ‡é’ˆå‡½æ•°ï¼Œ å‡½æ•°æŒ‡é’ˆï¼Œ å‡½æ•°æŒ‡é’ˆæ•°ç»„ï¼‰ 26. å‡½æ•°çš„å®šä¹‰ æ•°æ®ç±»å‹ å‡½æ•°å ï¼ˆã€æ•°æ®ç±»å‹ å½¢å‚å ã€‚ã€‚ã€‚ã€‘ï¼‰ å‡½æ•°çš„ç±»å‹æ˜¯æŒ‡ å‡½æ•°çš„è¿”å›å€¼çš„æ•°æ®ç±»å‹ 1.1.1 mainå‡½æ•°1234567891011121314/** argcï¼š å‚æ•°è®¡æ•°å™¨ï¼Œç»Ÿè®¡ç»ˆç«¯ä¸Šå¤šå°‘ä¸ªå‚æ•°ä¼ è¿›æ¥ *argv[]ï¼š åˆ—è¡¨ï¼Œç”¨æ¥ä¼ é€’åˆšæ‰å‘½ä»¤è¡Œä¼ é€’è¿›æ¥çš„å‚æ•° *argv[]æ˜¯ä¸€ä¸ªæ•°ç»„ï¼› argv æ˜¯æ•°ç»„åï¼› char* æŒ‡æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ çš„ç±»å‹ä¸º char*ï¼›å³å­—ç¬¦æŒ‡é’ˆ argv å³å­—ç¬¦æ•°ç»„æŒ‡é’ˆçš„é¦–åœ°å€ï¼›*/int main(int argc, char *argv[]);&#123; printf(\"argc=%d\\n\", argc); exit(0);&#125; 12./main /etc/a*.conf# 4 å› ä¸ºshell ä¼šè‡ªåŠ¨è§£æé€šé…ç¬¦ï¼ŒæŠŠç»“æœéƒ½è§£æå‡ºæ¥ã€‚ å›¾ç¤ºï¼šchar * argv æ•°ç»„æ¨¡å‹ ** è¾“å‡ºargv** 12345678int main (int argc, char * argv[]) &#123; int i; // for (i=0; i&lt;argc; i++) for (i=0; argv[i] !=NULL; i++) puts(argv[i]); exit(0);&#125; 1.1.2 Cè¯­è¨€ä½¿ç”¨å‡½æ•°ä¹‹å‰ä¹Ÿéœ€è¦å…ˆå£°æ˜ å‡½æ•°åœ¨ä½¿ç”¨å‰éƒ½è¦å£°æ˜ï¼Œé™¤éè¢«è°ƒç”¨å‡½æ•°çš„å®šä¹‰éƒ¨åˆ†å·²ç»å‡ºç°åœ¨ä¸»è°ƒå‡½æ•°ä¹‹å‰, åœ¨Cè¯­è¨€ä¸­ï¼Œå‡½æ•°å£°æ˜å°±æ˜¯å‡½æ•°åŸå‹ã€‚ 123456789101112#include &lt;stdio.h&gt;void printf_hello(void);// éœ€è¦å…ˆå£°æ˜ï¼Œå› ä¸ºmainå‡½æ•°åœ¨ printf_helloå‡½æ•°ä¸Šé¢int main ()&#123; printf_hello(); return 0;&#125;void printf_hello(void)&#123; printf(\"hello world!\\n\"); return;&#125; 27. å‡½æ•°çš„ä¼ å‚1.2.1 å€¼ä¼ é€’12345678910int printf_value(int i, int j) &#123; // å‚æ•°i j éšç€ print_value è°ƒç”¨æ ˆæ‰§è¡Œç»“æŸå°±é‡Šæ”¾æ‰äº†ã€‚ printf(\"%d%d\\n\", i,l); return 0;&#125;int main() &#123; int i =3; l = 5; printf_value(i,l); return 0;&#125; 1.2.2 åœ°å€ä¼ é€’123456789101112int swap (int * i, int * j) &#123; int tmp; tmp = *i; *i = *j; *j = tmp;&#125;int main() &#123; int i =3; l = 5; swap(&amp;i,&amp;l); return 0;&#125; 28. å‡½æ•°çš„è°ƒç”¨ï¼ˆåµŒå¥—è°ƒç”¨ å’Œ é€’å½’è°ƒç”¨ï¼‰1.3.1 å‡½æ•°çš„è°ƒç”¨æ–¹å¼ å‡½æ•°è°ƒç”¨ä½œä¸ºç‹¬ç«‹è¯­å¥ï¼ŒstringPrint(); å‡½æ•°ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†,number = max(numA,numB)/2; ä»¥å®å‚å½¢å¼å‡ºç°åœ¨å…¶ä»–å‡½æ•°çš„è°ƒç”¨ä¸­,number = min(sum(-5, 100), numC); 1.3.2 åµŒå¥—è°ƒç”¨123456789101112131415161718int minus(int a, int b, int c) &#123; return max(a,b,c) - min(a, b, c);&#125;int min(int a, int b, int c) &#123; int tmp = a &lt; b? a :b; return tmp &lt; c ? tmp : c;&#125;int max(int a, int b, int c) &#123; int tmp = a &gt; b? a :b; return tmp &gt; c ? tmp : c;&#125;int main () &#123; int result; int a = 3, b = 5, c = 10; result = minus(a,b,c); printf(\"%d\\n\", result); return 0;&#125; 39. å‡½æ•°ä¸æ•°ç»„1.4.1 å‡½æ•°ä¸ä¸€å”¯æ•°ç»„é—®é¢˜ï¼šå°è£…ä¸€ä¸ªprintf_arræ–¹æ³•æ¥éå†æ•°ç»„ï¼›åº”è¯¥å¦‚ä½•å®šä¹‰ printf_arr çš„è¡Œå‚ 12345678910111213141516171819202122int printf_arr(int a[])&#123; int i = 0; printf(\"printf_arr ---&gt; %p\\n\", a); // ä¼ å…¥çš„æ˜¯ æ•°ç»„ açš„ èµ·å§‹åœ°å€ï¼› for (i=0; i&lt;sizeof(a)/sizeof(a[0]); i++) // æ˜¯å› ä¸º açš„ sizeofä¸º 8ï¼Œ æ‰€ä»¥åªèƒ½è®¿é—®æ•°ç»„å‰2ä½ &#123; printf(\"%d \",a[i]); // 1ï¼Œ 2 &#125; printf(\"\\n\");&#125;int main()&#123; int a[6] = &#123;1,2,3,4,5,6&#125;; printf(\"main ---&gt; %p\\n\",a ); // a å³ &amp;a, å³ &amp;a[0]; printf_arr(a); exit(0);&#125;// main ---&gt; 0x7ffd84a62eb0// printf_arr ---&gt; 0x7ffd84a62eb0 1234567891011void print_arr(int *p)&#123; int i; printf(\"%s:%d\\n\", __FUNCTION__, sizeof(p));// 8, ä¼ è¿›æ¥çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œ8ä¸ªå­—èŠ‚ã€‚ è¿™é‡Œçœ‹ä¸åˆ°æ•°ç»„çš„è§„æ¨¡ã€‚åªèƒ½è·æ‚‰èµ·å§‹ä½ç½®&#125;int main()&#123; int a[] = &#123;1,3,5,7,9&#125;; printf(\"%s:%d\\n\", __FUNCTION__, sizeof(a)); // 20ï¼Œæ•´ä¸ªæ•°ç»„æ‰€å å†…å­˜çš„å¤§å°ï¼Œå› ä¸ºæ¯ä¸ªintæ˜¯ 4ä¸ªå­—èŠ‚ï¼› print_arr(a);&#125; ** è§£å†³æ–¹æ³•** å°†æ•°ç»„çš„é•¿åº¦ï¼Œå½“åšç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥ç»™ å­å‡½æ•°ã€‚ 1234567891011121314void print_arr(int *p, int n)&#123; int i; printf(\"%s:%d\\n\", __FUNCTION__, sizeof(p));// 8, ä¼ è¿›æ¥çš„æ˜¯ä¸€ä¸ªåœ°å€ï¼Œ8ä¸ªå­—èŠ‚ã€‚ è¿™é‡Œçœ‹ä¸åˆ°æ•°ç»„çš„è§„æ¨¡ã€‚åªèƒ½è·æ‚‰èµ·å§‹ä½ç½® for (i=0; i&lt;n; i++) printf(\"%d\\n\", p[i]); // p[i] ä¸ *(p+i) ç­‰ä»· printf(\"\\n\");&#125;int main()&#123; int a[] = &#123;1,3,5,7,9&#125;; printf(\"%s:%d\\n\", __FUNCTION__, sizeof(a)); // 20ï¼Œæ•´ä¸ªæ•°ç»„æ‰€å å†…å­˜çš„å¤§å°ï¼Œå› ä¸ºæ¯ä¸ªintæ˜¯ 4ä¸ªå­—èŠ‚ï¼› print_arr(a, sizeof(a)/sizeof(*a));&#125; 12void printf_arr(int p[], int n);// å½“ p[] ä½œä¸ºè¡Œå‚æ—¶ï¼Œ [] ç­‰åŒäº * å› æ­¤ int p[] å³ä¸º int *p ** ç¤ºä¾‹** 12345678910111213int main() &#123; int a[N] = &#123;1,2,3,4,5,6&#125;; int *p = a; a -&gt; int * *aå³*(a+0) -&gt; int a[0] -&gt; int &amp;a[3] -&gt; int * p[i] -&gt; int p -&gt; int * *p -&gt; int p+1 -&gt; int *&#125; ** é€†åº** 12345678910111213141516171819202122void func(int *p, int n) &#123; int i=0, j, m, tmp; m = (n -1)/2; for (;i&lt;=m;i++) &#123; j = n -1 -i; tmp = p[i]; p[i] = p[j]; p[j] = tmp; &#125;&#125;;int main() &#123; int a[0] = &#123;1,3,5,7,9&#125;; for (i =0; i&lt; sizeof(a)/sizeof(*a); i++) printf(\"%d\\n\", a[i]); printf(\"\\n\"); func(a, sizeof(a)/sizeof(*a)); for (i =0; i&lt; sizeof(a)/sizeof(*a); i++) printf(\"%d\\n\", a[i]); printf(\"\\n\"); return 0;&#125; 1.4.2 å‡½æ•°ä¸äºŒç»´æ•°ç»„12345678910111213141516171819 int main() &#123; int a[M][N] = &#123;1,2,3,4,5,6&#125;; int i = 0; int j = 0; for (i = 0; i&lt; M; i++) &#123; for (j=0;j&lt;N;j++) &#123; printf(\"%d \", a[i][j]); &#125; printf(\"\\n\"); &#125; exit(0); &#125;// 1 2 3// 4 5 6 é—®é¢˜ï¼š åŒæ ·çš„æŠŠè¾“å‡ºæ”¾åˆ°ä¸€ä¸ªç‹¬ç«‹çš„å‡½æ•°ä¸­å»ï¼Œä¹Ÿå°±æ˜¯è€ƒå¯Ÿä¸€ä¸‹ äºŒç»´æ•°ç»„åº”è¯¥å¦‚ä½•ç»™å‡½æ•°ä¼ å‚ è¿™ä¸ªé—®é¢˜å®é™…è€ƒå¯Ÿç‚¹åœ¨äº äºŒç»´æ•°ç»„å¦‚ä½• è¿‡å®å‚ç»™å‡½æ•°ï¼Œä»¥åŠå‡½æ•°çš„äºŒç»´æ•°ç»„è¡Œå‚åº”è¯¥å¦‚ä½•å®šä¹‰ 1234567891011121314151617181920212223// ç¬¬ä¸€ç§, ç”¨ä¸€ä¸ªäºŒç»´æ•°ç»„çš„æŒ‡é’ˆå»æ¥æ”¶int arr_traverse(int (*p) [N], int n) &#123; // printf(\"%p\\n\", p); // printf(\"%d\\n\", n); int i = 0; int j = 0; for (i=0;i&lt;n;i++) &#123; printf(\"%d \",*(*p+i)); // å…³é”®ç‚¹åœ¨è¿™é‡Œï¼Œ é¦–å…ˆ p æŒ‡å‘çš„æ˜¯ int [3] è¿™ä¸ªç±»å‹ã€‚æ‰€ä»¥éœ€è¦é™çº§ ä¸ºåˆ—æŒ‡é’ˆ &#125;; printf(\"\\n\"); &#125; int main() &#123; int a[M][N] = &#123;1,2,3,4,5,6&#125;; printf(\"a ---&gt; %d\\n\", sizeof(*a)); printf(\"%p\\n\", a); arr_traverse(a, M*N); // *a === a[0] === *(a+0) exit(0); &#125; 1234567891011121314151617181920212223// ç¬¬äºŒç§ï¼Œç”¨ä¸€ä¸ªæ™®é€šä¸€ç»´æ•°ç»„æŒ‡é’ˆå»æ¥æ”¶int arr_traverse(int *p, int n) &#123; // printf(\"%p\\n\", p); // printf(\"%d\\n\", n); int i = 0; int j = 0; for (i=0;i&lt;n;i++) &#123; printf(\"%d \",*(p+i)); &#125;; printf(\"\\n\"); &#125; int main() &#123; int a[M][N] = &#123;1,2,3,4,5,6&#125;; printf(\"a ---&gt; %d\\n\", sizeof(*a)); printf(\"%p\\n\", a); arr_traverse(&amp;a[0][0], M*N); // ä¼ é€’çš„æ˜¯åˆ—æŒ‡é’ˆ exit(0); &#125; 12345678910111213141516171819202122232425262728// ç¬¬ä¸‰ç§ void arr_traverse(int (*p)[N],int m, int n) &#123; // printf(\"%p\\n\", p); // printf(\"%d\\n\", n); int i = 0; int j = 0; for (i=0;i&lt;m;i++) &#123; for (j=0; j&lt;n;j++) &#123; printf(\"%d \",*(*(p+i)+j)); &#125; &#125;; printf(\"\\n\"); return; &#125; int main() &#123; int a[M][N] = &#123;1,2,3,4,5,6&#125;; printf(\"a ---&gt; %d\\n\", sizeof(*a)); printf(\"%p\\n\", a); arr_traverse(a, M,N); exit(0); &#125; 1234567891011121314151617181920212223242526// ç¬¬å››ç§void arr_traverse(int p[][N],int m, int n) &#123; // printf(\"%p\\n\", p); // printf(\"%d\\n\", n); int i = 0; int j = 0; for (i=0;i&lt;m;i++) &#123; for (j=0; j&lt;n;j++) &#123; printf(\"%d \", p[i][j]); &#125; &#125;; printf(\"\\n\"); return; &#125; int main() &#123; int a[M][N] = &#123;1,2,3,4,5,6&#125;; printf(\"a ---&gt; %d\\n\", sizeof(*a)); printf(\"%p\\n\", a); arr_traverse(a, M,N); exit(0); &#125; ** å°ç»“ ** 123int a[M][N] = &#123;...&#125;;int * p = *a;int (*q)[N] = a; äºŒç»´æ•°ç»„ å‚ä¸ä¼ å‚çš„ä¸€äº›åŸºæœ¬å†…å®¹ a[i][j] *(a+i)+j a[i]+j p[i] *p q[i][j] *q === *(q+0) q p+3 q+2 int int * int * int int int int * int (*)[N] int * int (*)[N] 1.4.2.1 ç¤ºä¾‹ï¼š æ±‚å¹³å‡æ•°1234567891011121314151617181920212223242526float average_score(int *p, int n)&#123; int i; float sum = 0; for (i=0; i&lt;n; i++) &#123; sum += p[i]; &#125; return sum/n;&#125;find_num(int (*p)[N], int num)&#123; int i = 0; for (i =0; i&lt;N; i++) &#123; printf(\"%d\\n\", *(*(p+num)+i)); &#125;&#125;int main ()&#123; int num = 1; int a[M][N] = &#123;1,2,3,4,5,6,7,8,9,10,11,12&#125;; average_score(*a, M*N); find_num(a, num);&#125; 1.4.2.2 äºŒç»´æ•°ç»„ä»€ä¹ˆæ—¶å€™ä¼ è¡ŒæŒ‡é’ˆï¼Œä»€ä¹ˆæ—¶å€™ä¼ åˆ—æŒ‡é’ˆ å½“ä¸åŒºåˆ†è¡Œåˆ—çš„æ—¶å€™ï¼Œå¯ä»¥æŠŠå®ƒå½“ä½œä¸€ä¸ªå¤§çš„ä¸€ç»´æ•°ç»„ã€‚é‚£å°±ä¼ é€’æŒ‡é’ˆã€‚ å¦‚æœè¦åŒºåˆ†è¡Œåˆ—æ¥åšæŸä»¶äº‹æƒ…çš„æ—¶å€™ï¼Œé‚£å°±éœ€è¦æŠŠè¡ŒæŒ‡é’ˆä¼ é€’è¿‡å»ã€‚ 1.4.3 å‡½æ•°ä¸å­—ç¬¦æ•°ç»„1234567int main () &#123; char str1[] = \"helloworld\"; char str2[128]; strcpy(str2, str1); //å®ç°äº†æ‹·è´ exit(0);&#125; 123456789101112131415//å®ç°ä¸€ä¸ª mystrcpy ç”¨äºæ‹·è´char * mystrcpy(char * dest, const char * src) &#123; char *ret = dest; if (dest != NULL &amp;&amp; src != NULL) while((*dest++ = *src++) != '\\n'); return ret;&#125;int main () &#123; char str1[] = \"helloworld\"; char str2[128]; mystrcpy(str2, str1); //å®ç°ä¸€ä¸ª mystrcpy ç”¨äºæ‹·è´ puts(str2); // æµ‹è¯•ä¸€ä¸‹ exit(0);&#125; 123456789101112131415161718//å®ç°ä¸€ä¸ª mystrncpy ç”¨äºæ‹·è´char * mystrncpy(char *dest, const char * src, size_t n) &#123; int i=0; for (; i&lt;n &amp;&amp; (dest[i] = src[i]); i++) ; for (; i&lt;n; i++) dest[i] = '\\0'; return dest;&#125;int main () &#123; char str1[] = \"helloworld\"; char str2[128]; mystrncpy(str2, str1, 5); //å®ç°ä¸€ä¸ª mystrcpy ç”¨äºæ‹·è´ puts(str2); // æµ‹è¯•ä¸€ä¸‹ exit(0);&#125; 30. å‡½æ•°ä¸æŒ‡é’ˆ æŒ‡é’ˆå‡½æ•°, å‡½æ•°æŒ‡é’ˆ, å‡½æ•°æŒ‡é’ˆæ•°ç»„ 1.5.1 æŒ‡é’ˆå‡½æ•° ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼ä¸ºæŒ‡é’ˆï¼Œå³ä¸ºæŒ‡é’ˆå‡½æ•° è¿”å›å€¼ * å‡½æ•°å(å½¢å‚);å¦‚ï¼š int * fun(int); å¼•å­ 123456789101112131415161718// ä»find_num è¿™ä¸ªå‡½æ•°è¯´èµ·ï¼Œè¿™ä¸ªå‡½æ•°å¹¶ä¸çº¯ï¼Œè€Œä¸”æ²¡æœ‰å®ç°å®ƒçš„åŠŸèƒ½ï¼›void find_num(int (*p)[N], int num)&#123; int i; for(i=0;i&lt;N;i++) &#123; printf(\"%d\", *(*(p+num)+i)); &#125; printf(\"\\n\");&#125;int main()&#123; int a[M][N] = &#123;1,2,3,4,5,6,7,8,9,10,11,12&#125;; float ave; int num = 0; find_num(a, num); // find_num çš„è®¾è®¡ä¸åº”è¯¥æ²¡æœ‰è¿”å›å€¼ï¼›&#125; 12345678910111213141516171819202122232425262728293031#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;#define M 3#define N 4int * find_num(int (*p)[N], int num) // å°†find_num è®¾è®¡æˆä¸ºä¸€ä¸ªæŒ‡é’ˆå‡½æ•°&#123; if (num &gt; M -1) return NULL; return *(p+num);&#125;int main()&#123; int i, j; int * res; int a[M][N] = &#123;1,2,3,4,5,6,7,8,9,10,11,12&#125;; float ave; int num =0; res = find_num(a, num); if (res != NULL) &#123; for (i=0;i&lt;N;i++) printf(\"%d\",res[i]); printf(\"\\n\"); &#125; else &#123; printf(\"can not find\\n\"); &#125;&#125;; 1.5.2 å‡½æ•°æŒ‡é’ˆ ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘çš„æ˜¯å‡½æ•°ï¼Œ åœ¨Cè¯­è¨€é‡Œé¢ã€‚ä½ å¹¶ä¸èƒ½ç”¨ä¸€ä¸ªæ™®é€šå˜é‡å»æ¥æ”¶ å‡½æ•°å•Šï¼Œæˆ–è€…ç»“æ„ä½“ç­‰ç­‰æ•°æ®ç±»å‹ï¼Œå¿…é¡»è¦ä½¿ç”¨ç›¸åŒçš„ç±»å‹å˜é‡å»æ¥æ”¶ç›¸åŒçš„ç±»å‹ã€‚æ¯”å¦‚å‡½æ•°è¦ç”¨å‡½æ•°æŒ‡é’ˆå˜é‡å»æ¥æ”¶ï¼› ç±»å‹ (æŒ‡é’ˆå) ï¼ˆå½¢å‚ï¼‰ å¦‚ï¼š int (p)(int); 123456789101112131415int add (int a, int b)&#123; return a+b;&#125;int main()&#123; int a=3, b=5; int ret; int (*p)(int, int); // å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ p = add; // è¿™ä¸ªæŒ‡é’ˆ èƒ½å¤ŸæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œ å› ä¸ºadd æœ¬èº«å°±æ˜¯è¿™ä¸ªå‡½æ•°çš„åœ°å€ï¼Œ ä¹Ÿå¯ä»¥å†™æˆ p = &amp;add;è¿™é‡Œä¹‹æ‰€ä»¥çœç•¥ï¼Œæ˜¯å› ä¸ºå‡½æ•°å(add)æœ¬èº«å°±æ˜¯ä¸€ä¸ªåœ°å€ã€‚æ‰€ä»¥åœ¨æŒ‡é’ˆå’Œå‡½æ•°çš„æŒ‡å‘å…³ç³»å½“ä¸­ï¼Œåœ°å€ç¬¦å¯ä»¥çœç•¥ã€‚åŒæ ·çš„ `ret = *p(a, b)`ï¼› på‰é¢çš„ *ä¹Ÿå¯ä»¥çœç•¥ã€‚ `ret = p(a, b)`ã€‚æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆï¼Œè®©è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘æŸä¸€ä¸ªå‡½æ•°çš„å…¥å£åœ°å€ã€‚ä¸‹é¢é€šè¿‡æŒ‡é’ˆæ¥ä¼ å‚æ•°å°±å¦‚åŒé€šè¿‡å‡½æ•°åæ¥ä¼ å‚æ•°æ˜¯ä¸€æ ·çš„ï¼› ret = p(a, b); printf(\"%d\\n\",ret); exit(0);&#125; 1.5.3 å‡½æ•°æŒ‡é’ˆæ•°ç»„å¼•å­ 12345678910111213141516171819202122int add (int a, int b)&#123; return a+b;&#125;int sub (int a, int b)&#123; return a*b;&#125;int main()&#123; int a=3, b=5; int ret1, ret2; int (*p)(int, int); // å®šä¹‰ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ int (*q)(int, int); // è¿™é‡Œé¢å®šä¹‰ä¸¤ä¸ªç›¸åŒçš„ å‡½æ•°æŒ‡é’ˆæœ‰ç‚¹æµªè´¹ p = add; // è¿™ä¸ªæŒ‡é’ˆ èƒ½å¤ŸæŒ‡å‘ä¸€ä¸ªå‡½æ•°ï¼Œ å› ä¸ºadd æœ¬èº«å°±æ˜¯è¿™ä¸ªå‡½æ•°çš„åœ°å€ ret1 = p(a, b); ret2 = q(a, b); printf(\"%d\\n\",ret1); printf(\"%d\\n\",ret2; exit(0);&#125; 1.5.4 å¼•å‡ºå‡½æ•°æŒ‡é’ˆæ•°ç»„è¯­æ³•ï¼š ç±»å‹ ï¼ˆæ•°ç»„å[ä¸‹æ ‡]ï¼‰ï¼ˆå½¢å‚ï¼‰ï¼›å¦‚: int (arr[N])(int);arræ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„æœ‰Nä¸ªå…ƒç´ ã€‚è¿™Nä¸ªå…ƒç´ éƒ½æ˜¯æŒ‡å‘å‡½æ•°çš„æŒ‡é’ˆã€‚ 1234567891011121314151617181920212223242526int main()&#123; int a=3, b=5; int ret1, ret2; int i; // int (int, int) *funcp[2]; funcpè¿™ä¸ªæ•°ç»„æœ‰ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸¤ä¸ªæŒ‡é’ˆéƒ½æ˜¯æŒ‡å‘ int (int, int) ç±»å‹çš„å‡½æ•°ï¼› è½¬æ¢ä¸€ç§å†™æ³•å°±æ˜¯ int (*funcp[2])(int, int); // p = add; // q = sub; // ret1 = p(a, b); // ret2 = q(a, b); funcp[0] = add; funcp[1] = sub; for (i=0; i&lt;2; i++) &#123; ret1 = funcp[i](a, b); printf(\"%d\\n\",ret1); &#125; // printf(\"%d\\n\",ret1); // printf(\"%d\\n\",ret2; exit(0);&#125; 1.5.5 æŒ‡å‘æŒ‡é’ˆå‡½æ•°çš„å‡½æ•°æŒ‡é’ˆæ•°ç»„ int *(*func[N])(int) 31. å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹1.6.1 mainå‡½æ•° â€”â€” å‡½æ•°æ‰§è¡Œçš„å…¥å£ é‡åˆ°å‡½æ•°ï¼Œå¼€è¾Ÿå†…å­˜ç©ºé—´ï¼› åœ¨å†…å­˜ç©ºé—´å†ç¢°åˆ°å‡½æ•°æ—¶å€™ï¼Œ åˆå§‹åŒ–å†…åµŒå‡½æ•°ï¼› ä¼ é€’å‚æ•° ä¿å­˜å¤–å±‚å‡½æ•°æ‰§è¡Œç©ºé—´ æ‰§è¡Œå®Œæ¯•åã€‚ã€‚ã€‚ã€‚é‡Šæ”¾å‡½æ•°æ‰§è¡Œæ ˆ æ¥æ”¶å‡½æ•°çš„è¿”å›å€¼ æ¢å¤ç°åœºï¼Œä»æ–­ç‚¹å¤„ç»§ç»­æ‰§è¡Œ 1.6.2 å‚æ•°çš„ä¼ é€’ å®å‚ä¸å½¢å‚å…·æœ‰ä¸åŒçš„å­˜å‚¨å•å…ƒï¼Œå®å‚ä¸å½¢å‚å˜é‡çš„æ•°æ®ä¼ é€’æ˜¯â€œå€¼ä¼ é€’â€ã€‚å³æ‹·è´ å‡½æ•°è°ƒç”¨æ—¶ï¼Œç³»ç»Ÿç»™è¡Œå‚åˆ†é…å­˜å‚¨å•å…ƒï¼Œå¹¶å°†å®å‚å¯¹åº”çš„å€¼ä¼ é€’ç»™å½¢å‚ï¼› P.S. å®å‚ä¸å½¢å‚çš„ç±»å‹å¿…é¡»ç›¸åŒæˆ–å¯ä»¥å…¼å®¹ï¼› 1.6.3 å˜é‡çš„ä½œç”¨èŒƒå›´å±€éƒ¨å˜é‡ä¸å…¨å±€å˜é‡ æ ¹æ®å˜é‡åœ¨ç¨‹åºä¸­ä½œç”¨èŒƒå›´çš„ä¸åŒï¼Œå¯ä»¥å°†å˜é‡åˆ†ä¸ºå±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡ å±€éƒ¨å˜é‡åœ¨å‡½æ•°å†…æˆ–å—å†…å®šä¹‰ï¼Œåªåœ¨è¿™ä¸ªå‡½æ•°æˆ–å—å†…å…¶ä½œç”¨çš„å˜é‡ï¼› å…¨å±€å˜é‡åœ¨æ‰€æœ‰å‡½æ•°å¤–å®šä¹‰çš„å˜é‡ï¼Œå®ƒçš„ä½œç”¨åŸŸæ˜¯ä»å®šä¹‰å˜é‡çš„ä½ç½®å¼€å§‹åˆ°æœ¬ç¨‹åºæ–‡ä»¶ç»“æŸã€‚ å½“å…¨å±€å˜é‡ä¸å±€éƒ¨å˜é‡åŒåæ—¶ï¼Œå±€éƒ¨å˜é‡å°†åœ¨è‡ªå·±ä½œç”¨åŸŸå†…æœ‰æ•ˆï¼Œå®ƒå°†å±è”½åŒåçš„å…¨å±€å˜é‡ 32. æ•°ç»„ä¸å‡½æ•° æ•°ç»„å åšå‡½æ•°å‚æ•° 1234567891011void change(int a[]) &#123; a[0] = 30; a[1] = 50;&#125;int main() &#123; int a[2] = &#123;3, 5&#125;; change(a); // åœ°å€ä¼ é€’ï¼Œ æ•°ç»„çš„åå­—ä»£è¡¨ç€æ•°ç»„æ‰€åœ¨çš„åœ°å€ï¼› printf(\"%d, %d,\", a[0], a[1]); // 30 50 return 0&#125; 33. ç¼“å†²åŒº1234567891011121314151617#include &lt;stdio.h&gt;#include &lt;stdlib.h&gt;int main()&#123; // __FUNCTION__ å½“å‰æ‰€åœ¨çš„å‡½æ•°ï¼Œ // __LINE__ å½“å‰æ‰€åœ¨çš„è¡Œæ•° printf(\"[%s:%d]before\", __FUNCTION__, __LINE__); while(1); printf(\"[%s:%d]after\", __FUNCTION__, __LINE__); exit(0);&#125;./printf// å‘ç°ä¸¤ä¸ªprintféƒ½æ²¡æ‰“å°å‡ºæ¥ä¸œè¥¿ ** ç¼“å†²æœºåˆ¶ ** ç”±äºä½¿ç”¨äº†ç»ˆç«¯è®¾å¤‡ï¼Œæ‰€ä»¥åŸæœ¬é»˜è®¤æ˜¯å…¨ç¼“å†²æ¨¡å¼å˜æˆäº†è¡Œç¼“å†²æ¨¡å¼ã€‚æ‰€ä»¥printfæ˜¯é‡åˆ°äº† \\n æ‰å»åˆ·æ–°ç¼“å†²åŒºçš„ã€‚æˆ–è€…æ˜¯å½“å‰ç­‰ç¼“å†²åŒºæ»¡äº†å»è‡ªåŠ¨åˆ·æ–°ã€‚\\n æ˜¯å»å¼ºåˆ¶åˆ·æ–°ç¼“å†²åŒºã€‚ æ²¡æœ‰åŠ \\n é‚£ä¸ªâ€œbeforeâ€è¿™å¥è¯å°±æ”¾åˆ°äº†è¾“å‡ºç¼“å†²åŒºå½“ä¸­ï¼Œä»€ä¹ˆæ—¶å€™åˆ·æ–°å‘¢ï¼Ÿ è¦ä¹ˆç­‰ç¨‹åºç»“æŸè‡ªåŠ¨åˆ·æ–°IOï¼Œè¦ä¹ˆå°±æ˜¯é‡åˆ°ä¸€äº›å¼ºåˆ¶åˆ·æ–°çš„å‡½æ•°iflush è¿™ç§ï¼Œè¦ä¹ˆå°±ç­‰åˆ°ç¼“å†²åŒºæ”’æ»¡äº†ä¸€æ¬¡æ€§å»åˆ·æ–°ã€‚ 34. åŠ¨æ€å†…å­˜ç®¡ç† åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œé€šå¸¸å¹¶ä¸çŸ¥é“éœ€è¦å¤„ç†çš„æ•°æ®é‡ï¼Œæˆ–è€…éš¾ä»¥è¯„ä¼°æ‰€éœ€å¤„ç†æ•°æ®é‡çš„å˜åŠ¨ç¨‹åº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¦è¾¾åˆ°æœ‰æ•ˆçš„èµ„æºåˆ©ç”¨ï¼Œå°±éœ€è¦åŠ¨æ€åœ°åˆ†é…æ‰€éœ€å†…å­˜ï¼Œå¹¶åœ¨ä½¿ç”¨å®Œæ¯•åå°½æ—©é‡Šæ”¾ä¸éœ€è¦çš„å†…å­˜ï¼Œè¿™å°±æ˜¯åŠ¨æ€å†…å­˜ç®¡ç†åŸç†ï¼› ä»¥ä¸‹å‡ ä¸ªå‡½æ•°éƒ½å­˜åœ¨æ ‡å‡† stdlib.h ä¸­ 1.9.1 malloc calloc ï¼ˆåˆ†é…æ–°çš„å†…å­˜åŒºåŸŸï¼‰void *malloc(size_t, size); å®ƒä¼šåœ¨å †ä¸Šåˆ†é…è¿™å—è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œå¹¶è¿”å›èµ·å§‹åœ°å€ï¼› void *calloc(size_t nmemb, size_t size) ä¸€ä¸ªæˆå‘˜ sizeä¸ªå¤§å°ï¼Œnmembè¿™ä¹ˆå¤šæˆå‘˜çš„ç©ºé—´ï¼›è¿ç»­ç”³è¯·å¤šå— sizeå¤§çš„å†…å­˜ 1234567891011121314int *p;p = malloc(sizeof(int));if (p == NULL)&#123; printf(\"error\");&#125;else&#123; *p = 10; printf(\"%d\\n\", *p);&#125;;free(p); // ç”¨å®Œè®°å¾—é‡Šæ”¾æ‰å†…å­˜ï¼Œ åœ¨åŒä¸€ä¸ªå‡½æ•°ä¸­åšåˆ° malloc å’Œ freeä¸€ä¸€å¯¹åº”printf(\"%d\\n\", *p);exit(0); 12345678910111213int *p;int num = 5;p = malloc(sizeof(int) * num);for (int i= 0 ;i&lt;num; i++) &#123; scanf(\"%d\", &amp;p[i]);&#125;for (int j=0; j&lt;num; j++) &#123; printf(\"%d \", p[j]);&#125;printf(\"\\n\");free(p);exit(0); *ä¸€é“é¢è¯•é¢˜ (æç¤ºï¼š è¿™ä¸ªç¨‹åºå½“ä¸­å·²ç»äº§ç”Ÿäº†å†…å­˜æ³„æ¼) * 12345678910111213141516void func(int *p, int n) &#123; p = malloc(n); if (p == NULL) exit(1); // påœ¨è¿™ä¸ªå‡½æ•°å½“ä¸­æ˜¯ä¸€ä¸ªå±€éƒ¨å˜é‡ï¼Œéšç€funcæ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œè¿™å—å†…å­˜ç©ºé—´ä¼šä¸¢å¤±ã€‚å¯¼è‡´å†…å­˜æ³„æ¼ï¼Œåªæœ‰éšç€æ“ä½œç³»ç»Ÿä¸­è¿™ä¸ªè¿›ç¨‹ç»“æŸæ‰ï¼Œæ‰ä¼šé‡Šæ”¾è¿™100ä¸ªå•ä½çš„å†…å­˜ return;&#125;int main()&#123; int num = 100; int *p = NULL; func(p, num); free(p); exit(0);&#125; æ”¹æ³•ä¸€ï¼š 12345678910111213141516void func(int **p, int n) &#123; // ç”¨ä¸€ä¸ªäºŒçº§æŒ‡é’ˆæ¥æ¥å— *p = malloc(n); // æ­¤æ—¶*p å°±æ˜¯mainå‡½æ•°ä¸­çš„p if (*p == NULL) exit(1); return;&#125;int main()&#123; int num = 100; int *p = NULL; func(&amp;p, num); free(p); exit(0);&#125; æ”¹æ³•äºŒï¼š 123456789101112131415161718void func(int *p, int n)&#123; p = malloc(n); if (p == NULL) exit(1); return p;&#125;int main()&#123; int num = 100; int *p = NULL; p = func(p, num); // ç”¨p æ¥æ¥è§¦è¿”å›å€¼ free(p); exit(0);&#125; 1.9.2 realloc ï¼ˆè°ƒæ•´å·²åˆ†é…çš„å†…å­˜åŒºåŸŸï¼‰void *realloc(void *ptr, size_t size); é‡æ–°åˆ†é…ä¸€å—åŠ¨æ€çš„å†…å­˜ç©ºé—´ ,æ¯”å¦‚ä¹‹å‰ç”¨malloc callocåˆ†é…çš„å†…å­˜ç©ºé—´å¤ªå¤§æˆ–è€…å¤ªå°ï¼Œç°åœ¨æŠŠ èµ·å§‹åœ°å€ä¼ è¿›å»(ç¬¬ä¸€ä¸ªå‚æ•°); ç„¶åè¦size å¤§å°çš„è¿™ä¹ˆä¸€æ®µ(ç¬¬äºŒä¸ªå‚æ•°)ï¼›æ‰€ä»¥ reallocä¼šåœ¨å½“å‰åœ°å€å¾€ä¸‹ç»§ç»­æ‰©å±•ï¼Œå‡‘è¶³sizeè¿”å›å›æ¥ï¼›å½“ç„¶ï¼Œå¦‚æœ*ptr å¼€å§‹çš„è¿™ä¸ªåŒºæ®µï¼Œæ²¡æœ‰ä¸€æ•´å—sizeå¤§å°çš„ç©ºé—´ï¼Œé‚£ä¹ˆå°±ä¼šå»åˆ«çš„å†…å­˜ä¸Šé¢å»å¯»æ‰¾ã€‚ç›´åˆ°æ‰¾åˆ°ä¹‹åï¼Œå†è¿”å›é‚£å—ç©ºé—´çš„èµ·å§‹åœ°å€å›æ¥ï¼› 1.9.3 free ï¼ˆé‡Šæ”¾å·²åˆ†é…çš„å†…å­˜åŒºåŸŸï¼‰ åŸåˆ™ï¼Œ è°ç”³è¯·è°é‡Šæ”¾ï¼Œ ï¼ˆé˜²æ­¢å†…å­˜æ³„éœ²ï¼‰ï¼›å¦‚æœä¸èƒ½åšåˆ°åœ¨åŒä¸€å‡½æ•°ä¸­åšåˆ°è°ç”³è¯·è°é‡Šæ”¾ å°±åœ¨åŒä¸€æ¨¡å—ä¸­åšåˆ°è¿™äº›ï¼› 123456789101112131415161718int *p;int num = 10;p = malloc(sizeof(int));if (p == NULL)&#123; exit(1);&#125;;*p = 10;printf(\"%d\\n\", *p); // 10// æµ‹è¯•åœ°å€printf(\"%p--&gt;%d\\n\", *p); // 0xa--&gt;0free(p); // æ­£ç¡®çš„åšæ³•æ˜¯p = NULL; // æ­£ç¡®çš„åšæ³•æ˜¯ï¼Œä¸€ä¸ªæŒ‡é’ˆfreeäº†ä¹‹åï¼Œç«‹å³èµ‹å€¼ NULL// free ä»£è¡¨ç€ å˜é‡på¯¹äºé‚£ç‰‡ å†…å­˜ç©ºé—´ æ²¡æœ‰äº† æ§åˆ¶æƒé™ï¼›æ‰€ä»¥freeä¹‹åè¦ p = NULL*p = 123; // å®é™…ä¸Šè¿™æ˜¯ä¸ªé‡æŒ‡é’ˆï¼Œè¯¥å—å†…å­˜é‡Šæ”¾æ‰äº†ï¼Œæœ‰å¯èƒ½è¢«å…¶ä»–äººç”¨æ¥å£°æ˜å˜é‡äº†ã€‚è¿™é‡Œé‡æ–°èµ‹å€¼ï¼Œç›¸å½“äºå¯èƒ½æŠŠåˆ«äººçš„å˜é‡ç»™è¦†ç›–äº†printf(\"%d\\n\", *p); // 123 // æµ‹è¯•åœ°å€printf(\"%p--&gt;%d\\n\", *p); // 0x7b--&gt;145574408","categories":[{"name":"language","slug":"language","permalink":"http://yoursite.com/categories/language/"}],"tags":[{"name":"C","slug":"C","permalink":"http://yoursite.com/tags/C/"}]},{"title":"ts declaration files","slug":"ts-declaration-files","date":"2021-01-21T03:16:49.000Z","updated":"2021-02-09T10:28:11.416Z","comments":true,"path":"2021/01/21/ts-declaration-files/","link":"","permalink":"http://yoursite.com/2021/01/21/ts-declaration-files/","excerpt":"","text":"10. Declaration Files10. 1 Declaration Referenceæœ¬èŠ‚æ˜¾ç¤ºä¸€äº›APIçš„æ–‡æ¡£ä»¥åŠè¯¥APIçš„ç¤ºä¾‹ç”¨æ³•ï¼Œå¹¶è¯´æ˜å¦‚ä½•ç¼–å†™ç›¸åº”çš„å£°æ˜ã€‚ 10.1.1 å…·æœ‰å±æ€§çš„å¯¹è±¡12345// codelet result = myLib.makeGreeting(\"hello, world\");console.log(\"The computed greeting is:\" + result);let count = myLib.numberOfGreetings; 12345// å£°æ˜declare namespace myLib &#123; function makeGreeting(s: string): string, let numberOfGreetings: number;&#125; 10.1.2 Overloaded Functions1234567// code let x : Widget = getWidget(43);let arr: Widget[] = getWidget(\"all of them\");// å£°æ˜declare function getWidget(n: number): Widget;declare function getWidget(s: string): Widget[]; 10.1.3 Reusable Types (Interfaces)1234567891011121314// codegreet(&#123; greeting: \"hello world\", duration: 4000&#125;);// å£°æ˜interface GreetingSettings &#123; greeting: string; duration?: number; color?: string;&#125;declare function greet(setting: GreetingSettings): void; 10.1.4 Reusable Types (Type Aliases)12345678910111213// code function getGreeting() &#123; return \"howdy\";&#125;class MyGreeter extends Greeter &#123;&#125;greet(\"hello\");greet(getGreeting);greet(new MyGreeter());// å£°æ˜// ä½¿ç”¨ç±»å‹åˆ«åæ¥ç®€åŒ–ç±»å‹ï¼štype GreetingLike = string | (()=&gt; string) | MyGreeter;declare function greet(g: GreetingLike): void; 10.1.5 ç»„ç»‡ç±»å‹1234567891011121314151617181920212223242526272829// codeconst g = new Greeter(\"Hello\");g.log(&#123; verbose: true &#125;);g.alert(&#123; modal: false, title: \"Current Greeting\" &#125;);// å£°æ˜// ä½¿ç”¨å‘½åç©ºé—´å»ç»„ç»‡ç±»å‹declare namespace GreetingLib &#123; interface LogOptions &#123; verbose?: boolean; &#125; interface AlertOptions &#123; modal: boolean; title?: string; color?: string; &#125;&#125; // ä½¿ç”¨åµŒå¥—çš„å‘½åç©ºé—´æ¥å£°æ˜declare namespace GreetingLib.Options &#123; // Refer to via GreetingLib.Options.Log interface Log &#123; verbose?: boolean; &#125; interface Alert &#123; modal: boolean; title?: string; color?: string; &#125;&#125; 10.1.6 Classes1234567891011121314151617// codeconst myGreeter = new Greeter(\"hello, world\");myGreeter.greeting = \"howdy\";myGreeter.showGreeting();class SpecialGreeter extends Greeter &#123; constructor() &#123; super(\"Very special greetings\"); &#125;&#125;// å£°æ˜// ä½¿ç”¨ declare class æ¥æè¿°ç±»æˆ–ç±»å¯¹è±¡ã€‚ç±»å¯ä»¥å…·æœ‰å±æ€§å’Œæ–¹æ³•ä»¥åŠæ„é€ å‡½æ•°ã€‚declare class Greeter &#123; constructor(greeting: string); greeting: string; showGreeting(): void;&#125; 10.1.7 Global Variables1234// codeconsole.log(f00/2);// å£°æ˜declare var foo: number 10.1.8 Global Functions1234// codegreet(\"hello\");// å£°æ˜declare function greet(str: string):void; 10.2 Library Structuresé’ˆå¯¹ä¸åŒç±»å‹çš„åº“ï¼Œç¼–å†™å¯¹åº”ç±»å‹çš„å£°æ˜æ–‡ä»¶ã€‚ä½ æ˜¯é€šè¿‡cdnè·å–è¿™äº›åº“è¿˜æ˜¯é€šè¿‡npmè·å–ï¼›ä½ æ˜¯requireå¼•å…¥è¿˜æ˜¯importå¼•å…¥ï¼› 10.2.1 æ¨¡å—åŒ–çš„åº“å‡ ä¹æ¯ä¸ªç°ä»£çš„Node.jsåº“éƒ½å±äºæ¨¡å—å®¶æ—ã€‚è¿™äº›ç±»å‹çš„åº“ä»…åœ¨å¸¦æœ‰æ¨¡å—åŠ è½½å™¨çš„JSç¯å¢ƒä¸­å·¥ä½œã€‚ä¾‹å¦‚ï¼Œexpressä»…åœ¨Node.jsä¸­æœ‰æ•ˆï¼Œå¹¶ä¸”å¿…é¡»ä½¿ç”¨CommonJS requireå‡½æ•°åŠ è½½ã€‚ 12345var fs = require(\"fs\");import * as fs from \"fs\";var someLib = require(\"someLib\");define(..., ['someLib'], function(someLib) &#123;&#125;); ä»ä»£ç ä¸­è¯†åˆ«æ¨¡å—åº“ Unconditional calls to require or define Declarations like import * as a from &#39;b&#39;; or export c; Assignments to exports or module.exports They will rarely have: Assignments to properties of window or global 10.2.1.1 Modules.d.ts å¸¸è§çš„Commonjs æ¨¡å¼ 123456789101112131415const maxInterval = 12;function getArrayLength(arr) &#123; return arr.length;&#125;module.exports = &#123; getArrayLength, maxInterval,&#125;;// This can be described by the following .d.ts:export function getArrayLength(arr: any[]): number;export const maxInterval: 12; Es module 1234567export function getArrayLength(arr) &#123; return arr.length;&#125;// This would have the following .d.ts equivalent:export function getArrayLength(arr: any[]): number; Default Exports 12345// codemodule.exports = /hello( world)?/;// .d.tsdeclare const helloWorld: RegExp;export default helloWorld; CommonJSä¸­çš„ä¸€ç§å¯¼å‡ºæ ·å¼æ˜¯å¯¼å‡ºå‡½æ•°ã€‚ç”±äºå‡½æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥åœ¨å¯¼å‡ºä¸­æ·»åŠ é¢å¤–çš„å­—æ®µã€‚ 1234567891011function getArrayLength(arr) &#123; return arr.slice;&#125;getArrayLength.maxInterval = 12;module.exports = getArrayLength;// Which can be described with:export default function getArrayLength(arr: any[]): number;export const maxInterval: 12;// éœ€è¦åœ¨ tsconfig.json ä¸­è®¾ç½® esModuleInterop: true å¦‚æœæ²¡æœ‰åœ¨ tsconfig.json ä¸­è®¾ç½® esModuleInterop: true 123456declare function getArrayLength(arr: any[]): number;declare namespace getArrayLength &#123; declare const maxInterval: 12;&#125;// ä½¿ç”¨ export= è¯­æ³•export = getArrayLength; æ¨¡å—ä¸­çš„ç±»å‹ å¯èƒ½éœ€è¦æä¾›ä¸€ç§ä¸å­˜åœ¨çš„JavaScriptä»£ç ç±»å‹ 123456789101112131415161718192021222324252627// code function getArrayMetadata(arr) &#123; return &#123; length: getArrayLength(arr), firstObject: arr[0], &#125;;&#125;module.exports = &#123; getArrayMetadata,&#125;;// describedexport type ArrayMetadata = &#123; length: number; firstObject: any | undefined;&#125;export function getArrayMetadata(arr: any[]):ArrayMetadata;// æ³›å‹ä¼˜åŒ–ç‰ˆexport type ArrayMetadata&lt;ArrType&gt; = &#123; length: number; firstObject: ArrType | undefined;&#125;;export function getArrayMetadata&lt;ArrType&gt;( arr: ArrType[]): ArrayMetadata&lt;ArrType&gt;; Namespaces in Module Code è¯•å›¾æè¿°JavaScriptè¿è¡Œæ—¶çš„å…³è”å¯èƒ½å¾ˆæ£˜æ‰‹ã€‚å¦‚æœç±»ä¼¼ESæ¨¡å—çš„è¯­æ³•æ²¡æœ‰æä¾›è¶³å¤Ÿçš„å·¥å…·æ¥æè¿°å¯¼å‡ºï¼Œåˆ™å¯ä»¥ä½¿ç”¨åç§°ç©ºé—´ã€‚ æ‚¨å¯èƒ½æœ‰è¶³å¤Ÿå¤æ‚çš„ç±»å‹æ¥æè¿°ï¼Œå› æ­¤æ‚¨é€‰æ‹©åœ¨.d.tsä¸­å¯¹å®ƒä»¬è¿›è¡Œå‘½åç©ºé—´ï¼š 123456789101112131415161718// è¿è¡Œæ—¶å¯ç”¨çš„JavaScriptç±»export class API &#123; constructor(baseURL: string); getInfo(opts: API.InfoRequest): API.InfoResponse;&#125;// This namespace is merged with the API class and allows for consumers, and this file// to have types which are nested away in their own sections.declare namespace API &#123; export interface InfoRequest &#123; id: string; &#125; export interface InfoResponse &#123; width: number; height: number; &#125;&#125; æ‚¨å¯ä»¥ä½¿ç”¨export as namespaceå£°æ˜æ¨¡å—å°†åœ¨UMDä¸Šä¸‹æ–‡ä¸­çš„å…¨å±€èŒƒå›´å†…å¯ç”¨ 1export as namespaces moduleName; Template ä¸ºäº†è®©æ‚¨äº†è§£æ‰€æœ‰è¿™äº›éƒ¨åˆ†å¦‚ä½•ç»„åˆåœ¨ä¸€èµ·ï¼Œè¿™é‡Œæ˜¯åˆ¶ä½œæ–°æ¨¡å—æ—¶çš„å‚è€ƒ.d.tsã€‚ 1234567891011121314151617181920212223242526272829// Type definitions for [~THE LIBRARY NAME~] [~OPTIONAL VERSION NUMBER~]// Project: [~THE PROJECT NAME~]// Definitions by: [~YOUR NAME~] &lt;[~A URL FOR YOU~]&gt;/*~ This is the module template file. You should rename it to index.d.ts *~ and place it in a folder with the same name as the module. *~ For example, if you were writing a file for \"super-greeter\", this *~ file should be 'super-greeter/index.d.ts' *//*å¦‚æœæ­¤æ¨¡å—æ˜¯åœ¨æ¨¡å—åŠ è½½ç¨‹åºç¯å¢ƒä¹‹å¤–åŠ è½½æ—¶å…¬å¼€å…¨å±€å˜é‡â€œ myLibâ€çš„UMDæ¨¡å—ï¼Œè¯·åœ¨æ­¤å¤„å£°æ˜è¯¥å…¨å±€å˜é‡ã€‚å¦åˆ™ï¼Œåˆ é™¤æ­¤å£°æ˜ã€‚ */export as namespace myLib;/*~ If this module exports functions, declare them like so. */export function myFunction(a: string): string;export function myOtherFunction(a: number): number;/*~ You can declare types that are available via importing the module */export interface SomeType &#123; name: string; length: number; extras?: string[];&#125;/*~ You can declare properties of the module using const, let, or var */export const myField: number; åº“æ–‡ä»¶å¸ƒå±€ 123456myLib +---- index.js +---- foo.js +---- bar +---- index.js +---- baz.js å£°æ˜æ–‡ä»¶å¸ƒå±€åº”ä¸º 123456@types&#x2F;myLib +---- index.d.ts +---- foo.d.ts +---- bar +---- index.d.ts +---- baz.d.ts 12345// thest could be imported asvar a = require(\"myLib\");var b = require(\"myLib/foo\");var c = require(\"myLib/bar\");var d = require(\"myLib/bar/baz\"); Testing your types If you are planning on submitting these changes to DefinitelyTyped for everyone to also use, then we recommend you: Create a new folder in node_modules/@types/[libname] Create an index.d.ts in that folder, and copy the example in See where your usage of the module breaks, and start to fill out the index.d.ts When youâ€™re happy, clone DefinitelyTyped/DefinitelyTyped and follow the instructions in the README. Otherwise Create a new file in the root of your source tree: [libname].d.ts Add declare module &quot;[libname]&quot; { } Add the template inside the braces of the declare module, and see where your usage breaks 10.2.1.2 module:function1234import greeter from \"super-greeter\";greeter(2);greeter(\"Hello world\"); å¦‚æœæ¨¡å—å¯ä»¥åƒä¸€ä¸ªå‡½æ•°ä¸€æ ·è¢«è°ƒç”¨ï¼Œéœ€ä½¿ç”¨module-function æ¨¡ç‰ˆ è¦åŒæ—¶é€šè¿‡UMDå’Œæ¨¡å—å¼•å…¥ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// Type definitions for [~THE LIBRARY NAME~] [~OPTIONAL VERSION NUMBER~]// Project: [~THE PROJECT NAME~]// Definitions by: [~YOUR NAME~] &lt;[~A URL FOR YOU~]&gt;/*~ This is the module template file for function modules. *~ You should rename it to index.d.ts and place it in a folder with the same name as the module. *~ For example, if you were writing a file for \"super-greeter\", this *~ file should be 'super-greeter/index.d.ts' */// Note that ES6 modules cannot directly export class objects.// This file should be imported using the CommonJS-style:// import x = require('[~THE MODULE~]');//// Alternatively, if --allowSyntheticDefaultImports or// --esModuleInterop is turned on, this file can also be// imported as a default import:// import x from '[~THE MODULE~]';//// Refer to the TypeScript documentation at// https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require// to understand common workarounds for this limitation of ES6 modules./*~ If this module is a UMD module that exposes a global variable 'myFuncLib' when *~ loaded outside a module loader environment, declare that global here. *~ Otherwise, delete this declaration. */export as namespace myFuncLib;/*~ This declaration specifies that the function *~ is the exported object from the file */export = Greeter;/*~ This example shows how to have multiple overloads for your function */declare function Greeter(name: string): Greeter.NamedReturnType;declare function Greeter(length: number): Greeter.LengthReturnType;/*~ If you want to expose types from your module as well, you can *~ place them in this block. Often you will want to describe the *~ shape of the return type of the function; that type should *~ be declared in here, as this example shows. *~ *~ Note that if you decide to include this namespace, the module can be *~ incorrectly imported as a namespace object, unless *~ --esModuleInterop is turned on: *~ import * as x from '[~THE MODULE~]'; // WRONG! DO NOT DO THIS! */declare namespace Greeter &#123; export interface LengthReturnType &#123; width: number; height: number; &#125; export interface NamedReturnType &#123; firstName: string; lastName: string; &#125; /*~ If the module also has properties, declare them here. For example, *~ this declaration says that this code is legal: *~ import f = require('super-greeter'); *~ console.log(f.defaultName); */ export const defaultName: string; export let defaultLength: number;&#125; 10.2.1.2 module:class1234const Greeter = require(\"super-greeter\");const greeter = new Greeter();greeter.greet(); å¦‚æœå¯¼å‡ºçš„å¯¹è±¡æ˜¯ä¸€ä¸ªç±»çš„è¯ï¼› 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657// Type definitions for [~THE LIBRARY NAME~] [~OPTIONAL VERSION NUMBER~]// Project: [~THE PROJECT NAME~]// Definitions by: [~YOUR NAME~] &lt;[~A URL FOR YOU~]&gt;/*~ This is the module template file for class modules. *~ You should rename it to index.d.ts and place it in a folder with the same name as the module. *~ For example, if you were writing a file for \"super-greeter\", this *~ file should be 'super-greeter/index.d.ts' */// Note that ES6 modules cannot directly export class objects.// This file should be imported using the CommonJS-style:// import x = require('[~THE MODULE~]');//// Alternatively, if --allowSyntheticDefaultImports or// --esModuleInterop is turned on, this file can also be// imported as a default import:// import x from '[~THE MODULE~]';//// Refer to the TypeScript documentation at// https://www.typescriptlang.org/docs/handbook/modules.html#export--and-import--require// to understand common workarounds for this limitation of ES6 modules./*~ If this module is a UMD module that exposes a global variable 'myClassLib' when *~ loaded outside a module loader environment, declare that global here. *~ Otherwise, delete this declaration. */export as namespace myClassLib;/*~ This declaration specifies that the class constructor function *~ is the exported object from the file */export = MyClass;/*~ Write your module's methods and properties in this class */declare class MyClass &#123; constructor(customGreeting?: string); greet: void; myMethod(opts: MyClass.MyClassMethodOptions): number;&#125;/*~ If you want to expose types from your module as well, you can *~ place them in this block. *~ *~ Note that if you decide to include this namespace, the module can be *~ incorrectly imported as a namespace object, unless *~ --esModuleInterop is turned on: *~ import * as x from '[~THE MODULE~]'; // WRONG! DO NOT DO THIS! */declare namespace MyClass &#123; export interface MyClassMethodOptions &#123; width?: number; height?: number; &#125;&#125; 10.2.1.3 Module: pluginIf you have a module which when imported, makes changes to other modules use template 12const jest = require('jest');require(\"jest-matchers-files\"); when you want to work with JavaScript code which extends another library. 123456789import &#123; greeter &#125; from \"super-greeter\";// Normal Greeter APIgreeter(2);greeter(\"Hello world\");// Now we extend the object with a new function at runtimeimport \"hyper-super-greeter\";greeter.hyperGreet(); The definition for â€œsuper-greeterâ€ 12345678/*~ This example shows how to have å¤šä¸ªé‡è½½ for your function */export interface GreeterFunction &#123; (name: string): void (time: number): void&#125;/*~ This example shows how to export ä¸€ä¸ªæ¥å£æŒ‡å®šçš„function */export const greeter: GreeterFunction; We can extend the existing module like the following: 12345678910111213141516171819202122// Type definitions for [~THE LIBRARY NAME~] [~OPTIONAL VERSION NUMBER~]// Project: [~THE PROJECT NAME~]// Definitions by: [~YOUR NAME~] &lt;[~A URL FOR YOU~]&gt;/*~ This is the module plugin template file. You should rename it to index.d.ts *~ and place it in a folder with the same name as the module. *~ For example, if you were writing a file for \"super-greeter\", this *~ file should be 'super-greeter/index.d.ts' *//*~ On this line, import the module which this module adds to */import &#123; greeter &#125; from \"super-greeter\";/*~ Here, declare the same module as the one you imported above *~ then we expand the existing declaration of the greeter function */export module \"super-greeter\" &#123; export interface GreeterFunction &#123; /** Greets even better! */ hyperGreet(): void; &#125;&#125; 10.2.2 Global Librarieså…¨å±€åº“æ˜¯å¯ä»¥ä»å…¨å±€èŒƒå›´è®¿é—®çš„åº“ï¼ˆå³ï¼Œæ— éœ€ä½¿ç”¨ä»»ä½•å½¢å¼çš„å¯¼å…¥ï¼‰ã€‚è®¸å¤šåº“åªæ˜¯å…¬å¼€ä¸€ä¸ªæˆ–å¤šä¸ªå…¨å±€å˜é‡ä¾›ä½¿ç”¨ã€‚ä¾‹å¦‚jquery; 123$(() =&gt; &#123; console.log(\"hello\");&#125;) 12&lt;!--ä¸€èˆ¬æƒ…å†µï¼Œå…¨å±€åº“çš„ä½¿ç”¨æ–¹å¼ --&gt;&lt;script src=\"http://a.great.cdn.for/someLib.js\"&gt;&lt;/script&gt; ç°åœ¨ï¼Œæœ€æµè¡Œçš„å¯å…¨å±€åº“ å®é™…ä¸Šæ˜¯ä½œä¸º UMDæ ‡å‡† ç¼–å†™çš„ï¼ˆè¯·å‚è§ä¸‹æ–‡ï¼‰ã€‚ UMDåº“æ–‡æ¡£å¾ˆéš¾ä¸å…¨å±€åº“æ–‡æ¡£åŒºåˆ†å¼€ã€‚åœ¨ç¼–å†™å…¨å±€å£°æ˜æ–‡ä»¶ä¹‹å‰ï¼Œè¯·ç¡®ä¿è¯¥åº“ä¸æ˜¯UMDã€‚ ä»ä»£ç ä¸­è¯†åˆ«Global Library æŸ¥çœ‹å…¨å±€åº“çš„ä»£ç æ—¶ï¼Œé€šå¸¸ä¼šçœ‹åˆ°ï¼š Top-level var statements or function declarations One or more assignments to window.someName Assumptions that DOM primitives like document or window exist You wonâ€™t see: Checks for, or usage of, module loaders like require or define CommonJS/Node.js-style imports of the form var fs = require(&quot;fs&quot;); Calls to define(...) Documentation describing how to require or import the library 10.2.2.1 Global.d.ts1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162// Type definitions for [~THE LIBRARY NAME~] [~OPTIONAL VERSION NUMBER~]// Project: [~THE PROJECT NAME~]// Definitions by: [~YOUR NAME~] &lt;[~A URL FOR YOU~]&gt;/*~ If this library is callable (e.g. can be invoked as myLib(3)), *~ include those call signatures here. *~ Otherwise, delete this section. */declare function myLib(a: string): string;declare function myLib(a: number): number;/*~ If you want the name of this library to be a valid type name, *~ you can do so here. *~ *~ For example, this allows us to write 'var x: myLib'; *~ Be sure this actually makes sense! If it doesn't, just *~ delete this declaration and add types inside the namespace below. */interface myLib &#123; name: string; length: number; extras?: string[];&#125;/*~ If your library has properties exposed on a global variable, *~ place them here. *~ You should also place types (interfaces and type alias) here. */declare namespace myLib &#123; //~ We can write 'myLib.timeout = 50;' let timeout: number; //~ We can access 'myLib.version', but not change it const version: string; //~ There's some class we can create via 'let c = new myLib.Cat(42)' //~ Or reference e.g. 'function f(c: myLib.Cat) &#123; ... &#125; class Cat &#123; constructor(n: number); //~ We can read 'c.age' from a 'Cat' instance readonly age: number; //~ We can invoke 'c.purr()' from a 'Cat' instance purr(): void; &#125; //~ We can declare a variable as //~ 'var s: myLib.CatSettings = &#123; weight: 5, name: \"Maru\" &#125;;' interface CatSettings &#123; weight: number; name: string; tailLength?: number; &#125; //~ We can write 'const v: myLib.VetID = 42;' //~ or 'const v: myLib.VetID = \"bob\";' type VetID = string | number; //~ We can invoke 'myLib.checkCat(c)' or 'myLib.checkCat(c, v);' function checkCat(c: Cat, s?: VetID);&#125; 10.2.2.2 Global: Modifying Moduleå¯¼å…¥å…¨å±€å˜é‡çš„æ¨¡å—ä¼šåœ¨å…¨å±€èŒƒå›´å†…æ›´æ”¹ç°æœ‰å€¼ã€‚ä¾‹å¦‚ï¼Œå¯èƒ½å­˜åœ¨ä¸€ä¸ªåº“ï¼Œè¯¥åº“åœ¨å¯¼å…¥æ—¶å°†æ–°æˆå‘˜æ·»åŠ åˆ°String.prototypeã€‚ç”±äºå­˜åœ¨è¿è¡Œæ—¶å†²çªçš„å¯èƒ½æ€§ï¼Œè¯¥æ¨¡å¼æœ‰äº›å±é™©ï¼Œä½†æ˜¯æˆ‘ä»¬ä»ç„¶å¯ä»¥ä¸ºå…¶ç¼–å†™å£°æ˜æ–‡ä»¶ã€‚ è¯†åˆ«å…¨å±€ä¿®æ”¹æ¨¡å— å…¨å±€ä¿®æ”¹æ¨¡å—é€šå¸¸æ˜“äºä»å…¶æ–‡æ¡£ä¸­è¯†åˆ«ï¼Œå®ƒä»¬ç±»ä¼¼å…¨å±€æ’ä»¶ï¼Œä½†æ˜¯éœ€è¦requireæ–¹æ³•çš„è°ƒç”¨ æ‰èƒ½æ¿€æ´»å®ƒä»¬çš„å‰¯ä½œç”¨ï¼› 123456789101112// 'require' call that doesn't use its return valuevar unused = require(\"magic-string-time\");/* or */require(\"magic-string-time\");var x = \"hello, world\";// Creates new methods on built-in typesconsole.log(x.startsWithHello());var y = [1, 2, 3];// Creates new methods on built-in typesconsole.log(y.reverseAndSort()); 123456789101112131415161718192021222324252627282930313233// Type definitions for [~THE LIBRARY NAME~] [~OPTIONAL VERSION NUMBER~]// Project: [~THE PROJECT NAME~]// Definitions by: [~YOUR NAME~] &lt;[~A URL FOR YOU~]&gt;/*~ This is the global-modifying module template file. You should rename it to index.d.ts *~ and place it in a folder with the same name as the module. *~ For example, if you were writing a file for \"super-greeter\", this *~ file should be 'super-greeter/index.d.ts' *//*~ Note: If your global-modifying module is callable or constructable, you'll *~ need to combine the patterns here with those in the module-class or module-function *~ template files */declare global &#123; /*~ Here, declare things that go in the global namespace, or augment *~ existing declarations in the global namespace */ interface String &#123; fancyFormat(opts: StringFormatOptions): string; &#125;&#125;/*~ If your module exports types or values, write them as usual */export interface StringFormatOptions &#123; fancinessLevel: number;&#125;/*~ For example, declaring a method on the module (in addition to its global side effects) */export function doSomething(): void;/*~ If your module exports nothing, you'll need this line. Otherwise, delete it */export &#123;&#125;; 10.2.3 UMDUMDæ¨¡å—æ—¢å¯ä»¥ç”¨ä½œæ¨¡å—ï¼ˆé€šè¿‡importï¼‰ï¼Œä¹Ÿå¯ä»¥ç”¨ä½œå…¨å±€æ¨¡å—ï¼ˆåœ¨æ²¡æœ‰æ¨¡å—åŠ è½½å™¨çš„ç¯å¢ƒä¸­è¿è¡Œæ—¶ï¼‰ã€‚è¿™æ ·ç¼–å†™äº†è®¸å¤šæµè¡Œçš„åº“ï¼Œä¾‹å¦‚Moment.jsã€‚ 1234// nodejs ç¯å¢ƒä¸‹import moment = require('moment');// æµè§ˆå™¨ç¯å¢ƒä¸‹console.log(mement.format()); umdæ¨¡ç‰ˆ 12345678910111213141516(function (root, factory) &#123; if (typeof define === \"function\" &amp;&amp; define.amd) &#123; define([\"libName\"], factory); &#125; else if (typeof module === \"object\" &amp;&amp; module.exports) &#123; module.exports = factory(require(\"libName\")); &#125; else &#123; root.returnExports = factory(root.libName); &#125;&#125;(typeof self !== 'undefined' ? self : this, function (b) &#123; // Use b in some fashion. // Just return a value to define the module export. // This example returns an object, but the module // can return a function as the exported value. return &#123;&#125;;&#125;)); UMDåº“çš„æ–‡æ¡£é€šå¸¸è¿˜ä¼šæ¼”ç¤ºä¸€ä¸ªæ˜¾ç¤ºrequireçš„â€œåœ¨Node.jsä¸­ä½¿ç”¨â€ç¤ºä¾‹ï¼Œä»¥åŠä¸€ä¸ªä½¿ç”¨scriptæ ‡è®°åŠ è½½è¯¥è„šæœ¬çš„â€œåœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨â€ç¤ºä¾‹ã€‚ 10.2.4 Consuming Dependenciesä½ çš„åº“å¯èƒ½å…·æœ‰é›†ä¸­ä¾èµ–å…³ç³»ï¼Œä¸‹é¢ä¼šè¯´æ˜å¦‚ä½•å°†å®ƒä»¬å¯¼å…¥å£°æ˜æ–‡ä»¶ï¼› Dependencies on Global Libraries If your library depends on a global library, use a /// &lt;reference types=&quot;...&quot; /&gt; directive: 123/// &lt;reference types=\"someLib\" /&gt;function getThing(): someLib.thing; Dependencies on Modules If your library depends on a module, use an import statement: 123import * as moment from \"moment\";function getThing(): moment; Dependencies on UMD libraries From a Global Library If your global library depends on a UMD module, use a /// &lt;reference types directive: 123/// &lt;reference types=\"moment\" /&gt;function getThing(): moment; From a Module or UMD Library If your module or UMD library depends on a UMD library, use an import statement: 1import * as someLib from \"someLib\"; Do not use a /// &lt;reference directive æ¥å£°æ˜å¯¹UMDåº“çš„ä¾èµ–ï¼ 10.2.5 Preventing Name Conflictsç¼–å†™å…¨å±€å£°æ˜æ–‡ä»¶æ—¶ï¼Œå¯ä»¥åœ¨å…¨å±€èŒƒå›´å†…å®šä¹‰è®¸å¤šç±»å‹ã€‚å¼ºçƒˆä¸å»ºè®®è¿™æ ·åšï¼Œå› ä¸ºå½“é¡¹ç›®ä¸­æœ‰è®¸å¤šå£°æ˜æ–‡ä»¶æ—¶ï¼Œå®ƒå¯èƒ½å¯¼è‡´æ— æ³•è§£å†³çš„åç§°å†²çªã€‚ åº“å®šä¹‰çš„ä»»ä½•å…¨å±€å˜é‡åªå£°æ˜ namespaces 12345678declare namespace cats &#123; interface KittySettings &#123;&#125;&#125; // But not // at top-level interface CatsKittySettings&#123;&#125; This guidance also ensures that the library can be transitioned to UMD without breaking declaration file users. 10.3 Doâ€™s and Donâ€™ts10.3.1 åŸºæœ¬ç±»å‹ä¸è¦ä½¿ç”¨Number,String,Boolean, Symbol, or Object ç­‰ç±»å‹ï¼› 10.3.2 anyanyç±»å‹ä½ æ‡‚å¾—ï¼Œå°½é‡åˆ«ç”¨ã€‚anyScriptæ¯«æ— æ„ä¹‰ï¼› 10.3.3 Callback Typeså¯¹äºè¿”å›å€¼è¢«å¿½ç•¥çš„å›è°ƒï¼Œåˆ«ä½¿ç”¨any, ä½¿ç”¨voidæ›´å¥½ï¼› 12345678/* WRONG */function fn(x: () =&gt; any) &#123; x();&#125;/* OK */function fn(x: () =&gt; void) &#123; x();&#125; 10.3.4 é‡è½½å’Œå›è°ƒå‡½æ•°ä¸è¦ç¼–å†™ä»…åœ¨å›è°ƒå‡½æ•°ä¸Šæœ‰æ‰€ä¸åŒçš„å•ç‹¬é‡è½½ï¼š 12345678910111213/* WRONG */declare function beforeAll(action: () =&gt; void, timeout?: number): void;declare function beforeAll( action: (done: DoneFn) =&gt; void, timeout?: number): void;// ok// Do write a single overload using the maximum arity:declare function beforeAll( action: (done: DoneFn) =&gt; void, timeout?: number): void; åŸå› ï¼šå›è°ƒå¿½ç•¥å‚æ•°å§‹ç»ˆæ˜¯åˆæ³•çš„ï¼Œå› æ­¤ä¸éœ€è¦è¾ƒçŸ­çš„é‡è½½ã€‚é¦–å…ˆæä¾›ä¸€ä¸ªè¾ƒçŸ­çš„å›è°ƒå…è®¸è¾“å…¥é”™è¯¯ç±»å‹çš„å‡½æ•°ï¼Œå› ä¸ºå®ƒä»¬ä¸ç¬¬ä¸€ä¸ªé‡è½½åŒ¹é…ã€‚ 10.3.5 function é‡è½½ä¸è¦åœ¨æ›´å…·ä½“çš„é‡è½½ä¹‹å‰æ”¾ç½®æ›´ä¸€èˆ¬çš„é‡è½½ï¼› 1234567891011121314151617/* WRONG */declare function fn(x: any): any;declare function fn(x: HTMLElement): number;declare function fn(x: HTMLDivElement): string;var myElem: HTMLDivElement;var x = fn(myElem); // x: any, wat?// é€šè¿‡å°†æ›´ä¸€èˆ¬çš„ç­¾åæ”¾åœ¨æ›´å…·ä½“çš„ç­¾åä¹‹åæ¥å¯¹é‡è½½è¿›è¡Œæ’åº/* OK */declare function fn(x: HTMLDivElement): string;declare function fn(x: HTMLElement): number;declare function fn(x: any): any;var myElem: HTMLDivElement;var x = fn(myElem); // x: string, :) åŸå› ï¼šTypeScriptåœ¨è§£å†³å‡½æ•°è°ƒç”¨æ—¶é€‰æ‹©ç¬¬ä¸€ä¸ªåŒ¹é…çš„é‡è½½ã€‚å½“è¾ƒæ—©çš„è¿‡è½½æ¯”è¾ƒæ™šçš„è¿‡è½½â€œæ›´æ™®éâ€æ—¶ï¼Œè¾ƒæ™šçš„è¿‡è½½å®é™…ä¸Šæ˜¯éšè—çš„ï¼Œæ— æ³•è°ƒç”¨ã€‚ 10.3.6 Use Optional Parametersä¸è¦å†™ä¸€äº›ä»…åœ¨å°¾éšå‚æ•°ä¸Šæœ‰æ‰€ä¸åŒçš„é‡è½½ 1234567891011/* WRONG */interface Example &#123; diff(one: string): number; diff(one: string, two: string): number; diff(one: string, two: string, three: boolean): number;&#125;/* OK */interface Example &#123; diff(one: string, two?: string, three?: boolean): number;&#125; 10.3.7 Union Typesä¸è¦åªåœ¨ä¸€ä¸ªå‚æ•°ä½ç½®ç¼–å†™å› ç±»å‹è€Œå¼‚çš„é‡è½½ 1234567891011121314151617181920/* WRONG */interface Moment &#123; utcOffset(): number; utcOffset(b: number): Moment; utcOffset(b: string): Moment;&#125;/* OK */interface Moment &#123; utcOffset(): number; utcOffset(b: number | string): Moment;&#125;function fn(x: string): void;function fn(x: number): void;function fn(x: number | string) &#123; // When written with separate overloads, incorrectly an error // When written with union types, correctly OK return moment().utcOffset(x);&#125; 10.4 Deep Dive10.4.1 Namespacesç±»å‹å¯ä»¥å­˜åœ¨äºåç§°ç©ºé—´ä¸­ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰å£°æ˜let xï¼šA.B.Cï¼Œåˆ™è¯´ç±»å‹Cæ¥è‡ªA.Bå‘½åç©ºé—´ã€‚Aï¼Œ B ä¸ä¸€å®šå¿…é¡»æ˜¯ç±»å‹æˆ–è€…å€¼ 10.4.2 ç®€å•ç»„åˆï¼Œä¸€ä¸ªåå­—å¤šç§å«ä¹‰ç»™å®šåç§°Aï¼Œæˆ‘ä»¬æœ€å¤šå¯ä»¥æ‰¾åˆ°Açš„ä¸‰ç§ä¸åŒå«ä¹‰ï¼šç±»å‹ï¼Œå€¼æˆ–åç§°ç©ºé—´ã€‚åç§°çš„è§£é‡Šæ–¹å¼å–å†³äºæ‰€ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸€ä¸ªå£°æ˜æ–‡ä»¶ä¸­ ä¸­ let mï¼šA.A = A ;ï¼Œé¦–å…ˆå°†Aç”¨ä½œnamespacesï¼Œç„¶åç”¨ä½œç±»å‹åç§°ï¼Œç„¶åç”¨ä½œå€¼ã€‚è¿™äº›å«ä¹‰å¯èƒ½æœ€ç»ˆä¼šå¼•ç”¨å®Œå…¨ä¸åŒçš„å£°æ˜ï¼ 10.4.2.1 User Combinations123456789// foo.d.tsexport var SomeVar: &#123; a: SomeType &#125;;export interface SomeType &#123; count: number;&#125;// consumedimport * as foo from \"./foo\";let x: foo.SomeType = foo.SomeVar.a;console.log(x.count); è¿™ç§æ–¹æ³•ä¸é”™ï¼Œä½†æˆ‘ä»¬å¯èƒ½ä¼šè®¤ä¸º SomeType å’Œ SomeVar ç´§å¯†ç›¸å…³ï¼Œå› æ­¤æ‚¨å¸Œæœ›å®ƒä»¬å…·æœ‰ç›¸åŒçš„åç§°ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆå¹¶ç›¸åŒçš„åç§°Barå‘ˆç°è¿™ä¸¤ä¸ªä¸åŒçš„å¯¹è±¡ï¼› 123456789// foo.d.tsexport var Bar: &#123;a : Bar&#125;;export interface Bar &#123; count: number&#125;// consumedimport &#123; Bar &#125; from \"./foo\";let x: Bar = Bar.a;console.log(x.count); æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨Barä½œä¸ºç±»å‹å’Œå€¼ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¸å¿…å°†Barå€¼å£°æ˜ä¸ºBarç±»å‹ï¼Œå®ƒä»¬æ˜¯ç‹¬ç«‹çš„ã€‚ 10.4.2.2 Advanced CombinationsæŸäº›å£°æ˜å¯ä»¥è·¨å¤šä¸ªå£°æ˜è¿›è¡Œç»„åˆï¼Œæ¯”å¦‚ class C {} å’Œ interface C{} å¯ä»¥å…±å­˜ï¼Œå¹¶ä¸”éƒ½ç»™ç±»å‹Cè´¡çŒ®äº†å±æ€§ã€‚ åªè¦ä¸é€ æˆå†²çªï¼Œå°±æ˜¯åˆæ³•çš„ï¼Œä¸€èˆ¬çš„ç»éªŒæ³•åˆ™æ˜¯ï¼Œ å€¼å§‹ç»ˆä¼šä¸åŒåçš„å…¶ä»–å€¼å‘ç”Ÿå†²çªï¼Œé™¤éå°†å®ƒä»¬å£°æ˜ä¸ºnamespaces,ï¼› s, types will conflict if they are declared with a type alias declaration (type s = string), and namespaces never conflict. Adding using an `interface 1234567891011121314151617181920212223interface Foo &#123; x: number;&#125;// ... elsewhere ...interface Foo &#123; y: number;&#125;let a: Foo = ...;console.log(a.x + a.y); // OK// this also works with classesclass Foo &#123; x: number;&#125;// ... elsewhere ...interface Foo &#123; y: number;&#125;let a: Foo = ...;console.log(a.x + a.y); // OK// Note that we cannot add to type aliases (type s = string;) using an interface. Adding using a namespace å¯ä»¥ä½¿ç”¨namespaceå£°æ˜ä»¥ä»»ä½•ä¸ä¼šé€ æˆå†²çªçš„æ–¹å¼æ·»åŠ æ–°çš„ç±»å‹ï¼Œå€¼å’Œnamespaceã€‚ 123456// ç»™classæ·»åŠ ä¸€ä¸ªé™æ€æˆå‘˜class C &#123;&#125;namespace C &#123; export let x: number;&#125; let y = C.x; // OK åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‘Cçš„é™æ€ä¾§ï¼ˆå…¶æ„é€ å‡½æ•°ï¼‰æ·»åŠ äº†ä¸€ä¸ªå€¼ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªå€¼ï¼Œå¹¶ä¸”æ‰€æœ‰å€¼çš„å®¹å™¨æ˜¯å¦ä¸€ä¸ªå€¼ï¼ˆç±»å‹ç”±åç§°ç©ºé—´åŒ…å«ï¼Œè€Œåç§°ç©ºé—´ç”±å…¶ä»–åç§°ç©ºé—´åŒ…å«ï¼‰ã€‚ We could also add a namespaced type to a class: 123456class C &#123;&#125;// ... elsewhere ...namespace C &#123; export interface D &#123;&#125;&#125;let y: C.D; // OK åœ¨æˆ‘ä»¬ä¸ºå…¶ç¼–å†™ namespace å£°æ˜ä¹‹å‰ï¼Œæ²¡æœ‰ namespace Cã€‚ä½œä¸ºå‘½åç©ºé—´çš„Cçš„å«ä¹‰ä¸è¯¥ç±»åˆ›å»ºçš„Cçš„å€¼æˆ–ç±»å‹çš„å«ä¹‰ä¸å†²çªã€‚ æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åç§°ç©ºé—´å£°æ˜æ‰§è¡Œè®¸å¤šä¸åŒçš„åˆå¹¶; 12345678910111213namespace X &#123; export interface Y &#123;&#125; export class Z &#123;&#125;&#125;// ... elsewhere ...namespace X &#123; export var Y: number; export namespace Z &#123; export class C &#123;&#125; &#125;&#125;type X = string; In this example, the first block creates the following name meanings: A value X (because the namespace declaration contains a value, Z) A namespace X (because the namespace declaration contains a type, Y) A type Y in the X namespace A type Z in the X namespace (the instance shape of the class) A value Z that is a property of the X value (è¯¥classçš„æ„é€ å‡½æ•°) The second block creates the following name meanings: A value Y (of type number) that is a property of the X value A namespace Z A value Z that is a property of the X value A type C in the X.Z namespace A value C that is a property of the X.Z value A type X 10.5 Publish to npm10.5.1 ä¸¤ç§å‘å¸ƒæ–¹æ³• bundling with your npm package publishing to the @types organization on npm. 12345678/// &lt;reference path=\"...\" /&gt;// Donâ€™t use /// &lt;reference path=\"...\" /&gt; in your declaration files./// &lt;reference path=\"../typescript/lib/typescriptServices.d.ts\" /&gt;// Do use /// &lt;reference types=\"...\" /&gt; instead./// &lt;reference types=\"typescript\" /&gt; 10.5.2 Packaging dependent declarationsIf your type definitions depend on another package: Donâ€™t combine it with yours, keep each in their own file. Donâ€™t copy the declarations in your package either. Do depend on the npm type declaration package if it doesnâ€™t package its declaration files. 10.5.3 Publish to @typesPackages under the @types organization are published automatically from DefinitelyTyped using the types-publisher tool. To get your declarations published as an @types package, please submit a pull request to DefinitelyTyped. You can find more details in the contribution guidelines page. 10.6 Find and Install Declaration Files loadsh 1npm install @types/lodash 123456// å¦‚æœ npm install äº† ç±»å‹å£°æ˜import * as _ from \"lodash\";_.padStart(\"hi\", 20, \"\");// or if youâ€™re not using modules, you can just use the global variable _._.padStart(\"Hello TypeScript!\", 20, \" \");","categories":[{"name":"ts","slug":"ts","permalink":"http://yoursite.com/categories/ts/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"}]},{"title":"ts modules","slug":"ts-modules","date":"2021-01-20T11:42:30.000Z","updated":"2021-02-09T10:28:43.410Z","comments":true,"path":"2021/01/20/ts-modules/","link":"","permalink":"http://yoursite.com/2021/01/20/ts-modules/","excerpt":"","text":"6. Modules6.1 import/exportæ¨¡å—æ˜¯åœ¨è‡ªå·±çš„èŒƒå›´å†…æ‰§è¡Œçš„ï¼Œè€Œä¸æ˜¯åœ¨å…¨å±€èŒƒå›´å†…æ‰§è¡Œçš„ï¼›è¿™æ„å‘³ç€åœ¨æ¨¡å—ä¸­å£°æ˜çš„å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ç­‰åœ¨æ¨¡å—å¤–éƒ¨æ˜¯ä¸å¯è§çš„ï¼Œé™¤éä½¿ç”¨å¯¼å‡ºå½¢å¼ä¹‹ä¸€æ˜¾å¼å¯¼å‡ºå®ƒä»¬ã€‚ç›¸åï¼Œè¦ä½¿ç”¨ä»ä¸åŒæ¨¡å—å¯¼å‡ºçš„å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ï¼Œæ¥å£ç­‰ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ä¸€ç§å¯¼å…¥å½¢å¼å°†å…¶å¯¼å…¥ã€‚ æ¨¡å—æ˜¯å£°æ˜æ€§çš„ï¼Œæ¨¡å—ä¹‹é—´çš„å…³ç³»æ˜¯æ ¹æ®æ–‡ä»¶çº§åˆ«çš„å¯¼å…¥å’Œå¯¼å‡ºæŒ‡å®šçš„ï¼› æ¨¡å—ä½¿ç”¨æ¨¡å—åŠ è½½å™¨ç›¸äº’å¯¼å…¥ï¼Œ åœ¨è¿è¡Œæ—¶ï¼Œæ¨¡å—åŠ è½½ç¨‹åºè´Ÿè´£åœ¨æ‰§è¡Œæ¨¡å—ä¹‹å‰æŸ¥æ‰¾å¹¶æ‰§è¡Œæ¨¡å—çš„æ‰€æœ‰ä¾èµ–å…³ç³»ã€‚ 6.1.1 exportå¯ä»¥é€šè¿‡æ·»åŠ exportå…³é”®å­—æ¥å¯¼å‡ºä»»ä½•å£°æ˜ï¼ˆä¾‹å¦‚å˜é‡ï¼Œå‡½æ•°ï¼Œç±»ï¼Œç±»å‹åˆ«åæˆ–æ¥å£ï¼‰ã€‚ 123export interface StringValidator &#123; isAcceptable(s: string): boolean;&#125; é‡å‘½åå¯¼å‡º 1234567class ZipCodeValidator implements StringValidator &#123;isAcceptable(s: string) &#123; return s.length === 5 &amp;&amp; numberRegexp.test(s);&#125;&#125;export &#123; ZipCodeValidator &#125;;export &#123; ZipCodeValidator as mainValidator &#125;; é‡æ–°å¯¼å‡ºä¸ä¼šå°†å…¶å¯¼å…¥æœ¬åœ°ï¼Œä¹Ÿä¸ä¼šå¼•å…¥å±€éƒ¨å˜é‡ã€‚ 12345678export class ParseIntBasedZipCodeValidator &#123;isAcceptable(s: string) &#123; return s.length === 5 &amp;&amp; parseInt(s).toString() === s;&#125;&#125;// Export original validator but rename itexport &#123; ZipCodeValidator as RegExpBasedZipCodeValidator &#125; from \"./ZipCodeValidator\"; å¯¼å‡ºæ‰€æœ‰ 123456export * from \"./StringValidator\"; // exports 'StringValidator' interfaceexport * from \"./ZipCodeValidator\"; // exports 'ZipCodeValidator' class and 'numberRegexp' constant valueexport * from \"./ParseIntBasedZipCodeValidator\"; // exports the 'ParseIntBasedZipCodeValidator' class// and re-exports 'RegExpBasedZipCodeValidator' as alias// of the 'ZipCodeValidator' class from 'ZipCodeValidator.ts'// module. 6.1.2 import12345678910// single exportimport &#123; ZipCodeValidator &#125; from \"./ZipCodeValidator\";// renamedimport &#123; ZipCodeValidator as ZCV &#125; from \"./ZipCodeValidator\";let myValidator = new ZCV();// å°†æ•´ä¸ªæ¨¡å—å¯¼å…¥å•ä¸ªå˜é‡ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥è®¿é—®æ¨¡å—å¯¼å‡ºimport * as validator from \"./ZipCodeValidator\";let myValidator = new validator.ZipCodeValidator();// æŸäº›æ¨¡å—ä¼šè®¾ç½®ä¸€äº›å¯ç”±å…¶ä»–æ¨¡å—ä½¿ç”¨çš„å…¨å±€çŠ¶æ€ã€‚è¿™äº›æ¨¡å—å¯èƒ½æ²¡æœ‰ä»»ä½•å‡ºå£import \"./my-module.js\" 6.1.3 default exports é»˜è®¤å¯¼å‡º â€‹ æ¯ä¸ªæ¨¡å—å¯ä»¥é€‰æ‹©å¯¼å‡ºé»˜è®¤å¯¼å‡ºã€‚é»˜è®¤å¯¼å‡ºç”¨å…³é”®å­—defaultæ ‡è®°ï¼›æ¯ä¸ªæ¨¡å—åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºã€‚é»˜è®¤å¯¼å‡ºä½¿ç”¨å…¶ä»–å¯¼å…¥å½¢å¼å¯¼å…¥ã€‚ â€‹ é»˜è®¤å‡ºå£çœŸçš„å¾ˆæ–¹ä¾¿ã€‚ä¾‹å¦‚ï¼ŒåƒjQueryä¹‹ç±»çš„åº“å¯èƒ½å…·æœ‰jQueryæˆ–$çš„é»˜è®¤å¯¼å‡ºï¼Œæˆ‘ä»¬ä¹Ÿå¯èƒ½ä»¥$æˆ–jQueryçš„åç§°å¯¼å…¥ 1234567// JQuery.d.tsdeclare let $:JQueryexport default $;// App.tsimport $ from \"jquery\";$(\"button\").html(\"xxx\") 6.1.4 Export all as x12export * as utilities from \"./utilities\";import &#123;utilities&#125; from './index'; 6.1.4 export = import = require()TypeScript supports export = to model the traditional CommonJS and AMD workflow. export =è¯­æ³•æŒ‡å®šä»æ¨¡å—å¯¼å‡ºçš„å•ä¸ªå¯¹è±¡ã€‚è¿™å¯ä»¥æ˜¯ç±»ï¼Œæ¥å£ï¼Œåç§°ç©ºé—´ï¼Œå‡½æ•°æˆ–æšä¸¾ã€‚ å½“ä½¿ç”¨export =å¯¼å‡ºæ¨¡å—æ—¶, å¿…é¡»ç”¨ import module = require(&quot;module&quot;) å¯¼å…¥æ¨¡å— 1234567891011121314151617// z.tslet numberRegexp = /^[0-9]+$/;class ZipCodeValidator &#123;isAcceptable(s: string) &#123; return s.length === 5 &amp;&amp; numberRegexp.test(s);&#125;&#125;export = ZipCodeValidator;// t.tsimport zip = require(\"./ZipCodeValidator\");// Some samples to trylet strings = [\"Hello\", \"98052\", \"101\"];// Validators to uselet validator = new zip(); 6.2 code generation for Modulestypescript ä¼šä¾æ®ä¸åŒçš„æ¨¡å—è§„åˆ™ï¼Œç”Ÿæˆä¸åŒçš„ä»£ç  123// SimpleModule.tsimport m = require(\"mod\");export let t = m.something + 1; AMD / RequireJS SimpleModule.js 123define([\"require\", \"exports\", \"./mod\"], function (require, exports, mod_1) &#123;exports.t = mod_1.something + 1;&#125;); CommonJS / Node SimpleModule.js 12var mod_1 = require(\"./mod\");exports.t = mod_1.something + 1; UMD SimpleModule.js 1234567891011(function (factory) &#123;if (typeof module === \"object\" &amp;&amp; typeof module.exports === \"object\") &#123; var v = factory(require, exports); if (v !== undefined) module.exports = v;&#125; else if (typeof define === \"function\" &amp;&amp; define.amd) &#123; define([\"require\", \"exports\", \"./mod\"], factory);&#125;&#125;)(function (require, exports) &#123;var mod_1 = require(\"./mod\");exports.t = mod_1.something + 1;&#125;); System SimpleModule.js 1234567891011121314System.register([\"./mod\"], function (exports_1) &#123;var mod_1;var t;return &#123; setters: [ function (mod_1_1) &#123; mod_1 = mod_1_1; &#125;, ], execute: function () &#123; exports_1(\"t\", (t = mod_1.something + 1)); &#125;,&#125;;&#125;); Native ECMAScript 2015 modules SimpleModule.js 12import &#123; something &#125; from \"./mod\";export var t = something + 1; 6.3 å¯é€‰æ¨¡å—åŠ è½½å’Œå…¶ä»–é«˜çº§åŠ è½½æ–¹æ¡ˆä¸ºäº†ä¿æŒç±»å‹å®‰å…¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨typeofå…³é”®å­—ã€‚å½“åœ¨ç±»å‹ä½ç½®ä¸­ä½¿ç”¨typeofå…³é”®å­—æ—¶ï¼Œå°†äº§ç”Ÿå€¼çš„ç±»å‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ä¸ºæ¨¡å—çš„ç±»å‹ã€‚ 6.3.1 Dynamic Module Loading in Node.js1234567891011declare function require(moduleName: string): any;import &#123; ZipCodeValidator as Zip &#125; from \"./ZipCodeValidator\";if (needZipValidation) &#123;let ZipCodeValidator: typeof Zip = require(\"./ZipCodeValidator\");let validator = new ZipCodeValidator();if (validator.isAcceptable(\"...\")) &#123; /* ... */&#125;&#125; 6.3.2 Sample: Dynamic Module Loading in require.js123456789101112131415declare function require(moduleNames: string[],onLoad: (...args: any[]) =&gt; void): void;import * as Zip from \"./ZipCodeValidator\";if (needZipValidation) &#123;require([\"./ZipCodeValidator\"], (ZipCodeValidator: typeof Zip) =&gt; &#123; let validator = new ZipCodeValidator.ZipCodeValidator(); if (validator.isAcceptable(\"...\")) &#123; /* ... */ &#125;&#125;);&#125; 6.3.3 Sample: Dynamic Module Loading in System.js123456789101112declare const System: any;import &#123; ZipCodeValidator as Zip &#125; from \"./ZipCodeValidator\";if (needZipValidation) &#123;System.import(\"./ZipCodeValidator\").then((ZipCodeValidator: typeof Zip) =&gt; &#123; var x = new ZipCodeValidator(); if (x.isAcceptable(\"...\")) &#123; /* ... */ &#125;&#125;);&#125; 6.4 ä½¿ç”¨å…¶ä»–jsåº“ä¸ºäº†æè¿°étsç¼–å†™çš„åº“ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜è¯¥åº“å…¬å¼€çš„APIï¼›é€šå¸¸å°†è¿™äº›å£°æ˜å®šä¹‰åœ¨.d.tsæ–‡ä»¶ä¸­ï¼Œå°±ç±»ä¼¼c/c++ç¨‹åºä¸­çš„ .hæ–‡ä»¶ï¼› Tsç¨‹åºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¼šä¸å¯é¿å…çš„å¼•ç”¨åˆ°ç¬¬ä¸‰æ–¹jsåº“ï¼Œä½†æ˜¯æ— æ³•ä½¿ç”¨Typescriptè¯¸å¦‚ç±»å‹æ£€æŸ¥ç­‰ç‰¹æ€§åŠŸèƒ½ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦å°†è¿™äº›åº“çš„å‡½æ•°å’Œæ–¹æ³•å»æ‰ååªä¿ç•™å¯¼å‡ºç±»å‹å£°æ˜ï¼Œè€Œäº§ç”Ÿä¸€ä¸ªæè¿°jsåº“å’Œæ¨¡å—ä¿¡æ¯çš„å£°æ˜æ–‡ä»¶ï¼Œé€šè¿‡å¼•ç”¨è¿™ä¸ªå£°æ˜æ–‡ä»¶ï¼Œå°±å¯ä»¥å€Ÿç”¨TSçš„å„ç§ç‰¹æ€§æ¥ä½¿ç”¨åº“æ–‡ä»¶ï¼› 6.4.1 å£°æ˜æ–‡ä»¶çš„å­˜æ”¾æ–¹å¼ åœ¨tsconfig include å­—æ®µåŒ…å« çš„èŒƒå›´å†…ç¼–å†™.d.tsï¼Œéƒ½èƒ½è¢«è‡ªåŠ¨è¯†åˆ« åœ¨x.js ç›¸åŒç›®å½•åˆ›å»ºåŒåå£°æ˜æ–‡ä»¶x.d.tsï¼Œè¿™æ ·ä¹Ÿä¼šè¢«è‡ªåŠ¨è¯†åˆ«ï¼› node_modules/@types/ ä¸‹å­˜æ”¾çš„å„ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—å£°æ˜æ–‡ä»¶ï¼Œè‡ªå·±ç¼–å†™çš„å£°æ˜æ–‡ä»¶ä¸è¦æ”¾è¿™é‡Œï¼› ä½œä¸ºnpmæ¨¡å—å‘å¸ƒæ—¶ï¼Œå£°æ˜æ–‡ä»¶å¯æ†ç»‘å‘å¸ƒï¼Œéœ€åœ¨package.jsonä¸­æŒ‡æ˜â€œtypesâ€ï¼šâ€./types/index.d.tsâ€ 6.4.1 æ— é…ç½®ä½¿ç”¨jsåœ¨tsconfig.jsonä¸­å…³é—­â€noImplicitAnyâ€: falseæ—¶ï¼Œå¯ç›´æ¥åœ¨Tsä¸­å¼•ç”¨jsçš„åº“ï¼Œæ‰€æœ‰çš„å¼•å…¥éƒ½ä¼šè¢«é»˜è®¤ä¸ºanyç±»å‹ã€‚æ­¤æ–¹æ³•ä¸æ¨èä½¿ç”¨ï¼› 6.4.2 Tsä¸­å¼•å…¥js123456789// hello.jsexport const hello = () =&gt; console.log('hello');// index.tsimport &#123;hello&#125; from './hello'// æ— æ³•æ‰¾åˆ°æ¨¡å—'./hello'çš„å£°æ˜æ–‡ä»¶// è¿™å°±å‘Šè¯‰ç”¨æˆ·ï¼Œéœ€è¦ä¸ºhello.jsç¼–å†™å£°æ˜æ–‡ä»¶äº†ï¼›// hello.d.tsexport declare const hello: () =&gt; void ä¸Šé¢çš„ä¾‹å­ç¨å¾®ç®€å•ä¸€äº›ï¼Œä¸‹é¢å†™ä¸€ä¸ªç›¸å¯¹å¤æ‚ç‚¹çš„demo tsconfig.json 123456789101112&#123; \"compilerOptions\": &#123; \"outDir\": \"./dist/\", \"noImplicitAny\": true, \"allowJs\": true, \"module\": \"commonjs\", \"target\": \"es5\", \"experimentalDecorators\": true &#125;, \"exclude\": [\"node_modules\"], \"include\": [\"./src/**/*\"]&#125; dir 12345-src -swap -index.js -index.d.ts -index.ts 1234567891011121314// swap/index.jsconst NAME = \"A\";const swap = (a, b) =&gt; &#123; let temp; temp = a; a = b; b = temp; return `I am $&#123;NAME&#125;`;&#125;;export default &#123; swap,&#125;; 123456// swap/index.d.tsdeclare namespace swap &#123; // ts ç¼–è¯‘è¿è¡Œæ—¶çš„ swapå‘½åç©ºé—´, å¢åŠ å‘½åç©ºé—´æ”¾ç½®è¢«å…¨å±€æ±¡æŸ“ã€‚ function swap&lt;T&gt;(a: T, b: T): void;&#125;export default swap; // æ³¨æ„è¿™é‡Œè¦å¯¼å‡ºï¼Œæœ‰export/import è¯­å¥çš„æ–‡ä»¶ æ‰æ˜¯æ¨¡å— 12345678// index.tsimport swap from \"./swap\";let a = \"3\", b = \"4\";console.log(swap.swap&lt;string&gt;(a, b));console.log(a, b); 6.4.3 declarevarå’Œdeclareçš„åŒºåˆ« â€‹ varè¡¨ç¤ºåˆ›å»ºä¸€ä¸ªæ–°å˜é‡ï¼Œdeclareç”¨æ¥å‘Šè¯‰tsç¼–è¯‘å™¨è¿™ä¸ªå˜é‡å·²ç»åœ¨åˆ«å¤„è¢«åˆ›å»ºè¿‡äº†ï¼Œ å¦‚æœä½ ç”¨declareï¼Œä»€ä¹ˆéƒ½ä¸ä¼šæ·»åŠ åˆ°ç”Ÿæˆçš„jsä¸­ï¼Œ å®ƒåªæ˜¯å¯¹ç¼–è¯‘å™¨ä¸€ä¸ªç®€å•çš„æç¤ºï¼› â€‹ ä¸¾ä¾‹è¯´æ˜ï¼Œå¦‚æœä½ å¼•å…¥çš„ç¬¬ä¸‰æ–¹jsæ–‡ä»¶ä¸­æœ‰ var externalModuleï¼Œä½ éœ€è¦å®šä¹‰declare var externalModule å»æç¤ºtsç¼–è¯‘å™¨ï¼ŒexternalModuleè¿™ä¸ªå˜é‡å·²ç»è¢«åˆ›å»ºäº†ï¼› 1export declare class Action &#123;&#125; è¿™ä¸ªclass Actionçš„å…·ä½“å®ç°åº”è¯¥åœ¨å…¶ä»–ä»€ä¹ˆåœ°æ–¹ï¼Œå¯ä»¥åœ¨ä¸ª .jsæ–‡ä»¶é‡Œé¢ â€‹ 6.4.4 Tsä¸­å¯¼å…¥.png .jsonç­‰å¯¼å…¥.png .json ç­‰æ–‡ä»¶æ—¶ï¼ŒåŒæ ·ä¹Ÿéœ€è¦å»ç¼–å†™å£°æ˜æ–‡ä»¶ï¼› æä¾›ä¸€ç§æ–¹å¼ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªå£°æ˜æ–‡ä»¶ src/@types/definition.d.ts 1234567891011121314// definition.d.tsdeclare module '*.png' &#123;const value: stringexport = value&#125;// index.ts// ä¹‹ååœ¨TSä¸­å¯¼å…¥ä¹Ÿä¸ä¼šæœ‰é—®é¢˜import avatar from './img/avatar.png'const avatar = require('./img/avatar.png') // å¯èƒ½ä¼šæç¤º require æœªå®šä¹‰ï¼Œæœ‰ä¸¤ç§æ–¹å¼ï¼š // 1. è‡ªè¡Œå£°æ˜ï¼šdeclare const require: any // 2. yarn add -D @types/node 6.4.5 ç¬¬ä¸‰æ–¹æ¨¡å—æ²¡æœ‰å¯ç”¨çš„å£°æ˜æ–‡ä»¶æœ‰äº›æ¨¡å—æ²¡æœ‰å¯¹åº”çš„å£°æ˜æ–‡ä»¶æ—¶ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–å†™å£°æ˜æ–‡ä»¶ï¼Œä»¥rc-formä¸ºä¾‹å­ï¼Œéœ€è¦åœ¨src/@types/defintion.d.tsä¸­æ·»åŠ å£°æ˜ä»£ç  1234567// defintion.d.tsdeclare module \"rc-form\" &#123;// å†æ¬¡ç®€å•è¿›è¡Œç±»å‹å£°æ˜export const createForm: any;export const createFormField: any;export const formShape: any;&#125; 6.4.6 webpack åˆ«å aliases1234567891011121314151617181920212223242526// webpack.config.jsconst config = &#123;aliases: &#123; // å…¬å…±çš„å·¥å…·ç±»ã€å®¹å™¨å’Œç»„ä»¶ utils: path.resolve('../utils'),&#125;// &#125;// index.tsimport &#123;ua&#125; from 'utils/broswer'// cannot find module 'utils/browser'// åªéœ€è¦åœ¨tsconfig.json æ·»åŠ baseUrl å’Œ paths&#123;\"compilerOptions\": &#123; // ... // æ·»åŠ é…ç½® \"baseUrl\": \".\", \"paths\": &#123; \"utils/*\": [\"../utils/*\"], \"components/*\": [\"../components/*\"] &#125;&#125;,\"include\": [\"./src/*\", \"./src/**/*\"],\"exclude\": [\"node_modules\"]&#125; 6.4.7 ç±»å‹Windowä¸Šä¸å­˜åœ¨å±æ€§â€œXâ€éœ€è¦å¯¹windowè¿›è¡Œæ‰©å±•ï¼Œç›´æ¥åœ¨src/@types/definition.d.tsä¸­æ‰©å±• 1234567// definition.d.tsinterface Window &#123; x: any&#125;// index.tsconsole.log(Window.x) // success æ³¨æ„å…¨å±€å£°æ˜å’Œå±€éƒ¨å£°æ˜ 1234567891011121314151617181920212223// definition.d.tsimport &#123;IPerson&#125; from './intefaces/index.ts'interface Window &#123; X: any&#125;// index.tsconsole.log(window.X); // fail: ç±»å‹â€œWindow\"ä¸Šä¸å­˜åœ¨å±æ€§â€œXâ€// è§£å†³æ€è·¯// definition.d.tsimport &#123;IPerson&#125; from './intefaces/index.ts'declare global &#123; interface Window &#123; X: any &#125;&#125;// index.tsconsole.log(window.X) // success // åŸå› åœ¨äºå½“ä¸€ä¸ª .tsæ–‡ä»¶åŠ å…¥import/export è¯­å¥çš„æ—¶å€™ï¼Œè¯¥æ–‡ä»¶ä¼šå˜ä¸ºä¸€ä¸ªæ¨¡å—ï¼›å› ä¸ºè¿™ä¸ªæ¨¡å—ä¸­çš„å£°æ˜ä¹Ÿä¼šå˜ä¸ºå±€éƒ¨å£°æ˜ï¼› å› æ­¤éœ€è¦åŠ åˆ°globalçš„åŸŸä¸Š 6.5 Ambient Modulesåœ¨nodejsä¸­ï¼Œå¾ˆå¤šä»»åŠ¡çš„å®Œæˆéƒ½éœ€è¦å¼•å…¥ä¸€ä¸ªæˆ–å¤šä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯ä¸ªæ¨¡å—åœ¨ä»–ä»¬çš„æ ¹ç›®å½•å»ºç«‹ä¸€ä¸ª.d.tsæ–‡ä»¶ç”¨æ¥å£°æ˜ç±»å‹ï¼Œä½†åˆå¹¶è¿™äº›å£°æ˜åˆ°ä¸€ä¸ªå¤§çš„.d.tsæ–‡ä»¶å¾€å¾€æ›´æ–¹ä¾¿ä¸€äº›ã€‚ä½¿ç”¨moduleå…³é”®å­—å’Œ å¼•å·å ã€‚è¿™äº›å¼•å·åçš„åç§°å°†åœ¨ä»¥åçš„å¯¼å…¥ä¸­ä½¿ç”¨ï¼› 1234567891011121314151617181920// node.d.tsdeclare module \"url\" &#123;export interface Url &#123; protocol?: string; hostname?: string; pathname?: string;&#125;export function parse( urlStr: string, parseQueryString?, slashesDenoteHost?): Url;&#125;declare module \"path\" &#123;export function normalize(p: string): string;export function join(...paths: any[]): string;export var sep: string;&#125; Now we can /// &lt;reference&gt; node.d.ts and then load the modules using import url = require(&quot;url&quot;); or import * as URL from &quot;url&quot;. 123/// &lt;reference path=\"node.d.ts\"/&gt;import * as URL from \"url\";let myUrl = URL.parse('...') 6.5.1 ä¸æƒ³ä¸ºç¬¬ä¸‰æ–¹jså†™å£°æ˜If you donâ€™t want to take the time to write out declarations before using a new module, you can use a shorthand declaration to get started quickly. 123456// declarations.d.tsdeclare module \"hot-new-module\";// All imports from shorthand module will have the any type;import x, &#123;y&#125; from \"hot-new-module\";x(y); 6.5.2 é€šé…ç¬¦ä¸€äº›æ¨¡å—åŠ è½½å™¨ï¼ˆä¾‹å¦‚SystemJSå’ŒAMDï¼‰å…è®¸å¯¼å…¥éJavaScriptå†…å®¹ã€‚è¿™äº›é€šå¸¸ä½¿ç”¨å‰ç¼€æˆ–åç¼€æ¥æŒ‡ç¤ºç‰¹æ®Šçš„åŠ è½½è¯­ä¹‰ã€‚é€šé…ç¬¦æ¨¡å—å£°æ˜å¯ç”¨äºæ¶µç›–è¿™äº›æƒ…å†µã€‚ 12345678910111213141516// declareations.d.tsdeclare module \"*!text\" &#123;const content: string;export default content;&#125;// Some do it the other way around.declare module \"json!*\" &#123;const value: any;export default value;&#125;// Now you can import things that match \"*!text\" or \"json!*\".import fileContent from \"./xyz.txt!text\";import data from \"json!http://example.com/data.json\";console.log(data, fileContent); 6.5.3 UMD modulesä¸€äº›åº“è¢«è®¾è®¡ç”¨äºè®¸å¤šæ¨¡å—åŠ è½½å™¨ä¸­ï¼Œæˆ–è€…ä¸ç”¨äºæ¨¡å—åŠ è½½ï¼ˆå…¨å±€å˜é‡ï¼‰ã€‚è¿™äº›è¢«ç§°ä¸ºUMDæ¨¡å—ã€‚å¯ä»¥é€šè¿‡å¯¼å…¥æˆ–å…¨å±€å˜é‡è®¿é—®è¿™äº›åº“ã€‚ 123// math-lib.d.tsexport function isPreme(x: number):boolean;export as namespace mathLib; The library can then be used as an import within modules: 123import &#123; isPrime &#125; from \"math-lib\";isPrime(2);mathLib.isPrime(2); // ERROR: can't use the global definition from inside a module It can also be used as a global variable, but only inside of a script. (A script is a file with no imports or exports) 1mathLib.isPrime(2); 6.7 Guidance for structuring modules6.7.1 Export as close to top-level as possibleå¦‚æœè¦å¯¼å…¥å¤§é‡å†…å®¹ï¼Œè¯·ä½¿ç”¨åç§°ç©ºé—´å¯¼å…¥æ¨¡å¼ 12345678// MyLargeModule.tsexport class Dog &#123; ... &#125;export class Cat &#123; ... &#125;export class Tree &#123; ... &#125;export class Flower &#123; ... &#125;// Consumer.tsimport * as myLargeModule from \"./MyLargeModule.ts\";let x = new myLargeModule.Dog(); 6.7.2 Re-export to extendé€šå¸¸ï¼Œæ‚¨å°†éœ€è¦æ‰©å±•æ¨¡å—ä¸Šçš„åŠŸèƒ½ã€‚å¸¸è§çš„JSæ¨¡å¼æ˜¯ä½¿ç”¨æ‰©å±•æ¥æ‰©å±•åŸå§‹å¯¹è±¡ï¼Œç±»ä¼¼äºJQueryæ‰©å±•çš„å·¥ä½œæ–¹å¼ã€‚å¦‚å‰æ‰€è¿°ï¼Œæ¨¡å—ä¸ä¼šåƒå…¨å±€åç§°ç©ºé—´å¯¹è±¡é‚£æ ·åˆå¹¶ã€‚æ¨èçš„è§£å†³æ–¹æ¡ˆæ˜¯ä¸è¦å˜æ›´åŸå§‹å¯¹è±¡ï¼Œè€Œæ˜¯å¯¼å‡ºæä¾›æ–°åŠŸèƒ½çš„æ–°å¯¹è±¡ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081export class Calculator &#123;private current = 0;private memory = 0;private operator: string;protected processDigit(digit: string, currentValue: number) &#123; // åªèƒ½åš10ä»¥å†…çš„è®¡ç®—ï¼› if (digit &gt;= \"0\" &amp;&amp; digit &lt;= \"9\") &#123; return currentValue * 10 + (digit.charCodeAt(0) - \"0\".charCodeAt(0)); &#125;&#125;protected processOperator(operator: string) &#123; if ([\"+\", \"-\", \"*\", \"/\"].indexOf(operator) &gt;= 0) &#123; return operator; &#125;&#125;protected evaluateOperator( operator: string, left: number, right: number): number &#123; switch (this.operator) &#123; case \"+\": return left + right; case \"-\": return left - right; case \"*\": return left * right; case \"/\": return left / right; &#125;&#125;private evaluate() &#123; if (this.operator) &#123; this.memory = this.evaluateOperator( this.operator, this.memory, this.current ); &#125; else &#123; this.memory = this.current; &#125; this.current = 0;&#125;public handleChar(char: string) &#123; if (char === \"=\") &#123; this.evaluate(); return; &#125; else &#123; let value = this.processDigit(char, this.current); if (value !== undefined) &#123; this.current = value; return; &#125; else &#123; let value = this.processOperator(char); if (value !== undefined) &#123; this.evaluate(); this.operator = value; return; &#125; &#125; &#125; throw new Error(`Unsupported input: '$&#123;char&#125;'`);&#125;public getResult() &#123; return this.memory;&#125;&#125;export function test(c: Calculator, input: string) &#123;for (let i = 0; i &lt; input.length; i++) &#123; c.handleChar(input[i]);&#125;console.log(`result of '$&#123;input&#125;' is '$&#123;c.getResult()&#125;'`);&#125; 1234// ä½¿ç”¨import &#123;Calculator, test&#125; from './ProgrammerCalculator';let c = new Calculator(2);test(c, \"1+2*33/11=\"); æ–°éœ€æ±‚ï¼š è¦æ±‚è®¡ç®—è¶…è¿‡9çš„å€¼ è¿™ä¸ªæ—¶å€™ä¸åœ¨åŸç±»ä¸Šæ›´æ”¹ï¼Œè€Œæ˜¯åœ¨ç»§æ‰¿ç±»ä¸Šåšæ–°åŠŸèƒ½ 123456789101112131415161718192021222324252627282930313233343536373839404142434445// ProgrammerCalculator.tsimport &#123; Calculator &#125; from \"./Calculator\";class ProgrammerCalculator extends Calculator &#123;static digits = [ \"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \"C\", \"D\", \"E\", \"F\",];constructor(public base: number) &#123; super(); const maxBase = ProgrammerCalculator.digits.length; if (base &lt;= 0 || base &gt; maxBase) &#123; throw new Error(`base has to be within 0 to $&#123;maxBase&#125; inclusive.`); &#125;&#125;protected processDigit(digit: string, currentValue: number) &#123; if (ProgrammerCalculator.digits.indexOf(digit) &gt;= 0) &#123; return ( currentValue * this.base + ProgrammerCalculator.digits.indexOf(digit) ); &#125;&#125;&#125;// Export the new extended calculator as Calculatorexport &#123; ProgrammerCalculator as Calculator &#125;;// Also, export the helper functionexport &#123; test &#125; from \"./Calculator\"; 12345// TestProgrammerCalculator.tsimport &#123; Calculator, test &#125; from \"./ProgrammerCalculator\";let c = new Calculator(2);test(c, \"001+010=\"); // prints 3 6.7.3 Do not use namespaces in moduleså½“é¦–æ¬¡è½¬å‘åŸºäºæ¨¡å—çš„ç»„ç»‡æ—¶ï¼Œä¸€ç§æ™®éçš„è¶‹åŠ¿æ˜¯å°†å¯¼å‡ºåŒ…è£…åœ¨å‘½åç©ºé—´çš„é™„åŠ å±‚ä¸­ã€‚æ¨¡å—å…·æœ‰è‡ªå·±çš„ä½œç”¨åŸŸï¼Œå¹¶ä¸”ä»æ¨¡å—å¤–éƒ¨ä»…å¯è§å¯¼å‡ºçš„å£°æ˜ã€‚è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œåç§°ç©ºé—´åœ¨ä½¿ç”¨æ¨¡å—æ—¶å‡ ä¹æ²¡æœ‰ä»·å€¼ã€‚ 7. Namespacesåœ¨TypeScript 1.5ä¸­ï¼Œæ¨¡å—å‘½åæ³•åˆ™å·²æ›´æ”¹ã€‚ â€œInternal modulesâ€ç°åœ¨æ˜¯â€œnamespacesâ€ã€‚ä¸ºäº†ä¸ECMAScript 2015çš„æœ¯è¯­ä¿æŒä¸€è‡´ï¼Œâ€œExternal modulesâ€ç°åœ¨ç®€ç§°ä¸ºâ€œmodulesâ€ï¼ˆmodule X {} ç­‰åŒäº namespaceX {}ï¼‰ åœ¨å£°æ˜å†…éƒ¨æ¨¡å—æ—¶ï¼Œåœ¨ä½¿ç”¨moduleå…³é”®å­—çš„ä»»ä½•åœ°æ–¹ï¼Œå¯ä»¥å¹¶ä¸”åº”è¯¥æ”¹ç”¨namespaceå…³é”®å­—ã€‚ 7.1 å¤šä¸ªç›¸ä¼¼å¯¹è±¡æ·»åŠ namespaces123456789101112131415161718192021222324252627282930313233343536373839namespace Validation &#123;export interface StringValidator &#123; isAcceptable(s: string): boolean;&#125;const lettersRegexp = /^[A-Za-z]+$/;const numberRegexp = /^[0-9]+$/;export class LettersOnlyValidator implements StringValidator &#123; isAcceptable(s: string) &#123; return lettersRegexp.test(s); &#125;&#125;export class ZipCodeValidator implements StringValidator &#123; isAcceptable(s: string) &#123; return s.length === 5 &amp;&amp; numberRegexp.test(s); &#125;&#125;&#125;// Some samples to trylet strings = [\"Hello\", \"98052\", \"101\"];// Validators to uselet validators: &#123; [s: string]: Validation.StringValidator &#125; = &#123;&#125;;validators[\"ZIP code\"] = new Validation.ZipCodeValidator();validators[\"Letters only\"] = new Validation.LettersOnlyValidator();// Show whether each string passed each validatorfor (let s of strings) &#123;for (let name in validators) &#123; console.log( `\"$&#123;s&#125;\" - $&#123; validators[name].isAcceptable(s) ? \"matches\" : \"does not match\" &#125; $&#123;name&#125;` );&#125;&#125; 7.2 Splitting Across Filesâ€‹ éšç€åº”ç”¨ç¨‹åºçš„æ‰©å±•ï¼Œæˆ‘ä»¬å¸Œæœ›å°†ä»£ç æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ï¼Œä»¥ä½¿å…¶æ˜“äºç»´æŠ¤; 7.2.1 Multi-file namespaces æˆ‘ä»¬å°†Validationåç§°ç©ºé—´æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ã€‚å³ä½¿æ–‡ä»¶æ˜¯åˆ†å¼€çš„ï¼Œå®ƒä»¬æ¯ä¸ªéƒ½å¯ä»¥è´¡çŒ®ç›¸åŒçš„åç§°ç©ºé—´ï¼Œå¹¶ä¸”å¯ä»¥åƒå°†å®ƒä»¬å…¨éƒ¨å®šä¹‰åœ¨ä¸€ä¸ªä½ç½®ä¸€æ ·ä½¿ç”¨ã€‚ç”±äºæ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¾èµ–æ€§ï¼Œå› æ­¤æˆ‘ä»¬å°†æ·»åŠ å‚è€ƒæ ‡è®°ï¼Œä»¥å‘ŠçŸ¥ç¼–è¯‘å™¨æ–‡ä»¶ä¹‹é—´çš„å…³ç³»ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬çš„æµ‹è¯•ä»£ç å°†ä¿æŒä¸å˜ã€‚ Validation.ts 12345namespace Validation &#123;export interface StringValidator &#123; isAcceptable(s: string): boolean;&#125;&#125; LettersOnlyValidator.ts 123456789/// &lt;reference path=\"Validation.ts\" /&gt;namespace Validation &#123;const lettersRegexp = /^[A-Za-z]+$/;export class LettersOnlyValidator implements StringValidator &#123; isAcceptable(s: string) &#123; return lettersRegexp.test(s); &#125;&#125;&#125; ZipCodeValidator.ts 123456789/// &lt;reference path=\"Validation.ts\" /&gt;namespace Validation &#123;const numberRegexp = /^[0-9]+$/;export class ZipCodeValidator implements StringValidator &#123; isAcceptable(s: string) &#123; return s.length === 5 &amp;&amp; numberRegexp.test(s); &#125;&#125;&#125; Test.ts 12345678910111213141516171819202122/// &lt;reference path=\"Validation.ts\" /&gt;/// &lt;reference path=\"LettersOnlyValidator.ts\" /&gt;/// &lt;reference path=\"ZipCodeValidator.ts\" /&gt;// Some samples to trylet strings = [\"Hello\", \"98052\", \"101\"];// Validators to uselet validators: &#123; [s: string]: Validation.StringValidator &#125; = &#123;&#125;;validators[\"ZIP code\"] = new Validation.ZipCodeValidator();validators[\"Letters only\"] = new Validation.LettersOnlyValidator();// Show whether each string passed each validatorfor (let s of strings) &#123;for (let name in validators) &#123; console.log( `\"$&#123;s&#125;\" - $&#123; validators[name].isAcceptable(s) ? \"matches\" : \"does not match\" &#125; $&#123;name&#125;` );&#125;&#125; ä¸€æ—¦æ¶‰åŠåˆ°å¤šä¸ªæ–‡ä»¶ï¼Œéœ€è¦ç¡®ä¿æ‰€æœ‰å·²ç¼–è¯‘çš„ä»£ç éƒ½å·²åŠ è½½ï¼Œæœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ç‚¹ 7.2.1.1 çº§è”è¾“å‡ºä½¿ç”¨ â€“outFileï¼Œå°†æ‰€æœ‰è¾“å…¥æ–‡ä»¶ç¼–è¯‘ä¸ºå•ä¸ªjsè¾“å‡ºæ–‡ä»¶ tsc --outFile sample.js Test.ts 7.2.1.2 è‡ªåŠ¨æ’åºè¾“å‡ºç¼–è¯‘å™¨å°†æ ¹æ®æ–‡ä»¶ä¸­å­˜åœ¨çš„å‚è€ƒæ ‡è®°è‡ªåŠ¨æ’åºè¾“å‡ºæ–‡ä»¶ã€‚æ‚¨è¿˜å¯ä»¥åˆ†åˆ«æŒ‡å®šæ¯ä¸ªæ–‡ä»¶ï¼š tsc --outFile sample.js Validation.ts LettersOnlyValidator.ts ZipCodeValidator.ts Test.ts 7.2.1.3 å•ä¸ªç¼–è¯‘12tsc test.tstes Validation.ts 7.3 Aliases12345678910namespace Shapes &#123;export namespace Polygons &#123; export class Triangle &#123;&#125; export class Square &#123;&#125;&#125;&#125;import polygons = Shapes.Polygons;let sq = new polygons.Square(); // Same as 'new Shapes.Polygons.Square()' 7.3.1 ä½¿ç”¨ç¬¬ä¸‰æ–¹JavaScriptåº“ä¸ºäº†æè¿°ä¸æ˜¯ç”¨TypeScriptç¼–å†™çš„åº“çš„å½¢çŠ¶ï¼Œæˆ‘ä»¬éœ€è¦å£°æ˜è¯¥åº“å…¬å¼€çš„APIã€‚å› ä¸ºå¤§å¤šæ•°JavaScriptåº“ä»…å…¬å¼€ä¸€äº›é¡¶çº§å¯¹è±¡ï¼Œæ‰€ä»¥namespacesæ˜¯è¡¨ç¤ºå®ƒä»¬çš„å¥½æ–¹æ³•ã€‚ D3åœ¨åä¸ºd3çš„å…¨å±€å¯¹è±¡ä¸­å®šä¹‰å…¶åŠŸèƒ½ã€‚ç”±äºæ­¤åº“æ˜¯é€šè¿‡scriptæ ‡ç­¾åŠ è½½çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å‘½åç©ºé—´æ¥å£°æ˜å®ƒçš„shapeã€‚ 1234567891011121314151617181920declare namspace D3 &#123;export interface Selectors &#123; select: &#123; (selector: string): Selection; (element: EventTarget): Selection; &#125;;&#125;export interface Event &#123; x: number; y: number;&#125;export interface Base extends Selectors &#123; event: Event;&#125;&#125;declare var d3: D3.Base; 8. ä¸‰æ–œæ æŒ‡ä»¤ä¸‰æ–œæ æŒ‡ä»¤æ˜¯åŒ…å«å•ä¸ªXMLæ ‡ç­¾çš„å•è¡Œæ³¨é‡Šã€‚æ³¨é‡Šçš„å†…å®¹ç”¨ä½œç¼–è¯‘å™¨æŒ‡ä»¤ã€‚ ä¸‰æ–œæ æŒ‡ä»¤ä»…åœ¨å…¶åŒ…å«æ–‡ä»¶çš„é¡¶éƒ¨æœ‰æ•ˆã€‚ä¸‰æ–œæ æŒ‡ä»¤åªèƒ½åœ¨å•è¡Œæˆ–å¤šè¡Œæ³¨é‡Šä¹‹å‰ï¼ŒåŒ…æ‹¬å…¶ä»–ä¸‰æ–œæ æŒ‡ä»¤ã€‚å¦‚æœåœ¨å£°æ˜æˆ–å£°æ˜ä¹‹åé‡åˆ°å®ƒä»¬ï¼Œåˆ™å°†å®ƒä»¬è§†ä¸ºå¸¸è§„çš„å•è¡Œæ³¨é‡Šï¼Œå¹¶ä¸”æ²¡æœ‰ç‰¹æ®Šå«ä¹‰ã€‚ /// &lt;reference path=&quot;./lib/index.d.ts&quot; /&gt;ï¼šè¡¨ç¤ºå¯¹ä¸€ä¸ªæ–‡ä»¶çš„ä¾èµ–ã€‚ /// &lt;reference types=&quot;jye&quot; /&gt;ï¼šè¡¨ç¤ºå¯¹ä¸€ä¸ªåº“çš„ä¾èµ–ã€‚ ä¸‰æ–œçº¿çš„path &amp; typesï¼Œå’Œes6çš„importè¯­ä¹‰ç›¸ä¼¼ï¼ŒåŒæ—¶ä¸‰æ–œçº¿æŒ‡ä»¤å¿…é¡»æ”¾åœ¨æ–‡ä»¶çš„æœ€é¡¶ç«¯ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬çš„å£°æ˜æ–‡ä»¶è¿‡äºåºå¤§ï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡ç”¨ä¸‰æ–œçº¿æŒ‡ä»¤ï¼Œå°†æˆ‘ä»¬çš„å£°æ˜æ–‡ä»¶æ‹†åˆ†æˆè‹¥å¹²ä¸ªï¼Œç„¶åç”±ä¸€ä¸ªå…¥å£æ–‡ä»¶å¼•å…¥ã€‚ 8.1 æ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å£°æ˜12///&lt;reference path=\"...\"/&gt;///&lt;reference path=\"...\"/&gt; æ˜¯è¿™ä¸ªgroupä¸­æœ€å¸¸è§çš„ï¼Œå®ƒç”¨ä½œæ–‡ä»¶ä¹‹é—´ä¾èµ–å…³ç³»çš„å£°æ˜ï¼› ä¸‰æ–œæ æŒ‡ä»¤æŒ‡ç¤ºç¼–è¯‘å™¨åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­åŒ…æ‹¬å…¶ä»–æ–‡ä»¶ï¼› å½“ä½¿ç”¨ â€“out æˆ– â€“outFileæ—¶ï¼Œå®ƒä»¬è¿˜å¯ä»¥ç”¨ä½œå¯¹è¾“å‡ºè¿›è¡Œæ’åºçš„æ–¹æ³•ã€‚é¢„å¤„ç†é€šè¿‡åï¼Œæ–‡ä»¶ä»¥ä¸è¾“å…¥ç›¸åŒçš„é¡ºåºè¾“å‡ºåˆ°ç›®æ ‡æ–‡ä»¶ä½ç½®ã€‚ 8.2 input files é¢„å¤„ç†ç¼–è¯‘å™¨å¯¹è¾“å…¥æ–‡ä»¶è¿›è¡Œé¢„å¤„ç†ï¼Œä»¥è§£ææ‰€æœ‰ä¸‰æ–œæ å¼•ç”¨æŒ‡ä»¤ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå…¶ä»–æ–‡ä»¶å°†æ·»åŠ åˆ°ç¼–è¯‘è¿‡ç¨‹ä¸­ã€‚ è¯¥è¿‡ç¨‹ä»ä¸€ç»„æ ¹æ–‡ä»¶å¼€å§‹ï¼›è¿™äº›æ˜¯åœ¨å‘½ä»¤è¡Œæˆ–tsconfig.jsonæ–‡ä»¶çš„â€œfilesâ€åˆ—è¡¨ä¸­æŒ‡å®šçš„æ–‡ä»¶åã€‚è¿™äº›æ ¹æ–‡ä»¶å°†æŒ‰ç…§æŒ‡å®šçš„é¡ºåºè¿›è¡Œé¢„å¤„ç†ã€‚åœ¨å°†æ–‡ä»¶æ·»åŠ åˆ°åˆ—è¡¨ä¹‹å‰ï¼Œå¿…é¡»å…ˆå¤„ç†å…¶ä¸­çš„æ‰€æœ‰ä¸‰æ–œæ å¼•ç”¨åŠå…¶ç›®æ ‡ã€‚æŒ‰ç…§åœ¨æ–‡ä»¶ä¸­å‡ºç°çš„é¡ºåºï¼Œæ·±åº¦ä¼˜å…ˆåœ°è§£æä¸‰æ–œæ å¼•ç”¨ A triple-slash reference path is resolved relative to the containing file, if unrooted. 8.3 typestypes=&quot;...&quot; ä¸ path=&quot;...&quot; ç±»ä¼¼ï¼Œå‰è€…å£°æ˜å¯¹åŒ…çš„ä¾èµ–ï¼Œåè€…å£°æ˜å¯¹ä¸€ä¸ªæ–‡ä»¶çš„ä¾èµ– è¿™äº›ç¨‹åºåŒ…åç§°çš„è§£æè¿‡ç¨‹ä¸importè¯­å¥ä¸­çš„æ¨¡å—åç§°è§£æè¿‡ç¨‹ç›¸ä¼¼ã€‚è€ƒè™‘ä¸‰é‡æ–œæ å¼•ç”¨ç±»å‹æŒ‡ä»¤çš„ä¸€ç§ç®€å•æ–¹æ³•æ˜¯å°†å…¶ä½œä¸ºå£°æ˜åŒ…çš„å¯¼å…¥ã€‚ åœ¨ä¸€ä¸ªå£°æ˜æ–‡ä»¶ä¸­åŒ…æ‹¬ types=&quot;node&quot; åˆ™è¯¥å£°æ˜æ–‡ä»¶ä½¿ç”¨@types/node/index.d.tsä¸­å£°æ˜çš„åç§°ï¼Œå› æ­¤ï¼Œæ­¤åŒ…éœ€è¦ä¸å£°æ˜æ–‡ä»¶ä¸€èµ·åŒ…å«åœ¨ç¼–è¯‘ä¸­; ä»…å½“æ‚¨ä¹¦å†™d.tsæ–‡ä»¶æ—¶ï¼Œæ‰ä½¿ç”¨è¿™äº›æŒ‡ä»¤ï¼› å¯¹äºç¼–è¯‘æœŸé—´ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨æ·»åŠ types=&quot;...&quot;ã€‚å½“ä¸”ä»…å½“reslulting fileä½¿ç”¨ referenced packageä¸­ ä»»ä½•å£°æ˜çš„æ—¶å€™ï¼Œæ‰ä¼šåœ¨ç”Ÿæˆçš„å£°æ˜æ–‡ä»¶ä¸­æ·»åŠ  types=&quot;...&quot; ï¼› åœ¨ .ts æ–‡ä»¶å£°æ˜å¯¹ ä¸€ä¸ª@types åŒ…çš„ä¾èµ–ï¼Œ ä½¿ç”¨å‘½ä»¤è¡Œ â€“types æˆ–è€… tsconfig.jsonä¸­è®¾ç½®ï¼› 8.4 liblib=&quot;...&quot; æ­¤æŒ‡ä»¤å…è®¸æ–‡ä»¶æ˜¾å¼åŒ…æ‹¬ç°æœ‰çš„å†…ç½®libæ–‡ä»¶ã€‚ ä¾‹å¦‚ï¼Œåœ¨ç¼–è¯‘ä¸­çš„ä¸€ä¸ªæ–‡ä»¶ä¸­æ·»åŠ /// &lt;reference lib =â€œ es2017.stringâ€ /&gt;ç­‰æ•ˆäºä½¿ç”¨â€“lib es2017.stringè¿›è¡Œç¼–è¯‘ã€‚ 123/// &lt;reference lib=\"es2017.string\" /&gt;\"foo\".padStart(4); 9. Namespaces and Modules9.1 ä½¿ç”¨modulesæ¨¡å—å¯ä»¥åŒ…å«ä»£ç å’Œå£°æ˜ ä»es6å¼€å§‹ï¼Œæ¨¡å—æ˜¯è¯­è¨€çš„åŸç”Ÿæœºåˆ¶ï¼Œæ–°çš„é¡¹ç›®ï¼Œæ¨¡å—å°†æ˜¯æ¨èçš„ä»£ç ç»„ç»‡æœºåˆ¶ï¼› 9.2 ä½¿ç”¨namespaceså‘½åç©ºé—´æ˜¯TypeScriptç‰¹å®šçš„ç»„ç»‡ä»£ç çš„æ–¹å¼ã€‚ å‘½åç©ºé—´åœ¨å…¨å±€å‘½åç©ºé—´ä¸­åªæ˜¯å‘½åä¸ºJavaScriptå¯¹è±¡ã€‚è¿™ä½¿åç§°ç©ºé—´æˆä¸ºéå¸¸ç®€å•çš„æ„é€ ã€‚ä¸æ¨¡å—ä¸åŒï¼Œå®ƒä»¬å¯ä»¥è·¨è¶Šå¤šä¸ªæ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨â€“outFileè¿›è¡Œä¸²è”ã€‚å‘½åç©ºé—´æ˜¯åœ¨Webåº”ç”¨ç¨‹åºä¸­æ„é€ ä»£ç çš„å¥½æ–¹æ³•ï¼Œæ‰€æœ‰ä¾èµ–é¡¹éƒ½ä½œä¸ºscriptæ ‡è®°åŒ…å«åœ¨HTMLé¡µé¢ä¸­ã€‚ å°±åƒæ‰€æœ‰å…¨å±€å‘½åç©ºé—´æ±¡æŸ“ä¸€æ ·ï¼Œå¾ˆéš¾è¯†åˆ«ç»„ä»¶ä¾èµ–æ€§ï¼Œå°¤å…¶æ˜¯åœ¨å¤§å‹åº”ç”¨ç¨‹åºä¸­ã€‚ 9.3 ä½¿ç”¨namespaces å’Œ modules é‡åˆ°çš„ä¸€äº›å‘9.3.1 ä¸éœ€è¦namespacesçš„æ—¶å€™123456789101112// `shapes.ts`export namespace Shapes &#123;export class Triangle &#123; /* ... */&#125;export class Square &#123; /* ... */&#125;&#125;// `shapeConsumer.ts`import * as shapes from \"./shapes\";let t = new shapes.Shapes.Triangle(); // shapes.Shapes? æ¨èçš„åšæ³•ï¼Œå½“ä¸€ä¸ªæ–‡ä»¶ä¸­å®šä¹‰äº†import/export çš„æ—¶å€™ï¼Œé‚£ä¹ˆå®ƒå°±å˜æˆäº†ä¸€ä¸ªæ¨¡å—ã€‚æ¨¡å—ä¸­ï¼Œå‘½åç©ºé—´æ˜¾ç„¶å¤šæ­¤ä¸€ä¸¾äº† æ¨èåšæ³• 12345678910// shapes.tsexport class Triangle &#123;/* ... */&#125;export class Square &#123;/* ... */&#125;// shapeConsumer.tsimport * as shapes from \"./shapes\";let t = new shapes.Triangle(); 9.3.2 reference å’Œimport çš„ä½¿ç”¨æ—¶æœºä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯å°è¯•ä½¿ç”¨/// reference ...è¯­æ³•æ¥å¼•ç”¨æ¨¡å—æ–‡ä»¶ï¼Œè€Œä¸æ˜¯ä½¿ç”¨importè¯­å¥ï¼› ç¼–è¯‘å™¨å¦‚ä½• åŸºäº path of an import path(import X from &#39;xxx&#39;; import x = require(&#39;...&#39;)) æ‰¾åˆ°æ¨¡å—çš„ç±»å‹ä¿¡æ¯ï¼› ç¼–è¯‘å™¨å°†å°è¯•æŸ¥æ‰¾.tsï¼Œ.tsxï¼Œç„¶åæ‰¾åˆ°å…·æœ‰é€‚å½“è·¯å¾„çš„.d.tsã€‚å¦‚æœæ‰¾ä¸åˆ°ç‰¹å®šçš„æ–‡ä»¶ï¼Œç„¶ç¼–è¯‘å™¨ä¼šå»æ‰¾ambient module declaration è®°å¾—è¿™äº›éœ€è¦åœ¨ .d.ts æ–‡ä»¶ä¸­å£°æ˜ 12345678// myModules.d.ts// In a .d.ts file or .ts file that is not a module:declare module \"SomeModule\" &#123; export function fn(): string;&#125;// myOtherModule.ts/// &lt;reference path=\"myModules.d.ts\" /&gt; è®°å¾—æ·»åŠ ä¾èµ–import * as m from \"SomeModule\"; // è¿™é‡Œå¹¶ä¸æ˜¯å¯¼å…¥ æ–‡ä»¶åï¼Œè€Œæ˜¯æ¨¡å—åï¼Œå› ä¸º myModules.d.ts ä¸æ˜¯ä¸€ä¸ªæ¨¡å—ï¼› /// reference path=&quot;myModules.d.ts&quot; ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°åŒ…å«ç¯å¢ƒæ¨¡å—å£°æ˜çš„å£°æ˜æ–‡ä»¶ï¼ŒThis is how the node.d.ts file that several of the TypeScript samples use is consumed.","categories":[{"name":"ts","slug":"ts","permalink":"http://yoursite.com/categories/ts/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"}]},{"title":"ts generics","slug":"ts-generics","date":"2021-01-20T11:42:15.000Z","updated":"2021-02-09T10:28:30.509Z","comments":true,"path":"2021/01/20/ts-generics/","link":"","permalink":"http://yoursite.com/2021/01/20/ts-generics/","excerpt":"","text":"5. Genericsæ³›å‹ï¼Œåˆ›å»ºå¯é‡ç”¨ç»„ä»¶çš„å·¥å…·ã€‚ 1234function loggingIdentity&lt;T&gt;(arg: T) &#123; console.log(arg.length); // Property 'length' does not exist on type 'T'. return arg;&#125; 5.1 æ³›å‹å®šä¹‰1234567891011function identity&lt;T&gt;(arg: T): T &#123; return arg;&#125;interface GenericIdentityFn &#123; &lt;T&gt;(arg: T): T;&#125;let myIdentity: &lt;T&gt;(arg: T) =&gt; T = identity;let myIdentity1: &#123; &lt;T&gt;(arg: T): T &#125; = identity;let myIdentity2: GenericIdentityFn = identity; 5.2 æ³›å‹ç±»12345678910class GenericNumber&lt;T&gt; &#123; zeroValue: T; add: (x: T, y: T) =&gt; T;&#125;let myGenericNumber = new GenericNumber&lt;number&gt;();myGenericNumber.zeroValue = 0;myGenericNumber.add = function (x, y) &#123; return x + y;&#125;; 5.3 æ³›å‹çº¦æŸ12345678interface Lengthwise &#123; length: number;&#125;function loggingIdentity&lt;T extends Lengthwise&gt;(arg: T): T &#123; console.log(arg.length); return arg;&#125; 5.3.1 Using Type Parameters in Generic Constraints123456789function getProperty&lt;T, K extends keyof T&gt;(obj: T, key: K) &#123; return obj[key];&#125;let x = &#123; a: 1, b: 2, c: 3, d: 4 &#125;;getProperty(x, \"a\");getProperty(x, \"m\");// Argument of type '\"m\"' is not assignable to parameter of type '\"a\" | \"b\" | \"c\" | \"d\"'. 5.3.2 æ³›å‹ç±»ä½¿ç”¨æ³›å‹åœ¨TypeScriptä¸­åˆ›å»ºå·¥å‚æ—¶ï¼Œæœ‰å¿…è¦é€šè¿‡å…¶æ„é€ å‡½æ•°æ¥å¼•ç”¨ç±»ç±»å‹ï¼› 123function create&lt;T&gt;(c: &#123; new (): T &#125;): T &#123; return new c();&#125; ä½¿ç”¨prototypeå±æ€§æ¥æ¨æ–­å’Œçº¦æŸæ„é€ å‡½æ•°å’Œç±»ç±»å‹çš„å®ä¾‹ç«¯ä¹‹é—´çš„å…³ç³» 1234567891011121314151617181920212223242526class BeeKeeper &#123; hasMask: boolean;&#125;class ZooKeeper &#123; nametag: string;&#125;class Animal &#123; numLegs: number;&#125;class Bee extends Animal &#123; keeper: BeeKeeper;&#125;class Lion extends Animal &#123; keeper: ZooKeeper;&#125;function createInstance&lt;A extends Animal&gt;(c: new () =&gt; A): A &#123; return new c();&#125;createInstance(Lion).keeper.nametag;createInstance(Bee).keeper.hasMask;","categories":[{"name":"ts","slug":"ts","permalink":"http://yoursite.com/categories/ts/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"}]},{"title":"ts doc","slug":"ts-doc","date":"2021-01-19T08:12:21.000Z","updated":"2021-02-09T10:28:20.873Z","comments":true,"path":"2021/01/19/ts-doc/","link":"","permalink":"http://yoursite.com/2021/01/19/ts-doc/","excerpt":"","text":"handbookA reader who completes the walkthrough should be able to: Read and understand commonly-used TypeScript syntax and patterns Explain the effects of important compiler options Correctly predict type system behavior in most cases Write a .d.ts declaration for a simple function, object, or class 1. basic Types åœ¨TypeScriptä¸­ï¼Œæˆ‘ä»¬æ”¯æŒä¸JavaScriptä¸­æœŸæœ›çš„ç±»å‹ç›¸åŒçš„ç±»å‹ï¼Œå¹¶æ·»åŠ äº†ä¸€ä¸ªé¢å¤–çš„æšä¸¾ç±»å‹ä»¥å¸®åŠ©å¤„ç†é—®é¢˜ã€‚ Boolean, Number, String, Array,Tuple,Enum,Unkown,Any,Void, Null and Undefined, Never, Object, Tuple å…ƒç»„ç±»å‹å…è®¸æ‚¨ç”¨å›ºå®šæ•°é‡çš„å…ƒç´ è¡¨ç¤ºæ•°ç»„ï¼Œè¿™äº›å…ƒç´ çš„ç±»å‹æ˜¯å·²çŸ¥çš„ï¼Œä½†ä¸å¿…ç›¸åŒã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½å¸Œæœ›å°†å€¼è¡¨ç¤ºä¸ºä¸€å¯¹å­—ç¬¦ä¸²å’Œä¸€ä¸ªæ•°å­—ï¼š 123456// Declare a tuple typelet x: [string, number];// Initialize itx = [\"hello\", 10]; // OK// Initialize it incorrectlyx = [10, \"hello\"]; // Error Enum æšä¸¾æ˜¯JavaScriptæ ‡å‡†æ•°æ®ç±»å‹é›†çš„ä¸€ä¸ªæœ‰ç”¨è¡¥å……ã€‚ä¸Cï¼ƒç­‰è¯­è¨€ä¸€æ ·ï¼Œæšä¸¾æ˜¯ä¸€ç§ä¸ºæ•°å­—å€¼é›†èµ‹äºˆæ›´å‹å¥½åç§°çš„æ–¹æ³•ã€‚ 123456789enum Color &#123; Red = 1, Green, Blue,&#125;let colorName: string = Color[2];// Displays 'Green'console.log(colorName); Unknown æˆ‘ä»¬å¯èƒ½éœ€è¦æè¿°ç¼–å†™åº”ç”¨ç¨‹åºæ—¶ä¸çŸ¥é“çš„å˜é‡ç±»å‹ã€‚è¿™äº›å€¼å¯èƒ½æ¥è‡ªåŠ¨æ€å†…å®¹ï¼Œä¾‹å¦‚æ¥è‡ªç”¨æˆ·-æˆ–è€…æˆ‘ä»¬å¯èƒ½è¦æœ‰æ„æ¥å—æˆ‘ä»¬APIä¸­çš„æ‰€æœ‰å€¼ã€‚åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æä¾›ä¸€ç§ç±»å‹ï¼Œè¯¥ç±»å‹å‘Šè¯‰ç¼–è¯‘å™¨å’Œå°†æ¥çš„è¯»è€…æ­¤å˜é‡å¯ä»¥æ˜¯ä»»ä½•å˜é‡ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶èµ‹äºˆæœªçŸ¥ç±»å‹ã€‚ 12345let notSure: unknown = 4;notSure = \"maybe a string instead\";// OK, definitely a booleannotSure = false; å¦‚æœæ‚¨æœ‰ä¸€ä¸ªç±»å‹æœªçŸ¥çš„å˜é‡ï¼Œåˆ™å¯ä»¥é€šè¿‡è¿›è¡Œtypeofæ£€æŸ¥ï¼Œæ¯”è¾ƒæ£€æŸ¥æˆ–æ›´é«˜çº§çš„ç±»å‹é˜²æŠ¤æ¥å°†å…¶èŒƒå›´ç¼©å°åˆ°æ›´å…·ä½“çš„èŒƒå›´; 1234567891011121314151617181920declare const maybe: unknown;// 'maybe' could be a string, object, boolean, undefined, or other typesconst aNumber: number = maybe;//Type 'unknown' is not assignable to type 'number'.if (maybe === true) &#123; // TypeScript knows that maybe is a boolean now const aBoolean: boolean = maybe; // So, it cannot be a string const aString: string = maybe;//Type 'boolean' is not assignable to type 'string'.&#125;if (typeof maybe === \"string\") &#123; // TypeScript knows that maybe is a string const aString: string = maybe; // So, it cannot be a boolean const aBoolean: boolean = maybe;//Type 'string' is not assignable to type 'boolean'.&#125; Any åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¹¶éæ‰€æœ‰ç±»å‹ä¿¡æ¯éƒ½å¯ç”¨ã€‚å¯¹äºæœªä½¿ç”¨TypeScriptæˆ–ç¬¬3æ–¹åº“ç¼–å†™çš„ä»£ç ä¸­çš„å€¼ï¼Œå¯èƒ½ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Œå¯èƒ½è¦é€‰æ‹©é€€å‡ºç±»å‹æ£€æŸ¥ã€‚å°†è¿™äº›å€¼æ ‡è®°ä¸ºanyç±»å‹ï¼š 123declare function getValue(key: string): any;// OK, return value of 'getValue' is not checkedconst str: string = getValue(\"myString\"); ä¸ unknown ä¸åŒï¼Œanyç±»å‹çš„å˜é‡ä½¿æ‚¨å¯ä»¥è®¿é—®ä»»æ„å±æ€§ï¼Œç”šè‡³æ˜¯ä¸å­˜åœ¨çš„å±æ€§ã€‚è¿™äº›å±æ€§åŒ…æ‹¬å‡½æ•°ï¼Œå¹¶ä¸”TypeScriptä¸ä¼šæ£€æŸ¥å®ƒä»¬çš„å­˜åœ¨æˆ–ç±»å‹ 123456789let looselyTyped: any = 4;// OK, ifItExists might exist at runtimelooselyTyped.ifItExists();// OK, toFixed exists (but the compiler doesn't check)looselyTyped.toFixed();let strictlyTyped: unknown = 4;strictlyTyped.toFixed();// Object is of type 'unknown'. Void voidæœ‰ç‚¹åƒä»»ä½•å…¶ä»–çš„ç›¸åï¼šæ ¹æœ¬æ²¡æœ‰ä»»ä½•ç±»å‹ã€‚æ‚¨å¯èƒ½é€šå¸¸å°†å…¶è§†ä¸ºä¸è¿”å›å€¼çš„å‡½æ•°çš„è¿”å›ç±»å‹ï¼š 123function warnUser(): void &#123; console.log(\"This is my warning message\");&#125; Null and Undefined åœ¨TypeScriptä¸­ï¼Œundefinedå’Œnullå®é™…ä¸Šå®é™…ä¸Šåˆ†åˆ«å°†å…¶ç±»å‹å‘½åä¸ºundefinedå’Œnullã€‚å°±åƒvoidä¸€æ ·ï¼Œå®ƒä»¬æœ¬èº«å¹¶ä¸æ˜¯éå¸¸æœ‰ç”¨ï¼š 123// Not much else we can assign to these variables!let u: undefined = undefined;let n: null = null; Never The never type is a subtype of, and assignable to, every type; however, no type is a subtype of, or assignable to, never (except never itself). Even any isnâ€™t assignable to never. 1234567891011121314// Function returning never must not have a reachable end pointfunction error(message: string): never &#123; throw new Error(message);&#125;// Inferred return type is neverfunction fail() &#123; return error(\"Something failed\");&#125;// Function returning never must not have a reachable end pointfunction infiniteLoop(): never &#123; while (true) &#123;&#125;&#125; Object objectæ˜¯ä»£è¡¨éåŸºæœ¬ç±»å‹çš„ç±»å‹ï¼Œå³ä¸æ˜¯æ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œbigintï¼Œsymbolï¼Œnullæˆ–undefinedçš„ä»»ä½•ç±»å‹ã€‚ 123456789101112131415// With object type, APIs like Object.create can be better represented.declare function create(o: object | null): void;// OKcreate(&#123; prop: 0 &#125;);create(null);create(42);//Argument of type '42' is not assignable to parameter of type 'object | null'.create(\"string\");//Argument of type '\"string\"' is not assignable to parameter of type 'object | null'.create(false);//Argument of type 'false' is not assignable to parameter of type 'object | null'.create(undefined);//Argument of type 'undefined' is not assignable to parameter of type 'object | null'. Type assertions ç±»å‹æ–­è¨€æ˜¯ä¸€ç§å‘Šè¯‰ç¼–è¯‘å™¨â€œç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“æˆ‘åœ¨åšä»€ä¹ˆâ€çš„æ–¹æ³•ã€‚ç±»å‹æ–­è¨€å°±åƒå…¶ä»–è¯­è¨€ä¸­çš„ç±»å‹è½¬æ¢ä¸€æ ·ï¼Œä½†æ˜¯å®ƒä¸æ‰§è¡Œæ•°æ®çš„ç‰¹æ®Šæ£€æŸ¥æˆ–é‡æ„ã€‚å®ƒå¯¹è¿è¡Œæ—¶æ²¡æœ‰å½±å“ï¼Œä»…ç”±ç¼–è¯‘å™¨ä½¿ç”¨ã€‚ TypeScriptå‡å®šæ‚¨ï¼ˆç¨‹åºå‘˜ï¼‰å·²ç»æ‰§è¡Œäº†æ‰€éœ€çš„ä»»ä½•ç‰¹æ®Šæ£€æŸ¥ã€‚ ç±»å‹æ–­è¨€çš„ä¸¤ç§å½¢å¼ 123456// ç±»å‹1: as è¯­å¥let someValue: unknown = \"this is a string\";let strLength: number = (someValue as string).length;// ç±»å‹2: å°–æ‹¬å·let someValue: unknown = \"this is a string\";let strLength: number = (&lt;string&gt;someValue).length; jsxä¸­æ— æ³•ä½¿ç”¨ ç±»å‹2ï¼› About Number, String, Boolean, Symbol and Object å¯èƒ½ä¼šè®¤ä¸ºæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå¸ƒå°”å€¼ï¼Œç¬¦å·æˆ–å¯¹è±¡ç±»å‹ä¸ä¸Šé¢å»ºè®®çš„å°å†™ç‰ˆæœ¬ç›¸åŒã€‚ä½†æ˜¯ï¼Œè¿™äº›ç±»å‹ä¸å¼•ç”¨è¯­è¨€åŸè¯­ï¼Œå¹¶ä¸”å‡ ä¹æ°¸è¿œä¸åº”å°†å…¶ç”¨ä½œç±»å‹ã€‚ 2. interface2.1 readonly1234interface Point &#123; readonly x: number; readonly y: number;&#125; TypeScriptå…·æœ‰ä¸Array ç›¸åŒçš„ReadonlyArray ç±»å‹ï¼Œå¹¶ä¸”åˆ é™¤äº†æ‰€æœ‰å˜å¼‚æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿åˆ›å»ºåä¸æ›´æ”¹æ•°ç»„ï¼š 1234567891011let a: number[] = [1, 2, 3, 4];let ro: ReadonlyArray&lt;number&gt; = a;ro[0] = 12; // error!//Index signature in type 'readonly number[]' only permits reading.ro.push(5); // error!//Property 'push' does not exist on type 'readonly number[]'.ro.length = 100; // error!//Cannot assign to 'length' because it is a read-only property.a = ro; // error!//The type 'readonly number[]' is 'readonly' and cannot be assigned to the mutable type 'number[]'. åœ¨ä»£ç ç‰‡æ®µçš„æœ€åä¸€è¡Œï¼Œæ‚¨å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿å°†æ•´ä¸ªReadonlyArrayåˆ†é…å›æ™®é€šæ•°ç»„ä¹Ÿæ˜¯éæ³•çš„ã€‚ä½†æ˜¯ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨ç±»å‹æ–­è¨€æ¥è¦†ç›–å®ƒï¼š 1234let a: number[] = [1, 2, 3, 4];let ro: ReadonlyArray&lt;number&gt; = a;a = ro as number[]; ReadOnly or const è®°ä½æ˜¯ä½¿ç”¨åªè¯»è¿˜æ˜¯constçš„æœ€ç®€å•æ–¹æ³•æ˜¯è¯¢é—®æ˜¯å¦åœ¨å˜é‡æˆ–å±æ€§ä¸Šä½¿ç”¨å®ƒã€‚å˜é‡ä½¿ç”¨constï¼Œè€Œå±æ€§ä½¿ç”¨åªè¯»ã€‚ 2.2 Optional1234interface SquareConfig &#123; color?: string; width?: number;&#125; 2.3 Excess Property Checksä½†æ˜¯ï¼ŒTypeScriptè®¤ä¸ºæ­¤ä»£ç ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚å°†å¯¹è±¡æ–‡å­—åˆ†é…ç»™å…¶ä»–å˜é‡æˆ–å°†å…¶ä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œå°†å¯¹å…¶è¿›è¡Œç‰¹æ®Šå¤„ç†å¹¶è¿›è¡Œè¿‡å¤šçš„å±æ€§æ£€æŸ¥ã€‚å¦‚æœå¯¹è±¡æ–‡å­—å…·æœ‰â€œç›®æ ‡ç±»å‹â€æ‰€æ²¡æœ‰çš„ä»»ä½•å±æ€§ï¼Œåˆ™ä¼šå‡ºç°é”™è¯¯ï¼š 123456789101112131415interface SquareConfig &#123; color?: string; width?: number;&#125;function createSquare(config: SquareConfig): &#123; color: string; area: number &#125; &#123; return &#123; color: config.color || \"red\", area: config.width ? config.width * config.width : 20, &#125;;&#125;let mySquare = createSquare(&#123; colour: \"red\", width: 100 &#125;);//Argument of type '&#123; colour: string; width: number; &#125;' is not assignable to parameter of type 'SquareConfig'. // Object literal may only specify known properties, but 'colour' does not exist in type 'SquareConfig'. Did you mean to write 'color'? è§£å†³æ–¹æ¡ˆ è§£å†³è¿™äº›æ£€æŸ¥å®é™…ä¸Šéå¸¸ç®€å•ã€‚æœ€ç®€å•çš„æ–¹æ³•æ˜¯åªä½¿ç”¨ç±»å‹æ–­è¨€ï¼š 1const mySquare = createSquare(&#123;width: 100, opacity: 0.5&#125; as SquareConfig); å¦‚æœå¯¹è±¡å¯ä»¥å…·æœ‰æŸäº›ä»¥ç‰¹æ®Šæ–¹å¼ä½¿ç”¨çš„é¢å¤–å±æ€§ï¼Œåˆ™æ›´å¥½çš„æ–¹æ³•å¯èƒ½æ˜¯æ·»åŠ å­—ç¬¦ä¸²ç´¢å¼•ç­¾åã€‚ 12345678910interface SquareConfig &#123; color?: string; width?: number; [propName: string]: any;&#125;const mySquare = createSquare(&#123;width: 100, opacity: 0.5&#125;);// åªè¦æ‚¨åœ¨squareOptionså’ŒSquareConfigä¹‹é—´å…·æœ‰ä¸€ä¸ªå…¬å…±å±æ€§ï¼Œä¸Šè¿°å˜é€šåŠæ³•å°±ä¼šèµ·ä½œç”¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœå˜é‡æ²¡æœ‰ä»»ä½•å…¬å…±å¯¹è±¡å±æ€§ï¼Œå®ƒå°†å¤±è´¥ã€‚let squareOptions = &#123; colour: \"red\" &#125;;let mySquare = createSquare(squareOptions);// Type '&#123; colour: string; &#125;' has no properties in common with type 'SquareConfig'. 2.4 Function Typesä¸ºäº†æè¿°å¸¦æœ‰æ¥å£çš„å‡½æ•°ç±»å‹ï¼Œæˆ‘ä»¬ç»™æ¥å£ä¸€ä¸ªè°ƒç”¨ç­¾åã€‚è¿™å°±åƒåªå£°æ˜å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹çš„å‡½æ•°å£°æ˜ã€‚å‚æ•°åˆ—è¡¨ä¸­çš„æ¯ä¸ªå‚æ•°éƒ½éœ€è¦åç§°å’Œç±»å‹ã€‚ 1234567891011121314151617181920212223242526interface SearchFunc &#123; (source: string, subString: string): boolean;&#125;let mySearch: SearchFunc;mySearch = function (source: string, subString: string) &#123; let result = source.search(subString); return result &gt; -1;&#125;;let mySearch2: SearchFunc;// å‚æ•°ä¸å®šä¹‰stringï¼Œtsä¼šè‡ªåŠ¨æ¨æ–­mySearch2 = function (src, sub): boolean &#123; let result = src.search(sub); return result &gt; -1;&#125;;let mySearch: SearchFunc;mySearch = function (src, sub) &#123; // è¿”å›å€¼éœ€è¦éµå®ˆinterface//Type '(src: string, sub: string) =&gt; string' is not assignable to type 'SearchFunc'.// Type 'string' is not assignable to type 'boolean'. let result = src.search(sub); return \"string\";&#125;; 2.5 Indexable Typeså¯ç´¢å¼•ç±»å‹å…·æœ‰ç´¢å¼•ç­¾åï¼Œè¯¥ç­¾åæè¿°äº†å¯ç”¨äºç´¢å¼•å¯¹è±¡çš„ç±»å‹ä»¥åŠå»ºç«‹ç´¢å¼•æ—¶å¯¹åº”çš„è¿”å›ç±»å‹ 12345678interface StringArray &#123; [index: number]: string;&#125;let myArray: StringArray;myArray = [\"Bob\", \"Fred\"];let myStr: string = myArray[0]; æ”¯æŒä¸¤ç§ç±»å‹çš„ç´¢å¼•ç­¾åï¼šå­—ç¬¦ä¸²å’Œæ•°å­—ã€‚å¯ä»¥åŒæ—¶æ”¯æŒä¸¤ç§ç±»å‹çš„ç´¢å¼•å™¨ï¼Œä½†æ˜¯ä»æ•°å­—ç´¢å¼•å™¨è¿”å›çš„ç±»å‹å¿…é¡»æ˜¯ä»å­—ç¬¦ä¸²ç´¢å¼•å™¨è¿”å›çš„ç±»å‹çš„å­ç±»å‹ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç”¨æ•°å­—ç´¢å¼•æ—¶ï¼ŒJavaScriptå®é™…ä¸Šä¼šåœ¨å°†å…¶ç´¢å¼•åˆ°å¯¹è±¡ä¹‹å‰å°†å…¶è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚è¿™æ„å‘³ç€ä½¿ç”¨100ï¼ˆä¸€ä¸ªæ•°å­—ï¼‰è¿›è¡Œç´¢å¼•ä¸ä½¿ç”¨â€œ 100â€ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰è¿›è¡Œç´¢å¼•æ˜¯åŒä¸€å›äº‹ï¼Œå› æ­¤ä¸¤è€…å¿…é¡»ä¿æŒä¸€è‡´ã€‚ 1234567891011121314interface Animal &#123; name: string;&#125;interface Dog extends Animal &#123; breed: string;&#125;// Error: indexing with a numeric string might get you a completely separate type of Animal!interface NotOkay &#123; [x: number]: Animal;Numeric index type 'Animal' is not assignable to string index type 'Dog'. [x: string]: Dog;&#125; å°½ç®¡å­—ç¬¦ä¸²ç´¢å¼•ç­¾åæ˜¯æè¿°â€œå­—å…¸â€æ¨¡å¼çš„å¼ºå¤§æ–¹æ³•ï¼Œä½†å®ƒä»¬è¿˜å¼ºåˆ¶æ‰€æœ‰å±æ€§ä¸å…¶è¿”å›ç±»å‹åŒ¹é…ã€‚è¿™æ˜¯å› ä¸ºå­—ç¬¦ä¸²ç´¢å¼•å£°æ˜obj.propertyä¹Ÿå¯ä»¥ä½œä¸ºobj [â€œ propertyâ€]ä½¿ç”¨ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œåç§°çš„ç±»å‹ä¸å­—ç¬¦ä¸²ç´¢å¼•çš„ç±»å‹ä¸åŒ¹é…ï¼Œå¹¶ä¸”ç±»å‹æ£€æŸ¥å™¨ç»™å‡ºé”™è¯¯ï¼š 123456interface NumberDictionary &#123; [index: string]: number; length: number; // ok, length is a number name: string; // error, the type of 'name' is not a subtype of the indexer// Property 'name' of type 'string' is not assignable to string index type 'number'.&#125; ä½†æ˜¯ï¼Œå¦‚æœç´¢å¼•ç­¾åæ˜¯å±æ€§ç±»å‹çš„å¹¶é›†ï¼Œåˆ™å¯ä»¥æ¥å—ä¸åŒç±»å‹çš„å±æ€§ï¼š 12345interface NumberOrStringDictionary &#123; [index: string]: number | string; // å±æ€§ç±»å‹ length: number; // ok, length is a number name: string; // ok, name is a string&#125; æœ€åï¼Œæ‚¨å¯ä»¥å°†ç´¢å¼•ç­¾åè®¾ä¸ºåªè¯»ï¼Œä»¥é˜²æ­¢åˆ†é…ç»™å®ƒä»¬çš„ç´¢å¼•ï¼š 1234567interface ReadonlyStringArray &#123; readonly [index: number]: string;&#125;let myArray: ReadonlyStringArray = [\"Alice\", \"Bob\"];myArray[2] = \"Mallory\"; // error!// Index signature in type 'ReadonlyStringArray' only permits reading. 2.6 Class Types2.6.1 Implement123456789101112interface ClockInterface &#123; currentTime: Date; setTime(d: Date): void;&#125;class Clock implements ClockInterface &#123; currentTime: Date = new Date(); setTime(d: Date) &#123; this.currentTime = d; &#125; constructor(h: number, m: number) &#123;&#125;&#125; è¿™æ˜¯å› ä¸ºå½“ç±»å®ç°æ¥å£æ—¶ï¼Œä»…æ£€æŸ¥è¯¥ç±»çš„å®ä¾‹ä¾§ã€‚ç”±äºæ„é€ å‡½æ•°ä½äºé™æ€ç«¯ï¼Œå› æ­¤å®ƒä¸åŒ…å«åœ¨æ­¤æ£€æŸ¥ä¸­ã€‚ 123456789101112interface ClockConstructor &#123; new (hour: number, minute: number);&#125;class Clock implements ClockConstructor &#123; // Class 'Clock' incorrectly implements interface 'ClockConstructor'. // Type 'Clock' provides no match for the signature 'new (hour: number, minute: number): any'. currentTime: Date; constructor(h: number, m: number) &#123;&#125;&#125;const clock = new Clock(1, 3); éœ€è¦ç›´æ¥ä½¿ç”¨ç±»çš„é™æ€æ–¹é¢ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªæ¥å£ï¼Œç”¨äºæ„é€ å‡½æ•°çš„ClockConstructorå’Œç”¨äºå®ä¾‹æ–¹æ³•çš„ClockInterfaceã€‚ç„¶åï¼Œä¸ºæ–¹ä¾¿èµ·è§ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ„é€ å‡½æ•°createClockï¼Œè¯¥å‡½æ•°åˆ›å»ºä¼ é€’ç»™å®ƒçš„ç±»å‹çš„å®ä¾‹ 1234567891011121314151617181920212223242526272829303132interface ClockConstructor &#123; new (hour: number, minute: number): ClockInterface;&#125;interface ClockInterface &#123; tick(): void;&#125;function createClock( ctor: ClockConstructor, hour: number, minute: number): ClockInterface &#123; return new ctor(hour, minute);&#125;class DigitalClock implements ClockInterface &#123; constructor(h: number, m: number) &#123;&#125; tick() &#123; console.log(\"beep beep\"); &#125;&#125;class AnalogClock implements ClockInterface &#123; constructor(h: number, m: number) &#123;&#125; tick() &#123; console.log(\"tick tock\"); &#125;&#125;let digital = createClock(DigitalClock, 12, 17);let analog = createClock(AnalogClock, 7, 32); å¦ä¸€ç§ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ç±»è¡¨è¾¾å¼ï¼š 1234567891011121314151617interface ClockConstructor &#123; new (hour: number, minute: number): ClockInterface;&#125;interface ClockInterface &#123; tick(): void;&#125;const Clock: ClockConstructor = class Clock implements ClockInterface &#123; constructor(h: number, m: number) &#123;&#125; tick() &#123; console.log(\"beep beep\"); &#125;&#125;;let clock = new Clock(12, 17);clock.tick(); 2.7 Extending Interfaces12345678910111213141516interface Shape &#123; color: string;&#125;interface PenStroke &#123; penWidth: number;&#125;interface Square extends Shape, PenStroke &#123; sideLength: number;&#125;let square = &#123;&#125; as Square;square.color = \"blue\";square.sideLength = 10;square.penWidth = 5.0; 2.8 Hybrid Typesan object that acts as both a function and an object, with additional properties: 1234567891011121314151617interface Counter &#123; (start: number): string; interval: number; reset(): void;&#125;function getCounter(): Counter &#123; let counter = function (start: number) &#123;&#125; as Counter; counter.interval = 123; counter.reset = function () &#123;&#125;; return counter;&#125;let c = getCounter();c(10);c.reset();c.interval = 5.0; ä¸ç¬¬ä¸‰æ–¹JavaScriptäº¤äº’æ—¶ï¼Œæ‚¨å¯èƒ½éœ€è¦ä½¿ç”¨ä¸Šè¿°æ¨¡å¼æ¥å®Œå…¨æè¿°ç±»å‹çš„å½¢çŠ¶ 2.9 Interfaces Extending ClassesWhen an interface type extends a class type it inherits the members of the class but not their implementations. It is as if the interface had declared all of the members of the class without providing an implementation. Interfaces inherit even the private and protected members of a base class. This means that when you create an interface that extends a class with private or protected members, that interface type can only be implemented by that class or a subclass of it. This is useful when you have a large inheritance hierarchy, but want to specify that your code works with only subclasses that have certain properties. The subclasses donâ€™t have to be related besides inheriting from the base class. For example: 12345678910111213141516171819202122class Control &#123; private state: any;&#125;interface SelectableControl extends Control &#123; select(): void;&#125;class Button extends Control implements SelectableControl &#123; select() &#123;&#125;&#125;class TextBox extends Control &#123; select() &#123;&#125;&#125;class ImageControl implements SelectableControl &#123;//Class 'ImageControl' incorrectly implements interface 'SelectableControl'. // Types have separate declarations of a private property 'state'. private state: any; select() &#123;&#125;&#125; â€‹ In the above example, SelectableControl contains all of the members of Control, including the private state property. Since state is a private member it is only possible for descendants of Control to implement SelectableControl. This is because only descendants of Control will have a state private member that originates in the same declaration, which is a requirement for private members to be compatible. â€‹ Within the Control class it is possible to access the state private member through an instance of SelectableControl. Effectively, a SelectableControl acts like a Control that is known to have a select method. The Button and TextBox classes are subtypes of SelectableControl (because they both inherit from Control and have a select method). The ImageControl class has itâ€™s own state private member rather than extending Control, so it cannot implement SelectableControl. 3. Functionsåœ¨TypeScriptä¸­ï¼Œå°½ç®¡æœ‰ç±»ï¼Œåç§°ç©ºé—´å’Œæ¨¡å—ï¼Œä½†æ˜¯å‡½æ•°ä»ç„¶åœ¨æè¿°æ“ä½œæ–¹å¼ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚ TypeScriptè¿˜å‘æ ‡å‡†JavaScriptå‡½æ•°æ·»åŠ äº†ä¸€äº›æ–°åŠŸèƒ½ï¼Œä»¥ä½¿å…¶æ›´æ˜“äºä½¿ç”¨ã€‚ 3.1 thisLearning how to use this in JavaScript is something of a rite of passage. Since TypeScript is a superset of JavaScript, TypeScript developers also need to learn how to use this and how to spot when itâ€™s not being used correctly. Fortunately, TypeScript lets you catch incorrect uses of this with a couple of techniques. If you need to learn how this works in JavaScript, though, first read Yehuda Katzâ€™s Understanding JavaScript Function Invocation and â€œthisâ€. Yehudaâ€™s article explains the inner workings of this very well, so weâ€™ll just cover the basics here. this and arrow functions In JavaScript, this is a variable thatâ€™s set when a function is called. This makes it a very powerful and flexible feature, but it comes at the cost of always having to know about the context that a function is executing in. This is notoriously confusing, especially when returning a function or passing a function as an argument. Letâ€™s look at an example: 1234567891011121314151617let deck = &#123; suits: [\"hearts\", \"spades\", \"clubs\", \"diamonds\"], cards: Array(52), createCardPicker: function () &#123; return function () &#123; let pickedCard = Math.floor(Math.random() * 52); let pickedSuit = Math.floor(pickedCard / 13); return &#123; suit: this.suits[pickedSuit], card: pickedCard % 13 &#125;; &#125;; &#125;,&#125;;let cardPicker = deck.createCardPicker();let pickedCard = cardPicker();alert(\"card: \" + pickedCard.card + \" of \" + pickedCard.suit); Notice that createCardPicker is a function that itself returns a function. If we tried to run the example, we would get an error instead of the expected alert box. This is because the this being used in the function created by createCardPicker will be set to window instead of our deck object. Thatâ€™s because we call cardPicker() on its own. A top-level non-method syntax call like this will use window for this. (Note: under strict mode, this will be undefined rather than window). We can fix this by making sure the function is bound to the correct this before we return the function to be used later. This way, regardless of how itâ€™s later used, it will still be able to see the original deck object. To do this, we change the function expression to use the ECMAScript 6 arrow syntax. Arrow functions capture the this where the function is created rather than where it is invoked: 123456789101112131415161718let deck = &#123; suits: [\"hearts\", \"spades\", \"clubs\", \"diamonds\"], cards: Array(52), createCardPicker: function () &#123; // NOTE: the line below is now an arrow function, allowing us to capture 'this' right here return () =&gt; &#123; let pickedCard = Math.floor(Math.random() * 52); let pickedSuit = Math.floor(pickedCard / 13); return &#123; suit: this.suits[pickedSuit], card: pickedCard % 13 &#125;; &#125;; &#125;,&#125;;let cardPicker = deck.createCardPicker();let pickedCard = cardPicker();alert(\"card: \" + pickedCard.card + \" of \" + pickedCard.suit); Even better, TypeScript will warn you when you make this mistake if you pass the --noImplicitThis flag to the compiler. It will point out that this in this.suits[pickedSuit] is of type any. this parameters Unfortunately, the type of this.suits[pickedSuit] is still any. Thatâ€™s because this comes from the function expression inside the object literal. To fix this, you can provide an explicit this parameter. this parameters are fake parameters that come first in the parameter list of a function: 123function f(this: void) &#123; // make sure `this` is unusable in this standalone function&#125; Letâ€™s add a couple of interfaces to our example above, Card and Deck, to make the types clearer and easier to reuse: 1234567891011121314151617181920212223242526272829interface Card &#123; suit: string; card: number;&#125;interface Deck &#123; suits: string[]; cards: number[]; createCardPicker(this: Deck): () =&gt; Card;&#125;let deck: Deck = &#123; suits: [\"hearts\", \"spades\", \"clubs\", \"diamonds\"], cards: Array(52), // NOTE: The function now explicitly specifies that its callee must be of type Deck createCardPicker: function (this: Deck) &#123; return () =&gt; &#123; let pickedCard = Math.floor(Math.random() * 52); let pickedSuit = Math.floor(pickedCard / 13); return &#123; suit: this.suits[pickedSuit], card: pickedCard % 13 &#125;; &#125;; &#125;,&#125;;let cardPicker = deck.createCardPicker();let pickedCard = cardPicker();alert(\"card: \" + pickedCard.card + \" of \" + pickedCard.suit); Now TypeScript knows that createCardPicker expects to be called on a Deck object. That means that this is of type Deck now, not any, so --noImplicitThis will not cause any errors. this parameters in callbacks You can also run into errors with this in callbacks, when you pass functions to a library that will later call them. Because the library that calls your callback will call it like a normal function, this will be undefined. With some work you can use this parameters to prevent errors with callbacks too. First, the library author needs to annotate the callback type with this: 123interface UIElement &#123; addClickListener(onclick: (this: void, e: Event) =&gt; void): void;&#125; this: void means that addClickListener expects onclick to be a function that does not require a this type. Second, annotate your calling code with this: 123456789101112131415class Handler &#123; info: string; onClickBad(this: Handler, e: Event) &#123; // oops, used `this` here. using this callback would crash at runtime this.info = e.message; &#125;&#125;let h = new Handler();uiElement.addClickListener(h.onClickBad); // error!//Argument of type '(this: Handler, e: Event) =&gt; void' is not assignable to parameter of type '(this: void, e: Event) =&gt; void'. //The 'this' types of each signature are incompatible. // Type 'void' is not assignable to type 'Handler'.Argument of type '(this: Handler, e: Event) =&gt; void' is not assignable to parameter of type '(this: void, e: Event) =&gt; void'. // The 'this' types of each signature are incompatible. // Type 'void' is not assignable to type 'Handler'. With this annotated, you make it explicit that onClickBad must be called on an instance of Handler. Then TypeScript will detect that addClickListener requires a function that has this: void. To fix the error, change the type of this: 12345678910class Handler &#123; info: string; onClickGood(this: void, e: Event) &#123; // can't use `this` here because it's of type void! console.log(\"clicked!\"); &#125;&#125;let h = new Handler();uiElement.addClickListener(h.onClickGood); Because onClickGood specifies its this type as void, it is legal to pass to addClickListener. Of course, this also means that it canâ€™t use this.info. If you want both then youâ€™ll have to use an arrow function: 123456class Handler &#123; info: string; onClickGood = (e: Event) =&gt; &#123; this.info = e.message; &#125;;&#125; This works because arrow functions use the outer this, so you can always pass them to something that expects this: void. The downside is that one arrow function is created per object of type Handler. Methods, on the other hand, are only created once and attached to Handlerâ€™s prototype. They are shared between all objects of type Handler. 3.2 OverloadsJavaScriptæœ¬è´¨ä¸Šæ˜¯ä¸€ç§éå¸¸åŠ¨æ€çš„è¯­è¨€ã€‚ä¸€ä¸ªJavaScriptå‡½æ•°æ ¹æ®ä¼ å…¥å‚æ•°çš„å½¢çŠ¶è¿”å›ä¸åŒç±»å‹çš„å¯¹è±¡çš„æƒ…å†µå¹¶ä¸å°‘è§ã€‚ 1234567891011121314151617181920212223242526272829let suits = [\"hearts\", \"spades\", \"clubs\", \"diamonds\"];function pickCard(x: &#123; suit: string; card: number &#125;[]): number;function pickCard(x: number): &#123; suit: string; card: number &#125;;function pickCard(x) &#123; // Check to see if we're working with an object/array // if so, they gave us the deck and we'll pick the card if (typeof x == \"object\") &#123; let pickedCard = Math.floor(Math.random() * x.length); return pickedCard; &#125; // Otherwise just let them pick the card else if (typeof x == \"number\") &#123; let pickedSuit = Math.floor(x / 13); return &#123; suit: suits[pickedSuit], card: x % 13 &#125;; &#125;&#125;let myDeck = [ &#123; suit: \"diamonds\", card: 2 &#125;, &#123; suit: \"spades\", card: 10 &#125;, &#123; suit: \"hearts\", card: 4 &#125;,];let pickedCard1 = myDeck[pickCard(myDeck)];alert(\"card: \" + pickedCard1.card + \" of \" + pickedCard1.suit);let pickedCard2 = pickCard(15);alert(\"card: \" + pickedCard2.card + \" of \" + pickedCard2.suit); 4. Classes4.1 abstract abstractå…³é”®å­—ç”¨äºå®šä¹‰æŠ½è±¡ç±»ä»¥åŠæŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚ æŠ½è±¡ç±»ï¼Œ æ˜¯å¯ä»¥ä»ä¸­æ´¾æˆå‡ºå…¶ä»–ç±»çš„åŸºç±»ï¼›ç®€å•è¯´å°±æ˜¯åªèƒ½è¢«ç»§æ‰¿ï¼Œä¸èƒ½newå‡ºå®ä¾‹ï¼›ä¸interfaceä¸åŒçš„æ˜¯ï¼ŒæŠ½è±¡ç±»ä¸­å¯ä»¥æœ‰æˆå‘˜å®ç°çš„è¯¦ç»†ä¿¡æ¯ã€‚ 12345678910111213141516171819202122232425export abstract class App &#123; public setTargetProps&lt;T&gt; (target: T, source: Partial&lt;T&gt;): T &#123; try &#123; Object.keys(target).forEach((property: keyof T) =&gt; &#123; this.setTargetPropsByProperty(target, property, source[property]) &#125;) &#125; catch (error) &#123; throw new Error(error) &#125; return target &#125;&#125;const app = new App();// Cannot create an instance of an abstract class.class B extends App&#123;&#125;;// éæŠ½è±¡ç±»â€œ Bâ€æœªå®ç°ä»ç±»â€œ Appâ€ç»§æ‰¿çš„æŠ½è±¡æˆå‘˜â€œ makeâ€class C extends App&#123; make()&#123;&#125; // éœ€è¦å®ç°æŠ½è±¡ç±»ä¸­å®šä¹‰çš„æŠ½è±¡æ–¹æ³•&#125; æŠ½è±¡ç±»ä¸­æ ‡è®°ä¸ºæŠ½è±¡çš„æ–¹æ³•ä¸åŒ…å«å®ç°ï¼Œå¿…é¡»åœ¨æ´¾ç”Ÿç±»ä¸­å®ç°ã€‚æŠ½è±¡æ–¹æ³•ä¸æ¥å£æ–¹æ³•å…·æœ‰ç›¸ä¼¼çš„è¯­æ³•ã€‚ä¸¤è€…éƒ½å®šä¹‰äº†æ–¹æ³•çš„ç­¾åï¼Œè€Œæ²¡æœ‰åŒ…æ‹¬æ–¹æ³•ä¸»ä½“ã€‚ä½†æ˜¯ï¼ŒæŠ½è±¡æ–¹æ³•å¿…é¡»åŒ…å«abstractå…³é”®å­—ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©åŒ…æ‹¬è®¿é—®ä¿®é¥°ç¬¦ã€‚ 4.2 public,private, and protected4.2.1 ç±»å‹å…¼å®¹12345678910111213141516171819202122232425262728class Animal &#123; private name: string; constructor(theName: string) &#123; this.name = theName; &#125;&#125;class Rhino extends Animal &#123; constructor() &#123; super(\"Rhino\"); &#125;&#125;class Employee &#123; private name: string; constructor(theName: string) &#123; this.name = theName; &#125;&#125;let animal = new Animal(\"Goat\");let rhino = new Rhino();let employee = new Employee(\"Bob\");animal = rhino;animal = employee; // Type 'Employee' is not assignable to type 'Animal'. æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„ç±»å‹æ— æ³•åšèµ‹å€¼æ“ä½œï¼›// Types have separate declarations of a private property 'name' 4.2.2 protectedprotectedä¿®é¥°ç¬¦çš„è¡Œä¸ºä¸privateä¿®é¥°ç¬¦éå¸¸ç›¸ä¼¼ï¼Œé™¤äº†å£°æ˜ä¸ºprotectedçš„æˆå‘˜ä¹Ÿå¯ä»¥åœ¨æ´¾ç”Ÿç±»ä¸­è®¿é—®ä¹‹å¤–ï¼› 123456789101112131415161718192021222324252627class Person &#123; protected name: string; constructor(name: string) &#123; this.name = name; &#125;&#125;class Employee extends Person &#123; private department: string; constructor(name: string, department: string) &#123; super(name); this.department = department; &#125; public getElevatorPitch() &#123; // æ´¾ç”Ÿç±»ä¸­å¯ä»¥è®¿é—®åˆ° åŸºç±»ä¸­çš„ protected å±æ€§ï¼› return `Hello, my name is $&#123;this.name&#125; and I work in $&#123;this.department&#125;.`; &#125;&#125;let howard = new Employee(\"Howard\", \"Sales\");console.log(howard.getElevatorPitch());// è™½ç„¶æˆ‘ä»¬ä¸èƒ½ä»Personå¤–éƒ¨ä½¿ç”¨nameï¼Œä½†ä»å¯ä»¥åœ¨Employeeçš„å®ä¾‹æ–¹æ³•ä¸­ä½¿ç”¨å®ƒï¼Œå› ä¸ºEmployeeæºè‡ªPersonã€‚console.log(howard.name);// Property 'name' is protected and only accessible within class 'Person' and its subclasses. æ„é€ å‡½æ•°ä¹Ÿå¯èƒ½è¢«æ ‡è®°ä¸ºå—ä¿æŠ¤çš„ã€‚è¿™æ„å‘³ç€è¯¥ç±»ä¸èƒ½åœ¨å…¶åŒ…å«çš„ç±»ä¹‹å¤–å®ä¾‹åŒ–ï¼Œä½†æ˜¯å¯ä»¥æ‰©å±•ã€‚ 123456789101112131415161718192021222324class Person &#123; protected name: string; protected constructor(theName: string) &#123; this.name = theName; &#125;&#125;// Employee can extend Personclass Employee extends Person &#123; private department: string; constructor(name: string, department: string) &#123; super(name); this.department = department; &#125; public getElevatorPitch() &#123; return `Hello, my name is $&#123;this.name&#125; and I work in $&#123;this.department&#125;.`; &#125;&#125;let howard = new Employee(\"Howard\", \"Sales\");let john = new Person(\"John\");// Constructor of class 'Person' is protected and only accessible within the class declaration. å› ä¸º new Personçš„æ—¶å€™æ˜¯éœ€è¦è°ƒ Personçš„æ„é€ å‡½æ•°ï¼Œç”±äºå…¶æ„é€ å‡½æ•°æ·»åŠ äº† protectedå…³é”®å­—ã€‚å®ä¾‹æ˜¯æ— æ³•è°ƒç±»çš„æ„é€ å‡½æ•°çš„ï¼Œæ‰€ä»¥å°±æ— æ³•è¢«å®ä¾‹åŒ–äº†ï¼› 4.2.3 Readonly12345678910111213class Octopus &#123; readonly name: string; readonly numberOfLegs: number = 8; constructor(readonly theName: string) &#123; this.name = theName; &#125;&#125;let dad = new Octopus(\"Man with the 8 strong legs\");dad.name = \"Man with the 3-piece suit\";// Cannot assign to 'name' because it is a read-only property.console.log(dad.name) 4.2.4 accessorsTypeScriptæ”¯æŒgetters / setteræ–¹æ³•ï¼Œä»¥æ‹¦æˆªå¯¹å¯¹è±¡æˆå‘˜çš„è®¿é—®ã€‚è¿™ä½¿æ‚¨å¯ä»¥æ›´å¥½åœ°æ§åˆ¶å¦‚ä½•è®¿é—®æ¯ä¸ªå¯¹è±¡ä¸Šçš„æˆå‘˜çš„æ–¹å¼ã€‚ 12345678910class Employee &#123; fullName: string;&#125;let employee = new Employee();employee.fullName = \"Bob Smith\";if (employee.fullName) &#123; console.log(employee.fullName);&#125; åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªsetteræ¥æ£€æŸ¥newNameçš„é•¿åº¦ï¼Œä»¥ç¡®ä¿å®ƒä¸æˆ‘ä»¬çš„åå¤‡æ•°æ®åº“å­—æ®µçš„æœ€å¤§é•¿åº¦å…¼å®¹ã€‚å¦‚æœä¸æ˜¯è¿™æ ·ï¼Œæˆ‘ä»¬ä¼šæŠ›å‡ºé”™è¯¯é€šçŸ¥å®¢æˆ·ç«¯ä»£ç å‡ºäº†ç‚¹é—®é¢˜ã€‚ 123456789101112131415161718192021222324const fullNameMaxLength = 10;class Employee &#123; private _fullName: string = \"\"; get fullName(): string &#123; return this._fullName; &#125; set fullName(newName: string) &#123; if (newName &amp;&amp; newName.length &gt; fullNameMaxLength) &#123; throw new Error(\"fullName has a max length of \" + fullNameMaxLength); &#125; this._fullName = newName; &#125;&#125;let employee = new Employee();employee.fullName = \"Bob Smith\";if (employee.fullName) &#123; console.log(employee.fullName);&#125; æ³¨æ„äº‹é¡¹ é¦–å…ˆï¼Œè®¿é—®å™¨è¦æ±‚æ‚¨å°†ç¼–è¯‘å™¨è®¾ç½®ä¸ºè¾“å‡ºECMAScript 5æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚ä¸æ”¯æŒé™çº§ä¸ºECMAScript 3ã€‚ å…¶æ¬¡ï¼Œå¸¦æœ‰getå’Œno setçš„è®¿é—®å™¨ä¼šè‡ªåŠ¨æ¨æ–­ä¸ºåªè¯»ã€‚å½“ä»£ç ç”Ÿæˆ.d.tsæ–‡ä»¶æ—¶å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºç”¨æˆ·é€šè¿‡ideå¯ä»¥çœ‹åˆ°è¿™äº›æ— æ³•è¿›è¡Œæ›´æ”¹ã€‚ 4.2.5 Static1234567891011121314151617class Grid &#123; static origin = &#123; x: 0, y: 0 &#125;; calculateDistanceFromOrigin(point: &#123; x: number; y: number &#125;) &#123; let xDist = point.x - Grid.origin.x; let yDist = point.y - Grid.origin.y; return Math.sqrt(xDist * xDist + yDist * yDist) / this.scale; &#125; constructor(public scale: number) &#123;&#125;&#125;let grid1 = new Grid(1.0); // 1x scalelet grid2 = new Grid(5.0); // 5x scaleconsole.log(grid1.calculateDistanceFromOrigin(&#123; x: 10, y: 10 &#125;));console.log(grid2.calculateDistanceFromOrigin(&#123; x: 10, y: 10 &#125;)); 4.2.6 Using a class as an interface12345678910class Point &#123; x: number; y: number;&#125;interface Point3d extends Point &#123; z: number;&#125;let point3d: Point3d = &#123; x: 1, y: 2, z: 3 &#125;; 5. Decoratorséšç€TypeScriptå’ŒES6ä¸­ç±»çš„å¼•å…¥ï¼Œç°åœ¨å­˜åœ¨æŸäº›æƒ…å†µï¼Œè¿™äº›æƒ…å†µéœ€è¦é™„åŠ åŠŸèƒ½æ¥æ”¯æŒ annotating or modifying classes and class membersã€‚è£…é¥°å™¨æä¾›äº†ä¸€ç§ä¸ºç±»å£°æ˜å’Œæˆå‘˜æ·»åŠ æ³¨é‡Šå’Œå…ƒç¼–ç¨‹è¯­æ³•çš„æ–¹æ³•ã€‚è£…é¥°å™¨æ˜¯JavaScriptçš„ç¬¬2é˜¶æ®µæè®®ï¼Œå¯ä½œä¸ºTypeScriptçš„å®éªŒåŠŸèƒ½ä½¿ç”¨ã€‚ JavaScriptå¼•å…¥classä¹‹åï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç±»ä¹‹é—´å…±äº«æˆ–è€…æ‰©å±•ä¸€äº›æ–¹æ³•æˆ–è¡Œä¸ºçš„æ—¶å€™ï¼Œä»£ç ä¼šå˜å¾—å¾ˆå¤æ‚ï¼Œä¸å¤Ÿä¼˜é›…ï¼Œè¿™ä¹Ÿæ˜¯è£…é¥°å™¨è¢«æå‡ºçš„ä¸€ä¸ªå¾ˆé‡è¦åŸå› ä¹‹ä¸€ï¼› è¦ä¸ºè£…é¥°å™¨å¯ç”¨å®éªŒæ€§æ”¯æŒï¼Œå¿…é¡»åœ¨å‘½ä»¤è¡Œæˆ–tsconfig.jsonä¸­å¯ç”¨experimentalDecoratorsç¼–è¯‘å™¨é€‰é¡¹ 1tsc --target ES5 --experimentalDecorators 1234567// tsconfig.json&#123; \"compilerOptions\": &#123; \"target\": \"ES5\", \"experimentalDecorators\": true &#125;&#125; è£…é¥°å™¨æ˜¯ä¸€ç§ç‰¹æ®Šçš„å£°æ˜ï¼Œå¯ä»¥é™„åŠ åˆ°ç±»å£°æ˜ï¼Œæ–¹æ³•ï¼Œè®¿é—®å™¨ï¼Œå±æ€§æˆ–å‚æ•°ä¸Šã€‚è£…é¥°å™¨ä½¿ç”¨@expressionå½¢å¼ï¼Œå…¶ä¸­expressionæ±‚å€¼ä¹‹åå¿…é¡»ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒä¼šåœ¨è¿è¡Œæ—¶è¢«è°ƒç”¨ï¼Œè¢«è£…é¥°çš„å£°æ˜ä¿¡æ¯ä½œä¸ºå‚æ•°ä¼ å…¥ï¼› 5.1 class decorators12345678910111213141516171819function addAge(constructor: Function) &#123; constructor.prototype.age = 18;&#125;function addName(constructor: Function) &#123; constructor.prototype.name = \"leo\";&#125;@addAge@addNameclass Person &#123; name: string; age!: number;&#125;let person = new Person();console.log(person.age, person.name); // 18 ,'age' 12345678910111213141516171819202122232425262728293031323334353637// bundle.jsvar __decorate = function (decorators, target, key, desc) &#123; var c = arguments.length, r = c &lt; 3 ? target : desc === null ? (desc = Object.getOwnPropertyDescriptor(target, key)) : desc; var d; if (typeof Reflect === \"object\" &amp;&amp; typeof Reflect.decorate === \"function\") &#123; r = Reflect.decorate(decorators, target, key, desc); &#125; else &#123; for (var i = decorators.length - 1; i &gt;= 0; i--) if ((d = decorators[i])) // æ ¸å¿ƒä»£ç å°±æ˜¯ d(r) rä¸ºæ„é€ å‡½æ•°Person r = (c &lt; 3 ? d(r) : c &gt; 3 ? d(target, key, r) : d(target, key)) || r; &#125; return c &gt; 3 &amp;&amp; r &amp;&amp; Object.defineProperty(target, key, r), r;&#125;;function addAge(constructor) &#123; constructor.prototype.age = 18;&#125;function addName(constructor) &#123; constructor.prototype.name = \"leo\";&#125;var Person = /** @class */ (function () &#123; function Person() &#123;&#125; Person = __decorate([addAge, addName], Person); return Person;&#125;)();var person = new Person();console.log(person.age, person.name);export &#123;&#125;; 5.2 reflect-metadatainstall npm install reflect-metadata demo 1234567891011121314151617181920212223242526272829303132import \"reflect-metadata\";let target = &#123;&#125;;Reflect.defineMetadata(\"name\", \"alex\", target);Reflect.defineMetadata(\"name\", \"world\", target, \"hello\");console.log(Reflect.getOwnMetadata(\"name\", target)); // alexconsole.log(Reflect.getOwnMetadata(\"name\", target, \"hello\")); // worldfunction classMetadata(key: any, value: any) &#123; return function (target: any) &#123; Reflect.defineMetadata(key, value, target); &#125;;&#125;function methodMetadata(key: any, value: any) &#123; return function (target: any, propertyName: any) &#123; //Person.prototype.hello.name=world Reflect.defineMetadata(key, value, target, propertyName); &#125;;&#125;//ç»™ç±»æœ¬èº«å¢åŠ å…ƒæ•°æ®//@Reflect.metadata('name','Person')@classMetadata(\"name\", \"Person\")class Person &#123; //ç»™ç±»çš„åŸå‹å¢åŠ å…ƒæ•°æ® //@Reflect.metadata('name', 'world') @methodMetadata(\"name\", \"world\") hello(): string &#123; return \"world\"; &#125;&#125;console.log(Reflect.getMetadata(\"name\", Person)); // Personconsole.log(Reflect.getMetadata(\"name\", new Person(), \"hello\")); // world","categories":[{"name":"ts","slug":"ts","permalink":"http://yoursite.com/categories/ts/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"}]},{"title":"html5vedio","slug":"html5vedio","date":"2021-01-04T07:02:23.000Z","updated":"2021-02-09T10:27:48.301Z","comments":true,"path":"2021/01/04/html5vedio/","link":"","permalink":"http://yoursite.com/2021/01/04/html5vedio/","excerpt":"","text":"html5 æ’­æ”¾å™¨åŠ é€Ÿ123const video = document.querySelector('video');video.playbackRate = 2 // æ’­æ”¾å™¨æ’­æ”¾é€Ÿåº¦","categories":[{"name":"html5","slug":"html5","permalink":"http://yoursite.com/categories/html5/"}],"tags":[{"name":"skill","slug":"skill","permalink":"http://yoursite.com/tags/skill/"}]},{"title":"browser-sync","slug":"browser-sync","date":"2020-12-21T06:07:39.000Z","updated":"2021-02-09T10:26:03.847Z","comments":true,"path":"2020/12/21/browser-sync/","link":"","permalink":"http://yoursite.com/2020/12/21/browser-sync/","excerpt":"","text":"å…¨å±€å®‰è£…1231312312312123sudo npm install -g browser-sync å¿«é€Ÿä½¿ç”¨1234# å¯åŠ¨æœåŠ¡å™¨ ç›‘å¬æ‰€æœ‰çš„htmlæ–‡ä»¶$ browser-sync start --server --files \"*.html\"# å¯åŠ¨æœåŠ¡å™¨ ç›‘å¬æ‰€æœ‰çš„æ–‡ä»¶$ browser-sync start --server --files \"**\" å¯åŠ¨browser-sync start --server --port 3333 --files &quot;*.css,*.html,*.js&quot; start options1234567891011121314151617181920212223242526272829--help #è¾“å‡ºä½¿ç”¨ä¿¡æ¯--version #è¾“å‡ºçš„ç‰ˆæœ¬å·--browser #é€‰æ‹©å“ªä¸ªæµè§ˆå™¨åº”è¯¥æ˜¯è‡ªåŠ¨æ‰“å¼€--files #æ–‡ä»¶è·¯å¾„çœ‹--exclude #æ–‡ä»¶æ¨¡å¼å¿½è§†--server #è¿è¡Œæœ¬åœ°æœåŠ¡å™¨ï¼ˆä½¿ç”¨æ‚¨çš„CWDä½œä¸ºWebæ ¹ï¼‰--index #æŒ‡å®šå“ªäº›æ–‡ä»¶åº”è¯¥è¢«ç”¨ä½œç´¢å¼•é¡µ--extensions #æŒ‡å®šæ–‡ä»¶æ‰©å±•åå›é€€--startPath #æŒ‡å®šèµ·å§‹è·¯å¾„ï¼Œæ‰“å¼€æµè§ˆå™¨--https #å¯ç”¨Sâ€‹â€‹SLåœ°æ–¹å‘å±•--directory #æ˜¾ç¤ºæœåŠ¡å™¨çš„ç›®å½•åˆ—è¡¨--proxy #ä»£ç†ç°æœ‰çš„æœåŠ¡å™¨--xip #ä½¿ç”¨xip.ioåŸŸè·¯ç”±--tunnel #ä½¿ç”¨å…¬å…±ç½‘å€--open #é€‰æ‹©å“ªä¸ªURLæ˜¯è‡ªåŠ¨æ‰“å¼€ï¼ˆæœ¬åœ°ï¼Œå¤–éƒ¨æˆ–éš§é“ï¼‰--config #æŒ‡å®šä¸ºBS-config.jsæ–‡ä»¶çš„è·¯å¾„--host #æŒ‡å®šä¸»æœºåä½¿ç”¨--logLevel #è®¾ç½®è®°å½•å™¨è¾“å‡ºç”µå¹³ï¼ˆæ²‰é»˜ï¼Œä¿¡æ¯æˆ–è°ƒè¯•ï¼‰--port #æŒ‡å®šè¦ä½¿ç”¨çš„ç«¯å£--reload-delay #ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å»¶è¿Ÿé‡è£…äº‹ä»¶ä»¥ä¸‹æ–‡ä»¶çš„å˜åŒ–--reload-debounce #é™åˆ¶åœ¨æµè§ˆå™¨ä¸­çš„é¢‘ç‡ï¼šåˆ·æ–°äº‹ä»¶å¯ä»¥è¢«å‘å°„åˆ°è¿æ¥çš„å®¢æˆ·æœº--ui-port #æŒ‡å®šç«¯å£çš„UIä½¿ç”¨--no-notify #ç¦ç”¨æµè§ˆå™¨çš„é€šçŸ¥å…ƒç´ --no-open #ä¸è¦æ‰“å¼€ä¸€ä¸ªæ–°çš„æµè§ˆå™¨çª—å£--no-online #å¼ºåˆ¶ç¦»çº¿ä½¿ç”¨--no-ui #ä¸è¦å¯åŠ¨ç”¨æˆ·ç•Œé¢--no-ghost-mode #ç¦ç”¨å¹½çµæ¨¡å¼--no-inject-changes #åˆ·æ–°ä¸Šçš„æ¯ä¸ªæ–‡ä»¶æ›´æ”¹--no-reload-on-restart #ä¸è¦è‡ªåŠ¨é‡æ–°åŠ è½½åœ¨é‡æ–°å¯åŠ¨æ‰€æœ‰æµè§ˆå™¨","categories":[{"name":"tools","slug":"tools","permalink":"http://yoursite.com/categories/tools/"}],"tags":[{"name":"server","slug":"server","permalink":"http://yoursite.com/tags/server/"}]},{"title":"gitlab3","slug":"gitlab3","date":"2020-12-17T07:30:43.000Z","updated":"2021-02-09T10:27:24.991Z","comments":true,"path":"2020/12/17/gitlab3/","link":"","permalink":"http://yoursite.com/2020/12/17/gitlab3/","excerpt":"","text":"gitlab åˆ†æ”¯ç­–ç•¥ è€ƒè™‘åˆ°gitlabä¸€èˆ¬åœ¨ä¼ä¸šå†…éƒ¨ä½¿ç”¨ï¼Œä¸€èˆ¬ä¸å­˜åœ¨ç¤¾åŒºå¼€å‘è€…ï¼Œæ‰€ä»¥åœ¨ç®¡ç†ä¸Šä¸ä¼šé‡‡ç”¨githubçš„upstream/originåŒä»“åº“æ¨¡å¼ã€‚gitlabä¸‹ï¼Œå¼€å‘è€…ä»¬é¢å‘ä¸€ä¸ªä»“åº“è¿›è¡Œæäº¤å³å¯ï¼› è®¾ç½®å¯¹åˆ†æ”¯çš„ä¿æŠ¤æƒé™ é¡¾åæ€ä¹‰ï¼Œåˆ†æ”¯çš„æƒé™å¿…ä¸å¯å°‘ï¼Œå®ƒå¯ä»¥çº¦æŸå¼€å‘è€…ä»¬çš„æäº¤è¡Œä¸ºå’Œæäº¤ç­–ç•¥ã€‚é¿å…å¤±è¯¯æ“ä½œå°†æœªæµ‹è¯•è¿‡çš„ä»£ç å¼ºåˆ¶æäº¤åˆ°ç”Ÿäº§åˆ†æ”¯ï¼›developerå¯ä»¥ä¸å…³å¿ƒï¼› issueä¸Milestones issueå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªæœ€å°åŸå­çš„ä»»åŠ¡ï¼Œå¤šä¸ªä»»åŠ¡ç»„æˆä¸€ä¸ª milestonesï¼›Milestones å¯ä»¥ç†è§£ä¸ºæŸä¸ªæ—¶é—´åŒºé—´å†…çš„ä»»åŠ¡é›†ï¼›ä¸€ä¸ªMilestoneså¯åŒ…å«å¤šä¸ªissueï¼› å½“è¯¥Milestonesä¸­æ‰€æœ‰issueå®Œæˆï¼Œåˆ™æ ‡å¿—ç€æ­¤Milestonesçš„ç»“æŸï¼› åˆ›å»ºissueå’Œmr åˆ›å»ºä¸€ä¸ªissue å…³è”ä¸€ä¸ªmr branch name branch name ä¼šä»¥issueçš„åºå·å¼€å§‹ï¼Œç„¶åæŠ“å–titleä¸­çš„è‹±æ–‡å’Œæ•°å­—åšè¿æ¥ã€‚ å¯é‡‡ç”¨index-categroy-content-[username]-[time]çš„è‡ªå®šä¹‰æ–¹å¼ï¼Œæ‹¬å·éƒ¨åˆ†å¯é€‰ category feature bugfix chore enhance contentï¼Œä¸€åˆ°ä¸‰ä¸ªè¯ç®€è¿°ä»»åŠ¡ usernameï¼Œä»»åŠ¡è®¤é¢†äºº timeï¼Œåˆ›å»ºåˆ†æ”¯çš„æ—¶é—´ï¼Œä¸€èˆ¬ 201217æˆ–è€…1225 source åŸºäºä»€ä¹ˆåˆ†æ”¯åˆ›å»ºå½“å‰åˆ†æ”¯ï¼Œfeature/chore/enhanceé€‰æ‹©dev-0.3, bugfixé€‰æ‹©env-dev æäº¤ä»£ç æµç¨‹ 123456git fetch # è·å–issueå…³è”çš„åˆ†æ”¯ågit checkout -b 6-feature-pivotDrill origin/6-feature-pivotDrill # åŸºäºè¿œç«¯æ–°å»ºä¸€ä¸ªæœ¬åœ°å¼€å‘åˆ†æ”¯git rebase dev-0.3 # åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸å®šæ—¶rebase å®¿ä¸»åˆ†æ”¯ï¼Œé˜²æ­¢ç‰ˆæœ¬éš”æ–­git push origin 6-feature-pivotDrill # æäº¤è‡³è¿œç¨‹æ˜ å°„# é€šçŸ¥maintainerå®Œæˆä»£ç åˆå¹¶ï¼Œå¹¶å…³é—­issue commitsè§„èŒƒ&#39;type(module) some desc&#39; 1234567891011121314151617181920212223242526type = [ \"build\", // æ„å»ºæ‰§è¡Œ \"chore\", // æ„å»ºå·¥å…·ç›¸å…³ \"ci\", // CI ç›¸å…³ \"docs\", // æ–‡æ¡£æ›´æ–° \"feat\", // æ–°åŠŸèƒ½ \"fix\", // bug ä¿®å¤ \"perf\", // æ€§èƒ½ä¼˜åŒ– \"refactor\", // åŠŸèƒ½é‡æ„ \"release\", \"revert\", // å›æ»šæ“ä½œ \"style\", // æ ·å¼å˜åŠ¨ \"test\", // å•å…ƒæµ‹è¯•]moduele = [ // ä»¥davinciä¸ºä¾‹,åªåˆ—å‡ºå‰ç«¯æ¨¡å— \"project\", \"dashboard\", \"display\", \"widget\", \"schdule\", \"view\", \"source\", \"user\"] reviewä»£ç çš„å‚è€ƒæ ‡å‡† æ ¼å¼åŒ–åçš„ä»£ç ï¼Œåœ¨vscodeä¸­å®‰è£…prettierå·¥å…·ï¼Œè®¾ç½®ctrl+sé»˜è®¤å¯¹å½“å‰é¡µè¿›è¡Œprettieræ ¼å¼åŒ–ï¼› æ‰€æœ‰commitså¿…é¡»è¦å…³è”issueï¼Œå¦‚æœæ²¡æœ‰issueè¦æ–°å»ºissueç„¶åå…³è”mrï¼ˆmerge requestï¼‰ï¼ŒåŸºäºå½“å‰mræäº¤ä»£ç ï¼› åŸåˆ™ä¸Šï¼Œä¸èƒ½æœ‰è‚‰çœ¼å¯è§çš„bugï¼Œä¸€èˆ¬reviewä»£ç æ—¶ä¼šè¿›è¡Œç®€å•çš„æµ‹è¯•ï¼› å…¶ä»–è§„åˆ™ï¼ˆä»£ç è§„èŒƒï¼‰ ä»£ç è§„èŒƒ åŸåˆ™ä¸Šï¼Œæ‰€æœ‰æ–°æäº¤çš„ä»£ç å‚è€ƒé¡¹ç›®ä»£ç é£æ ¼å³å¯ã€‚ç®€è¿°ä¸ºä¸‹é¢å‡ ä¸ªæ–¹é¢ åŸåˆ™ä¸Šï¼Œå˜é‡åå«ä¹‰ç²¾å‡†ï¼Œï¼ˆpsï¼šä¸¥ç¦å…¨å±€ä½œç”¨åŸŸä¸­å‡ºç°å•å­—ç¬¦å‘½åç©ºé—´ï¼›ï¼‰ ä¸è¦æ±‚ä¸€å®šè¦åŠ æ³¨é‡Šæˆ–è€…ä¸åŠ æ³¨é‡Šï¼Œæˆ‘ä»¬çš„æ„¿æ™¯æ˜¯èƒ½å¤Ÿä¹¦å†™æ— æ³¨é‡Šå°±èƒ½çœ‹æ‡‚çš„ä»£ç ã€‚æ ¹æ®ä¸šåŠ¡é€»è¾‘éš¾æ˜“ç¨‹åº¦ï¼Œè‡ªè¡Œå†³å®šã€‚ å°½é‡è‹±æ–‡æ³¨é‡Šï¼› ä¸å»ºè®®æäº¤å¤§é‡é‡å¤ä»£ç ï¼Œé¡»åšå¥½ä»£ç çš„æŠ½è±¡å¤ç”¨ï¼› å°½é‡ä½¿ç”¨è¢«ä¸»æµæµè§ˆå™¨æ”¯æŒçš„çš„esè§„èŒƒä¹¦å†™ä»£ç ï¼ŒåŸåˆ™ä¸Šæ–°esè§„èŒƒä¸‹å·²æœ‰çš„å·¥å…·ç±»å’Œå‡½æ•°ï¼Œä¸é‡å¤é€ è½®å­ï¼› å…¶ä»–æ¶‰åŠhtml/css/javascriptç›¸å…³çš„æ¨èè§„èŒƒä¼šæ¸è¿›å¼çº³å…¥è§„èŒƒé›†ï¼›","categories":[{"name":"project","slug":"project","permalink":"http://yoursite.com/categories/project/"}],"tags":[{"name":"gitlab","slug":"gitlab","permalink":"http://yoursite.com/tags/gitlab/"}]},{"title":"gitlab2","slug":"gitlab2","date":"2020-12-16T10:41:24.000Z","updated":"2020-12-18T05:41:03.023Z","comments":true,"path":"2020/12/16/gitlab2/","link":"","permalink":"http://yoursite.com/2020/12/16/gitlab2/","excerpt":"","text":"label æ ‡ç­¾ç»„ æ ‡ç­¾ç»„çš„æ„ä¹‰å°±æ˜¯å®šä¹‰ä¸€æ¬¡ï¼Œå¤šä¸ªé¡¹ç›®ç»Ÿä¸€ä½¿ç”¨ Platform å‰ç«¯è¿˜æ˜¯åç«¯ï¼Œios è¿˜æ˜¯ android angular node Problems ç›®å‰äº§å“ä¸­å­˜åœ¨çš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„ä¼˜å…ˆçº§ç¨‹åº¦ bugï¼š å¸¸è§„bug securityï¼š å®‰å…¨æ¼æ´ productionï¼š æ¶‰åŠåˆ°ç”Ÿäº§ç¯å¢ƒ Mindless å½±å“è¾ƒå°çš„ä»»åŠ¡ï¼Œæ¯”å¦‚æ›´æ”¹æ–‡ä»¶å¤¹ç›®å½•ï¼Œé€‚é…è§„èŒƒ chore legal Experience å½±å“ç”¨æˆ·ä½“éªŒï¼Œæˆ–è€…ç”¨æˆ·å¯¹äº§å“çš„ç†è§£. These can be both opportunities and â€œUX bugsâ€. copy design ux: User Experience Environment æœåŠ¡å™¨ç¯å¢ƒï¼Œå¼€å‘ç¯å¢ƒï¼Œç”Ÿäº§ç¯å¢ƒæˆ–è€…æµ‹è¯•ç¯å¢ƒ staging test Feedback å¾…ç¡®è®¤çš„é—®é¢˜ï¼Œæ¯”å¦‚ä¸€äº›æ‹è„‘è¢‹çš„éœ€æ±‚ï¼›æˆ–è€…æŸä¸ªéœ€æ±‚æˆ‘ä»¬è¿˜æ²¡å†³å®šæ€ä¹ˆå®ç° discussion questionï¼š è¿˜æ²¡åˆ°éœ€è¦è®¨è®ºçš„æƒ…å†µ rfc Improvements ç°æœ‰åŠŸèƒ½æˆ–åŸºç¡€æ¶æ„ä¸Šçš„è¿­ä»£ã€‚ enhancement: ç°æœ‰æ¨¡å—æœ‰æ›´é«˜çš„å®Œæˆåº¦ optimization: ç°æœ‰åŠŸèƒ½ä»£ç å±‚é¢çš„é‡æ„ï¼Œæˆ–è€…äº¤äº’æµç¨‹ä¸Šçš„æ¢³ç† Additions æ–°åŠŸèƒ½ï¼Œæ–°é¡µé¢ feature Pending ç°åœ¨ä¸å¥½è¯´ï¼Œæœªæ¥è‚¯å®šæœ‰ç»“æœï¼Œå¯èƒ½åšæˆåŠŸï¼Œ å¯èƒ½åšä¸æˆï¼› in progressï¼š è¿›è¡Œä¸­çš„éœ€æ±‚ watchlistï¼š å…ˆæ‹–ç€çš„éœ€æ±‚ï¼Œæœ‰å¯èƒ½å°±æ‹–æ‰äº† Inactive æ— éœ€é‡‡å–ä»»ä½•è¡ŒåŠ¨æˆ–å¯èƒ½é‡‡å–ä»»ä½•è¡ŒåŠ¨ã€‚è¯¥é—®é¢˜å·²è§£å†³ï¼Œå¯ä»¥é€šè¿‡å…¶ä»–é—®é¢˜æ›´å¥½åœ°è§£å†³ï¼› invalidï¼š æ— æ•ˆçš„ wontfixï¼š ä¸ä¼šä¿®å¤ duplicateï¼š é‡å¤ on holdï¼š ç­‰å¾…å€™å¬","categories":[{"name":"project","slug":"project","permalink":"http://yoursite.com/categories/project/"}],"tags":[{"name":"gitlab","slug":"gitlab","permalink":"http://yoursite.com/tags/gitlab/"}]},{"title":"gitlab ä½¿ç”¨","slug":"gitlab-ä½¿ç”¨","date":"2020-12-16T06:52:39.000Z","updated":"2020-12-18T05:43:13.922Z","comments":true,"path":"2020/12/16/gitlab-ä½¿ç”¨/","link":"","permalink":"http://yoursite.com/2020/12/16/gitlab-%E4%BD%BF%E7%94%A8/","excerpt":"","text":"è½¯ä»¶å¼€å‘é˜¶æ®µ è½¯ä»¶å¼€å‘åä¸ªé˜¶æ®µåœ¨gitlabä¸­å¯¹åº”çš„ç®¡ç†æ–¹å¼æ–¹æ³• IDEAï¼š æ¯ä¸€ä¸ªä»ç‚¹å­å¼€å§‹çš„é¡¹ç›®ï¼Œé€šå¸¸æ¥æºäºä¸€æ¬¡é—²èŠã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒGitLab é›†æˆäº†Mattermost å®ƒç±»ä¼¼ä¸€ä¸ªèŠå¤©å·¥å…·ã€‚ ISSUEï¼š æœ€æœ‰æ•ˆçš„è®¨è®ºä¸€ä¸ªç‚¹å­çš„æ–¹æ³•ï¼Œå°±æ˜¯ä¸ºè¿™ä¸ªç‚¹å­å»ºç«‹ä¸€ä¸ªå·¥å•è®¨è®ºã€‚ä½ çš„å›¢é˜Ÿå’Œä½ çš„åˆä½œä¼™ä¼´å¯ä»¥åœ¨å·¥å•è¿½è¸ªå™¨issue trackerä¸­å¸®åŠ©ä½ å»æå‡è¿™ä¸ªç‚¹å­ã€‚ PLANï¼š ä¸€æ—¦è®¨è®ºå¾—åˆ°ä¸€è‡´çš„åŒæ„ï¼Œå°±æ˜¯å¼€å§‹ç¼–ç çš„æ—¶å€™äº†ã€‚ä½†æ˜¯ç­‰ç­‰ï¼é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¼˜å…ˆè€ƒè™‘ç»„ç»‡æˆ‘ä»¬çš„å·¥ä½œæµã€‚å¯¹äºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·¥å•çœ‹æ¿Issue Boardã€‚ CODEï¼š ç°åœ¨ï¼Œå½“ä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹å†™ä»£ç äº†ã€‚ COMMITï¼š å½“æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„åˆæ­¥æˆæœæ¬¢å‘¼çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ç‰ˆæœ¬æ§åˆ¶ä¸‹ï¼Œæäº¤ä»£ç åˆ°åŠŸèƒ½åˆ†æ”¯äº†ã€‚ TESTï¼š é€šè¿‡GitLab CIï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œè„šæœ¬æ¥æ„å»ºå’Œæµ‹è¯•æˆ‘ä»¬çš„åº”ç”¨ã€‚ REVIEWï¼š ä¸€æ—¦è„šæœ¬æˆåŠŸè¿è¡Œï¼Œæˆ‘ä»¬æµ‹è¯•å’Œæ„å»ºæˆåŠŸï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œä»£ç å¤å®¡code reviewä»¥åŠæ‰¹å‡†ã€‚ STAGINGï¼šï¼š é¢„å‘å¸ƒç¯å¢ƒã€‚ PRODUCTIONï¼š å½“ä¸€åˆ‡éƒ½å¦‚é¢„æœŸï¼Œå°±æ˜¯éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™äº†ã€‚ FEEDBACKï¼š ç°åœ¨æ˜¯æ—¶å€™è¿”å›å»çœ‹æˆ‘ä»¬é¡¹ç›®ä¸­éœ€è¦æå‡çš„éƒ¨åˆ†äº†ã€‚æˆ‘ä»¬ä½¿ç”¨å‘¨æœŸåˆ†æ Cycle Analyticsæ¥å¯¹å½“å‰é¡¹ç›®ä¸­å…³é”®çš„éƒ¨åˆ†è¿›è¡Œçš„åé¦ˆ issue å’Œ milestone milestoneé‡Œç¨‹ç¢‘ï¼Œç”¨æ¥æ ‡è¯†\bé˜¶æ®µæ€§ç›®æ ‡ï¼Œ å¯¹ç›®æ ‡è¿›è¡Œç»†åŒ–ï¼ŒåŒ–æ•´ä¸ºé›¶ä¸€ä¸ªä¸ªçš„issuesï¼Œç„¶åæ ¹æ®æ¯ä¸ªissuesçš„ç´§æ€¥ç¨‹åº¦é€‰æ‹©æ€§çš„å®Œæˆã€‚ç­‰æ‰€æœ‰issuesè§£å†³å®Œä¹‹å å°±æ ‡å¿—ç€é˜¶æ®µæ€§ç›®æ ‡å·²å®Œæˆï¼› ä½¿ç”¨æ–¹æ³• æŠŠå®é™…é—®é¢˜è½¬åŒ–ä¸ºissueï¼Œè¿™äº›é—®é¢˜å¯ä»¥æ ‡è®°ä¸ºæ­£åœ¨è§£å†³å’Œè®¡åˆ’è§£å†³ï¼› milestoneå¯¹åº”ç€é˜¶æ®µæ€§é¡¹ç›®è®¡åˆ’ï¼Œç„¶åç»†åˆ†ä¸ºå¤šä¸ªissuesï¼Œè€Œä¸”å¯ä»¥æŒ‡å®šå®Œæˆæ—¶é—´ï¼Œgitlabä¼šè‡ªåŠ¨ç”Ÿæˆå®Œæˆè¿›åº¦æƒ…å†µæ¦‚ç•¥å›¾ã€‚ issuesä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå»ºè®®ï¼Œå…±ç»™å¤§å®¶ä¸€èµ·è®¨è®ºï¼› milestone å’Œissueå»ºç«‹æ—¶æˆ‘ä»¬é€šå¸¸å¯ä»¥å¯¹é—®é¢˜è¿›è¡Œç®€å•æè¿°ï¼Œå¹¶ä¸”è®°å½•é—®é¢˜çš„è§£å†³è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ä»–äººæå‡ºçš„ç–‘é—®ä¹Ÿå¯ä»¥åœ¨è¿™é‡Œè®°å½•ï¼ŒåæœŸå¯ä»¥éšæ—¶æŸ¥çœ‹ï¼› åˆ›å»ºmilestone å¯ä»¥åœ¨é¡¹ç›®å¼€å§‹å‰åˆ›å»ºmilestoneï¼Œåé¢å»ºissuesæ—¶å…³è”å®ƒï¼Œä¹Ÿå¯ä»¥å…ˆå»ºissuesï¼ŒåæœŸç”±é¡¹ç›®è´Ÿè´£äººå»ºmilestoneï¼Œç„¶åæŠŠæ‰€æœ‰issueså…³è”è¿‡æ¥ï¼› åˆ›å»ºä¸€ä¸ªåå­— ç®€å•æè¿°ï¼Œç®€è¿°åˆ›å»ºçš„åŸå› ï¼Œè¿™ä¸ªé‡Œç¨‹ç¢‘æœ€ç»ˆçš„ç›®çš„ï¼Œç¼–è¾‘çš„æ—¶å€™å¯ä»¥ç›´æ¥è´´å›¾ï¼Œä¹Ÿå¯ä»¥æ·»åŠ é™„ä»¶ï¼ˆæ”¯æŒmarkdownæ ¼å¼ï¼Œå¯ä»¥é¢„è§ˆï¼‰ æŒ‡å®šè®¡åˆ’çš„å®Œæˆæ—¶é—´ï¼› æ–°å»ºissues ä¸€ä¸ªissuesè¡¨ç¤ºä¸€ä¸ªåŠŸèƒ½ã€ä¸€ä¸ªbugã€ä¸€ä¸ªå»ºè®®; æ–°å»ºè®®é¢˜å¾ˆç®€å•ï¼Œæ ‡é¢˜+æè¿°+è®¡åˆ’æ—¶é—´+æŒ‡å®šäºº+é‡Œç¨‹ç¢‘ï¼Œé‡Œç¨‹ç¢‘ä¸€å®šè¦æŒ‡å®šä¸€ä¸‹ï¼Œè¿˜å¯ä»¥åŠ æ ‡ç­¾ã€‚ åŠŸèƒ½ï¼šé‡Œç¨‹ç¢‘çš„ç»†åˆ†ï¼Œå°½é‡å°ï¼Œæ–¹ä¾¿mergeræ—¶çš„ä»£ç å®¡æ ¸ï¼› bugï¼šè§£å†³ç¨‹åºä¸­å­˜åœ¨çš„æŸäº›é—®é¢˜ï¼› å»ºè®®ï¼šå¯ä»¥ä½œä¸ºä¸€ä¸ªè®¨è®ºäº¤æµåŒºï¼Œä¹Ÿå¯ä»¥å®ç°å®ƒ; ä¸€ä¸ªissues å¯¹åº”ä¸€ä¸ªæŒ‡å®šäººï¼Œä¸€ä¸ªgit åˆ†æ”¯ï¼›","categories":[{"name":"project","slug":"project","permalink":"http://yoursite.com/categories/project/"}],"tags":[{"name":"gitlab","slug":"gitlab","permalink":"http://yoursite.com/tags/gitlab/"}]},{"title":"nginx","slug":"test","date":"2020-12-09T14:19:03.750Z","updated":"2020-12-18T05:42:10.435Z","comments":true,"path":"2020/12/09/test/","link":"","permalink":"http://yoursite.com/2020/12/09/test/","excerpt":"","text":"é…ç½®hexoåˆ°é˜¿é‡Œäº‘ ç½‘ä¸Šå¤§å¤šæ•°æ•™ç¨‹é—®é¢˜ä¸å¤§ï¼Œé¢å¤–éœ€è¦æ³¨æ„ä¿®æ”¹ä¸€äº›æ–‡ä»¶çš„å†™å…¥æƒé™ 1234567# å°†post-receive è®¾ç½®ä¸ºå¯æ‰§è¡Œæ–‡ä»¶chmod +x ~/hexo.git/hooks/post-receivecd ~# è®¾ç½®åšå®¢æºåœ°å€æ–‡ä»¶å¤¹æƒé™ï¼Œä¸ç„¶git hookså†™å…¥ä¸äº†ï¼ŒUnable to unlink å°±æ˜¯è¿™ç§åŸå› sudo chmod -R 777 /home/www/hexo","categories":[{"name":"tools","slug":"tools","permalink":"http://yoursite.com/categories/tools/"}],"tags":[{"name":"markdown","slug":"markdown","permalink":"http://yoursite.com/tags/markdown/"},{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"},{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]},{"title":"hexo","slug":"hello-world","date":"2020-06-04T03:45:32.772Z","updated":"2020-12-18T05:41:36.853Z","comments":true,"path":"2020/06/04/hello-world/","link":"","permalink":"http://yoursite.com/2020/06/04/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy test12345function helloworld() &#123; return 'hello world'&#125;console.log(helloworld); More info: Deployment","categories":[{"name":"tools","slug":"tools","permalink":"http://yoursite.com/categories/tools/"}],"tags":[{"name":"markdown","slug":"markdown","permalink":"http://yoursite.com/tags/markdown/"},{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"},{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]}],"categories":[{"name":"go","slug":"go","permalink":"http://yoursite.com/categories/go/"},{"name":"webpack","slug":"webpack","permalink":"http://yoursite.com/categories/webpack/"},{"name":"graphics","slug":"graphics","permalink":"http://yoursite.com/categories/graphics/"},{"name":"algebra","slug":"algebra","permalink":"http://yoursite.com/categories/algebra/"},{"name":"tools","slug":"tools","permalink":"http://yoursite.com/categories/tools/"},{"name":"algo","slug":"algo","permalink":"http://yoursite.com/categories/algo/"},{"name":"webgl","slug":"webgl","permalink":"http://yoursite.com/categories/webgl/"},{"name":"canvas","slug":"canvas","permalink":"http://yoursite.com/categories/canvas/"},{"name":"language","slug":"language","permalink":"http://yoursite.com/categories/language/"},{"name":"ts","slug":"ts","permalink":"http://yoursite.com/categories/ts/"},{"name":"html5","slug":"html5","permalink":"http://yoursite.com/categories/html5/"},{"name":"project","slug":"project","permalink":"http://yoursite.com/categories/project/"}],"tags":[{"name":"doc","slug":"doc","permalink":"http://yoursite.com/tags/doc/"},{"name":"guide","slug":"guide","permalink":"http://yoursite.com/tags/guide/"},{"name":"skill","slug":"skill","permalink":"http://yoursite.com/tags/skill/"},{"name":"dp","slug":"dp","permalink":"http://yoursite.com/tags/dp/"},{"name":"C","slug":"C","permalink":"http://yoursite.com/tags/C/"},{"name":"server","slug":"server","permalink":"http://yoursite.com/tags/server/"},{"name":"gitlab","slug":"gitlab","permalink":"http://yoursite.com/tags/gitlab/"},{"name":"markdown","slug":"markdown","permalink":"http://yoursite.com/tags/markdown/"},{"name":"hexo","slug":"hexo","permalink":"http://yoursite.com/tags/hexo/"}]}